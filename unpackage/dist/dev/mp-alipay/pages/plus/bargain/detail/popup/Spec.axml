<view data-event-opts="{{[['touchMove',[['',['$event']]]],['tap',[['closePopup',['$event']]]]]}}" class="{{(Visible?'product-popup open':'product-popup close')}}" catchTouchMove="__e" onTap="__e"><view class="popup-bg"></view><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="main" catchTap="__e"><view class="header"><image class="avt" src="{{form.show_sku.sku_image}}" mode="aspectFit"></image><view class="price d-s-c"><block a:if="{{form.specData==null||isAll}}"><text>¥</text><text class="num fb">{{form.show_sku.bargain_price}}</text><text class="old-price">{{"¥"+form.show_sku.line_price}}</text></block><block a:else><text class="f22">¥</text><text class="f40 fb">{{form.detail.bargain_price}}</text></block></view><view class="stock">{{"库存："+form.show_sku.bargain_stock}}</view><view class="p-20-0 select_spec">{{selectSpec}}</view><view data-event-opts="{{[['tap',[['closePopup',['$event']]]]]}}" class="close-btn" onTap="__e"><text class="icon iconfont icon-guanbi"></text></view></view><view class="body"><block a:if="{{form.specData!=null}}"><view><block a:if="{{form.specData!=null}}"><scroll-view class="specs mt20" style="max-height:600rpx;" scroll-y="true"><view class="specs mt20" a:for="{{form.specData.spec_attr}}" a:for-item="item_attr" a:for-index="attr_index" a:key="attr_index"><view class="specs-hd p-20-0"><text class="f24 gray9">{{item_attr.group_name}}</text><block a:if="{{form.productSpecArr[attr_index]==null}}"><text class="ml10 red">{{'请选择'+item_attr.group_name+''}}</text></block></view><view class="specs-list"><button data-event-opts="{{[['tap',[['selectAttr',[attr_index,item_index]]]]]}}" class="{{(item.checked?'btn-checked':'btn-checke')}}" onTap="__e" a:for="{{item_attr.spec_items}}" a:for-item="item" a:for-index="item_index" a:key="item_index">{{item.spec_value+''}}</button></view></view></scroll-view></block></view></block><view class="level-box count_choose"><text class="key">数量</text><view class="d-s-c"><view data-event-opts="{{[['tap',[['sub']]]]}}" class="{{(((('icon-box')+' '+'minus')+' '+'d-c-c')+' '+((!issub)?'num-wrap':''))}}" onTap="__e"><text class="icon iconfont icon-jian" style="font-size:20rpx;color:#333333;"></text></view><view class="text-wrap"><input type="text" value="{{form.show_sku.sum}}" data-event-opts="{{[['input',[['__set_model',['$0','sum','$event',[]],['form.show_sku']]]]]}}" onInput="__e"/></view><view data-event-opts="{{[['tap',[['add']]]]}}" class="{{(((('icon-box')+' '+'plus')+' '+'d-c-c')+' '+((!isadd)?'num-wrap':''))}}" onTap="__e"><text class="icon iconfont icon-jia" style="font-size:20rpx;color:#333333;"></text></view></view></view></view><view class="btns white"><button data-event-opts="{{[['tap',[['confirmFunc',['$0'],['form']]]]]}}" class="confirm-btn" onTap="__e">确认</button></view></view></view>