/*! For license information please see live.js.LICENSE.txt */
!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=99)}([function(e,t,r){"use strict";function n(e,t,r,n,i,o,a,s,u,c){var l,p="function"==typeof e?e.options:e;if(u){p.components||(p.components={});var d=Object.prototype.hasOwnProperty;for(var f in u)d.call(u,f)&&!d.call(p.components,f)&&(p.components[f]=u[f])}if(c&&("function"==typeof c.beforeCreate&&(c.beforeCreate=[c.beforeCreate]),(c.beforeCreate||(c.beforeCreate=[])).unshift((function(){this[c.__module]=this})),(p.mixins||(p.mixins=[])).push(c)),t&&(p.render=t,p.staticRenderFns=r,p._compiled=!0),n&&(p.functional=!0),o&&(p._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},p._ssrRegister=l):i&&(l=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(p.functional){p._injectStyles=l;var h=p.render;p.render=function(e,t){return l.call(t),h(e,t)}}else{var _=p.beforeCreate;p.beforeCreate=_?[].concat(_,l):[l]}return{exports:e,options:p}}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e){var t=Object.prototype.toString.call(e);return t.substring(8,t.length-1)}function i(){return"string"==typeof __channelId__&&__channelId__}function o(e,t){switch(n(t)){case"Function":return"function() { [native code] }";default:return t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t.shift();if(i())return t.push(t.pop().replace("at ","uni-app:///")),console[a].apply(console,t);var s=t.map((function(e){var t=Object.prototype.toString.call(e).toLowerCase();if("[object object]"===t||"[object array]"===t)try{e="---BEGIN:JSON---"+JSON.stringify(e,o)+"---END:JSON---"}catch(r){e=t}else if(null===e)e="---NULL---";else if(void 0===e)e="---UNDEFINED---";else{var r=n(e).toUpperCase();e="NUMBER"===r||"BOOLEAN"===r?"---BEGIN:"+r+"---"+e+"---END:"+r+"---":String(e)}return e})),u="";if(s.length>1){var c=s.pop();u=s.join("---COMMA---"),0===c.indexOf(" at ")?u+=c:u+="---COMMA---"+c}else u=s[0];console[a](u)},t.log=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console[e].apply(console,r)}},function(e,t){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";var n=r(54),i=r(7),o=r(0);var a=Object(o.a)(i.default,n.b,n.c,!1,null,"55451471","964e308c",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(r(98).default,this.options.style):Object.assign(this.options.style,r(98).default)}).call(a),t.default=a.exports},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports={"@FONT-FACE":[{fontFamily:"iconfont",src:"url('https://at.alicdn.com/t/font_2184879_q7p1dvob7j8.woff2?t=1631326094694') format('woff2'),\r\n         url('https://at.alicdn.com/t/font_2184879_q7p1dvob7j8.woff?t=1631326094694') format('woff'),\r\n         url('https://at.alicdn.com/t/font_2184879_q7p1dvob7j8.ttf?t=1631326094694') format('truetype')"}],iconfont:{fontFamily:'"iconfont"',fontSize:"16",fontStyle:"normal",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",color:"#CCCCCC"},"icon-yinhangka":{"content:before":'"\\e6d2"'},"icon-shouye1":{"content:before":'"\\e662"'},"icon-fenxiang2":{"content:before":'"\\e661"'},"icon-daoda1":{"content:before":'"\\e664"'},"icon-gouwuche1":{"content:before":'"\\e65e"'},"icon-kefu":{"content:before":'"\\e65f"'},"icon-shouye":{"content:before":'"\\e660"'},"icon-daojishi":{"content:before":'"\\e663"'},"icon-icon1":{"content:before":'"\\e670"'},"icon-right_arrow":{"content:before":'"\\e672"'},"icon-lianhefenhong":{"content:before":'"\\e66a"'},"icon-zhuanruyue":{"content:before":'"\\e673"'},"icon-ziyuan2":{"content:before":'"\\e65d"'},"icon-yuyue1":{"content:before":'"\\e656"'},"icon-zhifubao":{"content:before":'"\\e653"'},"icon-zhifubao1":{"content:before":'"\\e68b"'},"icon-saoyisao1":{"content:before":'"\\e652"'},"icon-saoyisao":{"content:before":'"\\e651"'},"icon-share1":{"content:before":'"\\e64f"'},"icon-huatong":{"content:before":'"\\e650"'},"icon-caidan":{"content:before":'"\\e6e8"'},"icon-gouwu":{"content:before":'"\\e86e"'},"icon-biaoqing":{"content:before":'"\\e69f"'},"icon-fasong":{"content:before":'"\\e743"'},"icon-jinbi":{"content:before":'"\\e782"'},"icon-chongzhi":{"content:before":'"\\e66f"'},"icon-jifen":{"content:before":'"\\e64d"'},"icon-duihuan1":{"content:before":'"\\e64e"'},"icon-qq":{"content:before":'"\\e64c"'},"icon-zhanghumingcheng":{"content:before":'"\\e669"'},"icon-mima":{"content:before":'"\\e64a"'},"icon-start":{"content:before":'"\\e648"'},"icon-start1":{"content:before":'"\\e649"'},"icon-yanzhengma":{"content:before":'"\\e646"'},"icon-ziyuan1":{"content:before":'"\\e657"'},"icon-qiye":{"content:before":'"\\e642"'},"icon-dianpu1":{"content:before":'"\\e6be"'},"icon-dianpu":{"content:before":'"\\e671"'},"icon-sanjiao2":{"content:before":'"\\e600"'},"icon-sanjiao1":{"content:before":'"\\e601"'},"icon-jiantou":{"content:before":'"\\e61f"'},"icon-jiantoushang":{"content:before":'"\\e62d"'},"icon-kefu2":{"content:before":'"\\e602"'},"icon-gouwuche":{"content:before":'"\\e63f"'},"icon-sousuo":{"content:before":'"\\e608"'},"icon-icon_xianshi-xian":{"content:before":'"\\e658"'},"icon-tuikuan":{"content:before":'"\\e636"'},"icon-dizhi":{"content:before":'"\\e61e"'},"icon-lajitong":{"content:before":'"\\e622"'},"icon-jian":{"content:before":'"\\e643"'},"icon-quan":{"content:before":'"\\e623"'},"icon-icon":{"content:before":'"\\e668"'},"icon-fenxiao":{"content:before":'"\\e620"'},"icon-jia":{"content:before":'"\\e659"'},"icon-yue":{"content:before":'"\\e65a"'},"icon-bangzhu":{"content:before":'"\\e77c"'},"icon-pintuangou":{"content:before":'"\\e635"'},"icon-diliweizhi":{"content:before":'"\\e6c1"'},"icon-yue1":{"content:before":'"\\e647"'},"icon-qianbao":{"content:before":'"\\e61b"'},"icon-daishouhuo":{"content:before":'"\\e604"'},"icon-integral":{"content:before":'"\\e62b"'},"icon-kanjia":{"content:before":'"\\e61c"'},"icon-weixin":{"content:before":'"\\e621"'},"icon-youhuiquan":{"content:before":'"\\e63d"'},"icon-guanbi":{"content:before":'"\\e629"'},"icon-quanbudingdan":{"content:before":'"\\e640"'},"icon-pintuan":{"content:before":'"\\e76a"'},"icon-gantanhao":{"content:before":'"\\e685"'},"icon-dizhi1":{"content:before":'"\\e734"'},"icon-xuanze":{"content:before":'"\\e627"'},"icon-edit":{"content:before":'"\\e60a"'},"icon-pingjiachaping":{"content:before":'"\\e634"'},"icon-pingjiazhongping":{"content:before":'"\\e637"'},"icon-pingjiahaoping":{"content:before":'"\\e616"'},"icon-xiangji":{"content:before":'"\\e61d"'},"icon-shaixuanpaixu":{"content:before":'"\\e676"'},"icon-shaixuan":{"content:before":'"\\e626"'},"icon-fenxiang":{"content:before":'"\\e617"'},"icon-guanzhu":{"content:before":'"\\e624"'},"icon-chakan":{"content:before":'"\\e68a"'},"icon-002dianhua":{"content:before":'"\\e603"'},"icon-phone":{"content:before":'"\\e630"'},"icon-erweima":{"content:before":'"\\e631"'},"icon-tuandui":{"content:before":'"\\e605"'},"icon-fenxiaodingdan":{"content:before":'"\\e645"'},"icon-wait":{"content:before":'"\\e641"'},"icon-zijinmingxi":{"content:before":'"\\e607"'},"icon-share":{"content:before":'"\\e60f"'},"icon-jingmeihaibao":{"content:before":'"\\e606"'},"icon-shoucang":{"content:before":'"\\e610"'},"icon-dianzan":{"content:before":'"\\e697"'},"icon-hongbao":{"content:before":'"\\e644"'},"icon-xiaoxi":{"content:before":'"\\e69d"'},"icon-libao":{"content:before":'"\\e609"'},"icon-ic_check":{"content:before":'"\\e60b"'},"icon-tijiaochenggong":{"content:before":'"\\e614"'},"icon-queren":{"content:before":'"\\e618"'},"icon-Homehomepagemenu":{"content:before":'"\\e9ce"'},"icon-wenjian":{"content:before":'"\\e654"'},"icon-step":{"content:before":'"\\e611"'},"icon-laba":{"content:before":'"\\e60c"'},"icon-youhuiquan1":{"content:before":'"\\e60d"'},"icon-fenxiao1":{"content:before":'"\\e639"'},"icon-youhuiquan-":{"content:before":'"\\e60e"'},"icon-bofang":{"content:before":'"\\e619"'},"icon-ziyuan":{"content:before":'"\\e632"'},"icon-xingzhuang":{"content:before":'"\\e612"'},"icon-daipingjia":{"content:before":'"\\e772"'},"icon-guanzhu1":{"content:before":'"\\e613"'},"icon-31guanzhu1xuanzhong":{"content:before":'"\\e655"'},"icon-tubiaozhizuo-":{"content:before":'"\\e615"'},"icon-fenxiang1":{"content:before":'"\\e72f"'},"icon-shipinwenjianhuise":{"content:before":'"\\e61a"'},"icon-shezhi":{"content:before":'"\\e781"'},"icon-shezhi1":{"content:before":'"\\e625"'},"icon-paixing":{"content:before":'"\\e628"'},"icon-huodongtuiguang":{"content:before":'"\\e62a"'},"icon-01":{"content:before":'"\\e62c"'},"icon-shangchuan":{"content:before":'"\\e65b"'},"icon-zhuanshutequan":{"content:before":'"\\e62e"'},"icon-zhibo":{"content:before":'"\\e8c1"'},"icon-paihangbang":{"content:before":'"\\e64b"'},"icon-dingdan":{"content:before":'"\\e62f"'},"icon-dilanxianxingiconyihuifu_huabanfuben":{"content:before":'"\\e633"'},"icon-gengduo":{"content:before":'"\\e638"'},"icon-meiyan":{"content:before":'"\\e65c"'},"icon-meibai":{"content:before":'"\\e63a"'},"icon-iconset0243":{"content:before":'"\\e68e"'},"icon-zhuangxiushangjia-":{"content:before":'"\\e63b"'},"icon-yuyue":{"content:before":'"\\e63c"'},"icon-htmal5icon24":{"content:before":'"\\e63e"'},"u-line-1":{lines:1,textOverflow:"ellipsis",overflow:"hidden",flex:1},"u-line-2":{lines:2,textOverflow:"ellipsis",overflow:"hidden",flex:1},"u-line-3":{lines:3,textOverflow:"ellipsis",overflow:"hidden",flex:1},"u-line-4":{lines:4,textOverflow:"ellipsis",overflow:"hidden",flex:1},"u-line-5":{lines:5,textOverflow:"ellipsis",overflow:"hidden",flex:1},"u-border":{borderWidth:"0.5",borderColor:"#dadbde",borderStyle:"solid"},"u-border-top":{borderTopWidth:"0.5",borderColor:"#dadbde",borderTopStyle:"solid"},"u-border-left":{borderLeftWidth:"0.5",borderColor:"#dadbde",borderLeftStyle:"solid"},"u-border-right":{borderRightWidth:"0.5",borderColor:"#dadbde",borderRightStyle:"solid"},"u-border-bottom":{borderBottomWidth:"0.5",borderColor:"#dadbde",borderBottomStyle:"solid"},"u-border-top-bottom":{borderTopWidth:"0.5",borderBottomWidth:"0.5",borderColor:"#dadbde",borderTopStyle:"solid",borderBottomStyle:"solid"},"u-reset-button":{paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0},"u-hover-class":{opacity:.7},"u-primary-light":{color:"#ecf5ff"},"u-warning-light":{color:"#fdf6ec"},"u-success-light":{color:"#f5fff0"},"u-error-light":{color:"#fef0f0"},"u-info-light":{color:"#f4f4f5"},"u-primary-light-bg":{backgroundColor:"#ecf5ff"},"u-warning-light-bg":{backgroundColor:"#fdf6ec"},"u-success-light-bg":{backgroundColor:"#f5fff0"},"u-error-light-bg":{backgroundColor:"#fef0f0"},"u-info-light-bg":{backgroundColor:"#f4f4f5"},"u-primary-dark":{color:"#398ade"},"u-warning-dark":{color:"#f1a532"},"u-success-dark":{color:"#53c21d"},"u-error-dark":{color:"#e45656"},"u-info-dark":{color:"#767a82"},"u-primary-dark-bg":{backgroundColor:"#398ade"},"u-warning-dark-bg":{backgroundColor:"#f1a532"},"u-success-dark-bg":{backgroundColor:"#53c21d"},"u-error-dark-bg":{backgroundColor:"#e45656"},"u-info-dark-bg":{backgroundColor:"#767a82"},"u-primary-disabled":{color:"#9acafc"},"u-warning-disabled":{color:"#f9d39b"},"u-success-disabled":{color:"#a9e08f"},"u-error-disabled":{color:"#f7b2b2"},"u-info-disabled":{color:"#c4c6c9"},"u-primary":{color:"#3c9cff"},"u-warning":{color:"#f9ae3d"},"u-success":{color:"#5ac725"},"u-error":{color:"#f56c6c"},"u-info":{color:"#909399"},"u-primary-bg":{backgroundColor:"#3c9cff"},"u-warning-bg":{backgroundColor:"#f9ae3d"},"u-success-bg":{backgroundColor:"#5ac725"},"u-error-bg":{backgroundColor:"#f56c6c"},"u-info-bg":{backgroundColor:"#909399"},"u-main-color":{color:"#303133"},"u-content-color":{color:"#606266"},"u-tips-color":{color:"#909193"},"u-light-color":{color:"#c0c4cc"},container:{paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx"},gray:{color:"#CCCCCC"},gray9:{color:"#999999"},gray6:{color:"#666666"},gray3:{color:"#333333"},white:{color:"#FFFFFF"},red:{color:"#f6220c"},redEe:{color:"#EE1414"},redF6:{color:"#F6220C"},blue:{color:"#28a5ff"},violet:{color:"#a824e4"},yellow:{color:"#ffd127"},orange:{color:"#ff8a00"},green:{color:"#32d500"},brown:{color:"#4f3a1e"},golden:{color:"#a8700d"},"theme-btn":{borderWidth:"1rpx",borderStyle:"solid",borderColor:"#000000"},"theme-borderbtn":{borderWidth:"1rpx",borderStyle:"solid",borderColor:"#000000"},"bg-white":{backgroundColor:"#FFFFFF"},br12:{borderRadius:"12rpx"},border:{borderWidth:"1rpx",borderStyle:"solid",borderColor:"#DDDDDD"},"border-t":{borderTopWidth:"1rpx",borderTopStyle:"solid",borderTopColor:"#DDDDDD"},"border-b":{borderBottomWidth:"1rpx",borderBottomStyle:"solid",borderBottomColor:"#DDDDDD"},"border-b-d9":{borderBottomWidth:"1rpx",borderBottomStyle:"solid",borderBottomColor:"#D9D9D9"},"border-b-e":{borderBottomWidth:"1rpx",borderBottomStyle:"solid",borderBottomColor:"#EEEEEE"},"border-b-d":{borderBottomWidth:"1rpx",borderBottomStyle:"solid",borderBottomColor:"#D9D9D9"},"border-red":{borderWidth:"1rpx",borderStyle:"solid",borderColor:"#f6220c"},pr:{position:"relative"},pa:{position:"absolute"},top0:{top:0},right0:{right:0},bottom0:{bottom:0},left0:{left:0},f20:{fontSize:"20rpx"},f22:{fontSize:"22rpx"},f24:{fontSize:"24rpx"},f26:{fontSize:"26rpx"},f28:{fontSize:"28rpx"},f30:{fontSize:"30rpx"},f32:{fontSize:"32rpx"},f34:{fontSize:"34rpx"},f36:{fontSize:"36rpx"},f40:{fontSize:"40rpx"},f50:{fontSize:"50rpx"},f60:{fontSize:"60rpx"},fb:{fontWeight:"bold"},tc:{textAlign:"center"},tr:{textAlign:"right"},"o-h":{overflow:"hidden"},"w-b":{wordWrap:"break-word"},"flex-1":{flex:1},"svg-icon":{width:"32rpx",height:"32rpx",verticalAlign:-.15,fill:"currentColor",overflow:"hidden",color:"#CCCCCC"},"icon-box":{display:"flex",justifyContent:"center",alignItems:"center"},"box-s-b":{boxSizing:"border-box"},ww100:{width:100},ww50:{width:50},ww33:{width:33.33333333},ww25:{width:25},ww20:{width:20},hh100:{height:100},p10:{paddingTop:"10rpx",paddingRight:"10rpx",paddingBottom:"10rpx",paddingLeft:"10rpx"},p20:{paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx"},p30:{paddingTop:"30rpx",paddingRight:"30rpx",paddingBottom:"30rpx",paddingLeft:"30rpx"},"p-10-0":{paddingTop:"10rpx",paddingRight:0,paddingBottom:"10rpx",paddingLeft:0},"p-20-0":{paddingTop:"20rpx",paddingRight:0,paddingBottom:"20rpx",paddingLeft:0},"p-30-0":{paddingTop:"30rpx",paddingRight:0,paddingBottom:"30rpx",paddingLeft:0},"p-40-0":{paddingTop:"40rpx",paddingRight:0,paddingBottom:"40rpx",paddingLeft:0},"p-0-10":{paddingTop:0,paddingRight:"10rpx",paddingBottom:0,paddingLeft:"10rpx"},"p-0-20":{paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx"},"p-0-30":{paddingTop:0,paddingRight:"30rpx",paddingBottom:0,paddingLeft:"30rpx"},pt10:{paddingTop:"10rpx"},pt16:{paddingTop:"16rpx"},pt20:{paddingTop:"20rpx"},pt30:{paddingTop:"30rpx"},pt40:{paddingTop:"40rpx"},pt60:{paddingTop:"60rpx"},pr20:{paddingRight:"20rpx"},pr100:{paddingRight:"100rpx"},pb0:{paddingBottom:0},pb10:{paddingBottom:"10rpx"},pb20:{paddingBottom:"20rpx"},pb30:{paddingBottom:"30rpx"},pb44:{paddingBottom:"44rpx"},pb60:{paddingBottom:"60rpx"},pb38:{paddingBottom:"38rpx"},pb100:{paddingBottom:"100rpx"},m20:{marginTop:"20rpx",marginRight:"20rpx",marginBottom:"20rpx",marginLeft:"20rpx"},"m-0-20":{marginTop:0,marginRight:"20rpx",marginBottom:0,marginLeft:"20rpx"},mt10:{marginTop:"10rpx"},mt20:{marginTop:"20rpx"},mt30:{marginTop:"30rpx"},mt36:{marginTop:"36rpx"},mt50:{marginTop:"50rpx"},mt60:{marginTop:"60rpx"},mr10:{marginRight:"10rpx"},mr20:{marginRight:"20rpx"},mr30:{marginRight:"30rpx"},mr40:{marginRight:"40rpx"},mb10:{marginBottom:"10rpx"},mb16:{marginBottom:"16rpx"},mb20:{marginBottom:"20rpx"},mb22:{marginBottom:"22rpx"},mb23:{marginBottom:"23rpx"},mb30:{marginBottom:"30rpx"},ml10:{marginLeft:"10rpx"},ml20:{marginLeft:"20rpx"},ml26:{marginLeft:"26rpx"},ml30:{marginLeft:"30rpx"},ml80:{marginLeft:"80rpx"},"d-f":{display:"flex"},"d-c-c":{display:"flex",justifyContent:"center",alignItems:"center"},"d-c-e":{display:"flex",justifyContent:"center",alignItems:"flex-end"},"d-s-c":{display:"flex",justifyContent:"flex-start",alignItems:"center"},"d-s-e":{display:"flex",justifyContent:"flex-start",alignItems:"flex-end"},"d-s-s":{display:"flex",justifyContent:"flex-start",alignItems:"flex-start"},"d-e-c":{display:"flex",justifyContent:"flex-end",alignItems:"center"},"d-b-c":{display:"flex",justifyContent:"space-between",alignItems:"center"},"d-b-s":{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},"d-a-c":{display:"flex",justifyContent:"space-around",alignItems:"center"},"d-c":{flexDirection:"column"},"d-r":{flexDirection:"row"},"d-stretch":{alignItems:"stretch",alignContent:"stretch"},"f-w":{flexWrap:"wrap"},"w-s-n":{whiteSpace:"nowrap"},"text-l-t":{textDecoration:"line-through"},lh100:{lineHeight:100},lh150:{lineHeight:150},lh200:{lineHeight:200},radius:{borderRadius:50},radius8:{borderRadius:"8rpx"},"text-ellipsis":{wordBreak:"break-all",textOverflow:"ellipsis",overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:1},"text-ellipsis-2":{wordBreak:"break-all",textOverflow:"ellipsis",overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:2},"text-d-line":{textDecoration:"line-through"},"none-data-box":{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:"80rpx",paddingRight:"30rpx",paddingBottom:"80rpx",paddingLeft:"30rpx"},"index-search-box":{backgroundColor:"#efefef",paddingTop:"16rpx",paddingRight:"20rpx",paddingBottom:"18rpx",paddingLeft:"20rpx",borderBottomWidth:"1",borderBottomStyle:"solid",borderBottomColor:"#d8d8d8"},"index-search-box-cate":{paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"60rpx",paddingLeft:"20rpx"},"index-search":{display:"flex",justifyContent:"flex-start",alignItems:"center",paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx",height:"80rpx",lineHeight:"80rpx",backgroundColor:"#FFFFFF",borderRadius:"16rpx",borderWidth:"1",borderStyle:"solid",borderColor:"#d7d7d7",overflow:"hidden",fontSize:"30rpx",color:"#999999",boxSizing:"border-box"},"index-search-cate":{display:"flex",justifyContent:"flex-start",alignItems:"center",paddingTop:0,paddingRight:"30rpx",paddingBottom:0,paddingLeft:"30rpx",height:"60rpx",lineHeight:"60rpx",backgroundColor:"#ffffff",borderRadius:"30rpx",borderWidth:"1",borderStyle:"solid",borderColor:"#d7d7d7",overflow:"hidden",fontSize:"26rpx",color:"#999999",boxSizing:"border-box"},"index-search-box_re":{backgroundColor:"#ffffff",paddingTop:"14rpx",paddingRight:"20rpx",paddingBottom:"18rpx",paddingLeft:"20rpx",borderBottomWidth:0,borderBottomStyle:"solid"},"index-search_re":{display:"flex",justifyContent:"flex-start",alignItems:"center",paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx",height:"60rpx",lineHeight:"60rpx",backgroundColor:"#F2F2F2",borderRadius:"30rpx",borderWidth:0,borderStyle:"solid",overflow:"hidden",fontSize:"26rpx",color:"#999999",boxSizing:"border-box"},group:{marginTop:"20rpx",paddingTop:"10rpx",paddingRight:"30rpx",paddingBottom:"10rpx",paddingLeft:"30rpx"},"group-white":{marginTop:"30rpx",paddingTop:"10rpx",paddingRight:"30rpx",paddingBottom:"10rpx",paddingLeft:"30rpx",borderRadius:"16rpx",backgroundColor:"#FFFFFF"},"group-hd":{display:"flex",justifyContent:"space-between",height:"90rpx"},"product-list":{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},"comment-list":{paddingTop:0,paddingRight:"30rpx",paddingBottom:0,paddingLeft:"30rpx"},"order-state":{position:"relative",paddingTop:"30rpx",paddingRight:"30rpx",paddingBottom:"30rpx",paddingLeft:"30rpx",opacity:.8,"content::after":"''","position::after":"absolute","backgroundImage::after":"linear-gradient(37deg, rgba(255, 255, 255, 0) 8%, rgba(255, 255, 255, 0.1) 78%)","content:before":"''","position:before":"absolute","width:before":"50","height:before":"20","left:before":0,"bottom:before":0,"borderTopLeftRadius:before":0,"borderTopRightRadius:before":100,"borderBottomRightRadius:before":0,"borderBottomLeftRadius:before":0,"backgroundImage:before":"linear-gradient(30deg, rgba(255, 255, 255, 0) 32%, rgba(255, 255, 255, 0.1) 69%)","width::after":"50rpx","height::after":"90rpx","right::after":0,"bottom::after":0},"add-address":{paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx"},"address-defalut-wrap":{paddingTop:"40rpx",paddingRight:"30rpx",paddingBottom:"40rpx",paddingLeft:"30rpx",backgroundColor:"#FFFFFF",borderRadius:"20rpx"},"addree-bottom":{width:"750rpx",height:"16rpx",backgroundColor:"#F2F2F2",display:"flex",overflow:"hidden"},vender:{marginTop:"20rpx",backgroundColor:"#FFFFFF"},"buyer-message":{marginTop:"20rpx",backgroundColor:"#FFFFFF",paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx",fontSize:"28rpx"},"foot-pay-btns":{position:"fixed",paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx",display:"flex",justifyContent:"space-between",alignItems:"center",right:0,bottom:0,left:0,height:"120rpx",backgroundColor:"#FFFFFF",borderTopWidth:"1rpx",borderTopStyle:"solid",borderTopColor:"#EEEEEE",zIndex:99},"upload-list":{flexWrap:"wrap"},"coupon-item":{position:"relative",display:"flex",justifyContent:"flex-start",alignItems:"center",height:"200rpx",color:"#FFFFFF"},"coupon-item-red":{backgroundColor:"#e62423"},"coupon-item-blue":{backgroundColor:"#178ed9"},"coupon-item-violet":{backgroundColor:"#ab0bf6"},"coupon-item-yellow":{backgroundColor:"#f4a50b"},"coupon-item-gray":{backgroundColor:"#999999"},"rule-wrap":{overflow:"hidden",height:0},"top-tabbar":{height:"96rpx",lineHeight:"96rpx",display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx",boxSizing:"border-box",backgroundColor:"#FFFFFF",borderBottomWidth:"1",borderBottomStyle:"solid",borderBottomColor:"#f2f2f2"},"tab-item":{flex:1,height:"96rpx",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"30rpx",color:"#999999"},"top-refresh":{overflow:"hidden",height:0,display:"flex",justifyContent:"center",alignItems:"center",transitionProperty:"height",transitionDuration:500,transitionTimingFunction:"ease",transitionDelay:0},"foot-btns":{position:"fixed",right:0,bottom:0,left:0,height:"90rpx",paddingTop:0,paddingRight:"30rpx",paddingBottom:0,paddingLeft:"30rpx",display:"flex",justifyContent:"flex-end",alignItems:"center",zIndex:99,backgroundColor:"#FFFFFF",boxShadow:"0 -2rpx 8rpx 0 rgba(0, 0, 0, 0.1)"},status_bar:{width:100},top_view:{width:100,position:"fixed",top:0,zIndex:9999},select_spec:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"26rpx",color:"#333333"},state_top:{width:100,height:"20rpx"},"wx-top-right":{width:"200rpx",height:"2rpx"},"@VERSION":2}},function(e,t,r){"use strict";var n=r(8),i=r.n(n);t.default=i.a},function(e,t,r){"use strict";(function(e){var n=r(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(74)),o=n(r(103)),a=n(r(104)),s=n(r(105)),u=n(r(132)),c=n(r(133)),l=n(r(135)),p=n(r(136)),d=n(r(137)),f=n(r(138)),h=n(r(139)),_=n(r(140)),g=n(r(141)),v=n(r(86)),b=n(r(142)),m=n(r(143)),y={components:{liveCart:o.default,liveGift:a.default,liveRoom:s.default,liveMsg:u.default,livePlan:c.default,liveOrder:l.default,liveAnchor:p.default,liveMore:d.default,liveShare:f.default,liveRank:h.default,Likes:_.default,share:g.default,Countdown:b.default,AppShare:m.default},data:function(){return{statusBarH:"",headerBarH:"",winHeight:"",winWidth:"",videoIndex:0,clickNum:0,giftipShowist:[],sence:"",room_id:0,shop_supplier_id:0,role:"",loading:!0,commentsList:[],maxCommentSize:100,roomDetail:{},gift_name:"",gift_num:0,hasFollow:!1,giftList:[],isCaster:!1,user:{},giftInfo:{nickName:"",avatarUrl:"",giftName:"",giftImage:""},explain_product_id:"",explain_product:null,num:0,digg_num:0,digg_times:5,digg_timer:null,is_replay:!1,replay_url:"",is_start:!1,qrcode:null,toMsg:"",emojiData:[],countdownConfig:{startstamp:0,endstamp:0,title:""},isAppShare:!1,appParams:{title:"",summary:"",path:""}}},beforeCreate:function(){weex.requireModule("dom").addRule("fontFace",{fontFamily:"iconfont",src:"url('"+getApp().globalData.vueObj.font_url+"')"}),e("log",getApp().globalData.vueObj.font_url," at pagesLive/live/live.nvue:231")},created:function(){var e=uni.getSystemInfoSync().statusBarHeight,t=e+50,r=uni.getSystemInfoSync().windowHeight,n=uni.getSystemInfoSync().windowWidth;this.statusBarH="".concat(e,"px"),this.headerBarH="".concat(t,"px"),this.winHeight="".concat(r,"px"),this.winWidth="".concat(n,"px")},onLoad:function(e){var t=i.default.getSceneData(e);this.room_id=e.room_id?e.room_id:t.rid,this.role="create"==e.sence?"broadcaster":"audience","broadcaster"==this.role&&(this.isCaster=!0),uni.setKeepScreenOn({keepScreenOn:!0})},onReady:function(){this.getRoomInfo()},onUnload:function(){this.is_start&&this.$refs.liveRoom.clear()},onShow:function(){this.$refs.liveRoom&&this.$refs.liveRoom.show()},methods:{getRequest:function(){return getApp().globalData.vueObj},getRoomInfo:function(){var e=this;uni.showLoading({title:"\u6b63\u5728\u8fdb\u5165"}),e.getRequest()._post("plus.live.room/detail",{room_id:e.room_id},(function(t){if(uni.hideLoading(),e.loading=!1,e.roomDetail=t.data.model,e.gift_name=t.data.gift_name,e.hasFollow=t.data.hasFollow,e.digg_num=t.data.model.digg_num,e.countdownConfig.endstamp=e.roomDetail.start_time,e.user=t.data.user,103==e.roomDetail.live_status){if(e.is_replay=!0,""==e.roomDetail.record_url)return void uni.showModal({title:"\u63d0\u793a",content:"\u6682\u65e0\u56de\u653e\u5730\u5740",success:function(e){uni.navigateBack()}});e.replay_url=e.roomDetail.record_url}if(101!=e.roomDetail.live_status&&103!=e.roomDetail.live_status||(e.is_start=!0),!e.is_replay){var r=!1;!e.isCaster||101!=e.roomDetail.live_status&&102!=e.roomDetail.live_status||(r=!0),e.isCaster||101!=e.roomDetail.live_status||(r=!0),r&&(e.is_start=!0,e.initRoom(),setTimeout((function(){e.$refs.liveRoom.start(e.roomDetail,e.user),e.initProduct()}),2e3))}}))},initRoom:function(){this.getGift(),this.initemoji()},showProduct:function(e){var t=this;t.explain_product_id=e,t.getRequest()._get("plus.live.room/product_detail",{product_id:t.explain_product_id},(function(e){t.explain_product=e.data.model}))},initProduct:function(){this.roomDetail.currentProduct&&(this.explain_product={product_image:this.roomDetail.currentProduct.image[0].file_path,product_price:this.roomDetail.currentProduct.product_price,product_id:this.roomDetail.currentProduct.product_id})},gotoProduct:function(e){var t="/#/pages/product/detail/detail?product_id="+this.explain_product.product_id+"&room_id="+this.room_id;uni.navigateTo({url:t})},handleSlider:function(e){var t=e.detail.current;this.videoIndex>=0&&(this.videoContextList[this.videoIndex].pause(),this.videoContextList[this.videoIndex].seek(0)),t===this.videoIndex+1?this.videoContextList[this.videoIndex+1].play():t===this.videoIndex-1&&this.videoContextList[this.videoIndex-1].play(),this.videoIndex=t},play:function(e){this.videoContextList[e].play()},pause:function(e){this.videoContextList[e].pause()},handleAttention:function(e){var t=this.vlist;t[e].attention=!t[e].attention,this.vlist=t},handleLiveCart:function(){this.$refs.liveCart.show()},handleLiveGift:function(){this.$refs.liveGift.show()},closeLive:function(){var t=this;t.is_replay?uni.redirectTo({url:"/pagesLive/live/index"}):"broadcaster"==t.role?uni.showModal({title:"\u63d0\u793a",content:"\u786e\u5b9a\u8981\u7ed3\u675f\u5f53\u524d\u76f4\u64ad\u5417?",success:function(r){r.confirm&&(t.getRequest()._post("plus.live.agora.api/record_stop",{room_id:t.room_id},(function(e){})),e("log","record_stop"," at pagesLive/live/live.nvue:425"),t.getRequest()._post("plus.live.room/set_status",{room_id:t.room_id,status:103},(function(r){e("log","set_status"," at pagesLive/live/live.nvue:433"),t.$refs.liveRoom.exit("over")})))}}):t.$refs.liveRoom.exit("auto")},handleRollMsg:function(){this.$refs.liveMsg.show()},closeMsg:function(e){var t={type:"text",msg:e,nickName:this.user.nickName};this.$refs.liveRoom.sendMsg(JSON.stringify(t))},showMsg:function(e){var t=this,r=JSON.parse(e);"text"==r.type?(t.commentsList.push(r),t.removeComment()):"enter"==r.type?(t.commentsList.push(r),t.removeComment(),t.roomDetail.view_num++):"gift"==r.type?(t.giftInfo={nickName:r.nickName,avatarUrl:r.avatarUrl,giftName:t.getGiftName(r.msg),giftImage:t.getGiftImage(r.msg)},setTimeout((function(){t.giftInfo={nickName:""}}),5e3)):"views"==r.type?(t.roomDetail.view_num=r.views,t.roomDetail.digg_num=r.digg_num):"digg"==r.type?t.digg_num=r.digg_num:"over"==r.type?t.$refs.liveRoom.exit("over"):"explain"==r.type?t.showProduct(r.msg):"gift_num"==r.type&&(t.roomDetail.gift_num=r.msg)},removeComment:function(){var e=this.commentsList.length-this.maxCommentSize;if(e>0)for(var t=0;t<e;t++)this.commentsList.shift();this.toMsg="comment"+(this.commentsList.length-1)},getGift:function(){var e=this;e.getRequest()._get("plus.live.room/gift",{},(function(t){for(var r=[],n=[],i=0,o=0;o<t.data.list.length;o++)i++,n.push(t.data.list[o]),i>=8&&(r.push(n),n=[],i=0);n.length>0&&r.push(n),e.giftList=r}))},openPlan:function(){this.$refs.livePlan.show()},closePlan:function(){this.$refs.liveGift.show()},openOrder:function(){this.$refs.liveOrder.show()},closeOrder:function(){this.$refs.liveCart.show()},setProduct:function(e){var t={type:"explain",msg:e};this.$refs.liveRoom.sendMsg(JSON.stringify(t))},followFunc:function(){var e=this;e.getRequest()._post("user.Favorite/add",{shop_supplier_id:e.shop_supplier_id,pid:e.shop_supplier_id,type:10},(function(t){e.hasFollow=!e.hasFollow}))},openAnchor:function(){this.$refs.liveAnchor.show()},changeFollow:function(e){this.hasFollow=e},openMore:function(){this.$refs.liveMore.show()},openShare:function(e){this.appParams.title=this.roomDetail.name,this.appParams.summary=this.roomDetail.name;var t=this.getRequest().getShareUrlParams({room_id:this.room_id,sence:"audience"});this.appParams.path="/pagesLive/live/live?"+t,this.appParams.image=this.roomDetail.share.file_path,this.$refs.appShare.show()},liveSet:function(e){this.$refs.liveRoom.liveSet(e)},openRank:function(){this.$refs.liveRank.show()},sendGift:function(e){var t=e.split(","),r={type:"gift",msg:t[0],nickName:this.user.nickName,avatarUrl:this.user.avatarUrl};this.$refs.liveRoom.sendMsg(JSON.stringify(r));var n={type:"gift_num",msg:t[1]};this.$refs.liveRoom.sendMsg(JSON.stringify(n))},getGiftName:function(e){var t="";for(var r in this.giftList)for(var n=0;n<this.giftList[r].length;n++){var i=this.giftList[r][n];if(parseInt(e)===i.gift_id){t=i.gift_name;break}}return t},getGiftImage:function(e){var t="";for(var r in this.giftList)for(var n=0;n<this.giftList[r].length;n++){var i=this.giftList[r][n];if(parseInt(e)===i.gift_id){t=i.file_path;break}}return t},digg:function(){var e=this;e.$refs.likes.handleClick(),e.digg_num++,e.getRequest()._get("plus.live.room/digg",{room_id:e.room_id,num:1},(function(t){var r={type:"digg",digg_num:t.data.digg_num};e.$refs.liveRoom.sendMsg(JSON.stringify(r))}))},livePoster:function(){var t=this;uni.showLoading({title:"\u52a0\u8f7d\u4e2d"});t.getRequest()._get("plus.live.Room/poster",{room_id:t.room_id,source:"wx"},(function(r){t.qrcode=r.data.qrcode,e("log",t.qrcode," at pagesLive/live/live.nvue:671")}),null,(function(){uni.hideLoading()}))},closeShare:function(){this.qrcode=null},onShareAppMessage:function(){var e=this.getRequest().getShareUrlParams({room_id:this.room_id,sence:"audience"});return{title:this.roomDetail.name,path:"/pagesLive/live/live?"+e,imageUrl:this.roomDetail.share.file_path}},initemoji:function(){for(var e=Math.ceil(v.default.length/21),t=0;t<e;t++){this.emojiData[t]=[];for(var r=0;r<21;r++)v.default[21*t+r]&&this.emojiData[t].push(v.default[21*t+r])}},goBack:function(){uni.redirectTo({url:"/pagesLive/live/index"})}}};t.default=y}).call(this,r(1).default)},function(e,t,r){"use strict";r.r(t);var n=r(10),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";var n=r(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={components:{uniLoadMore:n(r(75)).default},data:function(){return{popupVisible:!1,product_active:"",total:0,open_products:!1,relationIds:[],productList:[],open_order:!1,open_addproduct:!1,no_more:!1,listData:[],page:1,list_rows:10,productIds:[],open_Order:!1,loading:!1}},props:["isCaster","room_id","shop_supplier_id"],computed:{loadingType:function(){return this.loading?1:0!=this.listData.length&&this.no_more?2:0}},methods:{show:function(e){this.popupVisible=!0,this.getProduct()},getRequest:function(){return getApp().globalData.vueObj},getProduct:function(){var e=this;e.open_addproduct=!1,e.relationIds=[],uni.showLoading({title:"\u6b63\u5728\u52a0\u8f7d",mask:!0}),e.getRequest()._get("plus.live.RoomApply/liveproduct",{shop_supplier_id:e.shop_supplier_id},(function(t){if(uni.hideLoading(),null!=t.data.list){e.productList=t.data.list.data;for(var r=0;r<e.productList.length;r++)e.relationIds.push(e.productList[r].product_id);e.total=t.data.list.total}}),!1,(function(){uni.hideLoading()}))},addProductFunc:function(){var e=this;this.open_addproduct=!0,this.productIds=[],this.relationIds.forEach((function(t){e.productIds.push(t)})),this.start()},start:function(){this.loading=!0,this.no_more=!1,this.listData=[],this.page=1,this.list_rows=10,this.getData()},getData:function(){var e=this,t=e.page,r=e.list_rows;e.loading=!0,e.getRequest()._get("plus.live.RoomApply/product_list",{page:t||1,list_rows:r},(function(t){e.loading=!1,e.listData=e.listData.concat(t.data.list.data),e.last_page=t.data.list.last_page,t.data.list.last_page<=1&&(e.no_more=!0)}))},loadmoreFunc:function(){if(this.bottomRefresh=!0,this.page++,this.loading=!0,this.page>this.last_page)return this.loading=!1,void(this.no_more=!0);this.getData()},isrelation:function(e){return-1!=this.productIds.indexOf(e.product_id)},relationProduct:function(e){this.productIds.push(e.product_id)},confirmFunc:function(){var e=this,t=e.productIds;if(t.length>0){for(var r=0;r<t.length;r++)-1!=e.relationIds.indexOf(t[r])&&(t.splice(r,1),r--);0!=t.length?e.getRequest()._post("plus.live.RoomApply/addProduct",{productIds:t},(function(t){e.getProduct()})):e.getProduct()}else e.getProduct()},setProduct:function(e){var t=this;uni.showLoading({title:"\u8bbe\u7f6e\u4e2d",mask:!0}),t.getRequest()._post("plus.live.room/set_product",{room_id:t.room_id,product_id:e.product_id},(function(r){t.product_active=e.product_id,t.$emit("setProduct",e.product_id),t.close()}))},gotoProduct:function(e){var t="/#/pages/product/detail/detail?product_id="+e.product_id+"&room_id="+this.room_id;this.gotoPage(t)},openOrder:function(){this.popupVisible=!1,this.$emit("openOrder")},close:function(){this.open_addproduct?this.open_addproduct=!1:this.popupVisible=!1}}};t.default=i},function(e,t,r){"use strict";r.r(t);var n=r(12),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"load-more",props:{loadingType:{type:Number,default:0},showImage:{type:Boolean,default:!0},color:{type:String,default:"#999999"},contentText:{type:Object,default:function(){return{contentdown:"\u4e0a\u62c9\u663e\u793a\u66f4\u591a",contentrefresh:"\u6b63\u5728\u52a0\u8f7d...",contentnomore:"\u5df2\u7ecf\u5230\u5e95\u4e86"}}}},data:function(){return{}}};t.default=n},function(e,t){e.exports={"load-more":{display:"flex",flexDirection:"row",height:"80upx",alignItems:"center",justifyContent:"center"},"loading-img":{height:"24",width:"24",marginRight:"10"},"loading-text":{fontSize:"24upx",color:"#999999"},load1:{height:"24",width:"24"},load2:{height:"24",width:"24",transform:"rotate(30deg)"},load3:{height:"24",width:"24",transform:"rotate(60deg)"},"@VERSION":2}},function(e,t){e.exports={"m-auto":{marginTop:0,marginBottom:0},pop__ui_mask:{backgroundColor:"#000000",opacity:.1,position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:1e3},pop__ui_child:{backgroundColor:"#fbfbfb",borderTopLeftRadius:"12",borderTopRightRadius:"12",fontSize:"14",overflow:"hidden",position:"fixed",bottom:0,left:0,right:0,zIndex:1001},pop__ui_head:{borderStyle:"solid",borderColor:"#ebebeb",borderBottomWidth:"1upx",fontSize:"28upx",fontWeight:"700",paddingTop:"30upx",paddingRight:"30upx",paddingBottom:"30upx",paddingLeft:"30upx",textAlign:"left"},wrap_carts:{height:"650upx"},item:{flexDirection:"row",alignItems:"center",paddingTop:"30upx",paddingRight:"30upx",paddingBottom:"30upx",paddingLeft:"30upx",position:"relative"},gpic:{marginRight:"30upx",height:"50",width:"50"},ginfo:{flex:1},name:{fontSize:"28upx"},price:{color:"#ff0f33",fontSize:"28upx",marginTop:"15upx"},gbtn:{backgroundImage:"linear-gradient(to right, #ff540a, #ff0f33)",borderRadius:"5upx",color:"#ffffff",fontSize:"28upx",paddingTop:"12upx",paddingRight:"25upx",paddingBottom:"12upx",paddingLeft:"25upx"},"product-head":{flexDirection:"row"},"product-head-btn":{height:"60rpx",lineHeight:"60rpx",backgroundColor:"#ffffff",borderColor:"#f72b6c"},"add-product-head-btn":{height:"60rpx",lineHeight:"60rpx",backgroundColor:"#ffffff",borderColor:"#f72b6c"},"add-product-list":{width:"750rpx",height:"700rpx"},"add-product-head":{flexDirection:"row"},"add-product-item":{flexDirection:"row",paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx"},"add-product-picture":{width:"160rpx",height:"160rpx"},"add-product-picture-image":{width:"160rpx",height:"160rpx"},"text-ellipsis-2":{height:"70rpx"},"add-product-relation":{backgroundColor:"#51a938",color:"#ffffff",borderColor:"#51a938",fontSize:"12",display:"flex",alignItems:"center",borderRadius:"6rpx",width:"120rpx",paddingTop:"10rpx",paddingRight:0,paddingBottom:"10rpx",paddingLeft:0},"add-product-relation-hover":{backgroundColor:"#abd7a2",borderColor:"#abd7a2"},"add-product-order":{position:"absolute",width:"750rpx",height:"900rpx",right:0,bottom:0,left:0,borderTopLeftRadius:"16rpx",borderTopRightRadius:"16rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,backgroundColor:"#ffffff",transitionProperty:"transform",transitionDuration:200,transitionTimingFunction:"ease",transitionDelay:0,transform:"translate(0, 0)"},"add-product-order-close":{transitionProperty:"transform",transitionDuration:0,transitionTimingFunction:"ease",transitionDelay:0,transform:"translate(0, 100%)"},"order-close":{width:"40rpx",height:"40rpx"},"add-order-head":{backgroundColor:"#eeeeee",flexDirection:"row"},"order-num":{fontSize:"28",color:"#ababab",marginBottom:"10rpx"},"order-title":{textOverflow:"ellipsis",overflow:"hidden"},"order-money":{marginTop:"20rpx"},"@VERSION":2}},function(e,t,r){"use strict";r.r(t);var n=r(16),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{showGiftView:!1,open_plan:!1,userInfo:{},isGift:0}},props:["gift_name","giftList","room_id"],methods:{show:function(){this.showGiftView=!0,this.getUser()},getRequest:function(){return getApp().globalData.vueObj},getUser:function(){var e=this;e.getRequest()._get("user.user/detail",{},(function(t){e.userInfo=t.data.userInfo}))},chooseGift:function(e){this.isGift=e.gift_id},sendGift:function(e){var t=this;t.getRequest()._post("plus.live.room/send_gift",{room_id:t.room_id,gift_id:e.gift_id},(function(r){uni.showToast({title:r.msg}),t.userInfo.gift_money=r.data.gift_money,t.$emit("sendGift",e.gift_id+","+r.data.gift_num)}))},PlanFunc:function(){this.showGiftView=!1,this.$emit("openPlan")},close:function(){this.showGiftView=!1}}};t.default=n},function(e,t){e.exports={nlv_borT:{borderColor:"#ebebeb",borderStyle:"solid",borderTopWidth:"1upx"},"wrapgift-mask":{backgroundColor:"#000000",opacity:.1,position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:201910},"wrapgift-body":{overflow:"hidden",position:"fixed",bottom:0,left:0,right:0,zIndex:201911},"gift-head":{borderColor:"rgba(255,255,255,0.3)",borderStyle:"solid",borderBottomWidth:"1upx",flexDirection:"row",alignItems:"center",height:"100upx"},"gift-menu":{flex:1,flexDirection:"row"},"gm-item":{color:"#999999",fontSize:"32upx",marginLeft:"40upx",lineHeight:"100upx"},"gm-item-on":{color:"#ffffff",borderColor:"#ff0f33",borderStyle:"solid",borderBottomWidth:"2"},"gift-coins":{color:"#ffffff",fontSize:"28upx",flexDirection:"row",alignItems:"center",paddingRight:"30upx"},"gc-coin":{color:"#ffffff",fontSize:"25rpx"},"gc-num":{color:"#feb719",fontSize:"12"},"gc-recharge":{color:"#ff0f33",fontSize:"12",marginLeft:"30upx"},wrap_giftlist:{backgroundColor:"rgba(31,37,62,1)",borderTopLeftRadius:"12",borderTopRightRadius:"12",height:"700upx",position:"relative"},"gift-swiper":{flex:1},gift__cells:{flexDirection:"row",flexWrap:"wrap"},giftitem:{flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"20upx",width:"186upx"},"giftitem-rect":{alignItems:"center",justifyContent:"center",height:"150upx",width:"150upx",position:"relative"},giftimg:{height:"100rpx",width:"100rpx"},giftimg_active:{height:"100rpx",width:"100rpx",transform:"scale(1.2)"},giftname:{color:"#ffffff",fontSize:"30upx"},giftcoin:{color:"rgba(255,255,255,0.3)",fontSize:"22upx",marginTop:"2"},sendbtn:{width:"150rpx",height:"40rpx",backgroundColor:"#FF0000",borderRadius:"20rpx",textAlign:"center",paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,borderWidth:0},btntext:{fontSize:"22rpx",color:"#FFFFFF",lineHeight:"40rpx"},giftitem_active:{flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundImage:"linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0.3))",borderRadius:"20rpx"},"@VERSION":2}},function(e,t,r){"use strict";r.r(t);var n=r(19),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(106),i=r(111),o={data:function(){return{loading_login:!1,pusherContext:null,playerContext:null,player_url:"",mainPusherInfo_url:"",room_id:"",TextMsg:"",open_gift:!1,commentsList:[],giftList:[],open_products:!1,explain_product_id:"",explain_product:null,open_more:!1,beauty:5,whiteness:5,device_position:"front",open_share:!1,param_share:{},qrcode:null,showNumTimer:null,is_click_digg:!1,roomDetail:{},userInfo:{},channel:"",appId:"",rtm_client:null,reconnectTimer:null,push_status:"loading",picture_mode:["push","pop"],isCaster:!1}},props:["winHeight","winWidth","role","is_replay","replay_url"],methods:{show:function(){null!=this.playerContext&&this.playerContext.play(),this.pusherContext&&this.reconnect()},getRequest:function(){return getApp().globalData.vueObj},start:function(t,r){if(this.roomDetail=t,this.userInfo=r,this.channel="channel_"+t.shop_supplier_id,this.isCaster="broadcaster"==this.role,this.isCaster){var n=uni.getStorageSync("whiteness");n&&(this.whiteness=n);var i=uni.getStorageSync("beauty");i&&(this.beauty=i)}else e("log","\u89c2\u4f17\u8fdb\u5165"," at pagesLive/live/live-part/liveRoom.nvue:144");this.loginRoom()},loginRoom:function(){var t=this;uni.showLoading({title:"\u6b63\u5728\u8fdb\u5165"}),t.getRequest()._get("plus.live.agora.api/login",{room_id:t.roomDetail.room_id,channel:t.channel,isCaster:t.isCaster},(function(r){t.appId=r.data.appId,t.initAgoraChannel(r.data.userSign).then((function(r){e("log","pushing ".concat(r)," at pagesLive/live/live-part/liveRoom.nvue:161");(new Date).getTime();t.mainPusherInfo_url=r,t.isCaster&&(t.pusherContext=uni.createLivePusherContext("livePusher1",t),setTimeout((function(){e("log","\u521b\u5efa pusherContext app\uff1a",t.pusherContext," at pagesLive/live/live-part/liveRoom.nvue:167"),t.pusherContext.start(),t.loginIM()}),500),t.showNumTimer=setInterval((function(){t.synRoomInfo()}),15e3))})).catch((function(t){e("log","init agora client failed: ".concat(t)," at pagesLive/live/live-part/liveRoom.nvue:177"),e("log",JSON.stringify(t)," at pagesLive/live/live-part/liveRoom.nvue:178"),uni.showToast({title:"\u5ba2\u6237\u7aef\u521d\u59cb\u5316\u5931\u8d25",icon:"none",duration:5e3})}))}))},initAgoraChannel:function(t){var r=this;return new Promise((function(i,o){var a=new n.Client;r.subscribeEvents(a),n.LOG.onLog=function(t){e("log",t," at pagesLive/live/live-part/liveRoom.nvue:198")},n.LOG.setLogLevel(1),r.client=a,a.setRole(r.role),a.init(r.appId,(function(){e("log","client init success"," at pagesLive/live/live-part/liveRoom.nvue:205"),a.join(t,r.channel,r.getRequest().getUserId(),(function(){e("log","client join channel success"," at pagesLive/live/live-part/liveRoom.nvue:208"),r.isCaster?a.publish((function(t){e("log","client publish success"," at pagesLive/live/live-part/liveRoom.nvue:212"),e("log","url="+t," at pagesLive/live/live-part/liveRoom.nvue:213"),i(t)}),(function(t){e("log","client publish failed: ".concat(t.code," ").concat(t.reason)," at pagesLive/live/live-part/liveRoom.nvue:216"),o(t)})):i()}),(function(t){e("log",": ".concat(t.code," ").concat(t.reason)," at pagesLive/live/live-part/liveRoom.nvue:223"),o(t)}))}),(function(t){e("log","client init failed: ".concat(t," ").concat(t.code," ").concat(t.reason)," at pagesLive/live/live-part/liveRoom.nvue:227"),o(t)}))}))},loginIM:function(){var t=this;t.getRequest()._get("plus.live.agora.api/rtmToken",{channel:t.channel},(function(r){t.rtm_client=new i(t.appId),t.onChannelEvent(),t.rtm_client.on("ConnectionStateChanged",(function(t,r){e("log","The connection status",t," at pagesLive/live/live-part/liveRoom.nvue:241"),e("log","The reason for the state change",r," at pagesLive/live/live-part/liveRoom.nvue:242")})),t.rtm_client.login(r.data.userSign,""+t.getRequest().getUserId()).then((function(){e("log","AgoraRTM client login success"," at pagesLive/live/live-part/liveRoom.nvue:246"),t.rtm_client.joinChannel(t.channel).then((function(){e("log","join channel success"," at pagesLive/live/live-part/liveRoom.nvue:248");var r={type:"enter",nickName:t.userInfo.nickName};t.sendMsg(JSON.stringify(r)),t.isCaster&&t.getRequest()._post("plus.live.room/set_status",{room_id:t.roomDetail.room_id,status:101},(function(e){t.startRecord()}))})).catch((function(t){e("log","join channel failed",t," at pagesLive/live/live-part/liveRoom.nvue:269")}))})).catch((function(t){e("log","AgoraRTM client login failure",t," at pagesLive/live/live-part/liveRoom.nvue:272")}))}))},synRoomInfo:function(e){var t=this;t.getRequest()._post("plus.live.room/syn_room",{room_id:t.roomDetail.room_id},(function(e){var r={type:"views",views:e.data.model.views,digg_num:e.data.model.digg_num};t.sendMsg(JSON.stringify(r))}))},subscribeEvents:function(t){var r=this;t.on("video-rotation",(function(t){e("log","video rotated: ".concat(t.rotation," ").concat(t.uid)," at pagesLive/live/live-part/liveRoom.nvue:309")})),t.on("stream-added",(function(n){var i=n.uid;e("log","stream ".concat(i," added")," at pagesLive/live/live-part/liveRoom.nvue:316"),t.subscribe(i,(function(t,n){e("log","stream ".concat(i," subscribed successful")," at pagesLive/live/live-part/liveRoom.nvue:321"),e("log",t," at pagesLive/live/live-part/liveRoom.nvue:322"),r.player_url=t,r.loginIM()}),(function(t){e("log","stream subscribed failed ".concat(t," ").concat(t.code," ").concat(t.reason)," at pagesLive/live/live-part/liveRoom.nvue:326")}))})),t.on("stream-removed",(function(t){var r=t.uid;e("log","stream ".concat(r," removed")," at pagesLive/live/live-part/liveRoom.nvue:335")})),t.on("error",(function(t){var n=t||{},i=n.code||0,o=n.reason||"";e("log","error: ".concat(i,", reason: ").concat(o)," at pagesLive/live/live-part/liveRoom.nvue:348"),501!==i&&904!==i||r.reconnect()})),t.on("update-url",(function(t){e("log","update-url: ".concat(JSON.stringify(t))," at pagesLive/live/live-part/liveRoom.nvue:363")}))},onChannelEvent:function(){var t=this;t.rtm_client.on("ChannelMessage",(function(r,n){r.text;e("log","message -----"," at pagesLive/live/live-part/liveRoom.nvue:374"),e("log",r," at pagesLive/live/live-part/liveRoom.nvue:375"),n!=t.getRequest().getUserId()&&t.$emit("showMsg",r.text)})),t.rtm_client.on("MemberJoined",(function(t){e("log","memberId: ",t," at pagesLive/live/live-part/liveRoom.nvue:382")})),t.rtm_client.on("MemberLeft",(function(t){e("log","memberId: ",t," at pagesLive/live/live-part/liveRoom.nvue:385")}))},sendMsg:function(t){var r=this;r.rtm_client.sendChannel(t).then((function(){r.$emit("showMsg",t)})).catch((function(t){e("log","\u9891\u9053\u6d88\u606f\u53d1\u9001\u5931\u8d25\u7684\u5904\u7406\u903b\u8f91"," at pagesLive/live/live-part/liveRoom.nvue:397"),e("log",t," at pagesLive/live/live-part/liveRoom.nvue:398")}))},liveSet:function(t){switch(t.type){case"beauty":this.beauty=t.value;break;case"whiteness":this.whiteness=t.value;break;case"device_position":this.device_position=t.value,null!=this.pusherContext&&this.pusherContext.switchCamera({type:t.value,success:function(t){e("log","\u5207\u6362\u6210\u529f"," at pagesLive/live/live-part/liveRoom.nvue:416")},fail:function(t){e("log",t," at pagesLive/live/live-part/liveRoom.nvue:419")}})}},reconnect:function(){var e=this;uni.showToast({title:"\u5c1d\u8bd5\u6062\u590d\u94fe\u63a5...",icon:"none",duration:5e3}),e.client&&e.client.destroy(),e.reconnectTimer=setTimeout((function(){e.loginRoom()}),1e3)},recorderStateChange:function(t){e("log","live-pusher code: ",t," at pagesLive/live/live-part/liveRoom.nvue:448"),-1307===t.detail.code&&(e("log","live-pusher stopped ---- error"," at pagesLive/live/live-part/liveRoom.nvue:451"),this.push_status="error"),1008===t.detail.code&&(e("log","live-pusher started"," at pagesLive/live/live-part/liveRoom.nvue:456"),"loading"===this.push_status&&(this.push_status="ok"))},recorderNetChange:function(e){},onMainError:function(t){e("log","onMainError called: ",t," at pagesLive/live/live-part/liveRoom.nvue:467")},exit:function(e){var t="/pagesLive/live/index";if("broadcaster"==this.role){e="over";this.sendMsg(JSON.stringify({type:"over"}))}"over"==e&&(t="/pagesLive/live/live-over?room_id="+this.roomDetail.room_id),this.clear(),uni.redirectTo({url:t})},startRecord:function(){var e=this;e.isCaster&&e.getRequest()._post("plus.live.agora.api/record_acquire",{room_id:e.roomDetail.room_id},(function(t){e.getRequest()._post("plus.live.agora.api/record_start",{room_id:e.roomDetail.room_id},(function(t){e.getRequest()._post("plus.live.agora.api/record_query",{room_id:e.roomDetail.room_id},(function(e){}))}))}))},clear:function(){try{if(this.showNumTimer&&(clearInterval(this.showNumTimer),this.showNumTimer=null),this.playerContext&&(this.playerContext.stop(),this.playerContext=null),this.pusherContext&&(this.pusherContext.stop(),this.pusherContext=null),clearTimeout(this.reconnectTimer),this.reconnectTimer=null,this.isCaster)try{this.client&&this.client.unpublish()}catch(t){e("log","unpublish failed"," at pagesLive/live/live-part/liveRoom.nvue:531"),e("log",t," at pagesLive/live/live-part/liveRoom.nvue:532")}this.client&&this.client.leave(),this.rtm_client&&this.rtm_client.logout()}catch(t){e("log",t," at pagesLive/live/live-part/liveRoom.nvue:540")}}}};t.default=o}).call(this,r(1).default)},function(e,t,r){"use strict";r.r(t);var n=r(21),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";(function(e){var n=r(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(75)),o=(n(r(74)),r(86),{components:{uniLoadMore:i.default},data:function(){return{popupVisible:!1,emojiShow:!1,inputBottom:0,inputheight:0,content:""}},beforeCreate:function(){weex.requireModule("dom").addRule("fontFace",{fontFamily:"nvueIcon",src:"url('../../../static/fonts/iconfont.ttf')"})},props:["emojiData"],methods:{selemoji:function(t){e("log",t," at pagesLive/live/live-part/liveMsg.nvue:65"),this.content+=t},show:function(){this.popupVisible=!0},close:function(){this.popupVisible=!1},sendTextMsg:function(){uni.hideKeyboard(),this.$emit("closeMsg",this.content),this.content="",this.emojiShow=!1,this.popupVisible=!1},inputFocus:function(t){this.inputBottom=t.detail.height,this.emojiShow=!1,e("log",t," at pagesLive/live/live-part/liveMsg.nvue:85")},inputBlur:function(){this.inputBottom=0}}});t.default=o}).call(this,r(1).default)},function(e,t){e.exports={pop__ui_mask:{backgroundColor:"#000000",opacity:.1,position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:1e3},pop__ui_child:{backgroundColor:"#fbfbfb",borderTopLeftRadius:"12",borderTopRightRadius:"12",fontSize:"14",overflow:"hidden",position:"fixed",bottom:0,left:0,right:0,zIndex:1001},pop__ui_head:{borderStyle:"solid",borderColor:"#ebebeb",borderBottomWidth:"1upx",fontSize:"28upx",fontWeight:"700",paddingTop:"30upx",paddingRight:"30upx",paddingBottom:"30upx",paddingLeft:"30upx",textAlign:"center"},iconfont:{fontFamily:"nvueIcon"},wrap_commentPanel:{flexDirection:"column",height:"11upx"},uni_borT:{borderColor:"#dbdbdb",borderStyle:"solid",borderTopWidth:"1upx"},wrap__editorPanel:{flexDirection:"row",alignItems:"flex-end",backgroundColor:"#ffffff",paddingTop:"20upx",paddingRight:"30upx",paddingBottom:"20upx",paddingLeft:"30upx"},wrap_editor:{flex:1,overflow:"hidden"},editor:{fontSize:"14",lineHeight:1.2},wrap_cmtFoot:{position:"fixed",left:0,right:0,zIndex:201911},"bc-white":{backgroundColor:"#FFFFFF"},slider:{width:"750rpx",height:"256rpx"},"slider-emoji":{width:"750rpx",direction:"ltr",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"flex-start",alignItems:"stretch"},"slider-emoji-icon":{width:"105rpx",textAlign:"center",paddingTop:"21rpx",paddingRight:0,paddingBottom:"21rpx",paddingLeft:0},lastbox:{justifyContent:"flex-start"},"@VERSION":2}},function(e,t,r){"use strict";r.r(t);var n=r(24),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(134);var n={data:function(){return{showPlanView:!1,open_plan:!1,userInfo:{},planList:[],payType:20,choose_id:0}},props:["gift_name"],beforeCreate:function(){weex.requireModule("dom").addRule("fontFace",{fontFamily:"iconfont",src:"url('"+getApp().globalData.vueObj.font_url+"')"}),e("log",getApp().globalData.vueObj.font_url," at pagesLive/live/live-part/livePlan.nvue:59")},methods:{show:function(){this.showPlanView=!0,this.getUser(),this.getPlan()},getRequest:function(){return getApp().globalData.vueObj},getUser:function(){var e=this;e.getRequest()._get("user.user/detail",{},(function(t){e.userInfo=t.data.userInfo}))},getPlan:function(){var e=this;e.getRequest()._get("plus.live.plan/lists",{},(function(t){e.planList=t.data.list}))},chooseplan:function(e){this.choose_id=e.plan_id},submit:function(){var e=this;uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),e.getRequest()._post("plus.live.plan/submit",{plan_id:e.choose_id},(function(t){e.gotoPage("/pages/order/cashier?order_id="+t.data.order_id+"&order_type=30")}))},showError:function(e,t){uni.showModal({title:"\u53cb\u60c5\u63d0\u793a",content:e,showCancel:!1,success:function(e){t&&t()}})},showSuccess:function(e,t){uni.showModal({title:"\u53cb\u60c5\u63d0\u793a",content:e,showCancel:!1,success:function(e){t&&t()}})},changeType:function(e){this.payType=e},close:function(){this.showPlanView=!1,this.$emit("closePlan")}}};t.default=n}).call(this,r(1).default)},function(e,t){e.exports={iconfont:{fontFamily:"iconfont"},nlv_borT:{borderColor:"#ebebeb",borderStyle:"solid",borderTopWidth:"1upx"},"wrapgift-mask":{backgroundColor:"#000000",opacity:.1,position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:1e3},"wrapgift-body":{overflow:"hidden",position:"fixed",bottom:0,left:0,right:0,zIndex:1001},"gift-container-head":{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx"},chongzhi:{height:"70rpx",lineHeight:"70rpx"},"plan-box":{backgroundColor:"#FFFFFF",borderTopLeftRadius:"20rpx",borderTopRightRadius:"20rpx"},"plan-cells":{width:"750rpx",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",paddingTop:0},"plan-cell-list":{display:"flex",flexDirection:"column",width:"225rpx",marginTop:0,marginRight:"10rpx",marginBottom:"20rpx",marginLeft:"10rpx",alignItems:"center",justifyContent:"center",backgroundColor:"#efefef",paddingTop:"30rpx",paddingRight:0,paddingBottom:"30rpx",paddingLeft:0,borderColor:"#FFFFFF",borderStyle:"solid",borderWidth:"1",borderRadius:"5rpx"},"plan-list-title":{display:"flex",flexDirection:"row",alignItems:"center"},"plan-list-rmb":{marginTop:"10rpx"},"plan-box-head":{display:"flex",flexDirection:"row",justifyContent:"flex-start"},"plan-head-title":{marginLeft:"200rpx",paddingTop:"10rpx",paddingRight:0,paddingBottom:"10rpx",paddingLeft:0},"plan-xieyi":{textAlign:"center",paddingTop:"30rpx",paddingRight:0,paddingBottom:"30rpx",paddingLeft:0,display:"flex",flexDirection:"row",justifyContent:"center"},paypop:{position:"absolute",top:0,zIndex:1002,width:"750rpx",height:"600rpx",right:0,left:0,display:"flex",alignItems:"center",justifyContent:"center"},"paypop-cont":{backgroundColor:"#FFFFFF",borderRadius:"16rpx",display:"flex",alignItems:"flex-start",justifyContent:"flex-start",flexDirection:"column",width:"750rpx",paddingBottom:"20rpx"},"paypop-list":{width:"750rpx",paddingTop:"30rpx",paddingRight:"30rpx",paddingBottom:"30rpx",paddingLeft:"30rpx",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderBottomWidth:"1",borderBottomStyle:"solid",borderBottomColor:"#f6f6f6",boxSizing:"border-box"},"pay-body":{display:"flex",flex:1,flexDirection:"row",justifyContent:"flex-start"},"icon-weixin":{color:"#04BE01"},"icon-yue1":{color:"#edde89"},"icon-icon_xianshi-xian":{"content:before":'"\\e658"'},"icon-danxuanxuanzhong":{"content:before":"'\\e623'"},"icon-xuanze-active":{color:"#55bb36"},w100:{width:"750rpx"},pan_btn:{width:"695rpx",height:"85rpx",lineHeight:"85rpx",color:"#FFFFFF",fontSize:"28rpx",textAlign:"center",backgroundColor:"#fc3e5a",borderRadius:"5rpx",overflow:"hidden",cursor:"pointer",textDecoration:"none",position:"relative",borderWidth:0,marginTop:0,marginBottom:0,marginLeft:"27.5rpx",paddingLeft:"14",paddingRight:"14",boxSizing:"border-box"},active_border:{display:"flex",flexDirection:"column",width:"225rpx",marginTop:0,marginRight:"10rpx",marginBottom:"20rpx",marginLeft:"10rpx",alignItems:"center",justifyContent:"center",backgroundColor:"#efefef",paddingTop:"30rpx",paddingRight:0,paddingBottom:"30rpx",paddingLeft:0,borderColor:"#fc3e5a",borderStyle:"solid",borderWidth:"1",borderRadius:"5rpx"},"@VERSION":2}},function(e,t,r){"use strict";r.r(t);var n=r(27),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={data:function(){return{popupVisible:!1,total:0,no_more:!1,listData:[],page:1,list_rows:10}},props:["shop_supplier_id","room_id"],methods:{show:function(){this.popupVisible=!0,this.start()},start:function(){this.loading=!0,this.no_more=!1,this.listData=[],this.page=1,this.list_rows=10,this.getData()},getData:function(){var e=this,t=e.page,r=e.list_rows;e.loading=!0,e._get("plus.live.RoomApply/orderList",{page:t||1,list_rows:r,shop_supplier_id:e.shop_supplier_id,room_id:e.room_id,pay_status:20},(function(t){e.loading=!1,e.listData=e.listData.concat(t.data.list.data),e.last_page=t.data.list.last_page,t.data.list.last_page<=1&&(e.no_more=!0)}))},loadmoreFunc:function(){if(this.bottomRefresh=!0,this.page++,this.loading=!0,this.page>this.last_page)return this.loading=!1,void(this.no_more=!0);this.getData()},close:function(){this.popupVisible=!1,this.$emit("closeOrder")}}}},function(e,t){e.exports={pop__ui_mask:{backgroundColor:"#000000",opacity:.1,position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:1e3},pop__ui_child:{backgroundColor:"#fbfbfb",borderTopLeftRadius:"12",borderTopRightRadius:"12",fontSize:"14",overflow:"hidden",position:"fixed",bottom:0,left:0,right:0,zIndex:1001},pop__ui_head:{borderStyle:"solid",borderColor:"#ebebeb",borderBottomWidth:"1upx",fontSize:"28upx",fontWeight:"700",paddingTop:"30upx",paddingRight:"30upx",paddingBottom:"30upx",paddingLeft:"30upx",textAlign:"left"},"product-head":{flexDirection:"row"},"product-head-btn":{height:"60rpx",lineHeight:"60rpx",backgroundColor:"#ffffff",borderColor:"#f72b6c"},"add-product-head-btn":{height:"60rpx",lineHeight:"60rpx",backgroundColor:"#ffffff",borderColor:"#f72b6c"},"add-product-list":{width:"750rpx",height:"700rpx"},"add-product-container":{position:"absolute",width:"750rpx",height:"900rpx",right:0,bottom:0,left:0,borderTopLeftRadius:"16rpx",borderTopRightRadius:"16rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,backgroundColor:"#FFFFFF",transitionProperty:"transform",transitionDuration:200,transitionTimingFunction:"ease",transitionDelay:0,transform:"translate(0, 0)"},"add-product-container-close":{transitionProperty:"transform",transitionDuration:0,transitionTimingFunction:"ease",transitionDelay:0,transform:"translate(0, 100%)"},"add-product-head":{flexDirection:"row"},"add-product-item":{flexDirection:"row",paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx"},"add-product-picture":{width:"160rpx",height:"160rpx"},"text-ellipsis-2":{height:"70rpx"},"add-product-relation":{height:"60rpx",lineHeight:"60rpx",backgroundColor:"#51a938",color:"#ffffff",borderColor:"#51a938",fontSize:"12"},"add-product-relation-hover":{backgroundColor:"#abd7a2",borderColor:"#abd7a2"},"order-close":{width:"40rpx",height:"40rpx"},"add-order-head":{backgroundColor:"#eeeeee",flexDirection:"row"},"order-num":{fontSize:"28",color:"#ababab",marginBottom:"10rpx"},"order-title":{textOverflow:"ellipsis",overflow:"hidden"},"order-money":{marginTop:"20rpx"},"add-product-picture-image":{width:"160rpx",height:"160rpx"},"@VERSION":2}},function(e,t,r){"use strict";r.r(t);var n=r(30),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{popupVisible:!1,liveUser:{},live_user:{},is_follow:!1}},props:["room_id","shop_supplier_id"],methods:{show:function(){this.popupVisible=!0,this.getUser()},getRequest:function(){return getApp().globalData.vueObj},getUser:function(){var e=this;e.data_type;e.getRequest()._get("plus.live.room/detail",{room_id:e.room_id},(function(t){e.is_follow=t.data.hasFollow,e.live_user=t.data.model}))},followFunc:function(){var e=this;e.getRequest()._post("user.Favorite/add",{shop_supplier_id:e.shop_supplier_id,pid:e.shop_supplier_id,type:10},(function(t){e.$emit("changeFollow",!e.is_follow),e.getUser()}))},gotoAnchorPage:function(){this.gotoPage("/pages/shop/shop?shop_supplier_id="+this.shop_supplier_id)},close:function(){this.popupVisible=!1}}};t.default=n},function(e,t){e.exports={pop__ui_mask:{backgroundColor:"#000000",opacity:.1,position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:1e3},pop__ui_child:{backgroundColor:"#fbfbfb",borderTopLeftRadius:"12",borderTopRightRadius:"12",fontSize:"14",position:"fixed",bottom:0,left:0,right:0,zIndex:9998},pop__ui_head:{borderStyle:"solid",borderColor:"#ebebeb",borderBottomWidth:"1upx",fontSize:"28upx",fontWeight:"700",paddingTop:"30upx",paddingRight:"30upx",paddingBottom:"30upx",paddingLeft:"30upx",textAlig:"left"},"foot-anchorinfo-wrap-anchorinfo":{marginTop:"150rpx",height:"120rpx"},"foot-anchorinfo-wrap-photo-box":{position:"fixed",bottom:"280rpx",left:"275rpx",width:"200rpx",height:"200rpx",zIndex:9999},"foot-anchorinfo-wrap-photo":{width:"200rpx",height:"200rpx",borderRadius:50},"foot-anchorinfo-wrap-bottom":{height:"100rpx",backgroundColor:"#f4f4f4"},"foot-anchorinfo-guanzhu":{color:"#e34470"},"foot-anchorinfo-zhuye":{color:"#545454"},"@VERSION":2}},function(e,t,r){"use strict";r.r(t);var n=r(33),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={data:function(){return{popupVisible:!1,activeIndex:-1,max:5,min:0,progressVal:0,beauty:9,whiteness:9,device_position:"front",value:9,showSlider:!1}},beforeCreate:function(){weex.requireModule("dom").addRule("fontFace",{fontFamily:"iconfont",src:"url('"+getApp().globalData.vueObj.font_url+"')"}),e("log",getApp().globalData.vueObj.font_url," at pagesLive/live/live-part/liveMore.nvue:66")},methods:{show:function(){this.popupVisible=!0},sliderChange:function(t){e("log",t," at pagesLive/live/live-part/liveMore.nvue:75"),this.value=t.detail.value,0==this.activeIndex?(uni.setStorageSync("beauty",this.value),this.$emit("liveSet",{type:"beauty",value:this.value})):(uni.setStorageSync("whiteness",this.value),this.$emit("liveSet",{type:"whiteness",value:this.value}))},setBeauty:function(){this.activeIndex=0;var e=uni.getStorageSync("beauty");this.value=e||this.beauty,this.showSlider=!0},setWhiteness:function(){this.activeIndex=1;var e=uni.getStorageSync("whiteness");this.value=e||this.whiteness,this.showSlider=!0},setDevice:function(){this.showSlider=!1,this.activeIndex=2,"front"==this.device_position?this.device_position="back":this.device_position="front",this.$emit("liveSet",{type:"device_position",value:this.device_position})},close:function(){this.popupVisible=!1}}};t.default=r}).call(this,r(1).default)},function(e,t){e.exports={iconfont:{fontFamily:"iconfont"},nlv_borT:{borderColor:"#ebebeb",borderStyle:"solid",borderTopWidth:"1upx"},"wrapgift-mask":{backgroundColor:"#000000",opacity:.1,position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:201910},pop__ui_child:{backgroundColor:"#fbfbfb",borderTopLeftRadius:"12",borderTopRightRadius:"12",fontSize:"14",overflow:"hidden",position:"fixed",bottom:0,left:0,right:0,zIndex:201911},"more-box":{backgroundColor:"#2a2634",width:"750rpx",height:"350rpx",position:"fixed",bottom:0,borderTopLeftRadius:"16rpx",borderTopRightRadius:"16rpx",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx",zIndex:9999},"more-list":{display:"flex",flexDirection:"column",justifyContent:"center",flex:1,alignItems:"center",paddingTop:"50rpx",paddingRight:0,paddingBottom:"50rpx",paddingLeft:0},"more-icont":{fontSize:"76rpx"},"more-list-active":{borderWidth:"1rpx",borderColor:"#ea4678",borderStyle:"solid",borderRadius:"16rpx"},Progress:{backgroundColor:"rgba(0,0,0,0.3)",height:"100rpx",width:"700rpx",position:"fixed",bottom:"370rpx",borderRadius:"16rpx",left:"25rpx",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingTop:0,paddingRight:"30rpx",paddingBottom:0,paddingLeft:"30rpx"},"progress-bar":{position:"fixed",bottom:"360rpx",width:"750rpx",justifyContent:"center"},wrap__giftPanel:{zIndex:100},"@VERSION":2}},function(e,t,r){"use strict";r.r(t);var n=r(36),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{popupVisible:!1}},beforeCreate:function(){weex.requireModule("dom").addRule("fontFace",{fontFamily:"nvueIcon",src:"url('../../../static/fonts/iconfont.ttf')"})},methods:{show:function(){this.popupVisible=!0},getPoster:function(){this.$emit("livePoster")},close:function(){this.popupVisible=!1},share:function(){}}};t.default=n},function(e,t){e.exports={iconfont:{fontFamily:"nvueIcon"},nlv_borT:{borderColor:"#ebebeb",borderStyle:"solid",borderTopWidth:"1upx"},"wrapgift-mask":{backgroundColor:"#000000",opacity:.1,position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:201910},pop__ui_child:{backgroundColor:"#fbfbfb",borderTopLeftRadius:"12",borderTopRightRadius:"12",fontSize:"14",overflow:"hidden",position:"fixed",bottom:0,left:0,right:0,zIndex:201911},"more-box":{backgroundColor:"#2a2634",width:"750rpx",height:"350rpx",position:"fixed",bottom:0,borderTopLeftRadius:"16rpx",borderTopRightRadius:"16rpx",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx",zIndex:9999},"more-list":{display:"flex",flexDirection:"column",justifyContent:"center",flex:1,alignItems:"center",paddingTop:"50rpx",paddingRight:0,paddingBottom:"50rpx",paddingLeft:0},"more-icont":{fontSize:"76rpx"},"more-list-active":{borderWidth:"1rpx",borderColor:"#ea4678",borderStyle:"solid",borderRadius:"16rpx"},Progress:{backgroundColor:"rgba(0,0,0,0.3)",height:"100rpx",width:"700rpx",position:"fixed",bottom:"370rpx",borderRadius:"16rpx",left:"25rpx",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingTop:0,paddingRight:"30rpx",paddingBottom:0,paddingLeft:"30rpx"},"progress-bar":{position:"fixed",bottom:"360rpx",width:"750rpx",justifyContent:"center"},wrap__giftPanel:{zIndex:100},"icon-weixin":{color:"#04BE01"},"@VERSION":2}},function(e,t,r){"use strict";r.r(t);var n=r(39),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={data:function(){return{popupVisible:!1,loading:!0,no_more:!1,listData:[],page:1,list_rows:10}},props:["room_id"],methods:{getRequest:function(){return getApp().globalData.vueObj},show:function(){this.popupVisible=!0,this.getRank()},getRank:function(){this.loading=!0,this.no_more=!1,this.listData=[],this.page=1,this.list_rows=10,this.getData()},getData:function(){var t=this,r=t.page,n=t.list_rows;e("log",t.room_id," at pagesLive/live/live-part/liveRank.nvue:84"),t.getRequest()._get("plus.live.room/user_gift",{page:r||1,list_rows:n,room_id:t.room_id},(function(e){t.loading=!1,t.listData=t.listData.concat(e.data.list.data),t.last_page=e.data.list.last_page,e.data.list.last_page<=1&&(t.no_more=!0)}))},loadmoreFunc:function(){if(this.bottomRefresh=!0,this.page++,this.loading=!0,this.page>this.last_page)return this.loading=!1,void(this.no_more=!0);this.getData()},close:function(){this.popupVisible=!1}}};t.default=r}).call(this,r(1).default)},function(e,t){e.exports={pop__ui_mask:{backgroundColor:"#000000",opacity:.1,position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:1e3},pop__ui_child:{backgroundColor:"#fbfbfb",borderTopLeftRadius:"12",borderTopRightRadius:"12",fontSize:"14",overflow:"hidden",position:"fixed",bottom:0,left:0,right:0,zIndex:9999},pop__ui_head:{borderStyle:"solid",borderColor:"#ebebeb",borderBottomWidth:"1upx",fontSize:"28upx",fontWeight:"700",paddingTop:"30upx",paddingRight:"30upx",paddingBottom:"30upx",paddingLeft:"30upx",textAlign:"left"},"add-product-head":{backgroundColor:"#eeeeee",flexDirection:"row"},"add-product-list":{width:"750rpx",height:"700rpx"},"add-product-item":{display:"flex",flexDirection:"row",alignItems:"center",borderBottomWidth:"1",borderBottomColor:"#F6F6F6",borderBottomStyle:"solid",paddingTop:"15rpx",paddingRight:0,paddingBottom:"15rpx",paddingLeft:0},"gift-num":{width:"50rpx",height:"50rpx",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50rpx",backgroundColor:"#e3416d",textAlign:"center",lineHeight:"50rpx",marginTop:"10rpx"},"add-product-picture-image":{width:"100rpx",height:"100rpx",borderRadius:50},"user-name":{display:"flex",flex:1,marginTop:"30rpx"},"gift-null":{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"600rpx"},fir:{backgroundColor:"#df372a"},sec:{backgroundColor:"#ff721b"},thr:{backgroundColor:"#e4a347"},"@VERSION":2}},function(e,t,r){"use strict";r.r(t);var n=r(42),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=weex.requireModule("animation"),i={data:function(){return{viewList:[],pageDate:new Date}},beforeCreate:function(){weex.requireModule("dom").addRule("fontFace",{fontFamily:"iconfont",src:"url('"+getApp().globalData.vueObj.font_url+"')"})},onShow:function(){},methods:{move:function(){var e=this.$refs.test,t=e[e.length-1];n.transition(t,{styles:{color:"#FF0000",transform:"translate(0, -200px)",opacity:"0",transformOrigin:"center center"},duration:3e3,timingFunction:"ease",delay:0},(function(){modal.toast({message:"animation finished."})}))},random:function(){var e=Math.floor(256*Math.random()),t=Math.floor(256*Math.random()),r=Math.floor(256*Math.random());return"rgb(".concat(e,",").concat(t,",").concat(r,")")},handleClick:function(){var e=this,t=["-",""],r=["/static/qunzi.png","/static/aixin.png","/static/yusan.png","/static/zan.png","/static/hua.png","/static/haixing.png"],n={src:r[Math.floor(Math.random()*r.length)],back:this.random(),index:!1,time:5e3,animationData:{},x:Math.ceil(50*Math.random()),q:Math.floor(Math.random()*t.length),lastIndex:5,timer:null,lastTime:1e3};new Date-this.pageDate<300||(this.pageDate=new Date,this.viewList.push(n),this.move(),this.viewList.forEach((function(r,n,i){var o=uni.createAnimation({duration:r.time,timingFunction:"ease-out"});e.animation=o;var a=t[r.q]+r.x;setTimeout((function(){e.animation.translateY(-200).step(),e.animation.opacity(0).step(),e.animation.translateX(Number(a)).step(),r.animationData=e.animation.export(),clearInterval(r.timer),r.timer=setInterval((function(){r.lastIndex--,r.lastIndex<0&&(i.splice(r,1),clearInterval(r.timer))}),r.lastTime)}),100)})))}}};t.default=i},function(e,t){e.exports={iconfont:{fontFamily:"iconfont"},"animate-wrap":{marginRight:"10",position:"absolute",width:"74rpx",height:"800rpx",bottom:"100rpx",right:0,zIndex:10},content:{position:"absolute",right:0,zIndex:14},content_box:{position:"absolute",bottom:0,right:0},logo:{position:"absolute",right:0,width:"70rpx",height:"70rpx"},aa:{position:"absolute",bottom:0,fontSize:"30upx",color:"#FFFFFF",textAlign:"center",lineHeight:"50upx",width:"80upx",transform:"translateY(0)"},"icon-31guanzhu1xuanzhong":{fontSize:"40rpx"},"@VERSION":2}},function(e,t,r){"use strict";r.r(t);var n=r(45),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={data:function(){return{type:0,width:600,backgroundColor:"none",boxShadow:"none",form:{},coupon:[]}},props:["qrcode","winHeight"],created:function(){},mounted:function(){this.setData()},methods:{setData:function(){e("log",this.winHeight," at pagesLive/live/live-part/dialog/share.vue:42")},hidePopupFunc:function(e){this.isPopup=!1,this.$emit("close")},savePosterImg:function(){var t=this;uni.showLoading({title:"\u52a0\u8f7d\u4e2d"}),uni.downloadFile({url:t.qrcode,success:function(r){uni.hideLoading(),uni.saveImageToPhotosAlbum({filePath:r.tempFilePath,success:function(e){uni.showToast({title:"\u4fdd\u5b58\u6210\u529f",icon:"success",duration:2e3}),t.isCreatedImg=!1},fail:function(e){"saveImageToPhotosAlbum:fail auth deny"===e.errMsg&&(uni.showToast({title:"\u8bf7\u5141\u8bb8\u8bbf\u95ee\u76f8\u518c\u540e\u91cd\u8bd5",icon:"none",duration:1e3}),setTimeout((function(){uni.openSetting()}),1e3))},complete:function(t){e("log","complete"," at pagesLive/live/live-part/dialog/share.vue:86")}})}})}}};t.default=r}).call(this,r(1).default)},function(e,t){e.exports={"share-shadow":{position:"fixed",top:0,zIndex:1010,width:"750rpx"},"share-wrap":{width:90,borderRadius:"20upx",overflow:"hidden",paddingTop:"130rpx",marginTop:0,marginBottom:0},"@VERSION":2}},function(e,t,r){"use strict";r.r(t);var n=r(48),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{status:0,day:"0",hour:"0",minute:"0",second:"0",timer:null,totalSeconds:0,title:"\u8ddd\u79bb\u5f00\u59cb\u4ec5\u5269\uff1a"}},props:{config:{type:Object,default:function(){return{type:"all"}}}},created:function(){},watch:{config:{deep:!0,handler:function(e,t){e!=t&&0!=e.endstamp&&(e.title&&void 0!==e.title&&(this.title=e.title),this.setTime())},immediate:!0}},methods:{setTime:function(){var e=this;e.timer=setInterval((function(){e.init()}),1e3)},init:function(){var e=Date.now()/1e3;e<this.config.startstamp?this.status=1:e>this.config.endstamp?this.status=2:(this.totalSeconds=parseInt(this.config.endstamp-e),this.status=0,this.countDown()),this.$emit("returnVal",this.status)},countDown:function(){var e=this.totalSeconds,t=Math.floor(e/86400),r=e%86400,n=Math.floor(r/3600);r%=3600;var i=Math.floor(r/60),o=r%60;this.day=this.convertTwo(t),this.hour=this.convertTwo(n),this.minute=this.convertTwo(i),this.second=this.convertTwo(o),this.totalSeconds--},convertTwo:function(e){return e<10?"0"+e:e},getLocalTime:function(e){return new Date(1e3*parseInt(e)).toLocaleString().replace(/:\d{1,2}$/," ")}},destroyed:function(){clearInterval(this.timer)}};t.default=n},function(e,t){e.exports={countdown:{flexDirection:"row",height:"45rpx",lineHeight:"45rpx"},box:{width:"34rpx",borderRadius:"8rpx",backgroundColor:"#fb4d70",textAlign:"center",height:"50rpx",lineHeight:"45rpx",color:"#ffffff"},"@VERSION":2}},function(e,t,r){"use strict";r.r(t);var n=r(51),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";(function(e){var n=r(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(144)),o={data:function(){return{popupVisible:!1,shareConfig:{},logo:""}},created:function(){this.getData()},props:["appParams"],methods:{show:function(){this.popupVisible=!0,this.getData()},getRequest:function(){return getApp().globalData.vueObj},getData:function(){var t=this;t.getRequest()._get("settings/appShare",{},(function(r){t.shareConfig=r.data.appshare,t.logo=r.data.logo,e("log",t.shareConfig," at pagesLive/live/live-part/app-nvue-share.vue:62")}))},closePopup:function(e){this.popupVisible=!1},share:function(t,r){var n={provider:"weixin",scene:r,type:t,success:function(t){e("log","success:"+JSON.stringify(t)," at pagesLive/live/live-part/app-nvue-share.vue:77")},fail:function(t){e("log","fail:"+JSON.stringify(t)," at pagesLive/live/live-part/app-nvue-share.vue:80")}};2!=this.shareConfig.type?(n.summary=this.appParams.summary,n.imageUrl=this.logo,n.title=this.appParams.title,1==this.shareConfig.type?n.href=this.shareConfig.open_site+this.appParams.path:3==this.shareConfig.type&&(1==this.shareConfig.bind_type?n.href=this.shareConfig.down_url:n.href=i.default.app_url+"/index.php/api/user.useropen/invite?app_id="+i.default.app_id+"&referee_id="+uni.getStorageSync("user_id"))):(n.scene="WXSceneSession",n.type=5,n.imageUrl=this.appParams.image?this.appParams.image:this.logo,n.title=this.appParams.title,n.miniProgram={id:this.shareConfig.gh_id,path:this.appParams.path,webUrl:this.shareConfig.web_url,type:0}),uni.share(n)}}};t.default=o}).call(this,r(1).default)},function(e,t){e.exports={iconfont:{fontFamily:"iconfont"},nlv_borT:{borderColor:"#ebebeb",borderStyle:"solid",borderTopWidth:"1upx"},"wrapgift-mask":{backgroundColor:"#000000",opacity:.1,position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:201910},pop__ui_child:{backgroundColor:"#fbfbfb",borderTopLeftRadius:"12",borderTopRightRadius:"12",fontSize:"14",overflow:"hidden",position:"fixed",bottom:0,left:0,right:0,zIndex:201911},"more-box":{backgroundColor:"#2a2634",width:"750rpx",height:"350rpx",position:"fixed",bottom:0,borderTopLeftRadius:"16rpx",borderTopRightRadius:"16rpx",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx",zIndex:9999},"more-list":{display:"flex",flexDirection:"column",justifyContent:"center",flex:1,alignItems:"center",paddingTop:"50rpx",paddingRight:0,paddingBottom:"50rpx",paddingLeft:0,backgroundColor:"#2a2634",borderWidth:0},"more-icont":{fontSize:"76rpx"},"more-list-active":{borderWidth:"1rpx",borderColor:"#ea4678",borderStyle:"solid",borderRadius:"16rpx"},Progress:{backgroundColor:"rgba(0,0,0,0.3)",height:"100rpx",width:"700rpx",position:"fixed",bottom:"370rpx",borderRadius:"16rpx",left:"25rpx",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingTop:0,paddingRight:"30rpx",paddingBottom:0,paddingLeft:"30rpx"},"progress-bar":{position:"fixed",bottom:"360rpx",width:"750rpx",justifyContent:"center"},wrap__giftPanel:{zIndex:100},"@VERSION":2}},function(e,t){e.exports={iconfont:{fontFamily:"iconfont"},nlv__container:{flex:1,height:100},nlv_topbar:{flex:1,flexDirection:"row",alignItems:"center",position:"absolute",left:0,right:0,top:0,zIndex:1001},"topbar-info":{flex:1,flexDirection:"column",alignItems:"center",paddingLeft:"20rpx",flexWrap:"nowrap",paddingTop:"10rpx"},"avator-box":{backgroundColor:"rgba(0,0,0,0.4)",borderRadius:"30rpx",flexDirection:"row",alignItems:"center",paddingRight:"6rpx",height:"60rpx",marginBottom:"20rpx"},"ta-avator":{borderRadius:50,marginRight:"10upx",height:"60rpx",width:"60rpx"},tabox:{textOverflow:"ellipsis",width:"150rpx",lineHeight:"27rpx"},"ta-name":{color:"#ffffff",fontSize:"24rpx"},"ta-num":{color:"#ffffff",fontSize:"24rpx"},"ta-gz":{backgroundImage:"linear-gradient(to right, #ff540a, #ff0f33)",borderRadius:"40rpx",color:"#ffffff",fontSize:"24rpx",textAlign:"center",paddingTop:"8rpx",paddingRight:0,paddingBottom:"8rpx",paddingLeft:0,width:"90rpx"},"ta-gz-on":{backgroundColor:"rgba(255,255,255,0.2)",backgroundImage:"none"},"avator-scroll":{paddingLeft:"10rpx",flexDirection:"row",paddingTop:0,paddingRight:"10rpx",paddingBottom:0,height:"60rpx",width:"230rpx"},"member-num":{backgroundColor:"rgba(0,0,0,0.4)",borderRadius:"40rpx",color:"#ffffff",fontSize:"24rpx",textAlign:"center",paddingTop:"10rpx",paddingRight:"14rpx",paddingBottom:"10rpx",paddingLeft:"14rpx"},"topbar-right":{flexDirection:"row",marginTop:"-10rpx"},topbar_ico:{color:"#ffffff",fontSize:"40rpx",paddingTop:"15rpx",paddingRight:"15rpx",paddingBottom:"15rpx",paddingLeft:"15rpx",position:"relative",zIndex:1001},"nlv-rankbox":{position:"absolute",left:0,right:0,zIndex:1001,direction:"ltr",flexDirection:"row"},"nlv-rkls":{flexDirection:"row",alignItems:"center"},rkitem:{backgroundImage:"linear-gradient(to right, rgba(255, 56, 166, .5), rgba(57, 159, 255, .5))",borderRadius:"40rpx",color:"#ffffff",fontSize:"24rpx",marginLeft:"20rpx",paddingTop:"4rpx",paddingRight:"10rpx",paddingBottom:"4rpx",paddingLeft:"10rpx"},"nlv-uid":{color:"rgba(255,255,255,0.5)",fontSize:"28rpx",position:"absolute",right:"20rpx",top:0},nlv_main:{flex:1,height:100},"nlv-swiper":{flex:1},"nlv-playerbox":{flex:1},"player-video":{height:100,width:100},"nlv-footToolbar":{position:"absolute",left:0,right:0,bottom:0},"nlv-giftTipPanel":{flexDirection:"column",marginLeft:"20rpx",marginBottom:"180rpx"},"giftip-item":{backgroundColor:"rgba(0,0,0,0.3)",borderRadius:"100rpx",paddingTop:"8rpx",paddingRight:"100rpx",paddingBottom:"8rpx",paddingLeft:"8rpx",flexDirection:"row",alignItems:"center",width:"410rpx",marginTop:"10rpx"},"gt-avator":{borderRadius:50,height:"72rpx",width:"72rpx"},"gt-info":{paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx",overflow:"hidden",width:"230rpx"},"gt-tit":{color:"#ffffff",fontSize:"28rpx",overflow:"hidden",height:"40rpx",lineHeight:"40rpx"},"gt-subtit":{color:"rgba(255,255,255,0.7)",fontSize:"24rpx",letterSpacing:"4rpx"},"gt-gift":{height:"100rpx",width:"100rpx",position:"absolute",top:"-6rpx",right:"35rpx"},"nlv-rollMsgPanel":{marginLeft:"20rpx",marginBottom:"20rpx",height:"400rpx",width:"500rpx"},"nlv-msglist":{marginTop:"10rpx",flexDirection:"column",alignItems:"flex-start"},msg_bg:{backgroundColor:"rgba(0,0,0,0.3)",borderRadius:"24rpx",paddingTop:"8rpx",paddingRight:"14rpx",paddingBottom:"8rpx",paddingLeft:"14rpx",flexDirection:"row",flexWrap:"wrap"},msg_name:{color:"#fff81f",fontSize:"28rpx"},msg_text:{color:"rgba(255,255,255,1)",fontSize:"28rpx",display:"flex",justifyContent:"flex-start",flexWrap:"wrap",overflow:"hidden",width:"450rpx",direction:"ltr",flexDirection:"row"},msg_txtxt:{color:"rgba(255,255,255,1)",fontSize:"28rpx",height:"28rpx"},"nlv-infobox":{paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx",flex:1,flexDirection:"row",alignItems:"center"},nlv_reply:{flex:1,flexDirection:"row",backgroundColor:"rgba(0,0,0,0.3)",borderRadius:"50rpx",paddingTop:"23rpx",paddingRight:"23rpx",paddingBottom:"23rpx",paddingLeft:"23rpx"},nlv_reply_text:{color:"#ffffff",fontSize:"30rpx"},nlv_btntool:{flexDirection:"row",justifyContent:"flex-end"},"btn-toolitem":{display:"flex",backgroundColor:"rgba(0,0,0,0.3)",borderRadius:50,alignItems:"center",justifyContent:"center",marginLeft:"10rpx",height:"75rpx",width:"75rpx",textAlign:"center",lineHeight:"75rpx",borderWidth:0},"btn-toolitem-cart":{backgroundImage:"linear-gradient(to right, #ff955d, #f93b37)"},"i-btntool":{color:"#ffffff",fontSize:"40rpx"},"avator-scrollbox":{marginLeft:"-75rpx"},product:{position:"fixed",bottom:"140rpx",right:"20rpx",backgroundColor:"#ffffff",paddingTop:"10rpx",paddingRight:"10rpx",paddingBottom:"10rpx",paddingLeft:"10rpx",zIndex:99,borderRadius:"15rpx"},"product-pic":{width:"200rpx",height:"200rpx"},"product-img":{width:100,height:100},"product-price":{display:"flex",flexDirection:"row",alignItems:"center",marginTop:"10rpx"},diggnum:{width:"74rpx",height:"22rpx",fontSize:"20rpx",backgroundColor:"#F93B37",color:"#FFFFFF",textAlign:"center",lineHeight:"22rpx",borderRadius:"11rpx",position:"absolute",top:"-28rpx",left:0},notice_back_image:{position:"absolute",top:0,left:0,width:"750rpx"},notice_content:{textAlign:"center",paddingTop:"340rpx",backgroundColor:"rgba(0,0,0,0.6)"},notice_content_img:{width:"200rpx",height:"200rpx",marginTop:0,marginBottom:44},notice_content_imgbox:{display:"flex",justifyContent:"center",alignItems:"center"},notice_btn:{width:"250rpx",height:"80rpx",borderStyle:"solid",borderWidth:"1rpx",borderColor:"#fb4b70",lineHeight:"80rpx",textAlign:"center",borderRadius:"40rpx"},notice_btn_txt:{color:"#fb4d70"},notice_btns:{flexDirection:"row"},notice_title_t:{textAlign:"center",color:"#FFFFFF",fontSize:"34rpx",height:"120rpx",lineHeight:"120rpx"},notice_title_c:{textAlign:"center",color:"#FFFFFF",fontSize:"22rpx",height:"38rpx",lineHeight:"38rpx"},notice_title_b:{textAlign:"center",color:"#FFFFFF",fontSize:"26rpx",height:"120rpx",lineHeight:"120rpx",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},notice_share:{position:"absolute",top:0},notice_jiantou:{transform:"rotate(180deg)",color:"#ffffff"},notice_back:{width:"750rpx",color:"#ffffff",display:"flex",position:"absolute",top:"32",zIndex:0,fontSize:"30rpx",alignItems:"center",justifyContent:"center"},notice_back_back:{textAlign:"left",position:"absolute",top:"70rpx",left:"45rpx",zIndex:1},"icon-guanbi":{color:"#FFFFFF"},"icon-jiantou":{color:"#FFFFFF"},msg_txt:{color:"#FFFFFF",fontSize:"28rpx"},red:{color:"#E22319"},"@VERSION":2}},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("scroll-view",{staticStyle:{flexDirection:"column"},attrs:{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true"}},[""==e.winHeight||e.loading?e._e():r("div",{staticClass:["nlv__container"],style:"height:"+e.winHeight+" ;"},[e.is_start?e._e():r("view",{staticClass:["nlv_main"]},[r("view",[r("view",{staticClass:["notice_back_back"],on:{click:e.goBack}},[r("u-text",{staticClass:["icon","iconfont","icon-guanbi","notice_jiantou"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\ue629")])]),r("view",{staticClass:["notice_back"]},[r("u-image",{staticClass:["notice_back_image"],style:"height:"+e.winHeight+" ;",attrs:{src:e.roomDetail.share.file_path,mode:"aspectFill"}})],1),r("view",{staticClass:["notice_content"],style:"height:"+e.winHeight+" ;"},[r("view",{staticClass:["notice_content_imgbox"]},[r("u-image",{staticClass:["notice_content_img"],attrs:{src:e.roomDetail.share.file_path,mode:""}})],1),r("u-text",{staticClass:["notice_title_t"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.roomDetail.name))]),r("u-text",{staticClass:["notice_title_c"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u2014\u2014\u656c\u8bf7\u671f\u5f85\u2014\u2014")]),r("view",{staticClass:["notice_title_b"]},[r("Countdown",{attrs:{config:e.countdownConfig}})]),r("view",{staticClass:["d-a-c","notice_btns"]},[r("button",{staticClass:["notice_btn"],attrs:{openType:"share"}},[r("u-text",{staticClass:["notice_btn_txt"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u5206\u4eab\u670b\u53cb")])]),r("button",{staticClass:["notice_btn"],on:{click:e.livePoster}},[r("u-text",{staticClass:["notice_btn_txt"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u751f\u6210\u6d77\u62a5")])])],1)]),r("view",{staticClass:["notice_share"]},[null!=e.qrcode&!e.is_start?r("share",{attrs:{winHeight:e.winHeight,qrcode:e.qrcode},on:{close:e.closeShare}}):e._e()],1)])]),e.is_start?r("view",{staticClass:["nlv_main"]},[r("view",{staticClass:["nlv-playerbox"]},[r("live-room",{ref:"liveRoom",attrs:{winHeight:e.winHeight,winWidth:e.winWidth,role:e.role,is_replay:e.is_replay,replay_url:e.replay_url},on:{showMsg:e.showMsg}}),r("view",{staticClass:["nlv_topbar"],style:{height:e.headerBarH,"padding-top":e.statusBarH}},[r("view",{staticClass:["topbar-right"]},[r("u-text",{staticClass:["topbar_ico","icon","iconfont","icon-guanbi"],appendAsTree:!0,attrs:{append:"tree"},on:{click:e.closeLive}},[e._v("\ue629")])]),r("view",{staticClass:["topbar-info"]},[r("view",{staticClass:["avator-box"]},[r("u-image",{staticClass:["ta-avator"],attrs:{src:e.roomDetail.supplier.logo.file_path,mode:"aspectFill"},on:{click:e.openAnchor}}),r("view",{staticClass:["tabox"]},[r("u-text",{staticClass:["ta-name"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.roomDetail.supplier.name))]),r("u-text",{staticClass:["ta-num"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.roomDetail.view_num)+"\u89c2\u770b")])]),e.isCaster?e._e():r("u-text",{staticClass:["ta-gz"],class:e.hasFollow?"ta-gz-on":"",appendAsTree:!0,attrs:{append:"tree"},on:{click:function(t){e.followFunc()}}},[e._v(e._s(e.hasFollow?"\u5df2\u5173\u6ce8":"\u5173\u6ce8"))])],1)])]),r("view",{staticClass:["nlv-rankbox"],style:{top:e.headerBarH}},[r("view",{staticClass:["nlv-rkls"],on:{click:e.openRank}},[r("u-text",{staticClass:["rkitem"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.gift_name)+"\uff1a"+e._s(e.roomDetail.gift_num))])]),r("view",{staticClass:["nlv-rkls"]},[r("u-text",{staticClass:["rkitem","ml30"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u4eba\u6c14\u503c\uff1a"+e._s(e.digg_num))])])]),r("view",{staticClass:["nlv-footToolbar"]},[""!=e.giftInfo.nickName?r("view",{staticClass:["nlv-giftTipPanel"]},[r("view",{staticClass:["giftip-item"]},[r("u-image",{staticClass:["gt-avator"],attrs:{src:e.giftInfo.avatarUrl,mode:"aspectFill"}}),r("view",{staticClass:["gt-info"]},[r("u-text",{staticClass:["gt-tit"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.giftInfo.nickName))]),r("u-text",{staticClass:["gt-subtit"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u9001\u4e3b\u64ad"+e._s(e.giftInfo.giftName))])]),r("u-image",{staticClass:["gt-gift"],attrs:{src:e.giftInfo.giftImage,mode:"aspectFill"}})],1)]):e._e(),r("scroll-view",{staticClass:["nlv-rollMsgPanel"],attrs:{scrollIntoView:e.toMsg,scrollY:!0,showScrollbar:"false"}},e._l(e.commentsList,(function(t,n){return r("block",{key:n},[r("view",{staticClass:["nlv-msglist"]},[r("view",{staticClass:["msg_bg"],attrs:{id:"comment"+n}},["text"==t.type?r("view",{staticClass:["msg_text"]},[r("u-text",{staticClass:["msg_name"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(t.nickName)+":")]),r("u-text",{staticClass:["msg_txt"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(t.msg))])]):e._e(),"enter"==t.type?r("view",{staticClass:["msg_text"]},[r("u-text",{staticClass:["msg_name"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(t.nickName))]),r("u-text",{staticClass:["msg_txt"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u6765\u4e86")])]):e._e()])])])})),1),r("view",{staticClass:["nlv-infobox"]},[r("view",{staticClass:["nlv_reply"],on:{click:function(t){e.handleRollMsg(e.index)}}},[r("u-text",{staticClass:["nlv_reply_text"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u8bf4\u70b9\u4ec0\u4e48...")])]),r("view",{staticClass:["nlv_btntool"]},[r("view",{staticClass:["btn-toolitem"],on:{click:function(t){e.handleLiveCart()}}},[r("u-text",{staticClass:["icon","iconfont","icon-gouwu","i-btntool"],staticStyle:{color:"#ff4e0e",fontSize:"20px"},appendAsTree:!0,attrs:{append:"tree"}},[e._v("\ue86e")])]),e.isCaster?e._e():r("view",{staticClass:["btn-toolitem","btn-toolitem-cart"],on:{click:e.handleLiveGift}},[r("u-text",{staticClass:["iconfont","icon","icon-libao","i-btntool"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\ue609")])]),r("button",{staticClass:["btn-toolitem"],on:{click:e.openShare}},[r("u-text",{staticClass:["icon","iconfont","icon-share1","i-btntool"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\ue64f")])]),e.isCaster?r("view",{staticClass:["btn-toolitem"],on:{click:e.openMore}},[r("u-text",{staticClass:["icon","iconfont","icon-caidan","i-btntool"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\ue6e8")])]):e._e(),e.isCaster?e._e():r("view",{staticClass:["btn-toolitem"],on:{click:e.digg}},[r("u-text",{staticClass:["icon","iconfont","icon-31guanzhu1xuanzhong","i-btntool"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\ue655")])])],1)])],1)],1),null==e.explain_product||e.is_replay?e._e():r("div",{staticClass:["product"],on:{click:e.gotoProduct}},[r("div",{staticClass:["product-pic"]},[r("u-image",{staticClass:["product-img"],attrs:{src:e.explain_product.product_image}})],1),r("div",{staticClass:["product-price"]},[r("u-text",{staticClass:["f24","rose"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\uffe5")]),r("u-text",{staticClass:["rose","f28"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.explain_product.product_price))])])]),null!=e.qrcode?r("share",{attrs:{winHeight:e.winHeight,qrcode:e.qrcode},on:{close:e.closeShare}}):e._e()],1):e._e(),r("Likes",{ref:"likes"}),r("live-cart",{ref:"liveCart",attrs:{isCaster:e.isCaster,shop_supplier_id:e.roomDetail.shop_supplier_id,room_id:e.room_id},on:{openOrder:e.openOrder,setProduct:e.setProduct}}),r("live-gift",{ref:"liveGift",attrs:{room_id:e.room_id,gift_name:e.gift_name,giftList:e.giftList},on:{openPlan:e.openPlan,sendGift:e.sendGift}}),r("live-msg",{ref:"liveMsg",attrs:{emojiData:e.emojiData},on:{closeMsg:e.closeMsg}}),r("live-plan",{ref:"livePlan",attrs:{gift_name:e.gift_name},on:{closePlan:e.closePlan}}),r("live-order",{ref:"liveOrder",attrs:{shop_supplier_id:e.roomDetail.shop_supplier_id,room_id:e.room_id},on:{closeOrder:e.closeOrder}}),r("live-anchor",{ref:"liveAnchor",attrs:{room_id:e.room_id,shop_supplier_id:e.roomDetail.shop_supplier_id},on:{changeFollow:e.changeFollow}}),r("live-more",{ref:"liveMore",on:{liveSet:e.liveSet}}),r("live-share",{ref:"liveShare",on:{livePoster:e.livePoster}}),r("live-rank",{ref:"liveRank",attrs:{room_id:e.room_id}}),r("AppShare",{ref:"appShare",attrs:{appParams:e.appParams}})],1)])},i=[]},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.popupVisible?r("view",{staticClass:["popup-footer"]},[r("view",{staticClass:["pop__ui_panel"]},[r("view",{staticClass:["pop__ui_mask"],on:{click:e.close}}),r("view",{staticClass:["pop__ui_child","anim-footer"],on:{click:function(e){}}},[e.open_addproduct?e._e():r("div",[r("div",{staticClass:["product-head","d-b-c","p20","f30"]},[r("u-text",{staticClass:["ml10"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u5171"+e._s(e.total)+"\u4ef6\u5546\u54c1")]),r("div",{staticClass:["d-s-c"]},[r("button",{staticClass:["product-head-btn"],on:{click:e.openOrder}},[r("u-text",{staticClass:["rose","f30"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u8ba2\u5355")])])],1)]),r("list",{staticClass:["add-product-list"]},e._l(e.productList,(function(t,n){return r("cell",{key:n,staticClass:["add-product-item","d-s-s"],appendAsTree:!0,attrs:{append:"tree"}},[r("div",{staticClass:["add-product-picture"]},[r("view",[r("u-image",{staticClass:["add-product-picture-image"],attrs:{src:t.image[0].file_path,mode:"aspectFill"}})],1),r("u-text",{staticClass:["rose","f28"],appendAsTree:!0,attrs:{append:"tree"}})]),r("div",{staticClass:["flex-1","ml20"]},[r("div",{staticClass:["text-ellipsis-2"]},[r("u-text",{staticClass:["f28"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(t.product_name))])]),r("div",{staticClass:["d-s-s","d-r","p-20-0"]},[r("div",{staticClass:["d-s-s","price","d-r","flex-1","f24"]},[r("u-text",{staticClass:["f34","fb","rose"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(t.product_price))])]),e.isCaster&&e.product_active!=t.product_id?r("div",{staticClass:["add-product-relation"],on:{click:function(r){e.setProduct(t)}}},[r("u-text",{staticClass:["white","f28"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u8bbe\u4e3a\u8bb2\u89e3")])]):e._e(),e.product_active==t.product_id?r("div",{staticClass:["add-product-relation"]},[r("u-text",{staticClass:["white","f28"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u8bb2\u89e3\u4e2d")])]):e._e(),e.isCaster?e._e():r("div",{staticClass:["add-product-relation"],on:{click:function(r){e.gotoProduct(t)}}},[r("u-text",{staticClass:["white","f28","m-auto"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u53bb\u8d2d\u4e70")])])])])])})),0)]),e.open_addproduct?r("div",[r("div",{staticClass:["add-product-head","d-b-c","p20","f30"]},[r("u-text",{staticClass:["f30"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u5173\u8054\u5546\u54c1")]),r("button",{staticClass:["add-product-head-btn"],attrs:{type:"default"},on:{click:function(t){e.confirmFunc(!0)}}},[r("u-text",{staticClass:["rose","f28"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u786e\u8ba4")])])],1),r("scroll-view",{staticClass:["add-product-list"],attrs:{scrollY:"true"},on:{scrolltolower:e.loadmoreFunc}},[e._l(e.listData,(function(t,n){return r("view",{key:n,staticClass:["add-product-item","d-b-c"]},[r("div",{staticClass:["add-product-picture"]},[r("u-image",{staticClass:["add-product-picture-image"],attrs:{src:t.product_image,mode:"aspectFill"}})],1),r("div",{staticClass:["ml20","flex-1"]},[r("div",{staticClass:["text-ellipsis-2"]},[r("u-text",{staticClass:["f30"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(t.product_name))])]),r("div",{staticClass:["d-s-s","d-r","p-20-0"]},[r("div",{staticClass:["d-s-s","price","d-r","flex-1","f24"]},[r("u-text",{staticClass:["ml20","gray9","f28"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u552e\u4ef7\uff1a"+e._s(t.product_price))])]),e.isrelation(t)?e._e():r("div",{staticClass:["add-product-relation"],on:{click:function(r){e.relationProduct(t)}}},[r("u-text",{staticClass:["white","f28"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u6dfb\u52a0")])]),e.isrelation(t)?r("div",{staticClass:["add-product-relation","add-product-relation-hover"]},[r("u-text",{staticClass:["white","f28"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u5df2\u6dfb\u52a0")])]):e._e()])])])})),0!=e.listData.length||e.loading?r("uni-load-more",{attrs:{loadingType:e.loadingType}}):r("view",{staticClass:["d-c-c","p30"]},[r("u-text",{staticClass:["cont"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u4eb2\uff0c\u6682\u65e0\u76f8\u5173\u8bb0\u5f55\u54e6")])])],2)],1):e._e()])])]):e._e()},i=[]},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.showGiftView?r("view",{staticClass:["wrap__giftPanel"]},[r("view",{staticClass:["wrapgift-mask"],on:{click:e.close}}),r("view",{staticClass:["pop__ui_child","anim-footer"],on:{click:function(e){}}},[r("scroll-view",{staticClass:["wrapgift-body"]},[r("view",{staticClass:["wrap_giftlist"]},[r("view",{staticClass:["gift-head"]},[r("view",{staticClass:["gift-menu"]},[r("u-text",{staticClass:["gm-item","gm-item-on"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u793c\u7269")])]),r("view",{staticClass:["gift-coins"]},[r("u-text",{staticClass:["gc-coin"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.gift_name)+"\uff1a")]),r("u-text",{staticClass:["gc-num"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.userInfo.gift_money))]),r("u-text",{staticClass:["gc-recharge"],appendAsTree:!0,attrs:{append:"tree"},on:{click:e.PlanFunc}},[e._v("\u5145\u503c")])])]),r("swiper",{staticClass:["gift-swiper"],attrs:{indicatorDots:!0,duration:200,indicatorColor:"#dbdbdb",indicatorActiveColor:"#999"}},e._l(e.giftList,(function(t,n){return r("swiper-item",{key:n},[r("view",{staticClass:["gift__cells"]},e._l(t,(function(t,n){return r("block",{key:n},[t.gift_id!=e.isGift?r("view",{staticClass:["giftitem"],on:{click:function(r){e.chooseGift(t)}}},[r("view",{staticClass:["giftitem-rect"]},[r("u-image",{staticClass:["giftimg"],attrs:{src:t.file_path,mode:"aspectFill"}})],1),r("u-text",{staticClass:["giftname"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(t.gift_name))]),r("u-text",{staticClass:["giftcoin"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(t.price)+e._s(e.gift_name))])]):e._e(),t.gift_id==e.isGift?r("view",{staticClass:["giftitem"]},[r("view",{staticClass:["giftitem_active"]},[r("view",{staticClass:["giftitem-rect"]},[r("u-image",{staticClass:["giftimg_active"],attrs:{src:t.file_path,mode:"aspectFill"}})],1),r("u-text",{staticClass:["giftcoin"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(t.price)+e._s(e.gift_name))]),r("button",{staticClass:["sendbtn"],on:{click:function(r){e.sendGift(t)}}},[r("u-text",{staticClass:["btntext"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u53d1\u9001")])])],1)]):e._e()])})),1)])})),1)],1)])],1)]):e._e()},i=[]},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("view",[e.is_replay?r("block",[r("view",{staticClass:["video-detail"]},[r("u-video",{style:{height:e.winHeight,width:e.winWidth},attrs:{id:"myVideo",src:e.replay_url,autoplay:!0,loop:!0,controls:!1,showFullscreenBtn:!1,showPlayBtn:!1,showCenterPlayBtn:!1,objectFit:"cover"},on:{error:e.videoErrorCallback}})],1)]):e._e(),"audience"==e.role&&""!=e.player_url?r("block",[r("u-video",{style:{height:e.winHeight,width:e.winWidth},attrs:{id:"myVideo",src:e.player_url,autoplay:!0,loop:!0,controls:!1,showFullscreenBtn:!1,showPlayBtn:!1,showCenterPlayBtn:!1,autoPauseIfNavigate:!1,autoPauseIfOpenNative:!1,objectFit:"cover"}})],1):e._e(),"broadcaster"==e.role?r("block",[r("live-pusher",{ref:"livePusher1",staticClass:["livePusher"],style:{height:e.winHeight,width:e.winWidth},attrs:{id:"livePusher1",url:e.mainPusherInfo_url,mode:"RTC",enableCamera:"true",enableMic:"true",autoFocus:"true",aspect:"9:16",objectFit:"fill",maxBitrate:"500",minBitrate:"200",waitingImage:"../../../static/temporarily.jpg",beauty:e.beauty,whiteness:e.whiteness},on:{statechange:e.recorderStateChange,netstatus:e.recorderNetChange}})],1):e._e()],1)},i=[]},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.popupVisible?r("view",{staticClass:["popup-footer"]},[r("view",{staticClass:["pop__ui_panel"]},[r("view",{staticClass:["pop__ui_mask"],on:{click:e.close}}),r("view",{staticClass:["pop__ui_child","anim-footer"],on:{click:function(e){}}},[r("view",{staticClass:["pop__ui_body"]},[r("view",{staticClass:["wrap_commentPanel"]},[r("view",{staticClass:["wrap_cmtFoot"],style:"bottom:"+e.inputBottom+"px;"},[r("view",{staticClass:["wrap__editorPanel","uni_borT","uni__editorPanel"]},[r("view",{staticClass:["wrap_editor","uni_editor"]},[r("u-input",{staticClass:["editor"],attrs:{autoFocus:"true",value:"",adjustPosition:!1,confirmType:"send",placeholder:"\u8bf4\u70b9\u4ec0\u4e48...",value:e.content},on:{confirm:function(t){e.sendTextMsg()},focus:e.inputFocus,blur:e.inputBlur,input:function(t){e.content=t.detail.value}}})],1),r("view",{staticClass:["uni_editor_btn"],on:{click:function(t){e.emojiShow=!e.emojiShow}}},[r("u-text",{staticClass:["icon","iconfont","icon-biaoqing"],appendAsTree:!0,attrs:{append:"tree"}})]),r("view",{staticClass:["uni_editor_btn","btn_submit","uni__btn-primary","bg_linear2"],on:{click:e.sendTextMsg}},[r("u-text",{staticClass:["icon","iconfont","icon-fasong"],appendAsTree:!0,attrs:{append:"tree"}})])]),r("view",{directives:[{name:"show",rawName:"v-show",value:e.emojiShow,expression:"emojiShow"}],staticClass:["bc-white"]},[r("swiper",{staticClass:["slider"]},e._l(e.emojiData,(function(t,n){return r("swiper-item",{key:n,staticClass:["slider-emoji"],class:[n==e.emojiData.length-1?"lastbox":""]},e._l(t,(function(t,n){return r("u-text",{key:n,staticClass:["slider-emoji-icon"],appendAsTree:!0,attrs:{append:"tree"},on:{click:function(r){e.selemoji(t)}}},[e._v(e._s(t))])})),0)})),1)],1)])])])])])]):e._e()},i=[]},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.showPlanView?r("view",{staticClass:["wrap__giftPanel"]},[r("view",{staticClass:["wrapgift-mask"],on:{click:e.close}}),r("scroll-view",{staticClass:["wrapgift-body"]},[r("div",[r("div",{staticClass:["plan-box"]},[r("div",{staticClass:["gift-container-head","plan-box-head"]},[r("u-text",{staticClass:["f30"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.gift_name)+"\uff1a")]),r("u-text",{staticClass:["f30","yellow"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.userInfo.gift_money))])]),r("div",{staticClass:["plan-cells"]},e._l(e.planList,(function(t,n){return r("div",{key:n,class:e.choose_id==t.plan_id?"active_border":"plan-cell-list",on:{click:function(r){e.chooseplan(t)}}},[r("div",{staticClass:["plan-list-title"]},[r("u-text",{staticClass:["rose","f30"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(t.real_money))]),r("u-text",{staticClass:["f28"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.gift_name))])]),r("div",{staticClass:["plan-list-rmb"]},[r("u-text",{staticClass:["f30","gray9"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(t.money)+"\u5143")])])])})),0),r("div",{staticClass:["w100"]},[r("button",{staticClass:["pan_btn"],on:{click:e.submit}},[r("u-text",{staticClass:["white"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u7acb\u5373\u5145\u503c")])])],1),r("div",{staticClass:["plan-xieyi"]},[r("u-text",{staticClass:["f28"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u5145\u503c\u4ee3\u8868\u5df2\u9605\u8bfb\u5e76\u540c\u610f")]),r("u-text",{staticClass:["f28","yellow"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u300a\u7528\u6237\u5145\u503c\u534f\u8bae\u300b")])])])])])],1):e._e()},i=[]},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.popupVisible?r("view",{staticClass:["popup-footer"]},[r("view",{staticClass:["pop__ui_panel"]},[r("view",{staticClass:["pop__ui_mask"],on:{click:e.close}}),r("view",{staticClass:["pop__ui_child","anim-footer"],on:{click:function(e){}}},[r("div",[r("div",{staticClass:["add-order-head","d-b-c","p20","f30"]},[r("u-text",{staticClass:["f30"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u6211\u7684\u8ba2\u5355")]),r("u-text",{staticClass:["topbar_ico","icon","iconfont","icon-guanbi","order-close"],appendAsTree:!0,attrs:{append:"tree"},on:{click:e.close}})]),r("list",{staticClass:["add-product-list"]},e._l(e.listData,(function(t,n){return r("cell",{key:n,staticClass:["add-product-item","d-s-s"],appendAsTree:!0,attrs:{append:"tree"}},[r("div",{staticClass:["add-product-picture"]},[r("u-image",{staticClass:["add-product-picture-image"],attrs:{src:t.product[0].image.file_path,mode:"aspectFill"}})],1),r("div",{staticClass:["flex-1","ml20"]},[r("div",{staticClass:["order-num"]},[r("u-text",{staticClass:["f28","gray9"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u8ba2\u5355\u53f7\uff1a"+e._s(t.order_no))])]),r("div",{staticClass:["order-title"]},[r("div",{staticClass:["text-ellipsis-2"]},[r("u-text",{staticClass:["f28"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(t.product[0].product_name))])])]),r("div",{staticClass:["order-money"]},[r("u-text",{staticClass:["rose","f28"],staticStyle:{fontWeight:"700"},appendAsTree:!0,attrs:{append:"tree"}},[e._v("\uffe5"+e._s(t.product[0].product_price))])])]),r("div",{staticClass:["order-statu"]},[1==t.is_settled?r("u-text",{staticClass:["rose","f28"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u5df2\u7ed3\u7b97")]):e._e(),0==t.is_settled?r("u-text",{staticClass:["rose","f28"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u672a\u7ed3\u7b97")]):e._e()])])})),0)])])])]):e._e()},i=[]},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.popupVisible?r("view",{staticClass:["popup-footer"]},[r("view",{staticClass:["pop__ui_panel"]},[r("view",{staticClass:["pop__ui_mask"],on:{click:e.close}}),r("view",{staticClass:["pop__ui_child","anim-footer"],on:{click:function(e){}}},[r("div",[e.live_user?r("div",{staticClass:["foot-anchorinfo-wrap-anchorinfo","p-0-20","tc"]},[r("div",{staticClass:["foot-anchorinfo-wrap-nickName","d-c-c","fb","f34"]},[r("u-text",{appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.live_user.supplier.name))])]),r("div",{staticClass:["d-c-c","d-r","mt20","gray9","f28"]},[r("u-text",{staticClass:["p-0-10","gray6","f28"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u7c89\u4e1d"+e._s(e.live_user.supplier.fav_count))]),r("u-text",{staticClass:["p-0-10","gray6","f28"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u70b9\u8d5e"+e._s(e.live_user.digg_num))])])]):e._e(),r("div",{staticClass:["foot-anchorinfo-wrap-bottom","d-b-c","d-r"]},[e.is_follow?e._e():r("div",{staticClass:["foot-anchorinfo-guanzhu","flex-1","d-c-c"],on:{click:e.followFunc}},[r("u-text",{staticClass:["f34","gray6"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("+\u5173\u6ce8")])]),e.is_follow?r("div",{staticClass:["foot-anchorinfo-guanzhu","flex-1","d-c-c"],on:{click:e.followFunc}},[r("u-text",{staticClass:["f34","gray6"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u5df2\u5173\u6ce8")])]):e._e(),r("div",{staticClass:["foot-anchorinfo-zhuye","flex-1","d-c-c"],on:{click:e.gotoAnchorPage}},[r("u-text",{staticClass:["f34","gray6"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u4e3b\u9875")])])])]),r("div",{staticClass:["foot-anchorinfo-wrap-photo-box"]},[r("u-image",{staticClass:["foot-anchorinfo-wrap-photo"],attrs:{src:e.live_user.supplier.logo.file_path,mode:"aspectFill"}})],1)])])]):e._e()},i=[]},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.popupVisible?r("view",{staticClass:["wrap__giftPanel"]},[r("view",{staticClass:["wrapgift-mask"],on:{click:e.close}}),r("view",{staticClass:["pop__ui_child","anim-footer"]},[e.showSlider?r("div",{staticClass:["progress-bar"],on:{click:function(e){}}},[r("u-slider",{attrs:{value:e.value,activeColor:"#f72b6c",backgroundColor:"#FFFFFF",blockColor:"#FFFFFF",min:0,max:9,showValue:!0},on:{change:e.sliderChange}})],1):e._e(),r("div",{staticClass:["more-box"],on:{click:function(e){}}},[r("div",{staticClass:["more-list"],class:{"more-list-active":0==e.activeIndex},on:{click:e.setBeauty}},[r("u-text",{staticClass:["icon","iconfont","icon-meiyan","i-btntool","more-icont"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\ue65c")]),r("u-text",{staticClass:["f28","white","mt20"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u7f8e\u989c")])]),r("div",{staticClass:["more-list"],class:{"more-list-active":1==e.activeIndex},on:{click:e.setWhiteness}},[r("u-text",{staticClass:["icon","iconfont","icon-meibai","i-btntool","more-icont"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\ue63a")]),r("u-text",{staticClass:["f28","white","mt20"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u7f8e\u767d")])]),r("div",{staticClass:["more-list"],class:{"more-list-active":2==e.activeIndex},on:{click:e.setDevice}},[r("u-text",{staticClass:["icon","iconfont","icon-iconset0243","i-btntool","more-icont"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\ue68e")]),r("u-text",{staticClass:["f28","white","mt20"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u76f8\u673a\u5207\u6362")])])])])]):e._e()},i=[]},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this.$createElement,t=this._self._c||e;return this.popupVisible?t("view",{staticClass:["wrap__giftPanel"]},[t("view",{staticClass:["wrapgift-mask"],on:{click:this.close}}),t("view",{staticClass:["pop__ui_child","anim-footer"]},[t("div",{staticClass:["more-box"],on:{click:function(e){}}},[t("div",{staticClass:["more-list"],on:{click:this.share}},[t("button",{staticClass:["icon","iconfont","icon-weixin","i-btntool","more-icont"],attrs:{openType:"share"}}),t("u-text",{staticClass:["f28","white","mt20"],appendAsTree:!0,attrs:{append:"tree"}},[this._v("\u5206\u4eab\u5fae\u4fe1\u597d\u53cb")])],1),t("div",{staticClass:["more-list"],on:{click:this.getPoster}},[t("button",{staticClass:["icon","iconfont","icon-jingmeihaibao","i-btntool","more-icont"]}),t("u-text",{staticClass:["f28","white","mt20"],appendAsTree:!0,attrs:{append:"tree"}},[this._v("\u751f\u6210\u6d77\u62a5")])],1)])])]):this._e()},i=[]},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.popupVisible?r("view",{staticClass:["popup-footer"]},[r("view",{staticClass:["pop__ui_panel"]},[r("view",{staticClass:["pop__ui_mask"],on:{click:e.close}}),r("view",{staticClass:["pop__ui_child","anim-footer"],on:{click:function(e){}}},[r("div",[e._m(0),r("scroll-view",{staticStyle:{height:"700rpx"},attrs:{scrollY:"true"}},[e.listData.length>0?r("list",{staticClass:["add-product-list"],attrs:{loadmoreoffset:10},on:{loadmore:e.loadmoreFunc}},e._l(e.listData,(function(t,n){return r("cell",{key:n,staticClass:["add-product-item","d-s-s"],appendAsTree:!0,attrs:{append:"tree"}},[0==n?r("u-text",{staticClass:["gift-num","ml20","white","f26","fir"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(n+1))]):e._e(),1==n?r("u-text",{staticClass:["gift-num","ml20","white","f26","sec"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(n+1))]):e._e(),2==n?r("u-text",{staticClass:["gift-num","ml20","white","f26","thr"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(n+1))]):e._e(),0!=n&&1!=n&&2!=n?r("u-text",{staticClass:["gift-num","ml20","white","f26"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(n+1))]):e._e(),r("view",[r("u-image",{staticClass:["add-product-picture-image","ml20"],attrs:{src:t.user.avatarUrl,mode:"aspectFill"}})],1),r("u-text",{staticClass:["user-name","f30","ml20"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(t.user.nickName))]),r("u-text",{staticClass:["rose","f30","f-w","mr20","red","mt30"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("+"+e._s(t.gift_num))])])})),0):e._e(),e.listData.length<=0&&""!=e.listData?r("div",{staticClass:["gift-null"]},[r("u-text",{staticClass:["f32"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u6682\u65e0\u8bb0\u5f55")])]):e._e()])],1)])])]):e._e()},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:["add-product-head","p20","f30"]},[t("u-text",{staticClass:["f30"],appendAsTree:!0,attrs:{append:"tree"}},[this._v("\u793c\u7269\u6392\u884c")])])}]},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this.$createElement,t=this._self._c||e;return t("view",{staticClass:["animate-wrap"]},this._l(this.viewList,(function(e,r){return t("view",{key:r,ref:"test",refInFor:!0,staticClass:["aa"],class:{bb:e.index}},[t("u-image",{staticStyle:{width:"65rpx",height:"65rpx"},attrs:{mode:"widthFix",src:e.src,animation:e.animationData}})],1)})),0)},i=[]},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("view",{staticClass:["share-shadow"],style:"height:"+e.winHeight+" ;"},[r("view",{staticClass:["share-wrap"]},[r("view",{staticClass:["content","ww100"]},[r("u-image",{attrs:{src:e.qrcode,mode:"widthFix"}}),r("button",{staticClass:["btn-rose-shadow","mt20"],attrs:{type:"default"},on:{click:e.savePosterImg}},[e._v("\u4fdd\u5b58\u56fe\u7247")])],1),r("view",{staticClass:["close-btns"],on:{click:function(t){e.hidePopupFunc(!0)}}},[r("u-text",{staticClass:["icon","iconfont","icon-guanbi"],appendAsTree:!0,attrs:{append:"tree"}})])])])},i=[]},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("view",{staticClass:["countdown"]},[null==e.config.type?[0==e.status?r("u-text",{appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.title))]):e._e(),1==e.status?r("u-text",{appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u6d3b\u52a8\u5177\u4f53\u65f6\u95f4\uff1a")]):e._e(),2==e.status?r("u-text",{appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u6d3b\u52a8\u7ed3\u675f\u65f6\u95f4\uff1a")]):e._e(),r("u-text",{staticClass:["box"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.day))]),r("u-text",{staticClass:["p-0-10"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u5929")]),r("u-text",{staticClass:["box"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.hour))]),r("u-text",{staticClass:["p-0-10"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u65f6")]),r("u-text",{staticClass:["box"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.minute))]),r("u-text",{staticClass:["p-0-10"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u5206")]),r("u-text",{staticClass:["box"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(e.second))]),r("u-text",{staticClass:["p-0-10"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u79d2")])]:e._e(),"text"===e.config.type?[r("u-text",[e._v(e._s(e.title)+e._s(parseInt(24*e.day)+parseInt(e.hour))+":"+e._s(e.minute)+":"+e._s(e.second))])]:e._e()],2)},i=[]},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.popupVisible?r("view",{staticClass:["wrap__giftPanel"],class:e.Visible?"bottom-panel open":"bottom-panel close",on:{click:e.closePopup}},[r("view",{staticClass:["wrapgift-mask"],on:{click:e.closePopup}}),r("view",{staticClass:["pop__ui_child","anim-footer"]},[e.showSlider?r("view",{staticClass:["progress-bar"],on:{click:function(e){}}},[r("u-slider",{attrs:{value:e.value,activeColor:"#f72b6c",backgroundColor:"#FFFFFF",blockColor:"#FFFFFF",min:0,max:9,showValue:!0},on:{change:e.sliderChange}})],1):e._e(),r("view",{staticClass:["more-box"],on:{click:function(e){}}},[r("button",{staticClass:["more-list"],attrs:{openType:"share"},on:{click:function(t){e.share(0,"WXSceneSession")}}},[r("u-text",{staticClass:["icon","iconfont","icon-weixin","i-btntool","more-icont"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\ue621")]),r("u-text",{staticClass:["f28","white","mt20"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u5fae\u4fe1\u597d\u53cb")])]),r("button",{staticClass:["more-list"],on:{click:function(t){e.share(0,"WXSenceTimeline")}}},[r("u-text",{staticClass:["icon","iconfont","icon-fenxiang","i-btntool","more-icont"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\ue617")]),r("u-text",{staticClass:["f28","white","mt20"],appendAsTree:!0,attrs:{append:"tree"}},[e._v("\u5fae\u4fe1\u670b\u53cb\u5708")])])],1)])]):e._e()},i=[]},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("view",{staticClass:["load-more"]},[r("view",{directives:[{name:"show",rawName:"v-show",value:1===e.loadingType&&e.showImage,expression:"loadingType === 1 && showImage"}],staticClass:["loading-img"]},[r("view",{staticClass:["load1"]},[r("view",{style:{background:e.color}}),r("view",{style:{background:e.color}}),r("view",{style:{background:e.color}}),r("view",{style:{background:e.color}})]),r("view",{staticClass:["load2"]},[r("view",{style:{background:e.color}}),r("view",{style:{background:e.color}}),r("view",{style:{background:e.color}}),r("view",{style:{background:e.color}})]),r("view",{staticClass:["load3"]},[r("view",{style:{background:e.color}}),r("view",{style:{background:e.color}}),r("view",{style:{background:e.color}}),r("view",{style:{background:e.color}})])]),r("u-text",{staticClass:["loading-text"],style:{color:e.color},appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(0===e.loadingType?e.contentText.contentdown:1===e.loadingType?e.contentText.contentrefresh:e.contentText.contentnomore))])])},i=[]},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(81);function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}e.exports=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t,n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={scene_decode:function(e){if(void 0===e)return{};var t=decodeURIComponent(e).split(","),r={};for(var n in t){var i=t[n].split(":");i.length>0&&i[0]&&(r[i[0]]=i[1]||null)}return r},format_date:function(e){return e.replace(/\-/g,"/")},format_content:function(e){return e.replace(/\<img/gi,'<img style="display:block; margin:0 auto; max-width:100%;" ')},urlEncode:function(e){var t=[];for(var r in e){var n=e[r];n.constructor==Array?n.forEach((function(e){t.push(r+"="+e)})):t.push(r+"="+n)}return t.join("&")},objForEach:function(e,t){Object.keys(e).forEach((function(r){t(e[r],r)}))},inArray:function(e,t){for(var r in t)if(t[r]==e)return!0;return!1},isPositiveInteger:function(e){return/(^[0-9]\d*$)/.test(e)},getSceneData:function(e){return e.scene?this.scene_decode(e.scene):{}},isVail:function(e){if(!/^\d{17}(\d|x)$/i.test(e))return!1;var t=new Date,r=Number(e.substr(6,4)),n=Number(e.substr(10,2))+1,i=Number(e.substr(12,2)),o=!1;r<=Number(t.getFullYear())&&r>0&&(n<=12&&n>0&&i<=new Date(r,n-1,0).getDate()&&i>0&&(o=!0));if(!o)return!1;var a=0;e=e.replace(/x$/i,"a");for(var s=17;s>=0;s--)a+=Math.pow(2,s)%11*parseInt(e.charAt(17-s),11);return a%11==1},isPoneAvailable:function(e){return!!/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(e)},isTelAvailable:function(e){var t=!1;return/^(([0\+]\d{2,3}-)?(0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/.test(e)&&(t=!0),/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(e)&&(t=!0),!!t},isMail:function(e){return!!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)},isNum:function(e){return!!/^[0-9]*$/.test(e)}};t.default=n},function(e,t,r){"use strict";r.r(t);var n=r(69),i=r(11);for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0);var s=Object(a.a)(i.default,n.b,n.c,!1,null,null,"5cc400c5",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(r(76).default,this.options.style):Object.assign(this.options.style,r(76).default)}).call(s),t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(13),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";r.r(t);var n=r(14),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";r.r(t);var n=r(17),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62,0,62,0,63,52,53,54,55,56,57,58,59,60,61,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,0,0,0,63,0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];var n={getRandomValues:function(t){if(!(t instanceof Int8Array||t instanceof Uint8Array||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8ClampedArray))throw new Error("Expected an integer array");if(t.byteLength>65536)throw new Error("Can only request a maximum of 65536 bytes");return function(e,t){for(var n,i=e.length,o="="===e[i-2]?2:"="===e[i-1]?1:0,a=0,s=i-o&4294967292,u=0;u<s;u+=4)n=r[e.charCodeAt(u)]<<18|r[e.charCodeAt(u+1)]<<12|r[e.charCodeAt(u+2)]<<6|r[e.charCodeAt(u+3)],t[a++]=n>>16&255,t[a++]=n>>8&255,t[a++]=255&n;1===o&&(n=r[e.charCodeAt(u)]<<10|r[e.charCodeAt(u+1)]<<4|r[e.charCodeAt(u+2)]>>2,t[a++]=n>>8&255,t[a++]=255&n),2===o&&(n=r[e.charCodeAt(u)]<<2|r[e.charCodeAt(u+1)]>>4,t[a++]=255&n)}(e("DCloud-Crypto").getRandomValues(t.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t}};t.default=n}).call(this,r(107).default)},function(e,t,r){var n=r(2),i=r(109)();e.exports=i;try{regeneratorRuntime=i}catch(e){"object"===("undefined"==typeof globalThis?"undefined":n(globalThis))?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},function(e,t,r){var n=r(2).default,i=r(110);e.exports=function(e){var t=i(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(73);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(2).default,i=r(72);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(85);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=["\ud83d\ude00","\ud83d\ude01","\ud83d\ude03","\ud83d\ude04","\ud83d\ude05","\ud83d\ude06","\ud83d\ude09","\ud83d\ude0a","\ud83d\ude0b","\ud83d\ude0e","\ud83d\ude0d","\ud83d\ude18","\ud83d\ude17","\ud83d\ude19","\ud83d\ude1a","\u263a","\ud83d\ude07","\ud83d\ude10","\ud83d\ude11","\ud83d\ude36","\ud83d\ude0f","\ud83d\ude23","\ud83d\ude25","\ud83d\ude2e","\ud83d\ude2f","\ud83d\ude2a","\ud83d\ude2b","\ud83d\ude34","\ud83d\ude0c","\ud83d\ude1b","\ud83d\ude1c","\ud83d\ude1d","\ud83d\ude12","\ud83d\ude13","\ud83d\ude14","\ud83d\ude15","\ud83d\ude32","\ud83d\ude37","\ud83d\ude16","\ud83d\ude1e","\ud83d\ude1f","\ud83d\ude24","\ud83d\ude22","\ud83d\ude2d","\ud83d\ude26","\ud83d\ude27","\ud83d\ude28","\ud83d\ude2c","\ud83d\ude30","\ud83d\ude31","\ud83d\ude33","\ud83d\ude35","\ud83d\ude21","\ud83d\ude20","\ud83d\udc66","\ud83d\udc67","\ud83d\udc68","\ud83d\udc69","\ud83d\udc74","\ud83d\udc75","\ud83d\udc76","\ud83d\udc71","\ud83d\udc6e","\ud83d\udc72","\ud83d\udc73","\ud83d\udc77","\ud83d\udc78","\ud83d\udc82","\ud83c\udf85","\ud83d\udc70","\ud83d\udc7c","\ud83d\udc86","\ud83d\udc87","\ud83d\ude4d","\ud83d\ude4e","\ud83d\ude45","\ud83d\ude46","\ud83d\udc81","\ud83d\ude4b","\ud83d\ude47","\ud83d\ude4c","\ud83d\ude4f","\ud83d\udc64","\ud83d\udc65","\ud83d\udeb6","\ud83c\udfc3","\ud83d\udc6f","\ud83d\udc83","\ud83d\udc6b","\ud83d\udc6c","\ud83d\udc6d","\ud83d\udc8f","\ud83d\udc91","\ud83d\udc6a","\ud83d\udcaa","\ud83d\udc48","\ud83d\udc49","\u261d","\ud83d\udc46","\ud83d\udc47","\u270c","\u270b","\ud83d\udc4c","\ud83d\udc4d","\ud83d\udc4e","\u270a","\ud83d\udc4a","\ud83d\udc4b","\ud83d\udc4f","\ud83d\udc50","\u270d","\ud83d\udc63","\ud83d\udc40","\ud83d\udc42","\ud83d\udc43","\ud83d\udc45","\ud83d\udc44","\ud83d\udc8b","\ud83d\udc53","\ud83d\udc54","\ud83d\udc55","\ud83d\udc56","\ud83d\udc57","\ud83d\udc58","\ud83d\udc59","\ud83d\udc5b","\ud83d\udc5c","\ud83d\udc5d","\ud83c\udf92","\ud83d\udcbc","\ud83d\udc5e","\ud83d\udc5f","\ud83d\udc60","\ud83d\udc61","\ud83d\udc62","\ud83d\udc51","\ud83d\udc52","\ud83c\udfa9","\ud83c\udf93","\ud83d\udc84","\ud83d\udc85","\ud83d\udc8d","\ud83c\udf02","\ud83d\udcf6","\ud83d\udcf3","\ud83d\udcf4","\u267b","\ud83c\udfe7","\ud83d\udeae","\ud83d\udeb0","\u267f","\ud83d\udeb9","\ud83d\udeba","\ud83d\udebb","\ud83d\udebc","\ud83d\udebe","\u26a0","\ud83d\udeb8","\u26d4","\ud83d\udeab","\ud83d\udeb3","\ud83d\udead","\ud83d\udeaf","\ud83d\udeb1","\ud83d\udeb7","\ud83d\udd1e","\ud83d\udc88","\ud83d\ude48","\ud83d\ude49","\ud83d\ude4a","\ud83d\udc35","\ud83d\udc12","\ud83d\udc36","\ud83d\udc15","\ud83d\udc29","\ud83d\udc3a","\ud83d\udc31","\ud83d\ude3a","\ud83d\ude38","\ud83d\ude39","\ud83d\ude3b","\ud83d\ude3c","\ud83d\ude3d","\ud83d\ude40","\ud83d\ude3f","\ud83d\ude3e","\ud83d\udc08","\ud83d\udc2f","\ud83d\udc05","\ud83d\udc06","\ud83d\udc34","\ud83d\udc0e","\ud83d\udc2e","\ud83d\udc02","\ud83d\udc03","\ud83d\udc04","\ud83d\udc37","\ud83d\udc16","\ud83d\udc17","\ud83d\udc3d","\ud83d\udc0f","\ud83d\udc11","\ud83d\udc10","\ud83d\udc2a","\ud83d\udc2b","\ud83d\udc18","\ud83d\udc2d","\ud83d\udc01","\ud83d\udc00","\ud83d\udc39","\ud83d\udc30","\ud83d\udc07","\ud83d\udc3b","\ud83d\udc28","\ud83d\udc3c","\ud83d\udc3e","\ud83d\udc14","\ud83d\udc13","\ud83d\udc23","\ud83d\udc24","\ud83d\udc25","\ud83d\udc26","\ud83d\udc27","\ud83d\udc38","\ud83d\udc0a","\ud83d\udc22","\ud83d\udc0d","\ud83d\udc32","\ud83d\udc09","\ud83d\udc33","\ud83d\udc0b","\ud83d\udc2c","\ud83d\udc1f","\ud83d\udc20","\ud83d\udc21","\ud83d\udc19","\ud83d\udc1a","\ud83d\udc0c","\ud83d\udc1b","\ud83d\udc1c","\ud83d\udc1d","\ud83d\udc1e","\ud83e\udd8b","\ud83d\udc90","\ud83c\udf38","\ud83d\udcae","\ud83c\udf39","\ud83c\udf3a","\ud83c\udf3b","\ud83c\udf3c","\ud83c\udf37","\ud83c\udf31","\ud83c\udf32","\ud83c\udf33","\ud83c\udf34","\ud83c\udf35","\ud83c\udf3e","\ud83c\udf3f","\ud83c\udf40","\ud83c\udf41","\ud83c\udf42","\ud83c\udf43","\ud83c\udf0d","\ud83c\udf0e","\ud83c\udf0f","\ud83c\udf10","\ud83c\udf11","\ud83c\udf12","\ud83c\udf13","\ud83c\udf14","\ud83c\udf15","\ud83c\udf16","\ud83c\udf17","\ud83c\udf18","\ud83c\udf19","\ud83c\udf1a","\ud83c\udf1b","\ud83c\udf1c","\u2600","\ud83c\udf1d","\ud83c\udf1e","\u2b50","\ud83c\udf1f","\ud83c\udf20","\u2601","\u26c5","\u2614","\u26a1","\u2744","\ud83d\udd25","\ud83d\udca7","\ud83c\udf0a","\ud83c\udf45","\ud83c\udf46","\ud83c\udf3d","\ud83c\udf44","\ud83c\udf30","\ud83c\udf5e","\ud83c\udf56","\ud83c\udf57","\ud83c\udf54","\ud83c\udf5f","\ud83c\udf55","\ud83c\udf73","\ud83c\udf72","\ud83c\udf71","\ud83c\udf58","\ud83c\udf59","\ud83c\udf5a","\ud83c\udf5b","\ud83c\udf5c","\ud83c\udf5d","\ud83c\udf60","\ud83c\udf62","\ud83c\udf63","\ud83c\udf64","\ud83c\udf65","\ud83c\udf61","\ud83c\udf66","\ud83c\udf67","\ud83c\udf68","\ud83c\udf69","\ud83c\udf6a","\ud83c\udf82","\ud83c\udf70","\ud83c\udf6b","\ud83c\udf6c","\ud83c\udf6d","\ud83c\udf6e","\ud83c\udf6f","\ud83c\udf7c","\u2615","\ud83c\udf75","\ud83c\udf76","\ud83c\udf77","\ud83c\udf78","\ud83c\udf79","\ud83c\udf7a","\ud83c\udf7b","\ud83c\udf74","\ud83c\udfaa","\ud83c\udfad","\ud83c\udfa8","\ud83c\udfb0","\ud83d\udea3","\ud83d\udec0","\ud83c\udfab","\ud83c\udfc6","\u26bd","\u26be","\ud83c\udfc0","\ud83c\udfc8","\ud83c\udfc9","\ud83c\udfbe","\ud83c\udfb1","\ud83c\udfb3","\u26f3","\ud83c\udfa3","\ud83c\udfbd","\ud83c\udfbf","\ud83c\udfc2","\ud83c\udfc4","\ud83c\udfc7","\ud83c\udfca","\ud83d\udeb4","\ud83d\udeb5","\ud83c\udfaf","\ud83c\udfae","\ud83c\udfb2","\ud83c\udfb7","\ud83c\udfb8","\ud83c\udfba","\ud83c\udfbb","\ud83c\udfac","\ud83d\ude08","\ud83d\udc7f","\ud83d\udc79","\ud83d\udc7a","\ud83d\udc80","\u2620","\ud83d\udc7b","\ud83d\udc7d","\ud83d\udc7e","\ud83d\udca3","\ud83c\udf0b","\ud83d\uddfb","\ud83c\udfe0","\ud83c\udfe1","\ud83c\udfe2","\ud83c\udfe3","\ud83c\udfe4","\ud83c\udfe5","\ud83c\udfe6","\ud83c\udfe8","\ud83c\udfe9","\ud83c\udfea","\ud83c\udfeb","\ud83c\udfec","\ud83c\udfed","\ud83c\udfef","\ud83c\udff0","\ud83d\udc92","\ud83d\uddfc","\ud83d\uddfd","\u26ea","\u26f2","\ud83c\udf01","\ud83c\udf03","\ud83c\udf06","\ud83c\udf07","\ud83c\udf09","\ud83c\udf0c","\ud83c\udfa0","\ud83c\udfa1","\ud83c\udfa2","\ud83d\ude82","\ud83d\ude83","\ud83d\ude84","\ud83d\ude85","\ud83d\ude86","\ud83d\ude87","\ud83d\ude88","\ud83d\ude89","\ud83d\ude8a","\ud83d\ude9d","\ud83d\ude9e","\ud83d\ude8b","\ud83d\ude8c","\ud83d\ude8d","\ud83d\ude8e","\ud83d\ude8f","\ud83d\ude90","\ud83d\ude91","\ud83d\ude92","\ud83d\ude93","\ud83d\ude94","\ud83d\ude95","\ud83d\ude96","\ud83d\ude97","\ud83d\ude98","\ud83d\ude9a","\ud83d\ude9b","\ud83d\ude9c","\ud83d\udeb2","\u26fd","\ud83d\udea8","\ud83d\udea5","\ud83d\udea6","\ud83d\udea7","\u2693","\u26f5","\ud83d\udea4","\ud83d\udea2","\u2708","\ud83d\udcba","\ud83d\ude81","\ud83d\ude9f","\ud83d\udea0","\ud83d\udea1","\ud83d\ude80","\ud83c\udf91","\ud83d\uddff","\ud83d\udec2","\ud83d\udec3","\ud83d\udec4","\ud83d\udec5","\ud83d\udc8c","\ud83d\udc8e","\ud83d\udd2a","\ud83d\udc88","\ud83d\udeaa","\ud83d\udebd","\ud83d\udebf","\ud83d\udec1","\u231b","\u23f3","\u231a","\u23f0","\ud83c\udf88","\ud83c\udf89","\ud83c\udf8a","\ud83c\udf8e","\ud83c\udf8f","\ud83c\udf90","\ud83c\udf80","\ud83c\udf81","\ud83d\udcef","\ud83d\udcfb","\ud83d\udcf1","\ud83d\udcf2","\u260e","\ud83d\udcde","\ud83d\udcdf","\ud83d\udce0","\ud83d\udd0b","\ud83d\udd0c","\ud83d\udcbb","\ud83d\udcbd","\ud83d\udcbe","\ud83d\udcbf","\ud83d\udcc0","\ud83c\udfa5","\ud83d\udcfa","\ud83d\udcf7","\ud83d\udcf9","\ud83d\udcfc","\ud83d\udd0d","\ud83d\udd0e","\ud83d\udd2c","\ud83d\udd2d","\ud83d\udce1","\ud83d\udca1","\ud83d\udd26","\ud83c\udfee","\ud83d\udcd4","\ud83d\udcd5","\ud83d\udcd6","\ud83d\udcd7","\ud83d\udcd8","\ud83d\udcd9","\ud83d\udcda","\ud83d\udcd3","\ud83d\udcc3","\ud83d\udcdc","\ud83d\udcc4","\ud83d\udcf0","\ud83d\udcd1","\ud83d\udd16","\ud83d\udcb0","\ud83d\udcb4","\ud83d\udcb5","\ud83d\udcb6","\ud83d\udcb7","\ud83d\udcb8","\ud83d\udcb3","\u2709","\ud83d\udce7","\ud83d\udce8","\ud83d\udce9","\ud83d\udce4","\ud83d\udce5","\ud83d\udce6","\ud83d\udceb","\ud83d\udcea","\ud83d\udcec","\ud83d\udced","\ud83d\udcee","\u270f","\u2712\ud83d\udcdd","\ud83d\udcc1","\ud83d\udcc2","\ud83d\udcc5","\ud83d\udcc6","\ud83d\udcc7","\ud83d\udcc8","\ud83d\udcc9","\ud83d\udcca","\ud83d\udccb","\ud83d\udccc","\ud83d\udccd","\ud83d\udcce\ud83d\udccf\ud83d\udcd0","\u2702","\ud83d\udd12","\ud83d\udd13","\ud83d\udd0f","\ud83d\udd10","\ud83d\udd11","\ud83d\udd28","\ud83d\udd2b","\ud83d\udd27","\ud83d\udd29","\ud83d\udd17","\ud83d\udc89","\ud83d\udc8a","\ud83d\udeac","\ud83d\udd2e\ud83d\udea9","\ud83c\udf8c","\ud83d\udca6","\ud83d\udca8","\u2660","\u2665","\u2666","\u2663","\ud83c\udc04","\ud83c\udfb4","\ud83d\udd07","\ud83d\udd08","\ud83d\udd09","\ud83d\udd0a","\ud83d\udce2","\ud83d\udce3","\ud83d\udca4","\ud83d\udca2","\ud83d\udcac","\ud83d\udcad","\u2668","\ud83c\udf00","\ud83d\udd14","\ud83d\udd15","\u2721","\u271d","\ud83d\udd2f","\ud83d\udcdb","\ud83d\udd30","\ud83d\udd31","\u2b55","\u2705","\u2611","\u2714","\u2716","\u274c","\u274e","\u2795","\u2796","\u2797","\u27b0","\u27bf","\u303d","\u2733","\u2734","\u2747","\u203c","\u2049","\u2753","\u2754","\u2755","\u2757","\xa9\xae","\u2122\ud83c\udfa6\ud83d\udd05","\ud83d\udd06","\ud83d\udcaf","\ud83d\udd20","\ud83d\udd21","\ud83d\udd22","\ud83d\udd23","\ud83d\udd24","\ud83c\udd70","\ud83c\udd8e","\ud83c\udd71","\ud83c\udd91","\ud83c\udd92","\ud83c\udd93","\u2139\ud83c\udd94","\u24c2","\ud83c\udd95","\ud83c\udd96","\ud83c\udd7e","\ud83c\udd97","\ud83c\udd7f","\ud83c\udd98","\ud83c\udd99","\ud83c\udd9a","\ud83c\ude01","\ud83c\ude02","\ud83c\ude37","\ud83c\ude36","\ud83c\ude2f","\ud83c\ude50","\ud83c\ude39","\ud83c\ude1a","\ud83c\ude32","\ud83c\ude51","\ud83c\ude38","\ud83c\ude34","\ud83c\ude33","\u3297","\u3299","\ud83c\ude3a","\ud83c\ude35","\u25aa","\u25ab","\u25fb","\u25fc\u25fd","\u25fe","\u2b1b","\u2b1c","\ud83d\udd36","\ud83d\udd37","\ud83d\udd38","\ud83d\udd39","\ud83d\udd3a","\ud83d\udd3b","\ud83d\udca0","\ud83d\udd32","\ud83d\udd33","\u26aa","\u26ab","\ud83d\udd34","\ud83d\udd35","\u2648","\u2649","\u264a","\u264b","\u264c","\u264d","\u264e","\u264f","\u2650","\u2651","\u2652","\u2653","\u26ce","\ud83d\udd5b","\ud83d\udd67","\ud83d\udd50","\ud83d\udd5c","\ud83d\udd51","\ud83d\udd5d","\ud83d\udd52","\ud83d\udd5e","\ud83d\udd53","\ud83d\udd5f","\ud83d\udd54","\ud83d\udd60","\ud83d\udd55","\ud83d\udd61","\ud83d\udd56","\ud83d\udd62","\ud83d\udd57","\ud83d\udd63","\ud83d\udd58","\ud83d\udd64","\ud83d\udd59","\ud83d\udd65","\ud83d\udd5a","\ud83d\udd66","\u23f1","\u23f2","\ud83d\udd70","\ud83d\udc98","\u2764","\ud83d\udc93","\ud83d\udc94","\ud83d\udc95","\ud83d\udc96","\ud83d\udc97","\ud83d\udc99","\ud83d\udc9a","\ud83d\udc9b","\ud83d\udc9c","\ud83d\udc9d","\ud83d\udc9e","\ud83d\udc9f\u2763","\ud83c\udf47","\ud83c\udf48","\ud83c\udf49","\ud83c\udf4a","\ud83c\udf4b","\ud83c\udf4c","\ud83c\udf4d","\ud83c\udf4e","\ud83c\udf4f","\ud83c\udf50","\ud83c\udf51","\ud83c\udf52","\ud83c\udf53","\u2b06","\u2197","\u27a1","\u2198","\u2b07","\u2199","\u2b05","\u2196","\u2195","\u2194","\u21a9","\u21aa","\u2934","\u2935","\ud83d\udd03","\ud83d\udd04","\ud83d\udd19","\ud83d\udd1a","\ud83d\udd1b","\ud83d\udd1c","\ud83d\udd1d","\u265a","\u265b","\u265d","\u265e","\u265c","\u265f","\u2654","\u2655","\u2657","\u2658","\u2656"]},function(e,t,r){"use strict";r.r(t);var n=r(22),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";r.r(t);var n=r(25),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";r.r(t);var n=r(28),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";r.r(t);var n=r(31),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";r.r(t);var n=r(34),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";r.r(t);var n=r(37),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";r.r(t);var n=r(40),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";r.r(t);var n=r(43),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";r.r(t);var n=r(46),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";r.r(t);var n=r(49),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";r.r(t);var n=r(52),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";r.r(t);var n=r(53),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t,r){"use strict";r.r(t);r(100),r(102);var n=r(3);n.default.mpType="page",n.default.route="pagesLive/live/live",n.default.el="#root",new Vue(n.default)},function(e,t,r){Vue.prototype.__$appStyle__={},Vue.prototype.__merge_style&&Vue.prototype.__merge_style(r(101).default,Vue.prototype.__$appStyle__)},function(e,t,r){"use strict";r.r(t);var n=r(6),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},function(e,t){if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){var r=uni.requireGlobal();ArrayBuffer=r.ArrayBuffer,Int8Array=r.Int8Array,Uint8Array=r.Uint8Array,Uint8ClampedArray=r.Uint8ClampedArray,Int16Array=r.Int16Array,Uint16Array=r.Uint16Array,Int32Array=r.Int32Array,Uint32Array=r.Uint32Array,Float32Array=r.Float32Array,Float64Array=r.Float64Array,BigInt64Array=r.BigInt64Array,BigUint64Array=r.BigUint64Array}},function(e,t,r){"use strict";r.r(t);var n=r(55),i=r(9);for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0);var s=Object(a.a)(i.default,n.b,n.c,!1,null,"4d79e7b2","09781e82",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(r(77).default,this.options.style):Object.assign(this.options.style,r(77).default)}).call(s),t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(56),i=r(15);for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0);var s=Object(a.a)(i.default,n.b,n.c,!1,null,"4ef428de","1ec87a72",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(r(78).default,this.options.style):Object.assign(this.options.style,r(78).default)}).call(s),t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(57),i=r(18);for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0);var s=Object(a.a)(i.default,n.b,n.c,!1,null,"a209b68e","85b314b2",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style)}).call(s),t.default=s.exports},function(module,exports,__webpack_require__){(function(__f__,crypto,module){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,_regeneratorRuntime=__webpack_require__(80),_classCallCheck=__webpack_require__(70),_createClass=__webpack_require__(71),_assertThisInitialized=__webpack_require__(72),_inherits=__webpack_require__(82),_possibleConstructorReturn=__webpack_require__(83),_getPrototypeOf=__webpack_require__(5),_typeof=__webpack_require__(2),t;function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}window,t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==_typeof(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=54)}([function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(36)),a=r(5),s=i(r(1)),u=r(6),c=r(4),l=function(){},p=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,i){var o;return _classCallCheck(this,r),(o=t.call(this))._state=_.RELAY_STATE_IDLE,o._onStatus=function(e){s.default.debug("[".concat(o.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&o.emit("event",h.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&o.emit("event",h.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(o._state=_.RELAY_STATE_FAILURE,o.emit("state",_.RELAY_STATE_FAILURE,g.SRC_TOKEN_EXPIRED)),"onDestTokenPrivilegeDidExpire"===e.command&&(o._state=_.RELAY_STATE_FAILURE,o.emit("state",_.RELAY_STATE_FAILURE,g.DEST_TOKEN_EXPIRED,e.channelName?{came:e.channelName}:null)))},o._onClose=function(){return n(_assertThisInitialized(o),void 0,void 0,_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.default.debug("[".concat(this.clientId,"] ChannelMediaSocket onClose")),this.emit("event",h.NETWORK_DISCONNECTED),this.state=_.RELAY_STATE_IDLE,!this._prevChannelMediaConfig){e.next=11;break}return e.prev=1,e.next=4,this.startChannelMediaRelay(this._prevChannelMediaConfig);case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),!(e.t0 instanceof b)||e.t0.message!==d.WS_ABORT&&e.t0.message!==d.AP_REQUEST_ABORT){e.next=10;break}return e.abrupt("return");case 10:this.emit("state",_.RELAY_STATE_FAILURE,g.SERVER_CONNECTION_LOST);case 11:case"end":return e.stop()}}),e,this,[[1,6]])})))},o.token=e.appId,o.appId=e.appId,o.cname=e.cname,o.uid=e.uid,o.sid=e.sid,o.clientId=i,o}return _createClass(r,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;this._state=e,t!==e&&this.emit("state",e)}},{key:"startChannelMediaRelay",value:function(e){return n(this,void 0,void 0,_regeneratorRuntime.mark((function t(){return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state===_.RELAY_STATE_IDLE){t.next=2;break}throw new b(d.BAD_STATE);case 2:return this.state=_.RELAY_STATE_CONNECTING,t.next=5,this._connect();case 5:return s.default.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success")),t.next=8,this._sendStartRelayMessage(e);case 8:this._prevChannelMediaConfig=e;case 9:case"end":return t.stop()}}),t,this)})))}},{key:"updateChannelMediaRelay",value:function(e){return n(this,void 0,void 0,_regeneratorRuntime.mark((function t(){return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state===_.RELAY_STATE_RUNNING){t.next=2;break}throw new b(d.BAD_STATE);case 2:return t.next=4,this._sendUpdateMessage(e);case 4:this._prevChannelMediaConfig=e;case 5:case"end":return t.stop()}}),t,this)})))}},{key:"stopChannelMediaRelay",value:function(){return n(this,void 0,void 0,_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._sendStopRelayMessage();case 2:s.default.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=_.RELAY_STATE_IDLE,this.dispose();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){s.default.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.state=_.RELAY_STATE_IDLE,this.emit("dispose"),this._signal&&this._signal.dispose(),this._prevChannelMediaConfig=null,this.removeEvent()}},{key:"_requestOneAP",value:function(e){var t=this;return new Promise((function(r,n){var i={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:"",ts:+new Date,version:a.VERSION,cname:t.cname,uid:t.uid+"",seq:1,requestId:1},o={service_name:"tele_channel",json_body:JSON.stringify(i)},s="https://"+e;wx.request({url:s,data:o,header:{"content-type":"application/json","X-Packet-Service-Type":0,"X-Packet-URI":61},method:"POST",success:function(e){var t=null,i=null;try{t=e.data}catch(e){n(new b(d.AP_JSON_PARSE_ERROR,e))}0!==t.code&&n(new b(d.AP_REQUEST_ERROR,t));try{i=JSON.parse(t.json_body)}catch(e){n(new b(d.AP_JSON_PARSE_ERROR,e))}200!==i.code&&n(new b(d.AP_REQUEST_ERROR,i)),i.servers?r(i.servers):n(new b(d.AP_JSON_PARSE_ERROR,i))},fail:function(e){return n(e)}})}))}},{key:"_requestAP",value:function(){var e=this,t=["uap-ap-web-1.agora.io","uap-ap-web-2.agoraio.cn","uap-ap-web-3.agora.io","uap-ap-web-4.agoraio.cn"];return new Promise((function(r,n){setTimeout((function(){n(new b(d.AP_REQUEST_TIMEOUT))}),3e3),e.on("dispose",(function(){n(new b(d.AP_REQUEST_ABORT))})),t.forEach((function(t){t+="/api/v1",e._requestOneAP(t).then((function(n){s.default.debug("[".concat(e.clientId,"] startChannelMediaRelay request AP ").concat(t," success: ").concat(JSON.stringify(n)));var i=n[0],o=(t=i.address).split("."),a=o.length,u="wss://miniapp.agoraio.cn/".concat(o[a-4],"-").concat(o[a-3],"-").concat(o[a-2],"-").concat(o[a-1],"-").concat(i.ws,"/");r(u)})).catch((function(r){s.default.debug("[".concat(e.clientId,"] startChannelMediaRelay request AP ").concat(t," failed: ").concat(JSON.stringify(r)))}))}))}))}},{key:"_connectWebsocket",value:function(e){return this._signal=new v(this.appId,this.cname,this.uid,this.sid),this._signal.connect(e)}},{key:"_connect",value:function(){return n(this,void 0,void 0,_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._requestAP();case 2:return t=e.sent,e.next=5,this._connectWebsocket(t);case 5:this._signal.on("close",this._onClose.bind(this)),this._signal.on("status",this._onStatus.bind(this)),this.emit("event",h.NETWORK_CONNECTED);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"_sendStartRelayMessage",value:function(e){return n(this,void 0,void 0,_regeneratorRuntime.mark((function t(){var r,n,i,o,a,u;return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkSignal(),r=this._genMessage(f.StopPacketTransfer),t.next=4,Promise.all([this._signal.request(r),this._signal.waitStatus("Normal Quit")]);case 4:return s.default.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success")),n=this._genMessage(f.SetSdkProfile,e),t.next=8,this._signal.request(n);case 8:return s.default.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success")),i=this._genMessage(f.SetSourceChannel,e),t.next=12,Promise.all([this._signal.request(i),this._signal.waitStatus("SetSourceChannelStatus")]);case 12:return this.emit("event",h.PACKET_JOINED_SRC_CHANNEL),s.default.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success")),o=this._genMessage(f.SetSourceUserId,e),t.next=17,this._signal.request(o);case 17:return s.default.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success")),a=this._genMessage(f.SetDestChannel,e),t.next=21,Promise.all([this._signal.request(a),this._signal.waitStatus("SetDestChannelStatus")]);case 21:return this.emit("event",h.PACKET_JOINED_DEST_CHANNEL),s.default.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success")),u=this._genMessage(f.StartPacketTransfer,e),t.next=26,this._signal.request(u);case 26:this.emit("event",h.PACKET_SENT_TO_DEST_CHANNEL),this.state=_.RELAY_STATE_RUNNING,s.default.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success"));case 29:case"end":return t.stop()}}),t,this)})))}},{key:"_sendReconnectMessage",value:function(e){return n(this,void 0,void 0,_regeneratorRuntime.mark((function t(){var r;return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkSignal(),r=this._genMessage(f.Reconnect,e),t.next=4,this._signal.request(r);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"_sendUpdateMessage",value:function(e){return n(this,void 0,void 0,_regeneratorRuntime.mark((function t(){var r;return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkSignal(),r=this._genMessage(f.UpdateDestChannel,e),t.next=4,this._signal.request(r);case 4:this.emit("event",h.PACKET_UPDATE_DEST_CHANNEL),s.default.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"_sendStopRelayMessage",value:function(){return n(this,void 0,void 0,_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkSignal(),t=this._genMessage(f.StopPacketTransfer),e.next=4,this._signal.request(t);case 4:s.default.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"_genMessage",value:function(e,t){var r=this,n=[],i=[],o=[],s={appId:this.appId,cname:this.cname,uid:this.uid+"",sdkVersion:a.VERSION,sid:this.sid,ts:+new Date,requestId:0,seq:0,allocate:!0,clientRequest:{}},u=null;switch(e){case f.SetSdkProfile:return s.clientRequest={command:"SetSdkProfile",type:"multi_channel"},s;case f.SetSourceChannel:return u=t.getSrcChannelMediaInfo(),s.clientRequest={command:"SetSourceChannel",uid:u.uid+"",channelName:u.channelName,token:u.token||this.appId},s;case f.SetSourceUserId:return u=t.getSrcChannelMediaInfo(),s.clientRequest={command:"SetSourceUserId",uid:this.uid+""},s;case f.SetDestChannel:return t.getDestChannelMediaInfos().forEach((function(e){n.push(e.channelName),i.push(e.uid+""),o.push(e.token||r.appId)})),s.clientRequest={command:"SetDestChannel",channelName:n,uid:i,token:o},s;case f.StartPacketTransfer:return s.clientRequest={command:"StartPacketTransfer"},s;case f.Reconnect:return s.clientRequest={command:"Reconnect"},s;case f.StopPacketTransfer:return s.clientRequest={command:"StopPacketTransfer"},s;case f.UpdateDestChannel:return t.getDestChannelMediaInfos().forEach((function(e){n.push(e.channelName),i.push(e.uid+""),o.push(e.token||r.appId)})),s.clientRequest={command:"UpdateDestChannel",channelName:n,uid:i,token:o},s}}},{key:"_checkSignal",value:function(){if(!this._signal||!this._signal.isConnect())throw new b(d.WS_DISCONNECTED)}}]),r}(o.default);t.default=p,t.ChannelMediaRelayConfiguration=function(){function e(){_classCallCheck(this,e),this.destChannelMediaInfos=new Map}return _createClass(e,[{key:"setSrcChannelInfo",value:function(e){u.checkValidObject(e,"srcInfo");var t=e.uid,r=e.channelName,n=e.token;if(n&&!u.isValidToken(n))throw new Error("Invalid token in SrcChannelInfo");if(!u.isValidChannelName(r))throw new Error("Invalid channelName in SrcChannelInfo");if(!c.is32Uint(t))throw new Error("Invalid uid in SrcChannelInfo");s.default.debug("[setSrcChannelInfo]: srcInfo: ",e),this.srcChannelMediaInfo=e}},{key:"setDestChannelInfo",value:function(e,t){if(!u.isValidChannelName(e))throw new Error("Invalid channelName in DestChannelInfo");u.checkValidObject(t,"destInfo");var r=t.uid,n=t.token,i=t.channelName;if(n&&!u.isValidToken(n))throw new Error("Invalid token in DestChannelInfo");if(!u.isValidChannelName(i))throw new Error("Invalid channelName in DestChannelInfo");if(!c.is32Uint(r))throw new Error("Invalid uid in DestChannelInfo");s.default.debug("[setDestChannelInfo]: destInfo: ",t,"channelName: ",e),this.destChannelMediaInfos.set(e,t)}},{key:"removeDestChannelInfo",value:function(e){if(!u.isValidChannelName(e))throw new Error("Invalid channelName when invoke removeDestChannelInfo");s.default.debug("[removeDestChannelInfo]: channelName: ",e),this.destChannelMediaInfos.delete(e)}},{key:"getSrcChannelMediaInfo",value:function(){return this.srcChannelMediaInfo}},{key:"getDestChannelMediaInfos",value:function(){return this.destChannelMediaInfos}}]),e}();var d,f,h,_,g,v=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n,i,o){var a;return _classCallCheck(this,r),(a=t.call(this))._onOpen=function(){s.default.debug("[ChannelMediaRelay] onOpen"),a.emit("open")},a._onClose=function(e){s.default.debug("[ChannelMediaRelay] onClose"),a.emit("close"),a.dispose()},a._onMessage=function(e){s.default.blind("ChannelMediaRelay receive message",e);var t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(a.emit("status",t.serverStatus),void a.emit(t.serverStatus.command,t.serverStatus)):void 0;a.emit("req_"+t.requestId,t)},a._requestId=1,a.appId=e,a.cname=n,a.uid=i,a.sid=o,a}return _createClass(r,[{key:"isConnect",value:function(){return this._ws&&1===this._ws.readyState}},{key:"sendMessage",value:function(e){if(!this._ws||1!==this._ws.readyState)throw new b(d.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,e.seq=t,this._ws.send({data:JSON.stringify(e)}),t}},{key:"waitStatus",value:function(e){var t=this;return new Promise((function(r,n){var i=setTimeout((function(){n(new b(d.WAIT_STATUS_TIMEOUT,e))}),5e3);t.once(e,(function(t){clearTimeout(i),t.state&&0!==t.state?n(new b(d.WAIT_STATUS_ERROR,e)):r()})),t.once("dispose",(function(){clearTimeout(i),n(new b(d.WS_ABORT))}))}))}},{key:"request",value:function(e){var t=this;return new Promise((function(r,n){var i=t.sendMessage(e),o=setTimeout((function(){t.removeAllListeners("req_"+i),n(new b(d.REQUEST_TIMEOUT))}),3e3);t.once("req_"+i,(function(e){clearTimeout(o),e&&200===e.code?r(e):n(new b(d.REQUEST_FAILED,e))})),t.once("dispose",(function(){clearTimeout(o),n(new b(d.WS_ABORT))}))}))}},{key:"connect",value:function(e){var t=this;return new Promise((function(r,n){t._ws=wx.connectSocket({url:e}),t._ws.onOpen((function(n,i){s.default.debug("[ChannelMediaRelay] ws.onOpen"),t._onOpen(),t._prvUrl=e,t._ws.onMessage(t._onMessage),t._ws.onClose(t._onClose),t._startHeartBeatCheck(),r()})),t._ws.onClose((function(e){s.default.debug("[ChannelMediaRelay] ws.onClose",e),t.dispose(),n(new b(d.CONNECT_FAILED,"websocket error code: "+e.code))})),setTimeout((function(){t._ws&&1!==t._ws.readyState&&(t._ws.onMessage(l),t._ws.onClose(l),t._ws.close(),t._ws=null,n(new b(d.CONNECT_TIMEOUT)))}),5e3),t.once("dispose",(function(){n(new b(d.WS_ABORT))}))}))}},{key:"dispose",value:function(){s.default.debug("[ChannelMediaRelay] dispose"),this._clearHeartBeatCheck(),this.emit("dispose"),this.removeEvent(),this._ws&&(this._ws.onOpen(l),this._ws.onClose(l),this._ws.onMessage(l),this._ws.close(l)),this._ws=null}},{key:"_sendPing",value:function(e){if(!this._ws||1!==this._ws.readyState)throw new b(d.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,this._ws.send({data:JSON.stringify(e)}),t}},{key:"_startHeartBeatCheck",value:function(){var e=this;this._heartBeatTimer=setInterval((function(){e._sendPing({command:"ping",appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid,ts:+new Date,requestId:0})}),3e3)}},{key:"_clearHeartBeatCheck",value:function(){clearInterval(this._heartBeatTimer)}}]),r}(o.default),b=_createClass((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;_classCallCheck(this,e),this.code=n,this.data=r,this.message=t}));t.ChannelMediaError=b,function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(d=t.CHANNEL_MEDIA_ERROR||(t.CHANNEL_MEDIA_ERROR={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(f||(f={})),function(e){e[e.NETWORK_DISCONNECTED=0]="NETWORK_DISCONNECTED",e[e.NETWORK_CONNECTED=1]="NETWORK_CONNECTED",e[e.PACKET_JOINED_SRC_CHANNEL=2]="PACKET_JOINED_SRC_CHANNEL",e[e.PACKET_JOINED_DEST_CHANNEL=3]="PACKET_JOINED_DEST_CHANNEL",e[e.PACKET_SENT_TO_DEST_CHANNEL=4]="PACKET_SENT_TO_DEST_CHANNEL",e[e.PACKET_RECEIVED_VIDEO_FROM_SRC=5]="PACKET_RECEIVED_VIDEO_FROM_SRC",e[e.PACKET_RECEIVED_AUDIO_FROM_SRC=6]="PACKET_RECEIVED_AUDIO_FROM_SRC",e[e.PACKET_UPDATE_DEST_CHANNEL=7]="PACKET_UPDATE_DEST_CHANNEL",e[e.PACKET_UPDATE_DEST_CHANNEL_REFUSED=8]="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e[e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE=9]="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(h=t.CHANNEL_MEDIA_RELAY_EVENT||(t.CHANNEL_MEDIA_RELAY_EVENT={})),function(e){e[e.RELAY_STATE_IDLE=0]="RELAY_STATE_IDLE",e[e.RELAY_STATE_CONNECTING=1]="RELAY_STATE_CONNECTING",e[e.RELAY_STATE_RUNNING=2]="RELAY_STATE_RUNNING",e[e.RELAY_STATE_FAILURE=3]="RELAY_STATE_FAILURE"}(_=t.CHANNEL_MEDIA_RELAY_STATE||(t.CHANNEL_MEDIA_RELAY_STATE={})),function(e){e[e.RELAY_OK=0]="RELAY_OK",e[e.SERVER_ERROR_RESPONSE=1]="SERVER_ERROR_RESPONSE",e[e.SERVER_NO_RESPONSE=2]="SERVER_NO_RESPONSE",e[e.NO_RESOURCE_AVAILABLE=3]="NO_RESOURCE_AVAILABLE",e[e.FAILED_JOIN_SRC=4]="FAILED_JOIN_SRC",e[e.FAILED_JOIN_DEST=5]="FAILED_JOIN_DEST",e[e.FAILED_PACKET_RECEIVED_FROM_SRC=6]="FAILED_PACKET_RECEIVED_FROM_SRC",e[e.FAILED_PACKET_SENT_TO_DEST=7]="FAILED_PACKET_SENT_TO_DEST",e[e.SERVER_CONNECTION_LOST=8]="SERVER_CONNECTION_LOST",e[e.INTERNAL_ERROR=9]="INTERNAL_ERROR",e[e.SRC_TOKEN_EXPIRED=10]="SRC_TOKEN_EXPIRED",e[e.DEST_TOKEN_EXPIRED=11]="DEST_TOKEN_EXPIRED",e[e.RELAY_ALREADY_START=12]="RELAY_ALREADY_START",e[e.RELAY_NOT_START=13]="RELAY_NOT_START",e[e.OPERATION_ABORT=14]="OPERATION_ABORT"}(g=t.CHANNEL_MEDIA_RELAY_ERROR||(t.CHANNEL_MEDIA_RELAY_ERROR={}))},function(e,t,r){"use strict";r.r(t),r.d(t,"Log",(function(){return c}));var n=r(10),i=r.n(n),o=r(2),a=r.n(o),s=r(3),u=r.n(s),c=function(){function e(){a()(this,e),this.level=3,this.onLog=null}return u()(e,[{key:"setLogLevel",value:function(e){if("number"!=typeof e||!(e<=4&&e>=-1))throw Error("Invaild level");this.level=e}},{key:"log",value:function(){var e,t=Array.prototype.slice.call(arguments);this.onLog&&this.onLog(JSON.stringify(t)),(e=console).log.apply(e,i()(t))}},{key:"err",value:function(){var e,t=Array.prototype.slice.call(arguments);this.onLog&&this.onLog(JSON.stringify(t)),(e=console).error.apply(e,i()(t))}},{key:"blind",value:function(){var e=Array.prototype.slice.call(arguments);this.level<=-1&&this.log.apply(this,["".concat(new Date," [BLIND]: ")].concat(i()(e)))}},{key:"debug",value:function(){var e=Array.prototype.slice.call(arguments);this.level<=0&&this.log.apply(this,["".concat(new Date," [DEBUG]: ")].concat(i()(e)))}},{key:"info",value:function(e){this.level<=1&&this.log("".concat(new Date," [INFO]: ").concat(e))}},{key:"warn",value:function(e){this.level<=2&&this.log("".concat(new Date," [WARN]: ").concat(e))}},{key:"error",value:function(e){this.level<=3&&this.err("".concat(new Date," [ERROR]: ").concat(e))}}]),e}(),l=new c;t.default=l},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,r){"use strict";r.r(t),r.d(t,"generateSessionId",(function(){return a})),r.d(t,"shouldUseHttps",(function(){return s})),r.d(t,"random",(function(){return o})),r.d(t,"isWeiXin",(function(){return u})),r.d(t,"is32Uint",(function(){return c}));var n=r(20),i=r.n(n),o=function(e){isNaN(e)&&(e=1e3);var t=+new Date,r=(t=(9301*t+49297)%233280)/233280;return Math.ceil(r*e)},a=function(){return i()().replace(/-/g,"").toUpperCase()},s=function(){return"https:"==document.location.protocol},u=function(){try{return wx,!0}catch(e){return!1}},c=function(e){return!!(0<=e&&e<=4294967295)}},function(e,t,r){"use strict";r.r(t),r.d(t,"VERSION",(function(){return n})),r.d(t,"SDK_VERSION",(function(){return i})),r.d(t,"DOMAIN_NAME",(function(){return o}));var n="1.1.0",i="2.5.3",o="mini-app.broadcastapp.agoraio.cn"},function(e,t,r){"use strict";r.r(t),r.d(t,"checkValidObject",(function(){return a})),r.d(t,"checkValidString",(function(){return s})),r.d(t,"checkValidNumber",(function(){return u})),r.d(t,"checkValidFloatNumber",(function(){return c})),r.d(t,"checkValidBoolean",(function(){return l})),r.d(t,"checkValidEnum",(function(){return o})),r.d(t,"isValidString",(function(){return p})),r.d(t,"isValidNumber",(function(){return d})),r.d(t,"isValidBoolean",(function(){return h})),r.d(t,"isASCII",(function(){return v})),r.d(t,"isInteger",(function(){return b})),r.d(t,"isNumber",(function(){return m})),r.d(t,"isString",(function(){return y})),r.d(t,"isArray",(function(){return E})),r.d(t,"isEmpty",(function(){return T})),r.d(t,"isValidToken",(function(){return _})),r.d(t,"isValidChannelName",(function(){return g}));var n=r(22),i=r.n(n),o=function(e,t,r){for(var n=0;n<r.length;n++)if(e===r[n])return!0;throw new Error("".concat(t," can only be set as ").concat(JSON.stringify(r)))},a=function(e,t){if(!e)throw new Error("Invalid param: ".concat(t||"param"," cannot be empty"));if("object"!==i()(e))throw new Error("".concat(t||"This paramter"," is of the object type"));return!0},s=function(e,t,r,n,i){if(T(r)&&(r=1),n=n||255,T(i)&&(i=!0),T(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!p(e,r,n,i))throw new Error("Invalid ".concat(t||"string param",": Length of the string: [").concat(r,",").concat(n,"].").concat(i?" ASCII characters only.":""))},u=function(e,t,r,n){if(T(r)&&(r=1),n=n||1e4,T(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!d(e,r,n))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(r,",").concat(n,"]. integer only"))},c=function(e,t,r,n){if(null==e)throw new Error("".concat(t||"param"," cannot be null"));if(T(r)&&(r=0),n=n||1e4,T(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!f(e,r,n))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(r,",").concat(n,"]."))},l=function(e,t){if(T(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!h(e))throw new Error("Invalid ".concat(t||"boolean param",": The value is of the boolean type."))},p=function(e,t,r,n){return t||(t=0),r||(r=Number.MAX_SAFE_INTEGER),T(n)&&(n=!0),y(e)&&(!n||v(e))&&e.length>=t&&e.length<=r},d=function(e,t,r){return b(e)&&e>=t&&e<=r},f=function(e,t,r){return m(e)&&e>=t&&e<=r},h=function(e){return"boolean"==typeof e},_=function(e){return p(e,1,2047)},g=function(e){return y(e)&&/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e)},v=function(e){if("string"==typeof e){for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<0||r>255)return!1}return!0}},b=function(e){return"number"==typeof e&&e%1==0},m=function(e){return"number"==typeof e},y=function(e){return"string"==typeof e},E=function(e){return e instanceof Array},T=function(e){return null==e}},function(e,t,r){"use strict";(function(e){var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function o(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=r(41),n.base64=r(42),n.EventEmitter=r(43),n.float=r(44),n.inquire=r(45),n.utf8=r(46),n.pool=r(47),n.LongBits=r(48),n.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),n.global=n.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==_typeof(e)},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=_typeof(r)||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}).call(this,r(13))},function(e,t,r){e.exports=r(26)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var Thrift={Version:"0.11.0",Type:{STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,UTF7:11,STRUCT:12,MAP:13,SET:14,LIST:15,UTF8:16,UTF16:17},MessageType:{CALL:1,REPLY:2,EXCEPTION:3,ONEWAY:4},objectLength:function(e){var t=0;for(var r in e)e.hasOwnProperty(r)&&t++;return t},inherits:function(e,t,r){function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.name=r||""}},_copyList2,_copyMap2;Thrift.TException=function(e){this.message=e},Thrift.inherits(Thrift.TException,Error,"TException"),Thrift.TException.prototype.getMessage=function(){return this.message},Thrift.TApplicationExceptionType={UNKNOWN:0,UNKNOWN_METHOD:1,INVALID_MESSAGE_TYPE:2,WRONG_METHOD_NAME:3,BAD_SEQUENCE_ID:4,MISSING_RESULT:5,INTERNAL_ERROR:6,PROTOCOL_ERROR:7,INVALID_TRANSFORM:8,INVALID_PROTOCOL:9,UNSUPPORTED_CLIENT_TYPE:10},Thrift.TApplicationException=function(e,t){this.message=e,this.code="number"==typeof t?t:0},Thrift.inherits(Thrift.TApplicationException,Thrift.TException,"TApplicationException"),Thrift.TApplicationException.prototype.read=function(e){for(;;){var t=e.readFieldBegin();if(t.ftype==Thrift.Type.STOP)break;switch(t.fid){case 1:t.ftype==Thrift.Type.STRING?(t=e.readString(),this.message=t.value):t=e.skip(t.ftype);break;case 2:t.ftype==Thrift.Type.I32?(t=e.readI32(),this.code=t.value):t=e.skip(t.ftype);break;default:t=e.skip(t.ftype)}e.readFieldEnd()}e.readStructEnd()},Thrift.TApplicationException.prototype.write=function(e){e.writeStructBegin("TApplicationException"),this.message&&(e.writeFieldBegin("message",Thrift.Type.STRING,1),e.writeString(this.getMessage()),e.writeFieldEnd()),this.code&&(e.writeFieldBegin("type",Thrift.Type.I32,2),e.writeI32(this.code),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()},Thrift.TApplicationException.prototype.getCode=function(){return this.code},Thrift.TProtocolExceptionType={UNKNOWN:0,INVALID_DATA:1,NEGATIVE_SIZE:2,SIZE_LIMIT:3,BAD_VERSION:4,NOT_IMPLEMENTED:5,DEPTH_LIMIT:6},Thrift.TProtocolException=function(e,t){Error.call(this),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.type=e,this.message=t},Thrift.inherits(Thrift.TProtocolException,Thrift.TException,"TProtocolException"),Thrift.Transport=Thrift.TXHRTransport=function(e,t){this.url=e,this.wpos=0,this.rpos=0,this.useCORS=t&&t.useCORS,this.customHeaders=t&&t.customHeaders?t.customHeaders:{},this.send_buf="",this.recv_buf=""},Thrift.TXHRTransport.prototype={getXmlHttpRequestObject:function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw"Your browser doesn't support XHR."},flush:function(e,t){var r=this;if(e&&!t||void 0===this.url||""===this.url)return this.send_buf;var n,i={header:{},method:"POST"};i.header.MediaType="application/vnd.apache.thrift.json; charset=utf-8",t&&(i.success=(n=t,function(e){if(r.responseText=JSON.stringify(e.data),r.setRecvBuffer(r.responseText),e&&200!==e.statusCode)return n(e.statusCode);n()}),i.fail=function(){var e=t;return function(t){e(t)}}()),Object.keys(r.customHeaders).forEach((function(e){i.header[e]=r.customHeaders[e]})),i.header.Accept="application/vnd.apache.thrift.json; charset=utf-8",i.header["Content-Type"]="application/vnd.apache.thrift.json; charset=utf-8",i.data=this.send_buf,i.url=this.url,wx.request(i)},jqRequest:function(e,t,r,n){if("undefined"==typeof jQuery||void 0===jQuery.Deferred)throw"Thrift.js requires jQuery 1.5+ to use asynchronous requests";var i=this;return jQuery.ajax({url:this.url,data:t,type:"POST",cache:!1,contentType:"application/vnd.apache.thrift.json; charset=utf-8",dataType:"text thrift",converters:{"text thrift":function(t){return i.setRecvBuffer(t),n.call(e)}},context:e,success:jQuery.makeArray(r).pop()})},setRecvBuffer:function(e){this.recv_buf=e,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0},isOpen:function(){return!0},open:function(){},close:function(){},read:function(e){var t=this.wpos-this.rpos;if(0===t)return"";var r=e;t<e&&(r=t);var n=this.read_buf.substr(this.rpos,r);return this.rpos+=r,n},readAll:function(){return this.recv_buf},write:function(e){this.send_buf=e},getSendBuffer:function(){return this.send_buf}},Thrift.TWebSocketTransport=function(e){this.__reset(e)},Thrift.TWebSocketTransport.prototype={__reset:function(e){this.url=e,this.socket=null,this.callbacks=[],this.send_pending=[],this.send_buf="",this.recv_buf="",this.rb_wpos=0,this.rb_rpos=0},flush:function(e,t){var r,n=this;this.isOpen()?(this.socket.send(this.send_buf),this.callbacks.push((r=t,function(e){n.setRecvBuffer(e),r()})),t&&this.callbacks.push(function(){var e=t;return function(t){n.setRecvBuffer(t),e()}}())):this.send_pending.push({buf:this.send_buf,cb:t})},__onOpen:function(){var e=this;this.send_pending.length>0&&(this.send_pending.forEach((function(t){var r;this.socket.send(t.buf),this.callbacks.push((r=t.cb,function(t){e.setRecvBuffer(t),r()}))})),this.send_pending=[])},__onClose:function(e){this.__reset(this.url)},__onMessage:function(e){this.callbacks.length&&this.callbacks.shift()(e.data)},__onError:function(e){__f__("log","Thrift WebSocket Error: "+e.toString()," at pagesLive/lib/mini-app-sdk-production.js:1"),this.socket.close()},setRecvBuffer:function(e){this.recv_buf=e,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0},isOpen:function(){return this.socket&&this.socket.readyState==this.socket.OPEN},open:function(){this.socket&&this.socket.readyState!=this.socket.CLOSED||(this.socket=new WebSocket(this.url),this.socket.onopen=this.__onOpen.bind(this),this.socket.onmessage=this.__onMessage.bind(this),this.socket.onerror=this.__onError.bind(this),this.socket.onclose=this.__onClose.bind(this))},close:function(){this.socket.close()},read:function(e){var t=this.wpos-this.rpos;if(0===t)return"";var r=e;t<e&&(r=t);var n=this.read_buf.substr(this.rpos,r);return this.rpos+=r,n},readAll:function(){return this.recv_buf},write:function(e){this.send_buf=e},getSendBuffer:function(){return this.send_buf}},Thrift.TJSONProtocol=Thrift.Protocol=function(e){this.tstack=[],this.tpos=[],this.transport=e},Thrift.Protocol.Type={},Thrift.Protocol.Type[Thrift.Type.BOOL]='"tf"',Thrift.Protocol.Type[Thrift.Type.BYTE]='"i8"',Thrift.Protocol.Type[Thrift.Type.I16]='"i16"',Thrift.Protocol.Type[Thrift.Type.I32]='"i32"',Thrift.Protocol.Type[Thrift.Type.I64]='"i64"',Thrift.Protocol.Type[Thrift.Type.DOUBLE]='"dbl"',Thrift.Protocol.Type[Thrift.Type.STRUCT]='"rec"',Thrift.Protocol.Type[Thrift.Type.STRING]='"str"',Thrift.Protocol.Type[Thrift.Type.MAP]='"map"',Thrift.Protocol.Type[Thrift.Type.LIST]='"lst"',Thrift.Protocol.Type[Thrift.Type.SET]='"set"',Thrift.Protocol.RType={},Thrift.Protocol.RType.tf=Thrift.Type.BOOL,Thrift.Protocol.RType.i8=Thrift.Type.BYTE,Thrift.Protocol.RType.i16=Thrift.Type.I16,Thrift.Protocol.RType.i32=Thrift.Type.I32,Thrift.Protocol.RType.i64=Thrift.Type.I64,Thrift.Protocol.RType.dbl=Thrift.Type.DOUBLE,Thrift.Protocol.RType.rec=Thrift.Type.STRUCT,Thrift.Protocol.RType.str=Thrift.Type.STRING,Thrift.Protocol.RType.map=Thrift.Type.MAP,Thrift.Protocol.RType.lst=Thrift.Type.LIST,Thrift.Protocol.RType.set=Thrift.Type.SET,Thrift.Protocol.Version=1,Thrift.Protocol.prototype={getTransport:function(){return this.transport},writeMessageBegin:function(e,t,r){this.tstack=[],this.tpos=[],this.tstack.push([Thrift.Protocol.Version,'"'+e+'"',t,r])},writeMessageEnd:function(){var e=this.tstack.pop();this.wobj=this.tstack.pop(),this.wobj.push(e),this.wbuf="["+this.wobj.join(",")+"]",this.transport.write(this.wbuf)},writeStructBegin:function(e){this.tpos.push(this.tstack.length),this.tstack.push({})},writeStructEnd:function(){var e=this.tpos.pop(),t=this.tstack[e],r="{",n=!0;for(var i in t)n?n=!1:r+=",",r+=i+":"+t[i];r+="}",this.tstack[e]=r},writeFieldBegin:function(e,t,r){this.tpos.push(this.tstack.length),this.tstack.push({fieldId:'"'+r+'"',fieldType:Thrift.Protocol.Type[t]})},writeFieldEnd:function(){var e=this.tstack.pop(),t=this.tstack.pop();this.tstack[this.tstack.length-1][t.fieldId]="{"+t.fieldType+":"+e+"}",this.tpos.pop()},writeFieldStop:function(){},writeMapBegin:function(e,t,r){this.tpos.push(this.tstack.length),this.tstack.push([Thrift.Protocol.Type[e],Thrift.Protocol.Type[t],0])},writeMapEnd:function(){var e=this.tpos.pop();if(e!=this.tstack.length){(this.tstack.length-e-1)%2!=0&&this.tstack.push("");var t=(this.tstack.length-e-1)/2;this.tstack[e][this.tstack[e].length-1]=t;for(var r="}",n=!0;this.tstack.length>e+1;){var i=this.tstack.pop(),o=this.tstack.pop();n?n=!1:r=","+r,isNaN(o)||(o='"'+o+'"'),r=o+":"+i+r}r="{"+r,this.tstack[e].push(r),this.tstack[e]="["+this.tstack[e].join(",")+"]"}},writeListBegin:function(e,t){this.tpos.push(this.tstack.length),this.tstack.push([Thrift.Protocol.Type[e],t])},writeListEnd:function(){for(var e=this.tpos.pop();this.tstack.length>e+1;){var t=this.tstack[e+1];this.tstack.splice(e+1,1),this.tstack[e].push(t)}this.tstack[e]="["+this.tstack[e].join(",")+"]"},writeSetBegin:function(e,t){this.tpos.push(this.tstack.length),this.tstack.push([Thrift.Protocol.Type[e],t])},writeSetEnd:function(){for(var e=this.tpos.pop();this.tstack.length>e+1;){var t=this.tstack[e+1];this.tstack.splice(e+1,1),this.tstack[e].push(t)}this.tstack[e]="["+this.tstack[e].join(",")+"]"},writeBool:function(e){this.tstack.push(e?1:0)},writeByte:function(e){this.tstack.push(e)},writeI16:function(e){this.tstack.push(e)},writeI32:function(e){this.tstack.push(e)},writeI64:function(e){this.tstack.push(e)},writeDouble:function(e){this.tstack.push(e)},writeString:function(e){if(null===e)this.tstack.push(null);else{for(var t="",r=0;r<e.length;r++){var n=e.charAt(r);t+='"'===n?'\\"':"\\"===n?"\\\\":"\b"===n?"\\b":"\f"===n?"\\f":"\n"===n?"\\n":"\r"===n?"\\r":"\t"===n?"\\t":n}this.tstack.push('"'+t+'"')}},writeBinary:function(e){var t="";if("string"==typeof e)t=e;else{if(!(e instanceof Uint8Array))throw new TypeError("writeBinary only accepts String or Uint8Array.");for(var r=e,n=0;n<r.length;++n)t+=String.fromCharCode(r[n])}this.tstack.push('"'+btoa(t)+'"')},readMessageBegin:function readMessageBegin(){if(this.rstack=[],this.rpos=[],"undefined"!=typeof JSON&&"function"==typeof JSON.parse){var a=this.transport.readAll();this.robj=JSON.parse(a)}else"undefined"!=typeof jQuery?this.robj=jQuery.parseJSON(this.transport.readAll()):this.robj=eval(this.transport.readAll());this.robj instanceof Array==0&&(this.robj=[this.robj]);var r={},version=this.robj.shift();if(version!=Thrift.Protocol.Version)throw"Wrong thrift protocol version: "+version;return r.fname=this.robj.shift(),r.mtype=this.robj.shift(),r.rseqid=this.robj.shift(),this.rstack.push(this.robj.shift()),r},readMessageEnd:function(){},readStructBegin:function(e){return this.rstack[this.rstack.length-1]instanceof Array&&this.rstack.push(this.rstack[this.rstack.length-1].shift()),{fname:""}},readStructEnd:function(){this.rstack[this.rstack.length-2]instanceof Array&&this.rstack.pop()},readFieldBegin:function(){var e={},t=-1,r=Thrift.Type.STOP;for(var n in this.rstack[this.rstack.length-1])if(null!==n){t=parseInt(n,10),this.rpos.push(this.rstack.length);var i=this.rstack[this.rstack.length-1][t];delete this.rstack[this.rstack.length-1][t],this.rstack.push(i);break}if(-1!=t)for(var o in this.rstack[this.rstack.length-1])null!==Thrift.Protocol.RType[o]&&(r=Thrift.Protocol.RType[o],this.rstack[this.rstack.length-1]=this.rstack[this.rstack.length-1][o]);return e.fname="",e.ftype=r,e.fid=t,e},readFieldEnd:function(){for(var e=this.rpos.pop();this.rstack.length>e;)this.rstack.pop()},readMapBegin:function(){var e=this.rstack.pop(),t=e.shift();t instanceof Array&&(this.rstack.push(e),t=(e=t).shift());var r={};return r.ktype=Thrift.Protocol.RType[t],r.vtype=Thrift.Protocol.RType[e.shift()],r.size=e.shift(),this.rpos.push(this.rstack.length),this.rstack.push(e.shift()),r},readMapEnd:function(){this.readFieldEnd()},readListBegin:function(){var e=this.rstack[this.rstack.length-1],t={};return t.etype=Thrift.Protocol.RType[e.shift()],t.size=e.shift(),this.rpos.push(this.rstack.length),this.rstack.push(e.shift()),t},readListEnd:function(){this.readFieldEnd()},readSetBegin:function(e,t){return this.readListBegin(e,t)},readSetEnd:function(){return this.readListEnd()},readBool:function(){var e=this.readI32();return null!==e&&"1"==e.value?e.value=!0:e.value=!1,e},readByte:function(){return this.readI32()},readI16:function(){return this.readI32()},readI32:function(e){void 0===e&&(e=this.rstack[this.rstack.length-1]);var t={};if(e instanceof Array)0===e.length?t.value=void 0:t.value=e.shift();else if(e instanceof Object){for(var r in e)if(null!==r){this.rstack.push(e[r]),delete e[r],t.value=r;break}}else t.value=e,this.rstack.pop();return t},readI64:function(){return this.readI32()},readDouble:function(){return this.readI32()},readString:function(){return this.readI32()},readBinary:function(){var e=this.readI32();return e.value=atob(e.value),e},skip:function(e){var t,r;switch(e){case Thrift.Type.STOP:return null;case Thrift.Type.BOOL:return this.readBool();case Thrift.Type.BYTE:return this.readByte();case Thrift.Type.I16:return this.readI16();case Thrift.Type.I32:return this.readI32();case Thrift.Type.I64:return this.readI64();case Thrift.Type.DOUBLE:return this.readDouble();case Thrift.Type.STRING:return this.readString();case Thrift.Type.STRUCT:for(this.readStructBegin();(t=this.readFieldBegin()).ftype!=Thrift.Type.STOP;)this.skip(t.ftype),this.readFieldEnd();return this.readStructEnd(),null;case Thrift.Type.MAP:for(t=this.readMapBegin(),r=0;r<t.size;r++)r>0&&this.rstack.length>this.rpos[this.rpos.length-1]+1&&this.rstack.pop(),this.skip(t.ktype),this.skip(t.vtype);return this.readMapEnd(),null;case Thrift.Type.SET:for(t=this.readSetBegin(),r=0;r<t.size;r++)this.skip(t.etype);return this.readSetEnd(),null;case Thrift.Type.LIST:for(t=this.readListBegin(),r=0;r<t.size;r++)this.skip(t.etype);return this.readListEnd(),null}}},Thrift.MultiplexProtocol=function(e,t,r,n){Thrift.Protocol.call(this,t,r,n),this.serviceName=e},Thrift.inherits(Thrift.MultiplexProtocol,Thrift.Protocol,"multiplexProtocol"),Thrift.MultiplexProtocol.prototype.writeMessageBegin=function(e,t,r){t===Thrift.MessageType.CALL||t===Thrift.MessageType.ONEWAY?Thrift.Protocol.prototype.writeMessageBegin.call(this,this.serviceName+":"+e,t,r):Thrift.Protocol.prototype.writeMessageBegin.call(this,e,t,r)},Thrift.Multiplexer=function(){this.seqid=0},Thrift.Multiplexer.prototype.createClient=function(e,t,r){t.Client&&(t=t.Client);var n=this;return t.prototype.new_seqid=function(){return n.seqid+=1,n.seqid},new t(new Thrift.MultiplexProtocol(e,r))},_copyList2=function(e,t){if(!e)return e;var r,n,i,o=r=void 0===t.shift?t:t[0],a=e.length,s=[];for(n=0;n<a;n++)i=e[n],null===r?s.push(i):r===_copyMap2||r===_copyList2?s.push(r(i,t.slice(1))):s.push(new o(i));return s},_copyMap2=function(e,t){if(!e)return e;var r,n,i=r=void 0===t.shift?t:t[0],o={};for(var a in e)e.hasOwnProperty(a)&&(n=e[a],o[a]=null===r?n:r===_copyMap2||r===_copyList2?r(n,t.slice(1)):new i(n));return o},Thrift.copyMap=_copyMap2,Thrift.copyList=_copyList2,__webpack_exports__.default=Thrift},function(e,t,r){var n=r(27),i=r(28),o=r(29),a=r(30);e.exports=function(e){return n(e)||i(e)||o(e)||a()}},function(e,t,r){var n,i,o,a,s;n=r(34),i=r(15).utf8,o=r(35),a=r(15).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?a.stringToBytes(e):i.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=n.bytesToWords(e),u=8*e.length,c=1732584193,l=-271733879,p=-1732584194,d=271733878,f=0;f<r.length;f++)r[f]=16711935&(r[f]<<8|r[f]>>>24)|4278255360&(r[f]<<24|r[f]>>>8);r[u>>>5]|=128<<u%32,r[14+(u+64>>>9<<4)]=u;var h=s._ff,_=s._gg,g=s._hh,v=s._ii;for(f=0;f<r.length;f+=16){var b=c,m=l,y=p,E=d;c=h(c,l,p,d,r[f+0],7,-680876936),d=h(d,c,l,p,r[f+1],12,-389564586),p=h(p,d,c,l,r[f+2],17,606105819),l=h(l,p,d,c,r[f+3],22,-1044525330),c=h(c,l,p,d,r[f+4],7,-176418897),d=h(d,c,l,p,r[f+5],12,1200080426),p=h(p,d,c,l,r[f+6],17,-1473231341),l=h(l,p,d,c,r[f+7],22,-45705983),c=h(c,l,p,d,r[f+8],7,1770035416),d=h(d,c,l,p,r[f+9],12,-1958414417),p=h(p,d,c,l,r[f+10],17,-42063),l=h(l,p,d,c,r[f+11],22,-1990404162),c=h(c,l,p,d,r[f+12],7,1804603682),d=h(d,c,l,p,r[f+13],12,-40341101),p=h(p,d,c,l,r[f+14],17,-1502002290),c=_(c,l=h(l,p,d,c,r[f+15],22,1236535329),p,d,r[f+1],5,-165796510),d=_(d,c,l,p,r[f+6],9,-1069501632),p=_(p,d,c,l,r[f+11],14,643717713),l=_(l,p,d,c,r[f+0],20,-373897302),c=_(c,l,p,d,r[f+5],5,-701558691),d=_(d,c,l,p,r[f+10],9,38016083),p=_(p,d,c,l,r[f+15],14,-660478335),l=_(l,p,d,c,r[f+4],20,-405537848),c=_(c,l,p,d,r[f+9],5,568446438),d=_(d,c,l,p,r[f+14],9,-1019803690),p=_(p,d,c,l,r[f+3],14,-187363961),l=_(l,p,d,c,r[f+8],20,1163531501),c=_(c,l,p,d,r[f+13],5,-1444681467),d=_(d,c,l,p,r[f+2],9,-51403784),p=_(p,d,c,l,r[f+7],14,1735328473),c=g(c,l=_(l,p,d,c,r[f+12],20,-1926607734),p,d,r[f+5],4,-378558),d=g(d,c,l,p,r[f+8],11,-2022574463),p=g(p,d,c,l,r[f+11],16,1839030562),l=g(l,p,d,c,r[f+14],23,-35309556),c=g(c,l,p,d,r[f+1],4,-1530992060),d=g(d,c,l,p,r[f+4],11,1272893353),p=g(p,d,c,l,r[f+7],16,-155497632),l=g(l,p,d,c,r[f+10],23,-1094730640),c=g(c,l,p,d,r[f+13],4,681279174),d=g(d,c,l,p,r[f+0],11,-358537222),p=g(p,d,c,l,r[f+3],16,-722521979),l=g(l,p,d,c,r[f+6],23,76029189),c=g(c,l,p,d,r[f+9],4,-640364487),d=g(d,c,l,p,r[f+12],11,-421815835),p=g(p,d,c,l,r[f+15],16,530742520),c=v(c,l=g(l,p,d,c,r[f+2],23,-995338651),p,d,r[f+0],6,-198630844),d=v(d,c,l,p,r[f+7],10,1126891415),p=v(p,d,c,l,r[f+14],15,-1416354905),l=v(l,p,d,c,r[f+5],21,-57434055),c=v(c,l,p,d,r[f+12],6,1700485571),d=v(d,c,l,p,r[f+3],10,-1894986606),p=v(p,d,c,l,r[f+10],15,-1051523),l=v(l,p,d,c,r[f+1],21,-2054922799),c=v(c,l,p,d,r[f+8],6,1873313359),d=v(d,c,l,p,r[f+15],10,-30611744),p=v(p,d,c,l,r[f+6],15,-1560198380),l=v(l,p,d,c,r[f+13],21,1309151649),c=v(c,l,p,d,r[f+4],6,-145523070),d=v(d,c,l,p,r[f+11],10,-1120210379),p=v(p,d,c,l,r[f+2],15,718787259),l=v(l,p,d,c,r[f+9],21,-343485551),c=c+b>>>0,l=l+m>>>0,p=p+y>>>0,d=d+E>>>0}return n.endian([c,l,p,d])})._ff=function(e,t,r,n,i,o,a){var s=e+(t&r|~t&n)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},s._gg=function(e,t,r,n,i,o,a){var s=e+(t&n|r&~n)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},s._hh=function(e,t,r,n,i,o,a){var s=e+(t^r^n)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},s._ii=function(e,t,r,n,i,o,a){var s=e+(r^(t|~n))+(i>>>0)+a;return(s<<o|s>>>32-o)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(s(e,t));return t&&t.asBytes?r:t&&t.asString?a.bytesToString(r):n.bytesToHex(r)}},function(e,t){function r(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,u,"next",e)}function u(e){r(a,i,o,s,u,"throw",e)}s(void 0)}))}}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==("undefined"==typeof window?"undefined":_typeof(window))&&(r=window)}e.exports=r},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},function(e,t){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=r},function(e,t,r){var n=r(9).default,i=r(38),o=i.MiniappSession,a=i.MiniappJoinChooseServer,s=i.MiniappConnectWebSocket,u=i.MiniappJoin,c=i.MiniappPublish,l=i.MiniappUnpublish,p=i.MiniappSubscribe,d=i.MiniappUnsubscribe,f=i.MiniappLeave,h=i.MiniappServerEvent,_=i.MiniappPusherState,g=i.MiniappPlayerState,v=function(e){this.uri=null,this.miniappSession=null,this.miniappJoinChooseServer=null,this.miniappConnectWebSocket=null,this.miniappJoin=null,this.miniappPublish=null,this.miniappUnpublish=null,this.miniappSubscribe=null,this.miniappUnsubscribe=null,this.miniappLeave=null,this.miniappServerEvent=null,this.miniappPusherState=null,this.miniappPlayerState=null,e&&(void 0!==e.uri&&null!==e.uri&&(this.uri=e.uri),void 0!==e.miniappSession&&null!==e.miniappSession&&(this.miniappSession=new o(e.miniappSession)),void 0!==e.miniappJoinChooseServer&&null!==e.miniappJoinChooseServer&&(this.miniappJoinChooseServer=new a(e.miniappJoinChooseServer)),void 0!==e.miniappConnectWebSocket&&null!==e.miniappConnectWebSocket&&(this.miniappConnectWebSocket=new s(e.miniappConnectWebSocket)),void 0!==e.miniappJoin&&null!==e.miniappJoin&&(this.miniappJoin=new u(e.miniappJoin)),void 0!==e.miniappPublish&&null!==e.miniappPublish&&(this.miniappPublish=new c(e.miniappPublish)),void 0!==e.miniappUnpublish&&null!==e.miniappUnpublish&&(this.miniappUnpublish=new l(e.miniappUnpublish)),void 0!==e.miniappSubscribe&&null!==e.miniappSubscribe&&(this.miniappSubscribe=new p(e.miniappSubscribe)),void 0!==e.miniappUnsubscribe&&null!==e.miniappUnsubscribe&&(this.miniappUnsubscribe=new d(e.miniappUnsubscribe)),void 0!==e.miniappLeave&&null!==e.miniappLeave&&(this.miniappLeave=new f(e.miniappLeave)),void 0!==e.miniappServerEvent&&null!==e.miniappServerEvent&&(this.miniappServerEvent=new h(e.miniappServerEvent)),void 0!==e.miniappPusherState&&null!==e.miniappPusherState&&(this.miniappPusherState=new _(e.miniappPusherState)),void 0!==e.miniappPlayerState&&null!==e.miniappPlayerState&&(this.miniappPlayerState=new g(e.miniappPlayerState)))};(v.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),i=t.fid;if(r==n.Type.STOP)break;switch(i){case 1:r==n.Type.I32?this.uri=e.readI32().value:e.skip(r);break;case 8e3:r==n.Type.STRUCT?(this.miniappSession=new o,this.miniappSession.read(e)):e.skip(r);break;case 8001:r==n.Type.STRUCT?(this.miniappJoinChooseServer=new a,this.miniappJoinChooseServer.read(e)):e.skip(r);break;case 8002:r==n.Type.STRUCT?(this.miniappConnectWebSocket=new s,this.miniappConnectWebSocket.read(e)):e.skip(r);break;case 8003:r==n.Type.STRUCT?(this.miniappJoin=new u,this.miniappJoin.read(e)):e.skip(r);break;case 8004:r==n.Type.STRUCT?(this.miniappPublish=new c,this.miniappPublish.read(e)):e.skip(r);break;case 8005:r==n.Type.STRUCT?(this.miniappUnpublish=new l,this.miniappUnpublish.read(e)):e.skip(r);break;case 8006:r==n.Type.STRUCT?(this.miniappSubscribe=new p,this.miniappSubscribe.read(e)):e.skip(r);break;case 8007:r==n.Type.STRUCT?(this.miniappUnsubscribe=new d,this.miniappUnsubscribe.read(e)):e.skip(r);break;case 8008:r==n.Type.STRUCT?(this.miniappLeave=new f,this.miniappLeave.read(e)):e.skip(r);break;case 8009:r==n.Type.STRUCT?(this.miniappServerEvent=new h,this.miniappServerEvent.read(e)):e.skip(r);break;case 8010:r==n.Type.STRUCT?(this.miniappPusherStateEvent=new MiniappPusherStateEvent,this.miniappPusherStateEvent.read(e)):e.skip(r);break;case 8011:r==n.Type.STRUCT?(this.miniappPlayerStateEvent=new MiniappPlayerStateEvent,this.miniappPlayerStateEvent.read(e)):e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},v.prototype.write=function(e){e.writeStructBegin("ReportItem"),null!==this.uri&&void 0!==this.uri&&(e.writeFieldBegin("uri",n.Type.I32,1),e.writeI32(this.uri),e.writeFieldEnd()),null!==this.miniappSession&&void 0!==this.miniappSession&&(e.writeFieldBegin("miniappSession",n.Type.STRUCT,8e3),this.miniappSession.write(e),e.writeFieldEnd()),null!==this.miniappJoinChooseServer&&void 0!==this.miniappJoinChooseServer&&(e.writeFieldBegin("miniappJoinChooseServer",n.Type.STRUCT,8001),this.miniappJoinChooseServer.write(e),e.writeFieldEnd()),null!==this.miniappConnectWebSocket&&void 0!==this.miniappConnectWebSocket&&(e.writeFieldBegin("miniappConnectWebSocket",n.Type.STRUCT,8002),this.miniappConnectWebSocket.write(e),e.writeFieldEnd()),null!==this.miniappJoin&&void 0!==this.miniappJoin&&(e.writeFieldBegin("miniappJoin",n.Type.STRUCT,8003),this.miniappJoin.write(e),e.writeFieldEnd()),null!==this.miniappPublish&&void 0!==this.miniappPublish&&(e.writeFieldBegin("miniappPublish",n.Type.STRUCT,8004),this.miniappPublish.write(e),e.writeFieldEnd()),null!==this.miniappUnpublish&&void 0!==this.miniappUnpublish&&(e.writeFieldBegin("miniappUnpublish",n.Type.STRUCT,8005),this.miniappUnpublish.write(e),e.writeFieldEnd()),null!==this.miniappSubscribe&&void 0!==this.miniappSubscribe&&(e.writeFieldBegin("miniappSubscribe",n.Type.STRUCT,8006),this.miniappSubscribe.write(e),e.writeFieldEnd()),null!==this.miniappUnsubscribe&&void 0!==this.miniappUnsubscribe&&(e.writeFieldBegin("miniappUnsubscribe",n.Type.STRUCT,8007),this.miniappUnsubscribe.write(e),e.writeFieldEnd()),null!==this.miniappLeave&&void 0!==this.miniappLeave&&(e.writeFieldBegin("miniappLeave",n.Type.STRUCT,8008),this.miniappLeave.write(e),e.writeFieldEnd()),null!==this.miniappServerEvent&&void 0!==this.miniappServerEvent&&(e.writeFieldBegin("miniappServerEvent",n.Type.STRUCT,8009),this.miniappServerEvent.write(e),e.writeFieldEnd()),null!==this.miniappPusherStateEvent&&void 0!==this.miniappPusherStateEvent&&(e.writeFieldBegin("miniappPusherStateEvent",n.Type.STRUCT,8010),this.miniappPusherStateEvent.write(e),e.writeFieldEnd()),null!==this.miniappPlayerStateEvent&&void 0!==this.miniappPlayerStateEvent&&(e.writeFieldBegin("miniappPlayerStateEvent",n.Type.STRUCT,8011),this.miniappPlayerStateEvent.write(e),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()},e.exports=v},function(e,t,r){var n=r(9).default,i=function(e){this.sid=null,this.cname=null,this.cid=null,this.lts=null,this.ip=null,this.uid=null,this.success=null,this.elapse=null,this.peer=null,e&&(void 0!==e.sid&&null!==e.sid&&(this.sid=e.sid),void 0!==e.cname&&null!==e.cname&&(this.cname=e.cname),void 0!==e.cid&&null!==e.cid&&(this.cid=e.cid),void 0!==e.lts&&null!==e.lts&&(this.lts=e.lts),void 0!==e.ip&&null!==e.ip&&(this.ip=e.ip),void 0!==e.uid&&null!==e.uid&&(this.uid=e.uid),void 0!==e.success&&null!==e.success&&(this.success=e.success),void 0!==e.elapse&&null!==e.elapse&&(this.elapse=e.elapse),void 0!==e.peer&&null!==e.peer&&(this.peer=e.peer))};(i.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),i=t.fid;if(r==n.Type.STOP)break;switch(i){case 1:r==n.Type.STRING?this.sid=e.readString().value:e.skip(r);break;case 2:r==n.Type.STRING?this.cname=e.readString().value:e.skip(r);break;case 3:r==n.Type.I64?this.cid=e.readI64().value:e.skip(r);break;case 4:r==n.Type.I64?this.lts=e.readI64().value:e.skip(r);break;case 5:r==n.Type.STRING?this.ip=e.readString().value:e.skip(r);break;case 6:r==n.Type.I64?this.uid=e.readI64().value:e.skip(r);break;case 7:r==n.Type.BOOL?this.success=e.readBool().value:e.skip(r);break;case 8:r==n.Type.I64?this.elapse=e.readI64().value:e.skip(r);break;case 9:r==n.Type.I64?this.peer=e.readI64().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},i.prototype.write=function(e){e.writeStructBegin("VosdkHeader"),null!==this.sid&&void 0!==this.sid&&(e.writeFieldBegin("sid",n.Type.STRING,1),e.writeString(this.sid),e.writeFieldEnd()),null!==this.cname&&void 0!==this.cname&&(e.writeFieldBegin("cname",n.Type.STRING,2),e.writeString(this.cname),e.writeFieldEnd()),null!==this.cid&&void 0!==this.cid&&(e.writeFieldBegin("cid",n.Type.I64,3),e.writeI64(this.cid),e.writeFieldEnd()),null!==this.lts&&void 0!==this.lts&&(e.writeFieldBegin("lts",n.Type.I64,4),e.writeI64(this.lts),e.writeFieldEnd()),null!==this.ip&&void 0!==this.ip&&(e.writeFieldBegin("ip",n.Type.STRING,5),e.writeString(this.ip),e.writeFieldEnd()),null!==this.uid&&void 0!==this.uid&&(e.writeFieldBegin("uid",n.Type.I64,6),e.writeI64(this.uid),e.writeFieldEnd()),null!==this.success&&void 0!==this.success&&(e.writeFieldBegin("success",n.Type.BOOL,7),e.writeBool(this.success),e.writeFieldEnd()),null!==this.elapse&&void 0!==this.elapse&&(e.writeFieldBegin("elapse",n.Type.I64,8),e.writeI64(this.elapse),e.writeFieldEnd()),null!==this.peer&&void 0!==this.peer&&(e.writeFieldBegin("peer",n.Type.I64,9),e.writeI64(this.peer),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()};var o=function(e){this.name=null,this.lts=null,this.value=null,this.id=null,this.tagErrorCode=null,e&&(void 0!==e.name&&null!==e.name&&(this.name=e.name),void 0!==e.lts&&null!==e.lts&&(this.lts=e.lts),void 0!==e.value&&null!==e.value&&(this.value=e.value),void 0!==e.id&&null!==e.id&&(this.id=e.id),void 0!==e.tagErrorCode&&null!==e.tagErrorCode&&(this.tagErrorCode=e.tagErrorCode))};(o.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),i=t.fid;if(r==n.Type.STOP)break;switch(i){case 1:r==n.Type.STRING?this.name=e.readString().value:e.skip(r);break;case 2:r==n.Type.I64?this.lts=e.readI64().value:e.skip(r);break;case 3:r==n.Type.I32?this.value=e.readI32().value:e.skip(r);break;case 4:r==n.Type.I32?this.id=e.readI32().value:e.skip(r);break;case 5:r==n.Type.I32?this.tagErrorCode=e.readI32().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},o.prototype.write=function(e){e.writeStructBegin("VosdkCounterItem"),null!==this.name&&void 0!==this.name&&(e.writeFieldBegin("name",n.Type.STRING,1),e.writeString(this.name),e.writeFieldEnd()),null!==this.lts&&void 0!==this.lts&&(e.writeFieldBegin("lts",n.Type.I64,2),e.writeI64(this.lts),e.writeFieldEnd()),null!==this.value&&void 0!==this.value&&(e.writeFieldBegin("value",n.Type.I32,3),e.writeI32(this.value),e.writeFieldEnd()),null!==this.id&&void 0!==this.id&&(e.writeFieldBegin("id",n.Type.I32,4),e.writeI32(this.id),e.writeFieldEnd()),null!==this.tagErrorCode&&void 0!==this.tagErrorCode&&(e.writeFieldBegin("tagErrorCode",n.Type.I32,5),e.writeI32(this.tagErrorCode),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()};var a=function(e){this.header=null,this.items=null,e&&(void 0!==e.header&&null!==e.header&&(this.header=new i(e.header)),void 0!==e.items&&null!==e.items&&(this.items=n.copyList(e.items,[o])))};(a.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),a=t.fid;if(r==n.Type.STOP)break;switch(a){case 1:r==n.Type.STRUCT?(this.header=new i,this.header.read(e)):e.skip(r);break;case 2:if(r==n.Type.LIST){var s,u;this.items=[],(u=e.readListBegin()).etype,s=u.size;for(var c=0;c<s;++c){var l=null;(l=new o).read(e),this.items.push(l)}e.readListEnd()}else e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},a.prototype.write=function(e){if(e.writeStructBegin("VosdkCounter"),null!==this.header&&void 0!==this.header&&(e.writeFieldBegin("header",n.Type.STRUCT,1),this.header.write(e),e.writeFieldEnd()),null!==this.items&&void 0!==this.items){for(var t in e.writeFieldBegin("items",n.Type.LIST,2),e.writeListBegin(n.Type.STRUCT,this.items.length),this.items)this.items.hasOwnProperty(t)&&(t=this.items[t]).write(e);e.writeListEnd(),e.writeFieldEnd()}e.writeFieldStop(),e.writeStructEnd()},e.exports={VosdkHeader:i,VosdkCounter:a,VosdkCounterItem:o}},function(e,t,r){"use strict";e.exports=p;var n,i=r(7),o=i.LongBits,a=i.base64,s=i.utf8;function u(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function c(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function p(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(p.create=function(){return new n})()}:function(){return new p}};function f(e,t,r){t[r]=255&e}function h(e,t){this.len=e,this.next=void 0,this.val=t}function _(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function g(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}p.create=d(),p.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(p.alloc=i.pool(p.alloc,i.Array.prototype.subarray)),p.prototype._push=function(e,t,r){return this.tail=this.tail.next=new u(e,t,r),this.len+=t,this},h.prototype=Object.create(u.prototype),h.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},p.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new h((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},p.prototype.int32=function(e){return e<0?this._push(_,10,o.fromNumber(e)):this.uint32(e)},p.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},p.prototype.uint64=function(e){var t=o.from(e);return this._push(_,t.length(),t)},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(_,t.length(),t)},p.prototype.bool=function(e){return this._push(f,1,e?1:0)},p.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(e){var t=o.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},p.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var v=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};p.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(i.isString(e)){var r=p.alloc(t=a.length(e));a.decode(e,r,0),e=r}return this.uint32(t)._push(v,t,e)},p.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(f,1,0)},p.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new u(c,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},p.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},p.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},p._configure=function(e){n=e,p.create=d(),n._configure()}},function(e,t,r){"use strict";e.exports=u;var n,i=r(7),o=i.LongBits,a=i.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}var c,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")},p=function(){return i.Buffer?function(e){return(u.create=function(e){return i.Buffer.isBuffer(e)?new n(e):l(e)})(e)}:l};function d(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function f(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw s(this,8);return new o(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}u.create=p(),u.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,u.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return c}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return f(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|f(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},u.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},u.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u._configure=function(e){n=e,u.create=p(),n._configure();var t=i.Long?"toLong":"toNumber";i.merge(u.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},function(e,t,r){var n=r(24),i=r(25);e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t){function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r.apply(this,arguments)}e.exports=r},function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?e.exports=r=function(e){return _typeof(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},r(t)}e.exports=r},function(e,t,r){"use strict";var n,i,o,a,s,u=r(39),c=u.Writer,l=u.util,p=u.roots.default||(u.roots.default={});p.io=((s={}).agora=((a={}).pb=((o={}).CounterCompact=function(){function e(e){if(this.items=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sid="",e.prototype.peer=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.items=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=c.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.peer&&Object.hasOwnProperty.call(e,"peer")&&t.uint32(16).int64(e.peer),null!=e.items&&e.items.length)for(var r=0;r<e.items.length;++r)p.io.agora.pb.Item.encode(e.items[r],t.uint32(26).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e}(),o.Item=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.lts=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.id=11001,e.prototype.value=0,e.prototype.tagErrorCode=0,e.prototype.streamId=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=c.create()),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(8).int64(e.lts),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(16).int32(e.id),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(24).int32(e.value),null!=e.tagErrorCode&&Object.hasOwnProperty.call(e,"tagErrorCode")&&t.uint32(32).int32(e.tagErrorCode),null!=e.streamId&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(40).uint32(e.streamId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e}(),o.Id=(n={},(i=Object.create(n))[n[11001]="Miniapp_SDK_Pusher_Video_Bitrate"]=11001,i[n[11002]="Miniapp_SDK_Pusher_Audio_Bitrate"]=11002,i[n[11003]="Miniapp_SDK_Pusher_Video_FPS"]=11003,i[n[11004]="Miniapp_SDK_Pusher_Video_GOP"]=11004,i[n[11005]="Miniapp_SDK_Pusher_Net_Speed"]=11005,i[n[11006]="Miniapp_SDK_Pusher_Video_Cache"]=11006,i[n[11007]="Miniapp_SDK_Pusher_Audio_Cache"]=11007,i[n[11008]="Miniapp_SDK_Player_Video_Bitrate"]=11008,i[n[11009]="Miniapp_SDK_Player_Audio_Bitrate"]=11009,i[n[11010]="Miniapp_SDK_Player_Video_FPS"]=11010,i[n[11011]="Miniapp_SDK_Player_Video_GOP"]=11011,i[n[11012]="Miniapp_SDK_Player_Net_Speed"]=11012,i[n[11013]="Miniapp_SDK_Player_Video_Cache"]=11013,i[n[11014]="Miniapp_SDK_Player_Audio_Cache"]=11014,i[n[11015]="Miniapp_SDK_Player_V_Dec_Cache_Size"]=11015,i[n[11016]="Miniapp_SDK_Player_V_Sum_Cache_Size"]=11016,i[n[11017]="Miniapp_SDK_Player_AV_Play_Interval"]=11017,i[n[11018]="Miniapp_SDK_Player_AV_Recv_Interval"]=11018,i[n[11019]="Miniapp_SDK_Player_Audio_Cache_Threshold"]=11019,i[n[11022]="Miniapp_SDK_Pusher_Video_Height"]=11022,i[n[11023]="Miniapp_SDK_Pusher_Video_Width"]=11023,i[n[11024]="Miniapp_SDK_Player_Video_Width"]=11024,i[n[11025]="Miniapp_SDK_Player_Video_Height"]=11025,i),o),a),s),e.exports=p},function(e,t){var r=void 0!==crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=r;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r,n){var i=t&&t.prototype instanceof l?t:l,o=Object.create(i.prototype),a=new T(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return{value:void 0,done:!0}}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=m(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,a),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var c={};function l(){}function p(){}function d(){}var f={};f[i]=function(){return this};var h=Object.getPrototypeOf,_=h&&h(h(R([])));_&&_!==t&&r.call(_,i)&&(f=_);var g=d.prototype=l.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function b(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,s){var c=u(e[i],e,o);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==_typeof(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(p).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function m(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,m(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function y(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(y,this),this.reset(!0)}function R(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:w}}function w(){return{value:void 0,done:!0}}return p.prototype=g.constructor=d,d.constructor=p,d[a]=p.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(b.prototype),b.prototype[o]=function(){return this},e.AsyncIterator=b,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new b(s(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},v(g),g[a]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;E(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:R(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t,r){var n=r(14);e.exports=function(e){if(Array.isArray(e))return n(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t,r){var n=r(14);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(32),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(13))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,i,o,a,s,u=1,c={},l=!1,p=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),n=function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},n=function(e){o.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(i=p.documentElement,n=function(e){var t=p.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):n=function(e){setTimeout(h,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return c[u]=i,n(u),u++},d.clearImmediate=f}function f(e){delete c[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{f(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(13),r(33))},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u,c=[],l=!1,p=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):p=-1,c.length&&f())}function f(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++p<t;)u&&u[p].run();p=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function _(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||l||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){var r,n;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var i=e[n]<<16|e[n+1]<<8|e[n+2],o=0;o<4;o++)8*n+6*o<=8*e.length?t.push(r.charAt(i>>>6*(3-o)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,i=0;n<e.length;i=++n%4)0!=i&&t.push((r.indexOf(e.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|r.indexOf(e.charAt(n))>>>6-2*i);return t}},e.exports=n},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){var n;!function(t){"use strict";function i(){}var o=i.prototype,a=t.EventEmitter;function s(e,t){for(var r=e.length;r--;)if(e[r].listener===t)return r;return-1}function u(e){return function(){return this[e].apply(this,arguments)}}o.getListeners=function(e){var t,r,n=this._getEvents();if(e instanceof RegExp)for(r in t={},n)n.hasOwnProperty(r)&&e.test(r)&&(t[r]=n[r]);else t=n[e]||(n[e]=[]);return t},o.flattenListeners=function(e){var t,r=[];for(t=0;t<e.length;t+=1)r.push(e[t].listener);return r},o.getListenersAsObject=function(e){var t,r=this.getListeners(e);return r instanceof Array&&((t={})[e]=r),t||r},o.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=_typeof(t))&&e(t.listener)}(t))throw new TypeError("listener must be a function");var r,n=this.getListenersAsObject(e),i="object"==_typeof(t);for(r in n)n.hasOwnProperty(r)&&-1===s(n[r],t)&&n[r].push(i?t:{listener:t,once:!1});return this},o.on=u("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=u("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var r,n,i=this.getListenersAsObject(e);for(n in i)i.hasOwnProperty(n)&&-1!==(r=s(i[n],t))&&i[n].splice(r,1);return this},o.off=u("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,r){var n,i,o=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=_typeof(t)||t instanceof RegExp)for(n=r.length;n--;)o.call(this,t,r[n]);else for(n in t)t.hasOwnProperty(n)&&(i=t[n])&&("function"==typeof i?o.call(this,n,i):a.call(this,n,i));return this},o.removeEvent=function(e){var t,r=_typeof(e),n=this._getEvents();if("string"===r)delete n[e];else if(e instanceof RegExp)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},o.removeAllListeners=u("removeEvent"),o.emitEvent=function(e,t){var r,n,i,o,a=this.getListenersAsObject(e);for(o in a)if(a.hasOwnProperty(o))for(r=a[o].slice(0),i=0;i<r.length;i++)!0===(n=r[i]).once&&this.removeListener(e,n.listener),n.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},o.trigger=u("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return t.EventEmitter=a,i},void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)}("undefined"!=typeof window?window:this||{})},function(e,t,r){var n=r(9).default,i=r(16),o=function(e){this.item=null,e&&void 0!==e.item&&null!==e.item&&(this.item=new i(e.item))};(o.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),o=t.fid;if(r==n.Type.STOP)break;switch(o){case 1:r==n.Type.STRUCT?(this.item=new i,this.item.read(e)):e.skip(r);break;case 0:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},o.prototype.write=function(e){e.writeStructBegin("ReportService_Report_args"),null!==this.item&&void 0!==this.item&&(e.writeFieldBegin("item",n.Type.STRUCT,1),this.item.write(e),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()};var a=function(e){};(a.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype);if(t.fid,r==n.Type.STOP)break;e.skip(r),e.readFieldEnd()}e.readStructEnd()},a.prototype.write=function(e){e.writeStructBegin("ReportService_Report_result"),e.writeFieldStop(),e.writeStructEnd()};var s=function(e,t){this.input=e,this.output=t||e,this.seqid=0};(s.prototype={}).Report=function(e,t){this.send_Report(e,t),t||this.recv_Report()},s.prototype.send_Report=function(e,t){if(this.output.writeMessageBegin("Report",n.MessageType.CALL,this.seqid),new o({item:e}).write(this.output),this.output.writeMessageEnd(),!t)return this.output.getTransport().flush();this.output.getTransport().flush(!0,(function(e){t(e)}))},s.prototype.recv_Report=function(){var e=this.input.readMessageBegin(),t=(e.fname,e.mtype);if(e.rseqid,t==n.MessageType.EXCEPTION){var r=new n.TApplicationException;throw r.read(this.input),this.input.readMessageEnd(),r}(new a).read(this.input),this.input.readMessageEnd()},e.exports={ReportService_Report_args:o,ReportService_Report_result:a,ReportServiceClient:s}},function(e,t,r){var n=r(9).default,i=r(17).VosdkHeader,o=function(e){this.header=null,this.appid=null,this.uname=null,this.ver=null,this.dk=null,this.details=null,e&&(void 0!==e.header&&null!==e.header&&(this.header=new i(e.header)),void 0!==e.appid&&null!==e.appid&&(this.appid=e.appid),void 0!==e.uname&&null!==e.uname&&(this.uname=e.uname),void 0!==e.ver&&null!==e.ver&&(this.ver=e.ver),void 0!==e.dk&&null!==e.dk&&(this.dk=e.dk),void 0!==e.details&&null!==e.details&&(this.details=e.details))};(o.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),o=t.fid;if(r==n.Type.STOP)break;switch(o){case 1:r==n.Type.STRUCT?(this.header=new i,this.header.read(e)):e.skip(r);break;case 2:r==n.Type.STRING?this.appid=e.readString().value:e.skip(r);break;case 3:r==n.Type.STRING?this.uname=e.readString().value:e.skip(r);break;case 4:r==n.Type.STRING?this.ver=e.readString().value:e.skip(r);break;case 5:r==n.Type.STRING?this.dk=e.readString().value:e.skip(r);break;case 6:r==n.Type.STRING?this.details=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},o.prototype.write=function(e){e.writeStructBegin("MiniappSession"),null!==this.header&&void 0!==this.header&&(e.writeFieldBegin("header",n.Type.STRUCT,1),this.header.write(e),e.writeFieldEnd()),null!==this.appid&&void 0!==this.appid&&(e.writeFieldBegin("appid",n.Type.STRING,2),e.writeString(this.appid),e.writeFieldEnd()),null!==this.uname&&void 0!==this.uname&&(e.writeFieldBegin("uname",n.Type.STRING,3),e.writeString(this.uname),e.writeFieldEnd()),null!==this.ver&&void 0!==this.ver&&(e.writeFieldBegin("ver",n.Type.STRING,4),e.writeString(this.ver),e.writeFieldEnd()),null!==this.dk&&void 0!==this.dk&&(e.writeFieldBegin("dk",n.Type.STRING,5),e.writeString(this.dk),e.writeFieldEnd()),null!==this.details&&void 0!==this.details&&(e.writeFieldBegin("details",n.Type.STRING,6),e.writeString(this.details),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()};var a=function(e){this.header=null,this.csurl=null,this.ec=null,this.gatewaylist=null,this.details=null,e&&(void 0!==e.header&&null!==e.header&&(this.header=new i(e.header)),void 0!==e.csurl&&null!==e.csurl&&(this.csurl=e.csurl),void 0!==e.ec&&null!==e.ec&&(this.ec=e.ec),void 0!==e.gatewaylist&&null!==e.gatewaylist&&(this.gatewaylist=n.copyList(e.gatewaylist,[null])),void 0!==e.details&&null!==e.details&&(this.details=e.details))};(a.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),o=t.fid;if(r==n.Type.STOP)break;switch(o){case 1:r==n.Type.STRUCT?(this.header=new i,this.header.read(e)):e.skip(r);break;case 2:r==n.Type.STRING?this.csurl=e.readString().value:e.skip(r);break;case 3:r==n.Type.STRING?this.ec=e.readString().value:e.skip(r);break;case 4:if(r==n.Type.LIST){var a,s;this.gatewaylist=[],(s=e.readListBegin()).etype,a=s.size;for(var u=0;u<a;++u){var c;c=e.readString().value,this.gatewaylist.push(c)}e.readListEnd()}else e.skip(r);break;case 5:r==n.Type.STRING?this.details=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},a.prototype.write=function(e){if(e.writeStructBegin("MiniappJoinChooseServer"),null!==this.header&&void 0!==this.header&&(e.writeFieldBegin("header",n.Type.STRUCT,1),this.header.write(e),e.writeFieldEnd()),null!==this.csurl&&void 0!==this.csurl&&(e.writeFieldBegin("csurl",n.Type.STRING,2),e.writeString(this.csurl),e.writeFieldEnd()),null!==this.ec&&void 0!==this.ec&&(e.writeFieldBegin("ec",n.Type.STRING,3),e.writeString(this.ec),e.writeFieldEnd()),null!==this.gatewaylist&&void 0!==this.gatewaylist){for(var t in e.writeFieldBegin("gatewaylist",n.Type.LIST,4),e.writeListBegin(n.Type.STRING,this.gatewaylist.length),this.gatewaylist)this.gatewaylist.hasOwnProperty(t)&&(t=this.gatewaylist[t],e.writeString(t));e.writeListEnd(),e.writeFieldEnd()}null!==this.details&&void 0!==this.details&&(e.writeFieldBegin("details",n.Type.STRING,5),e.writeString(this.details),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()};var s=function(e){this.header=null,this.gateway=null,this.ec=null,this.wsurl=null,this.details=null,e&&(void 0!==e.header&&null!==e.header&&(this.header=new i(e.header)),void 0!==e.gateway&&null!==e.gateway&&(this.gateway=e.gateway),void 0!==e.ec&&null!==e.ec&&(this.ec=e.ec),void 0!==e.wsurl&&null!==e.wsurl&&(this.wsurl=e.wsurl),void 0!==e.details&&null!==e.details&&(this.details=e.details))};(s.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),o=t.fid;if(r==n.Type.STOP)break;switch(o){case 1:r==n.Type.STRUCT?(this.header=new i,this.header.read(e)):e.skip(r);break;case 2:r==n.Type.STRING?this.gateway=e.readString().value:e.skip(r);break;case 3:r==n.Type.STRING?this.ec=e.readString().value:e.skip(r);break;case 4:r==n.Type.STRING?this.wsurl=e.readString().value:e.skip(r);break;case 5:r==n.Type.STRING?this.details=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},s.prototype.write=function(e){e.writeStructBegin("MiniappConnectWebSocket"),null!==this.header&&void 0!==this.header&&(e.writeFieldBegin("header",n.Type.STRUCT,1),this.header.write(e),e.writeFieldEnd()),null!==this.gateway&&void 0!==this.gateway&&(e.writeFieldBegin("gateway",n.Type.STRING,2),e.writeString(this.gateway),e.writeFieldEnd()),null!==this.ec&&void 0!==this.ec&&(e.writeFieldBegin("ec",n.Type.STRING,3),e.writeString(this.ec),e.writeFieldEnd()),null!==this.wsurl&&void 0!==this.wsurl&&(e.writeFieldBegin("wsurl",n.Type.STRING,4),e.writeString(this.wsurl),e.writeFieldEnd()),null!==this.details&&void 0!==this.details&&(e.writeFieldBegin("details",n.Type.STRING,5),e.writeString(this.details),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()};var u=function(e){this.header=null,this.uid=null,this.ec=null,this.isrejoin=null,this.details=null,e&&(void 0!==e.header&&null!==e.header&&(this.header=new i(e.header)),void 0!==e.uid&&null!==e.uid&&(this.uid=e.uid),void 0!==e.ec&&null!==e.ec&&(this.ec=e.ec),void 0!==e.isrejoin&&null!==e.isrejoin&&(this.isrejoin=e.isrejoin),void 0!==e.details&&null!==e.details&&(this.details=e.details))};(u.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),o=t.fid;if(r==n.Type.STOP)break;switch(o){case 1:r==n.Type.STRUCT?(this.header=new i,this.header.read(e)):e.skip(r);break;case 2:r==n.Type.STRING?this.uid=e.readString().value:e.skip(r);break;case 3:r==n.Type.STRING?this.ec=e.readString().value:e.skip(r);break;case 4:r==n.Type.BOOL?this.isrejoin=e.readBool().value:e.skip(r);break;case 5:r==n.Type.STRING?this.details=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},u.prototype.write=function(e){e.writeStructBegin("MiniappJoin"),null!==this.header&&void 0!==this.header&&(e.writeFieldBegin("header",n.Type.STRUCT,1),this.header.write(e),e.writeFieldEnd()),null!==this.uid&&void 0!==this.uid&&(e.writeFieldBegin("uid",n.Type.STRING,2),e.writeString(this.uid),e.writeFieldEnd()),null!==this.ec&&void 0!==this.ec&&(e.writeFieldBegin("ec",n.Type.STRING,3),e.writeString(this.ec),e.writeFieldEnd()),null!==this.isrejoin&&void 0!==this.isrejoin&&(e.writeFieldBegin("isrejoin",n.Type.BOOL,4),e.writeBool(this.isrejoin),e.writeFieldEnd()),null!==this.details&&void 0!==this.details&&(e.writeFieldBegin("details",n.Type.STRING,5),e.writeString(this.details),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()};var c=function(e){this.header=null,this.ec=null,this.pushurl=null,this.uid=null,this.details=null,e&&(void 0!==e.header&&null!==e.header&&(this.header=new i(e.header)),void 0!==e.ec&&null!==e.ec&&(this.ec=e.ec),void 0!==e.pushurl&&null!==e.pushurl&&(this.pushurl=e.pushurl),void 0!==e.uid&&null!==e.uid&&(this.uid=e.uid),void 0!==e.details&&null!==e.details&&(this.details=e.details))};(c.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),o=t.fid;if(r==n.Type.STOP)break;switch(o){case 1:r==n.Type.STRUCT?(this.header=new i,this.header.read(e)):e.skip(r);break;case 2:r==n.Type.STRING?this.ec=e.readString().value:e.skip(r);break;case 3:r==n.Type.STRING?this.pushurl=e.readString().value:e.skip(r);break;case 4:r==n.Type.STRING?this.uid=e.readString().value:e.skip(r);break;case 5:r==n.Type.STRING?this.details=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},c.prototype.write=function(e){e.writeStructBegin("MiniappPublish"),null!==this.header&&void 0!==this.header&&(e.writeFieldBegin("header",n.Type.STRUCT,1),this.header.write(e),e.writeFieldEnd()),null!==this.ec&&void 0!==this.ec&&(e.writeFieldBegin("ec",n.Type.STRING,2),e.writeString(this.ec),e.writeFieldEnd()),null!==this.pushurl&&void 0!==this.pushurl&&(e.writeFieldBegin("pushurl",n.Type.STRING,3),e.writeString(this.pushurl),e.writeFieldEnd()),null!==this.uid&&void 0!==this.uid&&(e.writeFieldBegin("uid",n.Type.STRING,4),e.writeString(this.uid),e.writeFieldEnd()),null!==this.details&&void 0!==this.details&&(e.writeFieldBegin("details",n.Type.STRING,5),e.writeString(this.details),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()};var l=function(e){this.header=null,this.ec=null,this.uid=null,this.details=null,e&&(void 0!==e.header&&null!==e.header&&(this.header=new i(e.header)),void 0!==e.ec&&null!==e.ec&&(this.ec=e.ec),void 0!==e.uid&&null!==e.uid&&(this.uid=e.uid),void 0!==e.details&&null!==e.details&&(this.details=e.details))};(l.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),o=t.fid;if(r==n.Type.STOP)break;switch(o){case 1:r==n.Type.STRUCT?(this.header=new i,this.header.read(e)):e.skip(r);break;case 2:r==n.Type.STRING?this.ec=e.readString().value:e.skip(r);break;case 3:r==n.Type.STRING?this.uid=e.readString().value:e.skip(r);break;case 5:r==n.Type.STRING?this.details=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},l.prototype.write=function(e){e.writeStructBegin("MiniappUnpublish"),null!==this.header&&void 0!==this.header&&(e.writeFieldBegin("header",n.Type.STRUCT,1),this.header.write(e),e.writeFieldEnd()),null!==this.ec&&void 0!==this.ec&&(e.writeFieldBegin("ec",n.Type.STRING,2),e.writeString(this.ec),e.writeFieldEnd()),null!==this.uid&&void 0!==this.uid&&(e.writeFieldBegin("uid",n.Type.STRING,3),e.writeString(this.uid),e.writeFieldEnd()),null!==this.details&&void 0!==this.details&&(e.writeFieldBegin("details",n.Type.STRING,5),e.writeString(this.details),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()};var p=function(e){this.header=null,this.ec=null,this.pullurl=null,this.peerid=null,this.details=null,e&&(void 0!==e.header&&null!==e.header&&(this.header=new i(e.header)),void 0!==e.ec&&null!==e.ec&&(this.ec=e.ec),void 0!==e.pullurl&&null!==e.pullurl&&(this.pullurl=e.pullurl),void 0!==e.peerid&&null!==e.peerid&&(this.peerid=e.peerid),void 0!==e.details&&null!==e.details&&(this.details=e.details))};(p.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),o=t.fid;if(r==n.Type.STOP)break;switch(o){case 1:r==n.Type.STRUCT?(this.header=new i,this.header.read(e)):e.skip(r);break;case 2:r==n.Type.STRING?this.ec=e.readString().value:e.skip(r);break;case 3:r==n.Type.STRING?this.pullurl=e.readString().value:e.skip(r);break;case 4:r==n.Type.STRING?this.peerid=e.readString().value:e.skip(r);break;case 5:r==n.Type.STRING?this.details=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},p.prototype.write=function(e){e.writeStructBegin("MiniappSubscribe"),null!==this.header&&void 0!==this.header&&(e.writeFieldBegin("header",n.Type.STRUCT,1),this.header.write(e),e.writeFieldEnd()),null!==this.ec&&void 0!==this.ec&&(e.writeFieldBegin("ec",n.Type.STRING,2),e.writeString(this.ec),e.writeFieldEnd()),null!==this.pullurl&&void 0!==this.pullurl&&(e.writeFieldBegin("pullurl",n.Type.STRING,3),e.writeString(this.pullurl),e.writeFieldEnd()),null!==this.peerid&&void 0!==this.peerid&&(e.writeFieldBegin("peerid",n.Type.STRING,4),e.writeString(this.peerid),e.writeFieldEnd()),null!==this.details&&void 0!==this.details&&(e.writeFieldBegin("details",n.Type.STRING,5),e.writeString(this.details),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()};var d=function(e){this.header=null,this.ec=null,this.peerid=null,this.details=null,e&&(void 0!==e.header&&null!==e.header&&(this.header=new i(e.header)),void 0!==e.ec&&null!==e.ec&&(this.ec=e.ec),void 0!==e.peerid&&null!==e.peerid&&(this.peerid=e.peerid),void 0!==e.details&&null!==e.details&&(this.details=e.details))};(d.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),o=t.fid;if(r==n.Type.STOP)break;switch(o){case 1:r==n.Type.STRUCT?(this.header=new i,this.header.read(e)):e.skip(r);break;case 2:r==n.Type.STRING?this.ec=e.readString().value:e.skip(r);break;case 3:r==n.Type.STRING?this.peerid=e.readString().value:e.skip(r);break;case 4:r==n.Type.STRING?this.details=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},d.prototype.write=function(e){e.writeStructBegin("MiniappUnsubscribe"),null!==this.header&&void 0!==this.header&&(e.writeFieldBegin("header",n.Type.STRUCT,1),this.header.write(e),e.writeFieldEnd()),null!==this.ec&&void 0!==this.ec&&(e.writeFieldBegin("ec",n.Type.STRING,2),e.writeString(this.ec),e.writeFieldEnd()),null!==this.peerid&&void 0!==this.peerid&&(e.writeFieldBegin("peerid",n.Type.STRING,3),e.writeString(this.peerid),e.writeFieldEnd()),null!==this.details&&void 0!==this.details&&(e.writeFieldBegin("details",n.Type.STRING,4),e.writeString(this.details),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()};var f=function(e){this.header=null,this.uid=null,this.details=null,e&&(void 0!==e.header&&null!==e.header&&(this.header=new i(e.header)),void 0!==e.uid&&null!==e.uid&&(this.uid=e.uid),void 0!==e.details&&null!==e.details&&(this.details=e.details))};(f.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),o=t.fid;if(r==n.Type.STOP)break;switch(o){case 1:r==n.Type.STRUCT?(this.header=new i,this.header.read(e)):e.skip(r);break;case 2:r==n.Type.STRING?this.uid=e.readString().value:e.skip(r);break;case 3:r==n.Type.STRING?this.details=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},f.prototype.write=function(e){e.writeStructBegin("MiniappLeave"),null!==this.header&&void 0!==this.header&&(e.writeFieldBegin("header",n.Type.STRUCT,1),this.header.write(e),e.writeFieldEnd()),null!==this.uid&&void 0!==this.uid&&(e.writeFieldBegin("uid",n.Type.STRING,2),e.writeString(this.uid),e.writeFieldEnd()),null!==this.details&&void 0!==this.details&&(e.writeFieldBegin("details",n.Type.STRING,3),e.writeString(this.details),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()};var h=function(e){this.header=null,this.action=null,this.details=null,this.req_ts=null,e&&(void 0!==e.header&&null!==e.header&&(this.header=new i(e.header)),void 0!==e.action&&null!==e.action&&(this.action=e.action),void 0!==e.details&&null!==e.details&&(this.details=e.details),void 0!==e.req_ts&&null!==e.req_ts&&(this.req_ts=e.req_ts))};(h.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),o=t.fid;if(r==n.Type.STOP)break;switch(o){case 1:r==n.Type.STRUCT?(this.header=new i,this.header.read(e)):e.skip(r);break;case 2:r==n.Type.STRING?this.action=e.readString().value:e.skip(r);break;case 3:r==n.Type.STRING?this.details=e.readString().value:e.skip(r);break;case 4:r==n.Type.I64?this.req_ts=e.readI64().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},h.prototype.write=function(e){e.writeStructBegin("MiniappServerEvent"),null!==this.header&&void 0!==this.header&&(e.writeFieldBegin("header",n.Type.STRUCT,1),this.header.write(e),e.writeFieldEnd()),null!==this.action&&void 0!==this.action&&(e.writeFieldBegin("action",n.Type.STRING,2),e.writeString(this.action),e.writeFieldEnd()),null!==this.details&&void 0!==this.details&&(e.writeFieldBegin("details",n.Type.STRING,3),e.writeString(this.details),e.writeFieldEnd()),null!==this.req_ts&&void 0!==this.req_ts&&(e.writeFieldBegin("req_ts",n.Type.I64,4),e.writeI64(this.req_ts),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()};var _=function(e){this.header=null,this.url=null,this.code=null,this.status=null,this.error=null,this.details=null,e&&(void 0!==e.header&&null!==e.header&&(this.header=new i(e.header)),void 0!==e.url&&null!==e.url&&(this.url=e.url),void 0!==e.code&&null!==e.code&&(this.code=e.code),void 0!==e.status&&null!==e.status&&(this.status=e.status),void 0!==e.error&&null!==e.error&&(this.error=e.error),void 0!==e.details&&null!==e.details&&(this.details=e.details))};(_.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),o=t.fid;if(r==n.Type.STOP)break;switch(o){case 1:r==n.Type.STRUCT?(this.header=new i,this.header.read(e)):e.skip(r);break;case 2:r==n.Type.STRING?this.url=e.readString().value:e.skip(r);break;case 3:r==n.Type.STRING?this.code=e.readString().value:e.skip(r);break;case 4:r==n.Type.STRING?this.status=e.readString().value:e.skip(r);break;case 5:r==n.Type.STRING?this.error=e.readString().value:e.skip(r);break;case 6:r==n.Type.STRING?this.details=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},_.prototype.write=function(e){e.writeStructBegin("MiniappPusherState"),null!==this.header&&void 0!==this.header&&(e.writeFieldBegin("header",n.Type.STRUCT,1),this.header.write(e),e.writeFieldEnd()),null!==this.url&&void 0!==this.url&&(e.writeFieldBegin("url",n.Type.STRING,2),e.writeString(this.url),e.writeFieldEnd()),null!==this.code&&void 0!==this.code&&(e.writeFieldBegin("code",n.Type.STRING,3),e.writeString(this.code),e.writeFieldEnd()),null!==this.status&&void 0!==this.status&&(e.writeFieldBegin("status",n.Type.STRING,4),e.writeString(this.status),e.writeFieldEnd()),null!==this.error&&void 0!==this.error&&(e.writeFieldBegin("error",n.Type.STRING,5),e.writeString(this.error),e.writeFieldEnd()),null!==this.details&&void 0!==this.details&&(e.writeFieldBegin("details",n.Type.STRING,6),e.writeString(this.details),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()};var g=function(e){this.header=null,this.url=null,this.code=null,this.status=null,this.error=null,this.details=null,e&&(void 0!==e.header&&null!==e.header&&(this.header=new i(e.header)),void 0!==e.url&&null!==e.url&&(this.url=e.url),void 0!==e.code&&null!==e.code&&(this.code=e.code),void 0!==e.status&&null!==e.status&&(this.status=e.status),void 0!==e.error&&null!==e.error&&(this.error=e.error),void 0!==e.details&&null!==e.details&&(this.details=e.details))};(g.prototype={}).read=function(e){for(e.readStructBegin();;){var t=e.readFieldBegin(),r=(t.fname,t.ftype),o=t.fid;if(r==n.Type.STOP)break;switch(o){case 1:r==n.Type.STRUCT?(this.header=new i,this.header.read(e)):e.skip(r);break;case 2:r==n.Type.STRING?this.url=e.readString().value:e.skip(r);break;case 3:r==n.Type.STRING?this.code=e.readString().value:e.skip(r);break;case 4:r==n.Type.STRING?this.status=e.readString().value:e.skip(r);break;case 5:r==n.Type.STRING?this.error=e.readString().value:e.skip(r);break;case 6:r==n.Type.STRING?this.details=e.readString().value:e.skip(r);break;default:e.skip(r)}e.readFieldEnd()}e.readStructEnd()},g.prototype.write=function(e){e.writeStructBegin("MiniappPlayerState"),null!==this.header&&void 0!==this.header&&(e.writeFieldBegin("header",n.Type.STRUCT,1),this.header.write(e),e.writeFieldEnd()),null!==this.url&&void 0!==this.url&&(e.writeFieldBegin("url",n.Type.STRING,2),e.writeString(this.url),e.writeFieldEnd()),null!==this.code&&void 0!==this.code&&(e.writeFieldBegin("code",n.Type.STRING,3),e.writeString(this.code),e.writeFieldEnd()),null!==this.status&&void 0!==this.status&&(e.writeFieldBegin("status",n.Type.STRING,4),e.writeString(this.status),e.writeFieldEnd()),null!==this.error&&void 0!==this.error&&(e.writeFieldBegin("error",n.Type.STRING,5),e.writeString(this.error),e.writeFieldEnd()),null!==this.details&&void 0!==this.details&&(e.writeFieldBegin("details",n.Type.STRING,6),e.writeString(this.details),e.writeFieldEnd()),e.writeFieldStop(),e.writeStructEnd()},e.exports={MiniappSession:o,MiniappJoinChooseServer:a,MiniappConnectWebSocket:s,MiniappJoin:u,MiniappPublish:c,MiniappUnpublish:l,MiniappSubscribe:p,MiniappUnsubscribe:d,MiniappLeave:f,MiniappServerEvent:h,MiniappPusherState:_,MiniappPlayerState:g}},function(e,t,r){"use strict";e.exports=r(40)},function(e,t,r){"use strict";var n=t;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(18),n.BufferWriter=r(49),n.Reader=r(19),n.BufferReader=r(50),n.util=r(7),n.rpc=r(51),n.roots=r(53),n.configure=i,i()},function(e,t,r){"use strict";e.exports=function(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise((function(i,a){r[n]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(e){o&&(o=!1,a(e))}}))}},function(e,t,r){"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var i=new Array(64),o=new Array(123),a=0;a<64;)o[i[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;n.encode=function(e,t,r){for(var n,o=null,a=[],s=0,u=0;t<r;){var c=e[t++];switch(u){case 0:a[s++]=i[c>>2],n=(3&c)<<4,u=1;break;case 1:a[s++]=i[n|c>>4],n=(15&c)<<2,u=2;break;case 2:a[s++]=i[n|c>>6],a[s++]=i[63&c],u=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return u&&(a[s++]=i[n],a[s++]=61,1===u&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))},n.decode=function(e,t,r){for(var n,i=r,a=0,s=0;s<e.length;){var u=e.charCodeAt(s++);if(61===u&&a>1)break;if(void 0===(u=o[u]))throw Error("invalid encoding");switch(a){case 0:n=u,a=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,a=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,a=3;break;case 3:t[r++]=(3&n)<<6|u,a=0}}if(1===a)throw Error("invalid encoding");return r-i},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,r){"use strict";function n(){this._listeners={}}e.exports=n,n.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},n.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},n.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},function(e,t,r){"use strict";function n(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function o(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:o,e.writeFloatBE=n?o:i,e.readFloatLE=n?a:s,e.readFloatBE=n?s:a}():function(){function t(e,t,r,n){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,r,n)}}function r(e,t,r){var n=e(t,r),i=2*(n>>31)+1,o=n>>>23&255,a=8388607&n;return 255===o?a?NaN:i*(1/0):0===o?1401298464324817e-60*i*a:i*Math.pow(2,o-150)*(a+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,o),e.readFloatLE=r.bind(null,a),e.readFloatBE=r.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function o(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:o,e.writeDoubleBE=n?o:i,e.readDoubleLE=n?a:s,e.readDoubleBE=n?s:a}():function(){function t(e,t,r,n,i,o){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,i,o+t),e(1/n>0?0:2147483648,i,o+r);else if(isNaN(n))e(0,i,o+t),e(2146959360,i,o+r);else if(n>17976931348623157e292)e(0,i,o+t),e((a<<31|2146435072)>>>0,i,o+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,i,o+t),e((a<<31|s/4294967296)>>>0,i,o+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(s=n*Math.pow(2,-u))>>>0,i,o+t),e((a<<31|u+1023<<20|1048576*s&1048575)>>>0,i,o+r)}}}function r(e,t,r,n,i){var o=e(n,i+t),a=e(n,i+r),s=2*(a>>31)+1,u=a>>>20&2047,c=4294967296*(1048575&a)+o;return 2047===u?c?NaN:s*(1/0):0===u?5e-324*s*c:s*Math.pow(2,u-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=r.bind(null,a,0,4),e.readDoubleBE=r.bind(null,s,4,0)}(),e}function i(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function o(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=n(n)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,r){"use strict";var n=t;n.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},n.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,o=[],a=0;t<r;)(n=e[t++])<128?o[a++]=n:n>191&&n<224?o[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(n>>10),o[a++]=56320+(1023&n)):o[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},n.write=function(e,t,r){for(var n,i,o=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(i=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&i),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=r||8192,i=n>>>1,o=null,a=n;return function(r){if(r<1||r>i)return e(r);a+r>n&&(o=e(n),a=0);var s=t.call(o,a,a+=r);return 7&a&&(a=1+(7|a)),s}}},function(e,t,r){"use strict";e.exports=i;var n=r(7);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var a=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(n.isString(e)){if(!n.Long)return i.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;i.fromHash=function(e){return e===a?o:new i((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},function(e,t,r){"use strict";e.exports=o;var n=r(18);(o.prototype=Object.create(n.prototype)).constructor=o;var i=r(7);function o(){n.call(this)}function a(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},o._configure()},function(e,t,r){"use strict";e.exports=o;var n=r(19);(o.prototype=Object.create(n.prototype)).constructor=o;var i=r(7);function o(e){n.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},function(e,t,r){"use strict";t.Service=r(52)},function(e,t,r){"use strict";e.exports=i;var n=r(7);function i(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,o,a){if(!o)throw TypeError("request must be specified");var s=this;if(!a)return n.asPromise(e,s,t,r,i,o);if(s.rpcImpl)try{return s.rpcImpl(t,r[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,r){if(e)return s.emit("error",e,t),a(e);if(null!==r){if(!(r instanceof i))try{r=i[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",r,t),a(null,r)}s.end(!0)}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,r){"use strict";e.exports={}},function(e,t,r){"use strict";r.r(t);var n=r(2),i=r.n(n),o=r(3),a=r.n(o),s=r(4),u=r(5),c=r(8),l=r.n(c),p=r(12),d=r.n(p),f=r(1),h=function(e){return e=e||Object.create(null),{on:function(t,r){(e[t]||(e[t]=[])).push(r)},off:function(t,r){e[t]&&e[t].splice(e[t].indexOf(r)>>>0,1)},emit:function(t,r){(e[t]||[]).slice().map((function(e){e(r)})),(e["*"]||[]).slice().map((function(e){e(t,r)}))}}},_=(r(31),r(21)),g=r.n(_),v=r(11),b=r.n(v),m="success",y="fail",E=function(){function e(){i()(this,e),this.vid=R().vid,this.url="https://report-ad.agoralab.co/v1/report",this.sdk_version=u.SDK_VERSION,this.onlineTimer=null}return a()(e,[{key:"onlineUser",value:function(){var e=this;this.onlineTimer=setInterval((function(){e.report("online_user")}),2e4)}},{key:"destroy",value:function(){null!==this.onlineTimer&&clearInterval(this.onlineTimer)}},{key:"report",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=Date.now(),o={pts:[{m:"online_user"===e?"online_user":"event",ls:{vid:this.vid,version:this.sdk_version},vs:{count:1}}],sign:b()("src=miniapp&ts=".concat(i)),src:"miniapp",ts:i};if("online_user"!==e){var a={event:e,result:"success"===t?"1":"0",err_code:r.toString()};"pusher_state_change"!==e&&"player_state_change"!==e||void 0!==n&&("string"==typeof n?a.message=n:(a.wx_version=n.version,a.user_mobile_model=n.model,a.user_IP=n.ip,a.system=n.system)),g()(o.pts[0].ls,a)}return this.request({body:o,url:this.url})}},{key:"request",value:function(e){return new Promise((function(t,r){wx.request({url:e.url,data:e.body,header:{"content-type":"application/json"},method:"POST",success:function(e){f.default.info("weixin request report success"),200===e.statusCode?(f.default.info("response success"),t(e)):f.default.info("response fail: ".concat(e.statusCode))},fail:function(e){f.default.warn("weixin request report fail"),r(e)}})}))}}]),e}(),T={};function R(){return T}var w=["https://uap-ap-web-1.agora.io/api/v1","https://uap-ap-web-3.agora.io/api/v1","https://uap-ap-web-2.agoraio.cn/api/v1","https://uap-ap-web-4.agoraio.cn/api/v1"],S=function(){function e(t,r){i()(this,e),this.serverlist=[],this.option=t,this.index=0,this.isInit=!0,this.state="disconnected",this.hasInvokeClose=!1,this.emitter=r,this.on=this.emitter.on,this.off=this.emitter.off,this.emit=this.emitter.emit}return a()(e,[{key:"connect",value:function(){var e=this;"disconnected"!==this.state&&this.close(),function(e){var t=e.reportManager,r=e.grafanaReport,n={command:"convergeAllocateEdge",sid:e.sid,appId:e.appId,token:e.appId,uid:e.uid+"",cname:e.channel,ts:Math.floor(Date.now()/1e3),version:u.VERSION,seq:0,requestId:1};return new Promise((function(i,o){var a=0,s=function(r,n){try{t.report("chooseServer",{header:{sid:e.sid,cname:e.channel,uid:e.uid,success:!1},body:{csurl:n,ec:JSON.stringify(r)}})}catch(e){}4==++a&&o(r)},u=function(o){var a=w[o];wx.request({url:a,data:{service_name:"miniapp",json_body:JSON.stringify(n)},header:{"content-type":"application/json","X-Packet-URI":61,"X-Packet-Service-Type":0},method:"POST",success:function(n){var o,u,c=n.data;if(f.default.debug("From choose server",n),n.profile?(o=n.profile.peerIP,T.ip=o):f.default.debug("skip user IP report!"),200!==n.statusCode){s({code:901,reason:c.error||"choose server fail"},a);try{r.report("chooseServer",y,n.statusCode)}catch(e){}}else{var l=JSON.parse(c.json_body);u=l.vid,T.vid=u;var p=function(e){if(void 0!==e)return e.map((function(e){var t=e.address.split("."),r=t.length;return"wss://miniapp.agoraio.cn/".concat(t[r-4],"-").concat(t[r-3],"-").concat(t[r-2],"-").concat(t[r-1],"/api")}));f.default.error("miniapp service is not enabled for this AppID")}(l.servers);t.report("chooseServer",{header:{sid:e.sid,cname:e.channel,uid:e.uid,success:!0},body:{csurl:a,gatewaylist:p}});try{r.report("chooseServer",m)}catch(e){}i({serverlist:p,url:a})}},fail:function(e){s({code:901,reason:e.errMsg||"choose server fail"},a)}})};w.map((function(e,t){u(t)}))}))}(this.option).then((function(t){var r=t.serverlist,n=t.url;f.default.debug("Get server list from "+n),e.index=0,e.serverlist=r,e.option&&e.option.servers&&(e.serverlist=e.option.servers),f.default.debug("Connect server with list: ",e.serverlist),e.connectWorker(e.serverlist[e.index])})).catch((function(t){e.emit&&e.emit("socketError",t)}))}},{key:"connectWorker",value:function(){var e=this;this.state="connecting";var t=this.serverlist[this.index];f.default.debug("Connect server: ",t);var r=this.option,n=r.sid,i=r.channel,o=r.uid,a=r.reportManager,s=r.grafanaReport;this.ws=wx.connectSocket({url:t,complete:function(e){return f.default.debug("wxSocket: complete: ",e)},fail:function(e){f.default.debug("wxSocket: fail: ",e),a&&a.report("connectWebSocket",{header:{sid:n,cname:i,uid:o,success:!1},body:{wsurl:t,ec:JSON.stringify(e)}}),s&&s.report("connectWebSocket",y,e.statusCode)},success:function(e){f.default.debug("wxSocket success: ",e),a&&a.report("connectWebSocket",{header:{sid:n,cname:i,uid:o,success:!0},body:{wsurl:t}}),s&&s.report("connectWebSocket",m)}}),this.ws.onOpen(this._onopen.bind(this)),this.ws.onMessage(this._onmessage.bind(this)),this.establishWSTimeoutTimer=setTimeout((function(){"connected"!==e.state&&e.connectNextWorker()}),5e3)}},{key:"connectNextWorker",value:function(){"disconnected"!==this.state&&this.close(),f.default.debug(this.index,this.serverlist.length),this.index>=this.serverlist.length-1?this.emit&&this.emit("socketError",{code:905,reason:"connect websocket failed",wsurl:JSON.stringify(this.serverlist)}):(this.index++,this.connectWorker())}},{key:"_onopen",value:function(){f.default.info("websocket onopen"),clearTimeout(this.establishWSTimeoutTimer),this.state="connected",this.isInit=!1,this.hasInvokeClose?f.default.debug("Alread invoke ws.Close, will not throw onopen event"):(this.ws.onClose(this._onclose.bind(this)),this.emit&&this.emit("onopen"))}},{key:"_onclose",value:function(e){f.default.info("websocket onclose:"+JSON.stringify(e)),this.emitter.emit("_wsClose"),clearTimeout(this.establishWSTimeoutTimer),this.state="disconnected",e&&"close"==e.reason||this.hasInvokeClose||(this.isInit?this.connectNextWorker():this.emit&&this.emit("onclose"))}},{key:"_onmessage",value:function(e){this.hasInvokeClose||(f.default.blind("receive message: ",JSON.stringify(e)),this.isConnected()&&this.emit&&this.emit("onmessage",e))}},{key:"isConnected",value:function(){return"connected"===this.state}},{key:"sendMessage",value:function(e){f.default.blind("send message: ",e),this.isConnected()&&this.ws&&this.ws.send({data:e})}},{key:"_checkServerList",value:function(e){return e instanceof Array!=0&&0!=e.length}},{key:"destroy",value:function(e){var t=this;"disconnected"!==this.state&&this.close(),this.on("_wsClose",(function r(){t.off("_wsClose",r),t.serverlist=null,t.ws=null,t.emitter=null,t.on=null,t.off=null,t.emit=null,e&&e()}))}},{key:"close",value:function(){f.default.debug("Close websocket"),clearTimeout(this.establishWSTimeoutTimer),this.hasInvokeClose=!0,this.state="disconnected",this.ws&&this.ws.close({reason:"close"}),this.ws=null}}]),e}(),I=function(){function e(t){i()(this,e),this.appId=t.appId,this.channel=t.channel,this.uid=t.uid+"",this.sid=t.sid,this.seq=1,this.requestId=2}return a()(e,[{key:"setSid",value:function(e){this.sid=e}},{key:"_getWorkerManagerMsg",value:function(){return{appId:this.appId,cname:this.channel,uid:this.uid,sid:this.sid,sdkVersion:u.VERSION,seq:++this.seq,requestId:++this.requestId,ts:Math.floor(Date.now()/1e3)}}},{key:"send",value:function(e){var t=this._getWorkerManagerMsg();return t.clientRequest=e,t}},{key:"updatePushUrl",value:function(){var e=this._getWorkerManagerMsg();return e.clientRequest={action:"update_url",role:"publish",uid:+this.uid},e}},{key:"ping",value:function(){return{command:"ping",requestId:++this.requestId,appId:this.appId,cname:this.channel,uid:this.uid+"",sid:this.sid,ts:Math.floor(Date.now()/1e3)}}},{key:"ping2",value:function(){var e=this._getWorkerManagerMsg();return e.clientRequest={action:"ping"},e}},{key:"setRole",value:function(e){var t=this._getWorkerManagerMsg();return t.clientRequest={action:"set_role",role:e},t}},{key:"rejoin",value:function(e,t,r,n,i,o){var a=this._getWorkerManagerMsg();return a.clientRequest={action:"join",role:o,appId:e,key_vocs:n||e,key_vos:n||e,channel_name:t,uid:r+"",known_speakers:i,clientType:"undefined"==typeof qq?"wechat":"qq"},a}},{key:"join",value:function(e,t,r,n,i,o,a){var s=this._getWorkerManagerMsg();return s.clientRequest={action:"join",role:i,appId:e,key_vocs:n||e,key_vos:n||e,channel_name:t,uid:r+"",vid:R().vid.toString(),device:o,os:a,version:u.SDK_VERSION,clientType:"undefined"==typeof qq?"wechat":"qq"},s}},{key:"muteLocal",value:function(e,t){var r=this._getWorkerManagerMsg();return r.clientRequest={action:"mute_local",uid:+e,target:t,mute:!0},r}},{key:"unmuteLocal",value:function(e,t){var r=this._getWorkerManagerMsg();return r.clientRequest={action:"mute_local",uid:+e,target:t,mute:!1},r}},{key:"mute",value:function(e,t){var r=this._getWorkerManagerMsg();return r.clientRequest={action:"mute",uid:+e,target:t},r}},{key:"unmute",value:function(e,t){var r=this._getWorkerManagerMsg();return r.clientRequest={action:"unmute",uid:+e,target:t},r}},{key:"publish",value:function(e){var t=this._getWorkerManagerMsg();return t.clientRequest={action:"publish",uid:+e},t}},{key:"unpublish",value:function(e){var t=this._getWorkerManagerMsg();return t.clientRequest={action:"unpublish",uid:+e},t}},{key:"subscribe",value:function(e,t){var r=this._getWorkerManagerMsg();return r.clientRequest={action:"subscribe",uid:+e,options:{audio:t.audio,video:t.video}},r}},{key:"unsubscribe",value:function(e){var t=this._getWorkerManagerMsg();return t.clientRequest={action:"unsubscribe",uid:[+e]},t}},{key:"setRemoteVideoStreamType",value:function(e,t){var r=this._getWorkerManagerMsg();return r.clientRequest={action:"set_remote_stream_type",uid:+e,type:t},r}},{key:"renewToken",value:function(e){var t=this._getWorkerManagerMsg();return t.clientRequest={action:"update_key",key_vos:e},t}},{key:"leave",value:function(e){var t=this._getWorkerManagerMsg();return t.clientRequest={action:"leave",uid:+e},t}}]),e}(),A=r(0),O=r.n(A),C=function(){function e(t,r){i()(this,e),this.appId=t.appId,this.channel=t.channel,this.uid=t.uid,this.sid=t.sid,this.role=t.role,this.channelKey=t.channelKey,this.clientId="client",this.option=t,this.timers=new Set,this.reportManager=t.reportManager,this.grafanaReport=t.grafanaReport,this.clientEmitter=r,this.emitter=new h,this.on=this.emitter.on,this.off=this.emitter.off,this.emit=this.emitter.emit,this.join=this.join.bind(this),this.msgManager=new I(t)}var t,r,n;return a()(e,[{key:"connect",value:function(){var e=this;return new Promise((function(t,r){e.ws=new S(e.option,e.emitter),e.ws.connect(),e.on("onmessage",e._onMessage.bind(e)),e.on("socketError",r),e.on("onopen",(function r(){e.off&&e.off("onopen",r),e._ping(),t()})),e.on("onclose",(function(){return e.clientEmitter.emit("error",{code:904,reason:"websocket disconnected"})}))}))}},{key:"_onMessage",value:function(e){if(e&&e.data){var t=JSON.parse(e.data);if(t&&"pong"!==t.command){f.default.debug("worker message: ",t),f.default.debug("code message:",t);try{this.reportManager.report("serverEvent",{header:{sid:this.sid,cname:this.channel,uid:this.uid,success:!0},body:{action:"serverEvent",details:t,req_ts:+new Date}})}catch(e){}}if(t.requestId&&this.emit(t.requestId,t),"serverStatus"===t.command){if(t.code&&200!==t.code){if(503===t.code)return;this.clientEmitter.emit("error",{code:t.code,reason:t.reason||"server error"})}if(t.serverStatus){f.default.info("Receive message from server: ".concat(JSON.stringify(t.serverStatus)));var r=t.serverStatus.action;if("audio-mute"==r)return t.serverStatus.mute?this.clientEmitter.emit("mute-audio",{uid:t.serverStatus.uid}):this.clientEmitter.emit("unmute-audio",{uid:t.serverStatus.uid});if("video-mute"==r)return t.serverStatus.mute?this.clientEmitter.emit("mute-video",{uid:t.serverStatus.uid}):this.clientEmitter.emit("unmute-video",{uid:t.serverStatus.uid});if("key-expired"===r)return this.clientEmitter.emit("token-privilege-did-expire");if("key-will-expire"===r)return this.clientEmitter.emit("token-privilege-will-expire");this.clientEmitter.emit(r,t.serverStatus)}}}}},{key:"_sendMessage",value:function(e){var t=this;if(this.ws)return new Promise((function(r,n){if(!t.isWSConnected())return n({code:904,reason:"websocket disconnected",wsurl:t.getWSUrl()});"ping"!==e.command&&f.default.debug("send to woker: ",e);var i,o=e?e.requestId:null,a=function e(a){if(t.ws)return t.off(o,e),clearTimeout(i),t.timers.delete(i),200==a.code?r(a.serverResponse):n({code:a.code,reason:a.msg||a.reason,serverResponse:a.serverResponse,wsurl:t.getWSUrl()})};if(!o)return n({code:902,reason:"no requestid"});t.ws.sendMessage(JSON.stringify(e)),t.on(o,a),i=setTimeout((function(){return a({code:903,reason:"time out"})}),1e4),t.timers.add(i)}))}},{key:"_ping",value:function(){var e=this;this.pingTimer=setInterval((function(){e.ws.sendMessage(JSON.stringify(e.msgManager.ping()))}),3e3)}},{key:"setRole",value:function(e){return this._sendMessage(this.msgManager.setRole(e))}},{key:"rejoin",value:function(e){return this._sendMessage(this.msgManager.rejoin(this.appId,this.channel,this.uid,this.channelKey,e,this.role))}},{key:"join",value:function(e,t){return this._sendMessage(this.msgManager.join(this.appId,this.channel,this.uid,this.channelKey,this.role,e,t))}},{key:"send",value:function(e){return this._sendMessage(this.msgManager.send(e))}},{key:"updatePushUrl",value:function(){return this._sendMessage(this.msgManager.updatePushUrl())}},{key:"publish",value:function(){return this._sendMessage(this.msgManager.publish(this.uid))}},{key:"unpublish",value:function(){return this._sendMessage(this.msgManager.unpublish(this.uid))}},{key:"subscribe",value:function(e,t){return this._sendMessage(this.msgManager.subscribe(e,t))}},{key:"unsubscribe",value:function(e){return this._sendMessage(this.msgManager.unsubscribe(e))}},{key:"setRemoteVideoStreamType",value:function(e,t){return this._sendMessage(this.msgManager.setRemoteVideoStreamType(e,t))}},{key:"mute",value:function(e,t){return this._sendMessage(this.msgManager.mute(e,t))}},{key:"unmute",value:function(e,t){return this._sendMessage(this.msgManager.unmute(e,t))}},{key:"muteLocal",value:function(e){return this._sendMessage(this.msgManager.muteLocal(this.uid,e))}},{key:"unmuteLocal",value:function(e){return this._sendMessage(this.msgManager.unmuteLocal(this.uid,e))}},{key:"renewToken",value:function(e){return this._sendMessage(this.msgManager.renewToken(e))}},{key:"leave",value:function(){return this._sendMessage(this.msgManager.leave(this.uid))}},{key:"isWSConnected",value:function(){return!!this.ws&&this.ws.isConnected()}},{key:"getWSUrl",value:function(){return this.ws.serverlist[this.ws.index]}},{key:"destroy",value:function(e){var t=this;clearInterval(this.pingTimer),this.timers.forEach((function(e){clearInterval(e)})),this.timers=null,this.ws&&this.ws.destroy((function(){t.ws=null,t.emitter=null,t.on=null,t.off=null,t.emit=null,e&&e()}))}},{key:"startChannelMediaRelay",value:(n=d()(l.a.mark((function e(t){var r,n,i,o,a,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.channelMediaRelayController){e.next=2;break}throw new A.ChannelMediaError("RELAY_ALREADY_START","",A.CHANNEL_MEDIA_RELAY_ERROR.RELAY_ALREADY_START);case 2:return r=function(e){s.clientEmitter.emit({type:"channel-media-relay-event",code:e})},n=function(e,t,r){e===A.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE&&t===A.CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST&&(s.channelMediaRelayController.dispose(),s.channelMediaRelayController=null),s.clientEmitter.emit({type:"channel-media-relay-state",state:e,code:t,data:r})},i={token:this.appId,appId:this.appId,cname:this.channel,uid:this.uid,sid:this.sid,clientId:this.clientId},this.channelMediaRelayController=new O.a(i,this.clientId),this.channelMediaRelayController.on("event",r),this.channelMediaRelayController.on("state",n),e.prev=8,e.next=11,this.channelMediaRelayController.startChannelMediaRelay(t);case 11:e.next=23;break;case 13:throw e.prev=13,e.t0=e.catch(8),f.default.debug("[".concat(this.clientId,"] startChannelMediaRelay exception: ").concat(JSON.stringify(e.t0))),o=A.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,a=e.t0 instanceof A.ChannelMediaError?"SetSourceChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetSourceChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_SRC":"SetDestChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetDestChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_DEST":e.t0.data&&e.t0.data.serverResponse&&"StartPacketTransfer"===e.t0.data.serverResponse.command?"FAILED_PACKET_SENT_TO_DEST":e.t0.message===A.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.t0.message===A.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.t0.message===A.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.t0.message===A.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.t0.message===A.CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT?"NO_RESOURCE_AVAILABLE":e.t0.message===A.CHANNEL_MEDIA_ERROR.WS_ABORT||e.t0.message===A.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",this.clientEmitter.emit({type:"channel-media-relay-state",state:o,code:A.CHANNEL_MEDIA_RELAY_ERROR[a]}),this.channelMediaRelayController&&(this.channelMediaRelayController.dispose(),this.channelMediaConfig=null,this.channelMediaRelayController=null),this.clientEmitter.emit({type:"channel-media-relay-state",state:A.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new A.ChannelMediaError(a,null,A.CHANNEL_MEDIA_RELAY_ERROR[a]);case 23:this.clientEmitter.emit({type:"channel-media-relay-state",state:A.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING,code:A.CHANNEL_MEDIA_RELAY_ERROR.RELAY_OK}),this.channelMediaConfig=t;case 25:case"end":return e.stop()}}),e,this,[[8,13]])}))),function(e){return n.apply(this,arguments)})},{key:"updateChannelMediaRelay",value:(r=d()(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.channelMediaRelayController){e.next=2;break}throw new A.ChannelMediaError("RELAY_NOT_START",null,A.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return e.prev=2,e.next=5,this.channelMediaRelayController.updateChannelMediaRelay(t);case 5:e.next=18;break;case 7:throw e.prev=7,e.t0=e.catch(2),f.default.debug("[".concat(this.clientId,"] updateChannelMediaRelay exception: ").concat(JSON.stringify(e.t0))),r=A.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,n=e.t0 instanceof A.ChannelMediaError?e.t0.message===A.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.t0.message===A.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.t0.message===A.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.t0.message===A.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.t0.message===A.CHANNEL_MEDIA_ERROR.WS_ABORT||e.t0.message===A.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",this.clientEmitter.emit({type:"channel-media-relay-event",code:A.CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL_REFUSED}),this.clientEmitter.emit({type:"channel-media-relay-state",state:r,code:A.CHANNEL_MEDIA_RELAY_ERROR[n]}),this.channelMediaRelayController&&(this.channelMediaRelayController.dispose(),this.channelMediaConfig=null,this.channelMediaRelayController=null),this.clientEmitter.emit({type:"channel-media-relay-state",state:A.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new A.ChannelMediaError(n,null,A.CHANNEL_MEDIA_RELAY_ERROR[n]);case 18:this.channelMediaConfig=t;case 19:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return r.apply(this,arguments)})},{key:"stopChannelMediaRelay",value:(t=d()(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.channelMediaRelayController){e.next=2;break}throw new A.ChannelMediaError("RELAY_NOT_START",null,A.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return e.prev=2,e.next=5,this.channelMediaRelayController.stopChannelMediaRelay();case 5:e.next=17;break;case 7:throw e.prev=7,e.t0=e.catch(2),f.default.debug("[".concat(this.clientId,"] stopChannelMediaRelay exception: ").concat(JSON.stringify(e.t0))),t=A.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,r=e.t0 instanceof A.ChannelMediaError?e.t0.message===A.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.t0.message===A.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.t0.message===A.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.t0.message===A.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":"INTERNAL_ERROR":"INTERNAL_ERROR",this.clientEmitter.emit({type:"channel-media-relay-state",state:t,code:A.CHANNEL_MEDIA_RELAY_ERROR[r]}),this.channelMediaRelayController&&(this.channelMediaRelayController.dispose(),this.channelMediaConfig=null,this.channelMediaRelayController=null),this.emit({type:"channel-media-relay-state",state:A.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new A.ChannelMediaError(r,null,A.CHANNEL_MEDIA_RELAY_ERROR[r]);case 17:this.channelMediaConfig=null,this.channelMediaRelayController=null;case 19:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(){return t.apply(this,arguments)})}]),e}(),x=r(37).ReportServiceClient,N=r(9).default,k=r(17).VosdkHeader,L=r(16),M=function(){function e(){i()(this,e),this.transport=new N.TXHRTransport("https://uni-webcollector.agora.io/report"),this.protocol=new N.TJSONProtocol(this.transport),this.client=new x(this.protocol),this.seqId=0,this._cache=[],this.isReporting=!1,this.retryCount=0}return a()(e,[{key:"generateHeader",value:function(e){if(e&&e.sid)return new k({sid:e.sid,cname:e.cname||"",lts:e.lts,elapse:e.lts-this.startTime,uid:e.uid,success:e.success})}},{key:"report",value:function(e,t){var r=null;if(t.header&&(t.header.lts=+new Date,"sessionStart"===e&&(this.startTime=t.header.lts),r=this.generateHeader(t.header)),t.body&&r){var n=t.body;switch(e){case"sessionStart":(i=new L({miniappSession:!0})).uri=8e3,i.miniappSession.header=r,i.miniappSession.appid=n.appId,i.miniappSession.uname=n.uname,i.miniappSession.ver=u.SDK_VERSION,i.miniappSession.dk=n.dk,i.miniappSession.details=JSON.stringify({seq:this.seqId++});break;case"chooseServer":(i=new L({miniappJoinChooseServer:!0})).uri=8001,i.miniappJoinChooseServer.header=r,i.miniappJoinChooseServer.csurl=n.csurl,i.miniappJoinChooseServer.ec=n.ec,i.miniappJoinChooseServer.gatewaylist=n.gatewaylist,i.miniappJoinChooseServer.details=JSON.stringify({seq:this.seqId++});break;case"connectWebSocket":(i=new L({miniappConnectWebSocket:!0})).uri=8002,i.miniappConnectWebSocket.header=r,i.miniappConnectWebSocket.ec=n.ec,i.miniappConnectWebSocket.wsurl=n.wsurl,i.miniappConnectWebSocket.details=JSON.stringify({seq:this.seqId++});break;case"join":(i=new L({miniappJoin:!0})).uri=8003,i.miniappJoin.header=r,i.miniappJoin.ec=n.ec,i.miniappJoin.isrejoin=n.isrejoin,i.miniappJoin.details=JSON.stringify({seq:this.seqId++,appId:n.appId,wsurl:n.wsurl});break;case"publish":(i=new L({miniappPublish:!0})).uri=8004,i.miniappPublish.header=r,i.miniappPublish.ec=n.ec,i.miniappPublish.pushurl=n.pushurl,i.miniappPublish.details=JSON.stringify({seq:this.seqId++});break;case"unpublish":(i=new L({miniappUnpublish:!0})).uri=8005,i.miniappUnpublish.header=r,i.miniappUnpublish.ec=n.ec,i.miniappUnpublish.details=JSON.stringify({seq:this.seqId++});break;case"subscribe":(i=new L({miniappSubscribe:!0})).uri=8006,i.miniappSubscribe.header=r,i.miniappSubscribe.ec=n.ec,i.miniappSubscribe.pullurl=n.pullurl,i.miniappSubscribe.peerid=n.peerid,i.miniappSubscribe.details=JSON.stringify({seq:this.seqId++});break;case"unsubscribe":(i=new L({miniappUnsubscribe:!0})).uri=8007,i.miniappUnsubscribe.header=r,i.miniappUnsubscribe.ec=n.ec,i.miniappUnsubscribe.peerid=n.peerid,i.miniappUnsubscribe.details=JSON.stringify({seq:this.seqId++});break;case"leave":(i=new L({miniappLeave:!0})).uri=8008,i.miniappLeave.header=r,i.miniappLeave.ec=n.ec,i.miniappLeave.details=JSON.stringify({seq:this.seqId++});break;case"pusherState":(i=new L({miniappPusherState:!0})).uri=8010,i.miniappPusherState.header=r,i.miniappPusherState.url=n.url,i.miniappPusherState.code=n.code,i.miniappPusherState.status=n.status,i.miniappPusherState.error=n.error,i.miniappPusherState.details=JSON.stringify({seq:this.seqId++});break;case"playerState":(i=new L({miniappPlayerState:!0})).uri=8011,i.miniappPlayerState.header=r,i.miniappPlayerState.url=n.url,i.miniappPlayerState.code=n.code,i.miniappPlayerState.status=n.status,i.miniappPlayerState.error=n.error,i.miniappPlayerState.details=JSON.stringify({seq:this.seqId++});break;case"serverEvent":(i=new L({miniappServerEvent:!0})).uri=8009,i.miniappServerEvent.header=r,i.miniappServerEvent.action=n.action,i.miniappServerEvent.details=JSON.stringify(n.details),i.miniappServerEvent.req_ts=n.req_ts}}if(this._cache.push(i),!this.isReporting&&this._cache.length>0){var i=this._cache.shift();this._report(i)}}},{key:"_report",value:function(e){var t=this;this.isReporting=!0,this.client.Report(e,(function(r){if(r){f.default.debug("Report failed: ",r,e);var n=t.retryCount++<2?200:1e4;setTimeout((function(){t._report(e)}),n)}else{f.default.debug("Report succcess: ",e);var i=t._cache.shift();i?t._report(i):t.isReporting=!1}}))}}]),e}(),P={videoBitrate:"Miniapp_SDK_Pusher_Video_Bitrate",audioBitrate:"Miniapp_SDK_Pusher_Audio_Bitrate",videoFPS:"Miniapp_SDK_Pusher_Video_FPS",videoGOP:"Miniapp_SDK_Pusher_Video_GOP",netSpeed:"Miniapp_SDK_Pusher_Net_Speed",videoCache:"Miniapp_SDK_Pusher_Video_Cache",audioCache:"Miniapp_SDK_Pusher_Audio_Cache",videoWidth:"Miniapp_SDK_Pusher_Video_Width",videoHeight:"Miniapp_SDK_Pusher_Video_Height"},D={videoBitrate:"Miniapp_SDK_Player_Video_Bitrate",audioBitrate:"Miniapp_SDK_Player_Audio_Bitrate",videoFPS:"Miniapp_SDK_Player_Video_FPS",videoGOP:"Miniapp_SDK_Player_Video_GOP",netSpeed:"Miniapp_SDK_Player_Video_Cache",videoCache:"Miniapp_SDK_Player_Video_Cache",audioCache:"Miniapp_SDK_Player_Audio_Cache",vDecCacheSize:"Miniapp_SDK_Player_V_Dec_Cache_Size",vSumCacheSize:"Miniapp_SDK_Player_V_Sum_Cache_Size",avPlayInterval:"Miniapp_SDK_Player_AV_Play_Interval",avRecvInterval:"Miniapp_SDK_Player_AV_Recv_Interval",audioCacheThreshold:"Miniapp_SDK_Player_Audio_Cache_Threshold",videoWidth:"Miniapp_SDK_Player_Video_Width",videoHeight:"Miniapp_SDK_Player_Video_Height"},F=r(23),$=r.n(F).a.io.agora.pb,U=$.CounterCompact,j=$.Id,B=($.Item,function(){function e(){i()(this,e),this.url="https://rest-argus-ad.agoralab.co/v2/report",this.sid=Object(s.generateSessionId)(),this.pusherNet=null,this.playerNetMap={},this.pusherTimer=null,this.playerTimer=null,this.startPusherReport(),this.startPlayerReport()}return a()(e,[{key:"setPusherNetData",value:function(e){this.pusherNet=e}},{key:"setPlayerNetData",value:function(e,t){this.playerNetMap[e]=t}},{key:"getMessageTypeId",value:function(e){return j[e]}},{key:"shiftPb",value:function(e,t,r){var n=this,i=Date.now(),o=t.map((function(e){return{lts:i,id:n.getMessageTypeId(r[e.type]),value:e.value,tagErrorCode:6,streamId:0}})),a={sid:this.sid,peer:e,items:o},s=U.create(a);return U.encode(s).finish()}},{key:"startPusherReport",value:function(){var e=this;this.pusherTimer=setInterval((function(){if(e.pusherNet){var t=Object.keys(e.pusherNet).map((function(t){return void 0!==P[t]?{type:t,value:e.pusherNet[t]}:null}));t=t.filter((function(e){return null!==e}));var r=e.shiftPb(0,t,P);e.report(r)}}),6e3)}},{key:"startPlayerReport",value:function(){var e=this;this.playerTimer=setInterval((function(){if(e.playerNetMap){var t=function(t){var r=e.playerNetMap[t],n=Object.keys(r).map((function(e){return void 0!==D[e]?{type:e,value:r[e]}:null}));n=n.filter((function(e){return null!==e}));var i=e.shiftPb(t,n,D);e.report(i)};for(var r in e.playerNetMap)t(r)}e.playerNetMap={}}),6e3)}},{key:"destroy",value:function(){null!==this.pusherTimer&&clearInterval(this.pusherTimer),null!==this.playerTimer&&clearInterval(this.playerTimer),this.pusherNet=null,this.playerNet=null}},{key:"report",value:function(e){var t=Date.now();t=Math.floor(t/1e3);var r=wx.arrayBufferToBase64(e),n={id:1,payload:r,qos:1,sign:b()("payload=".concat(r,"&src=miniapp_sdk&ts=").concat(t)),src:"miniapp_sdk",ts:t};return this.request({body:n,url:this.url})}},{key:"request",value:function(e){return new Promise((function(t,r){wx.request({url:e.url,data:e.body,header:{"Content-Type":"application/json"},method:"POST",success:function(e){f.default.info("weixin request argus report success"),200===e.statusCode?(f.default.info("response success"),t(e)):f.default.info("response fail: ".concat(e.statusCode))},fail:function(e){f.default.warn("weixin request argus report fail"),r(e)}})}))}}]),e}()),G=r(6),V=function(){function e(t){var r=this;i()(this,e),this.emitter=new h,this.on=this.emitter.on,this.off=this.emitter.off,this.sid=Object(s.generateSessionId)(),this.pushUrl=null,this.playUrls=new Map,this.servers=t&&t.servers,this.reportManager=new M,this.role="broadcaster",this.grafanaReport=new E,this.argusReport=new B,this.systemInfo=null,this.emitter.on("stream-removed",(function(e){r.playUrls&&r.playUrls.delete(e.uid)}))}return a()(e,[{key:"init",value:function(e,t,r){if(!e||"string"!=typeof e||"null"===e.toLowerCase())throw Error("Invalid appId");this.appId=e.trim(),this.argusReport.sid=this.sid,this.grafanaReport.vid="",this.grafanaReport.onlineUser();try{this.systemInfo=wx.getSystemInfoSync()}catch(e){}this.reportManager.report("sessionStart",{header:{sid:this.sid,lts:+new Date,success:!0},body:{appId:e}}),t&&t()}},{key:"setRole",value:function(e,t,r){var n=this;if("broadcaster"===!e&&"audience"===!e)throw Error("Invalid role");this.role=e,this.worker&&this.worker.setRole(e).then((function(e){try{n.grafanaReport.report("set_role",m)}catch(e){}setTimeout((function(){if(!e)return t&&t();t&&t({updateURL:e["update-url"]})}),1)})).catch((function(){try{n.grafanaReport.report("set_role",y,err.code)}catch(e){}r&&r()}))}},{key:"rejoin",value:function(e,t,r,n,i,o){var a=this;if(!this.worker){if(e){if("string"!=typeof e||"null"===e.toLowerCase())throw Error("Invalid channelKey")}else e=this.appId;if(!t||"string"!=typeof t||"null"===t.toLowerCase()||t.length>128)throw Error("Invalid channel");if(this.uid=r||Object(s.random)(1e7),this.uid=Number.parseInt(this.uid),!Object(s.is32Uint)(this.uid))throw new Error("Invalid uid type");this.channel=t,this.worker=new C({appId:this.appId,channel:this.channel,uid:this.uid,sid:this.sid,role:this.role,servers:this.servers,channelKey:e,reportManager:this.reportManager,grafanaReport:this.grafanaReport},this.emitter),this.worker.connect().then((function(){return a.worker.rejoin(n)})).then((function(){try{a.reportManager.report("join",{header:{sid:a.sid,cname:a.channel,uid:a.uid,success:!0},body:{isrejoin:!0,appId:a.appId,wsurl:a.worker&&a.worker.getWSUrl()}})}catch(e){}try{a.grafanaReport.report("join",m)}catch(e){}setTimeout((function(){i&&i(this.uid)}),1)})).catch((function(e){try{a.reportManager.report("join",{header:{sid:a.sid,cname:a.channel,uid:a.uid,success:!1},body:{ec:JSON.stringify(e),appId:a.appId,wsurl:a.worker&&a.worker.getWSUrl()}})}catch(e){}try{a.grafanaReport.report("join",y,e.code)}catch(e){}a.destroy(),o&&o(e)}))}}},{key:"join",value:function(e,t,r,n,i){var o=this;if(!this.worker){if(e){if("string"!=typeof e||"null"===e.toLowerCase())throw Error("Invalid channelKey")}else e=this.appId;if(!t||"string"!=typeof t||"null"===t.toLowerCase()||t.length>128)throw Error("Invalid channel");if(this.uid=r||Object(s.random)(1e7),this.uid=Number.parseInt(this.uid),!Object(s.is32Uint)(this.uid))throw new Error("Invalid uid type");this.channel=t,this.worker=new C({appId:this.appId,channel:this.channel,uid:this.uid,sid:this.sid,role:this.role,servers:this.servers,channelKey:e,reportManager:this.reportManager,grafanaReport:this.grafanaReport},this.emitter),this.worker.connect().then((function(){return o.worker.join(o.systemInfo.model,o.systemInfo.system)})).then((function(e){try{o.reportManager.report("join",{header:{sid:o.sid,cname:o.channel,uid:o.uid,success:!0},body:{isrejoin:!1,appId:o.appId,wsurl:o.worker&&o.worker.getWSUrl()}})}catch(e){}try{o.grafanaReport.report("join",m,"",{model:o.systemInfo.model,version:o.systemInfo.version,system:o.systemInfo.system,ip:R().ip})}catch(e){}setTimeout((function(){n&&n(this.uid)}),1)})).catch((function(e){try{o.reportManager.report("join",{header:{sid:o.sid,cname:o.channel,uid:o.uid,success:!1},body:{ec:JSON.stringify(e),appId:o.appId,wsurl:e.wsurl||o.worker&&o.worker.getWSUrl()}})}catch(e){}try{o.grafanaReport.report("join",y,e.code,{model:o.systemInfo.model,version:o.systemInfo.version,system:o.systemInfo.system,ip:R().ip})}catch(e){}o.destroy(),i&&i(e)}))}}},{key:"publish",value:function(e,t){var r=this;this._checkWorker(),this.worker.publish().then((function(t){r.pushUrl=t.url;try{r.reportManager.report("publish",{header:{sid:r.sid,cname:r.channel,uid:r.uid,success:!0},body:{pushurl:t.url}})}catch(e){}try{r.grafanaReport.report("publish",m)}catch(e){}setTimeout((function(){e&&e(t.url)}),1)})).catch((function(e){r.reportManager.report("publish",{header:{sid:r.sid,cname:r.channel,uid:r.uid,success:!1},body:{ec:JSON.stringify(e)}});try{r.grafanaReport.report("publish",y,e.code)}catch(e){}t&&t(e)}))}},{key:"unpublish",value:function(e,t){var r=this;this._checkWorker(),this.worker.unpublish().then((function(t){r.pushUrl=null;try{r.reportManager.report("unpublish",{header:{sid:r.sid,cname:r.channel,uid:r.uid,success:!0},body:{}})}catch(e){}try{r.grafanaReport.report("unpublish",m)}catch(e){}setTimeout((function(){e&&e()}),1)})).catch((function(e){r.reportManager.report("unpublish",{header:{sid:r.sid,cname:r.channel,uid:r.uid,success:!1},body:{ec:JSON.stringify(e)}});try{r.grafanaReport.report("unpublish",y,e.code)}catch(e){}t&&t(e)}))}},{key:"subscribe",value:function(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{audio:!0,video:!0};this._checkUid(e),this._checkWorker(),this.worker.subscribe(e,i).then((function(r){n.playUrls.set(e,r.url);try{n.reportManager.report("subscribe",{header:{sid:n.sid,cname:n.channel,uid:n.uid,success:!0},body:{pullurl:r.url}})}catch(e){}try{n.grafanaReport.report("subscribe",m)}catch(e){}setTimeout((function(){t&&t(r.url,r.rotation)}),1)})).catch((function(e){n.reportManager.report("subscribe",{header:{sid:n.sid,cname:n.channel,uid:n.uid,success:!1},body:{ec:JSON.stringify(e)}});try{n.grafanaReport.report("subscribe",y,e.code)}catch(e){}r&&r(e)}))}},{key:"unsubscribe",value:function(e,t,r){var n=this;this._checkUid(e),this._checkWorker(),this.worker.unsubscribe(e).then((function(r){n.playUrls.delete(e);try{n.reportManager.report("unsubscribe",{header:{sid:n.sid,cname:n.channel,uid:n.uid,success:!1},body:{}})}catch(e){}try{n.grafanaReport.report("unsubscribe",m)}catch(e){}setTimeout((function(){t&&t()}),1)})).catch((function(e){n.reportManager.report("unsubscribe",{header:{sid:n.sid,cname:n.channel,uid:n.uid,success:!1},body:{ec:JSON.stringify(e)}});try{n.grafanaReport.report("unsubscribe",y,e.code)}catch(e){}r&&r(e)}))}},{key:"mute",value:function(e,t,r,n){var i=this;if(this._checkUid(e),this._checkWorker(),"video"!==t&&"audio"!==t&&"all"!==t)throw new Error('target should be "video", "audio" or "all"');this.worker.mute(e,t).then((function(e){try{i.grafanaReport.report("mute",m)}catch(e){}setTimeout((function(){r&&r()}),1)})).catch((function(e){try{i.grafanaReport.report("mute",y,e.code)}catch(e){}n&&n(e)}))}},{key:"unmute",value:function(e,t,r,n){var i=this;if(this._checkUid(e),this._checkWorker(),"video"!==t&&"audio"!==t&&"all"!==t)throw new Error('target should be "video", "audio" or "all"');this.worker.unmute(e,t).then((function(e){try{i.grafanaReport.report("unmute",m)}catch(e){}setTimeout((function(){r&&r()}),1)})).catch((function(e){try{i.grafanaReport.report("unmute",y,e.code)}catch(e){}n&&n(e)}))}},{key:"setRemoteVideoStreamType",value:function(e,t,r,n){var i=this;this._checkUid(e),this._checkWorker(),this.worker.setRemoteVideoStreamType(e,t).then((function(e){try{i.grafanaReport.report("set_remote_stream_type",m)}catch(e){}setTimeout((function(){r&&r()}),1)})).catch((function(e){try{i.grafanaReport.report("set_remote_stream_type",y,e.code)}catch(e){}n&&n(e)}))}},{key:"renewToken",value:function(e,t,r){var n=this;this._checkWorker(),this.worker.renewToken(e).then((function(e){try{n.grafanaReport.report("update_token",m)}catch(e){}setTimeout((function(){t&&t()}),1)})).catch((function(e){try{n.grafanaReport.report("update_token",y,e.code)}catch(e){}r&&r(e)}))}},{key:"muteLocal",value:function(e,t,r){var n=this;if(this._checkWorker(),"video"!==e&&"audio"!==e&&"all"!==e)throw new Error('target should be "video", "audio" or "all"');this.worker.muteLocal(e).then((function(e){try{n.grafanaReport.report("mute_local",m)}catch(e){}setTimeout((function(){t&&t()}),1)})).catch((function(e){try{n.grafanaReport.report("mute_local",y,e.code)}catch(e){}r&&r(e)}))}},{key:"unmuteLocal",value:function(e,t,r){var n=this;if(this._checkWorker(),"video"!==e&&"audio"!==e&&"all"!==e)throw new Error('target should be "video", "audio" or "all"');this.worker.unmuteLocal(e).then((function(e){try{n.grafanaReport.report("unmute_local",m)}catch(e){}setTimeout((function(){t&&t()}),1)})).catch((function(e){try{n.grafanaReport.report("unmute_local",y,e.code)}catch(e){}r&&r(e)}))}},{key:"leave",value:function(e,t){var r=this;this.worker&&this.worker.isWSConnected()&&this.worker.leave().then((function(t){try{r.reportManager.report("leave",{header:{sid:r.sid,cname:r.channel,uid:r.uid,success:!0},body:{}})}catch(e){}try{r.grafanaReport.report("leave",m)}catch(e){}r.destroy((function(){setTimeout((function(){e&&e()}),1)}))})).catch((function(e){try{r.grafanaReport.report("leave",y,e.code)}catch(e){}t&&t(e)}))}},{key:"_checkUid",value:function(e){if(!e||"number"!=typeof e||!Object(s.is32Uint)(e))throw new Error("Invalid uid type")}},{key:"_checkWorker",value:function(){if(!this.worker||!this.worker.isWSConnected())throw new Error("Disconnected from server")}},{key:"isConnected",value:function(){return!(!this.worker||!this.worker.isWSConnected())}},{key:"updatePusherStateChange",value:function(e){if(this.pushUrl){var t=e.detail.code,r=e.detail.message;if(1002===t)try{this.grafanaReport.report("pusher_state_change",m,t)}catch(e){}if(-1307===t)try{this.grafanaReport.report("pusher_state_change",y,t,r)}catch(e){}}}},{key:"updatePlayerStateChange",value:function(e,t){if(this.playUrls.get(Number(e))){var r=t.detail.code,n=t.detail.message;if(2003===r||-2301===r){var i=2003===r?m:y;try{this.grafanaReport.report("player_state_change",i,r,n)}catch(e){}}}}},{key:"updatePusherNetStatus",value:function(e){if(this.pushUrl){var t=e.detail.info;this.argusReport.setPusherNetData(t)}}},{key:"updatePlayerNetStatus",value:function(e,t){if(this.playUrls.get(Number(e))){var r=t.detail.info;this.argusReport.setPlayerNetData(e,r)}}},{key:"send",value:function(e,t,r){this._checkWorker(),this.worker.send(e).then((function(e){t&&t(e)})).catch((function(e){r&&r(e)}))}},{key:"updatePushUrl",value:function(e,t){var r=this;this._checkWorker(),this.worker.updatePushUrl().then((function(t){setTimeout((function(){try{this.grafanaReport.report("update_url",m)}catch(e){}e&&e(t)}),1)})).catch((function(e){try{r.grafanaReport.report("update_url",y,e.code)}catch(e){}t&&t(e)}))}},{key:"destroy",value:function(e,t){var r=this;this.worker?(this.worker.destroy((function(){r.pushUrl=null,r.playUrls=null,e&&e()})),this.worker=null):(this.pushUrl=null,this.playUrls=null,e&&e()),this.grafanaReport.destroy(),this.argusReport.destroy()}},{key:"startChannelMediaRelay",value:function(e,t){if(!(e instanceof A.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var r=e.getSrcChannelMediaInfo(),n=e.getDestChannelMediaInfos();if(Object(G.isEmpty)(r))throw"srcChannelMediaInfo should not be empty";if(Object(G.isEmpty)(n)||0===n.length)throw"destChannelMediaInfos should not be empty";if(f.default.debug("[startChannelMediaRelay]: srcInfo: ",r," destInfo: ",n),!Object(s.is32Uint)(r.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(G.isValidChannelName)(r.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(r.token&&!Object(G.isValidToken)(r.token))throw"Invalid token in srcChannelMediaInfo";if(n.forEach((function(e){if(!Object(s.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(G.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(G.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"})),!this.worker)throw"startChannelMediaRelay should be used after join";this.worker.startChannelMediaRelay(e).then((function(){t&&t()})).catch((function(e){t&&t(e)}))}},{key:"updateChannelMediaRelay",value:function(e,t){if(!(e instanceof A.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var r=e.getSrcChannelMediaInfo(),n=e.getDestChannelMediaInfos();if(Object(G.isEmpty)(r))throw"srcChannelMediaInfo should not be empty";if(Object(G.isEmpty)(n)||0===n.length)throw"destChannelMediaInfos should not be empty";if(f.default.debug("[updateChannelMediaRelay]: srcInfo: ",r," destInfo: ",n),!Object(s.is32Uint)(r.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(G.isValidChannelName)(r.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(r.token&&!Object(G.isValidToken)(r.token))throw"Invalid token in srcChannelMediaInfo";if(n.forEach((function(e){if(!Object(s.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(G.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(G.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"})),!this.worker)throw"updateChannelMediaRelay should be used after join";this.worker.updateChannelMediaRelay(e).then((function(){t&&t()})).catch((function(e){t&&t(e)}))}},{key:"stopChannelMediaRelay",value:function(e){f.default.debug("[stopChannelMediaRelay]"),this.worker.stopChannelMediaRelay().then((function(){e&&e()})).catch((function(t){e&&e(t)}))}}]),e}();r.d(t,"Client",(function(){return V})),r.d(t,"LOG",(function(){return f.default})),r.d(t,"Log",(function(){return f.Log})),r.d(t,"ChannelMediaRelayConfiguration",(function(){return A.ChannelMediaRelayConfiguration})),r.d(t,"SDK_VERSION",(function(){return u.SDK_VERSION}))}])},"object"==_typeof(exports)&&"object"==_typeof(module)?module.exports=t():(__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=t)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}).call(this,__webpack_require__(1).default,__webpack_require__(79).default,__webpack_require__(108)(module))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return weex.requireModule(e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var n=r(2).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var i=t&&t.prototype instanceof _?t:_,o=Object.create(i.prototype),s=new O(n||[]);return a(o,"_invoke",{value:w(e,r,s)}),o}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function _(){}function g(){}function v(){}var b={};p(b,u,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(C([])));y&&y!==r&&o.call(y,u)&&(b=y);var E=v.prototype=_.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){var r;a(this,"_invoke",{value:function(i,a){function s(){return new t((function(r,s){!function r(i,a,s,u){var c=f(e[i],e,a);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==n(p)&&o.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}(i,a,r,s)}))}return r=r?r.then(s,s):s()}})}function w(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return x()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=f(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function C(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:x}}function x(){return{value:void 0,done:!0}}return g.prototype=v,a(E,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:g,configurable:!0}),g.displayName=p(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,p(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},T(R.prototype),p(R.prototype,c,(function(){return this})),t.AsyncIterator=R,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new R(d(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(E),p(E,l,"Generator"),p(E,u,(function(){return this})),p(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;A(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(2).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){(function(t){var n=r(70),i=r(71),o=r(112),a=r(113),s=function(){"use strict";function e(t){n(this,e),this._client=a.createInstance(t),this._accountName="",this._channel=null,this.isLogin=!1,this.isOff=!1,this.messageCache=[],this._eventBus=o,this.subscribeLoginEvents()}return i(e,[{key:"login",value:function(e,t){this._accountName=t;var r={token:e,uid:t};return this._client.login(r)}},{key:"subscribeLoginEvents",value:function(){var e=this;this._client.on("ConnectionStateChanged",(function(t,r){e._eventBus.emit("ConnectionStateChanged",t,r)})),this._client.on("MessageFromPeer",(function(r,n,i){var o=i.isOfflineMessage;if(t("log","MessageFromPeer"," at pagesLive/lib/agora-rtm.js:30"),o){var a={message:r.text,peerId:n,isOfflineMessage:o};e.messageCache.push(a)}e._eventBus.emit("MessageFromPeer",r,n,o)}))}},{key:"logout",value:function(){var e=this;return this._client.logout().then((function(){e._eventBus.clear(),e.messageCache=[]}))}},{key:"sendPeer",value:function(e,t){return this._client.sendMessageToPeer({text:e},t,{enableHistoricalMessaging:!1,enableOfflineMessaging:this.isOff})}},{key:"joinChannel",value:function(e){return this._channel=this._client.createChannel(e),this.subscribeChannelEvents(e),this._channel.join()}},{key:"subscribeChannelEvents",value:function(){var e=this;this._channel.on("MemberJoined",(function(t){e._eventBus.emit("MemberJoined",t)})),this._channel.on("MemberLeft",(function(t){e._eventBus.emit("MemberLeft",t)})),this._channel.on("MemberCountUpdated",(function(t){e._eventBus.emit("MemberCountUpdated",t)})),this._channel.on("ChannelMessage",(function(t,r){e._eventBus.emit("ChannelMessage",t,r)}))}},{key:"sendChannel",value:function(e){return this._channel.sendMessage({text:e})}},{key:"getMembers",value:function(){return this._channel.getMembers()}},{key:"leaveChannel",value:function(){return this._channel.leave()}},{key:"on",value:function(e,t){this._eventBus.on(e,t)}}]),e}();e.exports=s}).call(this,r(1).default)},function(e,t,r){"use strict";var n=function(){function e(){this.events=[]}return e.prototype.on=function(e,t,r){return this.addEvent(e,t,r)},e.prototype.once=function(e,t,r){return this.addEvent(e,(n=t,i=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i||(i=!0,n.apply(this,e))}),r);var n,i},e.prototype.remove=function(e,t){var r=this.events,n=r.findIndex((function(t){return t.name===e}));if(-1===n)return this;if(!t)return r.splice(n,1),this;var i=r[n].executes.findIndex((function(e){return e.id===t}));return-1!==i&&r[n].executes.splice(i,1),this},e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=this.find(e);if(!n)return this;var i=n.executes;return i.forEach((function(e){if(e.ctx)return e.execute.apply(e.ctx,t);e.execute.apply(e,t)})),this},e.prototype.find=function(e){for(var t=this.events,r=0;r<t.length;r++)if(e===t[r].name)return t[r];return null},e.prototype.clear=function(){return this.events.length=0,this},e.prototype.addEvent=function(e,t,r){var n=Math.random().toString().substr(2),i=this.events,o=this.find(e);return null!==o?(o.executes.push({id:n,execute:t,ctx:r}),n):(i.push({name:e,executes:[{id:n,execute:t,ctx:r}]}),n)},e}();function i(){return new n}var o=i();o.create=function(){return i()};var a="onLoad",s="onUnload",u="onLaunch",c="",l="undefined"!=typeof my&&my.getSystemInfo?{onLoad:"onInit",onUnload:"didUnmount"}:{onLoad:"created",onUnload:"detached"};function p(e){return!!e}function d(e,t){var r=e[t];e[t]=function(t){var n=function(e,t){return Object.keys(e).map((function(r){var n=e[r];return"function"==typeof n?{id:o.on(r,n,t),name:r}:n.once?{id:o.once(r,n.handler,t),name:r}:{id:o.on(r,n.handler,t),name:r}}))}(e.busEvents,this);e.__inyEventIds=n,r&&r.call(this,t)}}function f(e,t){if(t){var r=e[t];e[t]=function(){e.__inyEventIds.forEach((function(e){return o.remove(e.name,e.id)})),e.__inyEventIds=void 0,r&&r.call(this)}}}o.app=function(e){return p(e.busEvents)?(d(e,u),f(e,c),e):e},o.page=function(e){return p(e.busEvents)?(d(e,a),f(e,s),e):e},o.component=function(e){return p(e.busEvents)?(d(e,l.onLoad),f(e,l.onUnload),e):e},e.exports=o},function(module,exports,__webpack_require__){(function(__f__,crypto){var _defineProperty2=__webpack_require__(114),_objectWithoutProperties=__webpack_require__(115),_assertThisInitialized=__webpack_require__(72),_asyncToGenerator=__webpack_require__(117),_slicedToArray=__webpack_require__(118),_get=__webpack_require__(122),_regeneratorRuntime=__webpack_require__(80),_createClass=__webpack_require__(71),_classCallCheck=__webpack_require__(70),_inherits=__webpack_require__(82),_possibleConstructorReturn=__webpack_require__(83),_getPrototypeOf=__webpack_require__(5),_wrapNativeSuper=__webpack_require__(124),_toConsumableArray=__webpack_require__(128),_typeof=__webpack_require__(2),_excluded=["group"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty2(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _marked=_regeneratorRuntime.mark(iterator1),RtmStatusCode;function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}!function(e){var t,r,n,i,o,a,s;!function(e){e.LOGIN="LOGIN",e.LOGIN_SUCCESS="LOGIN_SUCCESS",e.LOGIN_FAILURE="LOGIN_FAILURE",e.LOGIN_TIMEOUT="LOGIN_TIMEOUT",e.INTERRUPTED="INTERRUPTED",e.LOGOUT="LOGOUT",e.BANNED_BY_SERVER="BANNED_BY_SERVER",e.REMOTE_LOGIN="REMOTE_LOGIN"}(t||(t={})),e.ConnectionChangeReason=t,function(e){e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED",e.RECONNECTING="RECONNECTING",e.ABORTED="ABORTED"}(r||(r={})),e.ConnectionState=r,function(e){e.TEXT="TEXT"}(n||(n={})),e.MessageType=n,function(e){e.IDLE="IDLE",e.SENT_TO_REMOTE="SENT_TO_REMOTE",e.RECEIVED_BY_REMOTE="RECEIVED_BY_REMOTE",e.ACCEPTED_BY_REMOTE="ACCEPTED_BY_REMOTE",e.REFUSED_BY_REMOTE="REFUSED_BY_REMOTE",e.CANCELED="CANCELED",e.FAILURE="FAILURE"}(i||(i={})),e.LocalInvitationState=i,function(e){e.INVITATION_RECEIVED="INVITATION_RECEIVED",e.ACCEPT_SENT_TO_LOCAL="ACCEPT_SENT_TO_LOCAL",e.REFUSED="REFUSED",e.ACCEPTED="ACCEPTED",e.CANCELED="CANCELED",e.FAILURE="FAILURE"}(o||(o={})),e.RemoteInvitationState=o,function(e){e.UNKNOWN="UNKNOWN",e.PEER_NO_RESPONSE="PEER_NO_RESPONSE",e.INVITATION_EXPIRE="INVITATION_EXPIRE",e.PEER_OFFLINE="PEER_OFFLINE",e.NOT_LOGGEDIN="NOT_LOGGEDIN"}(a||(a={})),e.LocalInvitationFailureReason=a,function(e){e.UNKNOWN="UNKNOWN",e.PEER_OFFLINE="PEER_OFFLINE",e.ACCEPT_FAILURE="ACCEPT_FAILURE",e.INVITATION_EXPIRE="INVITATION_EXPIRE"}(s||(s={})),e.RemoteInvitationFailureReason=s}(RtmStatusCode||(RtmStatusCode={}));var RtmStatusCode$1=RtmStatusCode;function _applyDecoratedDescriptor(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var R="object"==("undefined"==typeof Reflect?"undefined":_typeof(Reflect))?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},ReflectOwnKeys;function ProcessEmitWarning(e){console&&console.warn&&__f__("warn",e," at pagesLive/lib/rtm-miniapp.js:1")}ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var NumberIsNaN=Number.isNaN||function(e){return e!=e};function EventEmitter(){EventEmitter.init.call(this)}var events=EventEmitter,once_1=once;EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+_typeof(e))}function _getMaxListeners(e){return void 0===e._maxListeners?EventEmitter.defaultMaxListeners:e._maxListeners}function _addListener(e,t,r,n){var i,o,a;if(checkListener(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=_getMaxListeners(e))>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,ProcessEmitWarning(s)}return e}function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=onceWrapper.bind(n);return i.listener=r,n.wrapFn=i,i}function _listeners(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?unwrapListeners(i):arrayClone(i,i.length)}function listenerCount(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function arrayClone(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function spliceOne(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function unwrapListeners(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function once(e,t){return new Promise((function(r,n){function i(){void 0!==o&&e.removeListener("error",o),r([].slice.call(arguments))}var o;"error"!==t&&(o=function(r){e.removeListener(t,i),n(r)},e.once("error",o)),e.once(t,i)}))}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if("number"!=typeof e||e<0||NumberIsNaN(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");defaultMaxListeners=e}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)ReflectApply(s,this,t);else{var u=s.length,c=arrayClone(s,u);for(r=0;r<u;++r)ReflectApply(c[r],this,t)}return!0},EventEmitter.prototype.addListener=function(e,t){return _addListener(this,e,t,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(e,t){return _addListener(this,e,t,!0)},EventEmitter.prototype.once=function(e,t){return checkListener(t),this.on(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.prependOnceListener=function(e,t){return checkListener(t),this.prependListener(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.removeListener=function(e,t){var r,n,i,o,a;if(checkListener(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():spliceOne(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},EventEmitter.prototype.listeners=function(e){return _listeners(this,e,!0)},EventEmitter.prototype.rawListeners=function(e){return _listeners(this,e,!1)},EventEmitter.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]},events.once=once_1;var SEMAPHORE=Symbol(),NO_OP=function(){},assert=function(){try{return"1"===Object({NODE_ENV:"production",UNI_APP_ID:"__UNI__DBB8A37",UNI_APP_NAME:"\u8c46\u4e01\u79df",UNI_PLATFORM:"app-plus",VUE_APP_PLATFORM:"app-plus",UNI_CLOUD_PROVIDER:[],UNI_SECURE_NETWORK_ENABLE:!1,UNI_SECURE_NETWORK_CONFIG:[],UNICLOUD_DEBUG:void 0,RUN_BY_HBUILDERX:!0,UNI_AUTOMATOR_WS_ENDPOINT:void 0,UNI_STAT_UNI_CLOUD:"",UNI_STATISTICS_CONFIG:"",UNI_STAT_DEBUG:"",UNI_COMPILER_VERSION:"3.7.3"}).UMBRELLA_ASSERTS}catch(e){}return!1}()?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"assertion failed";if("function"==typeof e&&!e()||!e)throw new Error("function"==typeof t?t():t)}:NO_OP,implementsFunction=function(e,t){return null!=e&&"function"==typeof e[t]},isArrayLike=function(e){return null!=e&&"function"!=typeof e&&void 0!==e.length},isIterable=function(e){return null!=e&&"function"==typeof e[Symbol.iterator]},_compare=function(e,t){return e===t?0:null==e?null==t?0:-1:null==t?null==e?0:1:"function"==typeof e.compare?e.compare(t):"function"==typeof t.compare?-t.compare(e):e<t?-1:e>t?1:0},OBJP=Object.getPrototypeOf({}),FN="function",STR="string",_equiv=function(e,t){var r;return e===t||(null==e?e==t:_typeof(e.equiv)===FN?e.equiv(t):null==t?e==t:_typeof(t.equiv)===FN?t.equiv(e):_typeof(e)!==STR&&_typeof(t)!==STR&&(null!=(r=Object.getPrototypeOf(e))&&r!==OBJP||null!=(r=Object.getPrototypeOf(t))&&r!==OBJP?_typeof(e)!==FN&&void 0!==e.length&&_typeof(t)!==FN&&void 0!==t.length?equivArrayLike(e,t):e instanceof Set&&t instanceof Set?equivSet(e,t):e instanceof Map&&t instanceof Map?equivMap(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:equivObject(e,t)))},equivArrayLike=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_equiv,n=e.length;if(n===t.length)for(;--n>=0&&r(e[n],t[n]););return n<0},equivSet=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_equiv;return e.size===t.size&&r(_toConsumableArray(e.keys()).sort(),_toConsumableArray(t.keys()).sort())},equivMap=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_equiv;return e.size===t.size&&r(_toConsumableArray(e).sort(),_toConsumableArray(t).sort())},equivObject=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_equiv;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!t.hasOwnProperty(n)||!r(e[n],t[n]))return!1;return!0},defError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return void 0!==e?": "+e:""};return function(r){"use strict";_inherits(i,r);var n=_createSuper(i);function i(r){return _classCallCheck(this,i),n.call(this,e(r)+t(r))}return _createClass(i)}(_wrapNativeSuper(Error))},IllegalArgumentError=defError((function(){return"illegal argument(s)"})),illegalArgs=function(e){throw new IllegalArgumentError(e)},INV_MAX=1/4294967295,ARandom=function(){"use strict";function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"float",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.int()*INV_MAX*e}},{key:"norm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return 2*(this.int()*INV_MAX-.5)*e}},{key:"minmax",value:function(e,t){return this.float()*(t-e)+e}}]),e}(),random=Math.random,SystemRandom=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:"int",value:function(){return 4294967296*random()>>>0}},{key:"float",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return random()*e}},{key:"norm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return 2*(random()-.5)*e}}]),r}(ARandom),SYSTEM=new SystemRandom,ensureTransducer=function(e){return implementsFunction(e,"xform")?e.xform():e},Reduced=function(){"use strict";function e(t){_classCallCheck(this,e),this.value=t}return _createClass(e,[{key:"deref",value:function(){return this.value}}]),e}(),isReduced=function(e){return e instanceof Reduced},unreduced=function(e){return e instanceof Reduced?e.deref():e};function iterator1(e,t){var r,n,i,o,a;return _regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r=ensureTransducer(e)([NO_OP,NO_OP,function(e,t){return t}])[2],n=_createForOfIteratorHelper(t),s.prev=2,n.s();case 4:if((i=n.n()).done){s.next=21;break}if(o=i.value,a=r(SEMAPHORE,o),!isReduced(a)){s.next=15;break}if(a=unreduced(a.deref()),s.t0=a!==SEMAPHORE,!s.t0){s.next=14;break}return s.next=13,a;case 13:s.t0=s.sent;case 14:return s.abrupt("return",void s.t0);case 15:if(s.t1=a!==SEMAPHORE,!s.t1){s.next=19;break}return s.next=19,a;case 19:s.next=4;break;case 21:s.next=26;break;case 23:s.prev=23,s.t2=s.catch(2),n.e(s.t2);case 26:return s.prev=26,n.f(),s.finish(26);case 29:case"end":return s.stop()}}),_marked,null,[[2,23,26,29]])}var compR=function(e,t){return[e[0],e[1],t]};function map(e,t){return isIterable(t)?iterator1(map(e),t):function(t){var r=t[2];return compR(t,(function(t,n){return r(t,e(n))}))}}var DCons=function(e){"use strict";function t(e){_classCallCheck(this,t),this._length=0,e&&this.into(e)}return _createClass(t,[{key:"length",get:function(){return this._length}},{key:"copy",value:function(){return new t(this)}},{key:"empty",value:function(){return new t}},{key:"clear",value:function(){this.release()}},{key:"release",value:function(){for(var e,t=this.head;t;)e=t.next,delete t.value,delete t.prev,delete t.next,t=e;return delete this.head,delete this.tail,this._length=0,!0}},{key:"compare",value:function(e){var t=this._length;if(t<e._length)return-1;if(t>e._length)return 1;if(0===t)return 0;for(var r=this.head,n=e.head,i=0;r&&0==i;)i=_compare(r.value,n.value),r=r.next,n=n.next;return i}},{key:"equiv",value:function(e){if(!(e instanceof t||isArrayLike(e))||this._length!==e.length)return!1;if(!this._length||this===e)return!0;var r,n=this.head,i=_createForOfIteratorHelper(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(!_equiv(n.value,o))return!1;n=n.next}}catch(e){i.e(e)}finally{i.f()}return!0}},{key:e,value:_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next;case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))},{key:"seq",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(!(e>=t||e<0)){var r=this.nthCell(e),n=this.nthCell(t-1),i=function e(t){return{first:function(){return t.value},next:function(){return t!==n&&t.next?e(t.next):void 0}}};return r?i(r):void 0}}},{key:"cycle",value:_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this,"t0",1);case 1:e.next=0;break;case 3:case"end":return e.stop()}}),e,this)}))},{key:"$reduce",value:function(e,t){for(var r=this.head;r&&!isReduced(t);)t=e(t,r.value),r=r.next;return t}},{key:"drop",value:function(){var e=this.head;if(e)return this.head=e.next,this.head?delete this.head.prev:delete this.tail,this._length--,e.value}},{key:"cons",value:function(e){var t={value:e,next:this.head};return this.head?this.head.prev=t:this.tail=t,this.head=t,this._length++,this}},{key:"insertBefore",value:function(e,t){e||illegalArgs("cell is undefined");var r={value:t,next:e,prev:e.prev};return e.prev?e.prev.next=r:this.head=r,e.prev=r,this._length++,this}},{key:"insertAfter",value:function(e,t){e||illegalArgs("cell is undefined");var r={value:t,next:e.next,prev:e};return e.next?e.next.prev=r:this.tail=r,e.next=r,this._length++,this}},{key:"insertBeforeNth",value:function(e,t){return e<0&&(e+=this._length),e<=0?this.cons(t):(this.ensureIndex(e),this.insertBefore(this.nthCellUnsafe(e),t))}},{key:"insertAfterNth",value:function(e,t){return e<0&&(e+=this._length),e>=this._length-1?this.push(t):(this.ensureIndex(e),this.insertAfter(this.nthCellUnsafe(e),t))}},{key:"insertSorted",value:function(e,t){t=t||_compare;for(var r=this.head;r;){if(t(e,r.value)<=0)return this.insertBefore(r,e);r=r.next}return this.push(e)}},{key:"find",value:function(e){for(var t=this.head;t;){if(t.value===e)return t;t=t.next}}},{key:"findWith",value:function(e){for(var t=this.head;t;){if(e(t.value))return t;t=t.next}}},{key:"concat",value:function(){for(var e=this.copy(),t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var i=0,o=r;i<o.length;i++){var a=o[i];e.into(a)}return e}},{key:"into",value:function(e){var t,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.push(n)}}catch(e){r.e(e)}finally{r.f()}}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=e<0?e+this._length:e,i=r<0?r+this._length:r;(n<0||i<0)&&illegalArgs("invalid indices: ${from} / ${to}");for(var o=new t,a=this.nthCell(n);a&&++n<=i;)o.push(a.value),a=a.next;return o}},{key:"splice",value:function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;"number"==typeof e?(e<0&&(e+=this._length),this.ensureIndex(e),r=this.nthCellUnsafe(e)):r=e;var o=new t;if(n>0)for(;r&&n-- >0;)this.remove(r),o.push(r.value),r=r.next;else r&&(r=r.next);if(i)if(r){var a,s=_createForOfIteratorHelper(i);try{for(s.s();!(a=s.n()).done;){var u=a.value;this.insertBefore(r,u)}}catch(e){s.e(e)}finally{s.f()}}else{var c,l=_createForOfIteratorHelper(i);try{for(l.s();!(c=l.n()).done;){var p=c.value;this.push(p)}}catch(e){l.e(e)}finally{l.f()}}return o}},{key:"remove",value:function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,this._length--,this}},{key:"swap",value:function(e,t){if(e!==t){var r=e.value;e.value=t.value,t.value=r}return this}},{key:"push",value:function(e){if(this.tail){var t={value:e,prev:this.tail};return this.tail.next=t,this.tail=t,this._length++,this}return this.cons(e)}},{key:"pop",value:function(){var e=this.tail;if(e)return this.tail=e.prev,this.tail?delete this.tail.next:delete this.head,this._length--,e.value}},{key:"first",value:function(){return this.head&&this.head.value}},{key:"peek",value:function(){return this.tail&&this.tail.value}},{key:"setHead",value:function(e){return this.head?(this.head.value=e,this):this.cons(e)}},{key:"setTail",value:function(e){return this.tail?(this.tail.value=e,this):this.push(e)}},{key:"setNth",value:function(e,t){var r=this.nthCell(e);return!r&&illegalArgs("index out of bounds: ".concat(e)),r.value=t,this}},{key:"nth",value:function(e,t){var r=this.nthCell(e);return r?r.value:t}},{key:"nthCell",value:function(e){if(e<0&&(e+=this._length),!(e<0||e>=this._length))return this.nthCellUnsafe(e)}},{key:"rotateLeft",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:return this.push(this.drop())}}},{key:"rotateRight",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:var e=this.peek();return this.pop(),this.cons(e)}}},{key:"map",value:function(e){for(var r=new t,n=this.head;n;)r.push(e(n.value)),n=n.next;return r}},{key:"filter",value:function(e){for(var r=new t,n=this.head;n;)e(n.value)&&r.push(n.value),n=n.next;return r}},{key:"reduce",value:function(e,t){for(var r=t,n=this.head;n;)r=e(r,n.value),n=n.next;return r}},{key:"shuffle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:SYSTEM;if(this._length<2)return this;for(e=null!=e?e:Math.ceil(1.5*Math.log2(this._length));e>0;e--)for(var r=this.head;r;){var n=r.next;t.float()<.5?this.asHead(r):this.asTail(r),r=n}return this}},{key:"sort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_compare;if(!this._length)return this;for(var t=1;;){var r=this.head;this.head=void 0,this.tail=void 0;for(var n=0;r;){n++;for(var i=r,o=0,a=0;a<t&&(o++,i=i.next);a++);for(var s=t;o>0||s>0&&i;){var u=void 0;0===o?(u=i,i=i.next,s--):i&&0!==s?e(r.value,i.value)<=0?(u=r,r=r.next,o--):(u=i,i=i.next,s--):(u=r,r=r.next,o--),this.tail?this.tail.next=u:this.head=u,u.prev=this.tail,this.tail=u}r=i}if(this.tail.next=void 0,n<=1)return this;t*=2}}},{key:"reverse",value:function(){for(var e=this.head,t=this.tail,r=(this._length>>>1)+(1&this._length);e&&t&&r>0;){var n=e.value;e.value=t.value,t.value=n,e=e.next,t=t.prev,r--}return this}},{key:"asHead",value:function(e){return e===this.head||(this.remove(e),this.head.prev=e,e.next=this.head,e.prev=void 0,this.head=e,this._length++),this}},{key:"asTail",value:function(e){return e===this.tail||(this.remove(e),this.tail.next=e,e.prev=this.tail,e.next=void 0,this.tail=e,this._length++),this}},{key:"toString",value:function(){for(var e=[],t=this.head;t;)e.push(null!=t.value?String(t.value):void 0===t.value?"undefined":"null"),t=t.next;return e.join(", ")}},{key:"toJSON",value:function(){return _toConsumableArray(this)}},{key:"ensureIndex",value:function(e){assert(e>=0&&e<this._length,"index out of range: ".concat(e))}},{key:"nthCellUnsafe",value:function(e){var t,r;for(e<=this._length>>1?(t=this.head,r="next"):(t=this.tail,r="prev",e=this._length-e-1);e-- >0&&t;)t=t[r];return t}}]),t}(Symbol.iterator),LRUCache=function(e){"use strict";function t(e,r){_classCallCheck(this,t);var n=Object.assign({maxlen:1/0,maxsize:1/0,map:function(){return new Map},ksize:function(){return 0},vsize:function(){return 0}},r);this.map=n.map(),this.items=new DCons,this._size=0,this.opts=n,e&&this.into(e)}return _createClass(t,[{key:"length",get:function(){return this.items.length}},{key:"size",get:function(){return this._size}},{key:e,value:function(){return this.entries()}},{key:"entries",value:function(){return map((function(e){return[e.k,e]}),this.items)}},{key:"keys",value:function(){return map((function(e){return e.k}),this.items)}},{key:"values",value:function(){return map((function(e){return e.v}),this.items)}},{key:"copy",value:function(){var e=this.empty();e.items=this.items.copy();for(var t=e.items.head;t;)e.map.set(t.value.k,t),t=t.next;return e}},{key:"empty",value:function(){return new t(null,this.opts)}},{key:"release",value:function(){this._size=0,this.map.clear();var e=this.opts.release;if(e){for(var t;t=this.items.drop();)e(t.k,t.v);return!0}return this.items.release()}},{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e,t){var r=this.map.get(e);return r?this.resetEntry(r):t}},{key:"set",value:function(e,t){var r=this.opts.ksize(e)+this.opts.vsize(t),n=this.map.get(e);return this._size+=Math.max(0,r-(n?n.value.s:0)),this.ensureSize()&&this.doSetEntry(n,e,t,r),t}},{key:"into",value:function(e){var t,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.set(n[0],n[1])}}catch(e){r.e(e)}finally{r.f()}return this}},{key:"getSet",value:function(e,t){var r=this,n=this.map.get(e);return n?Promise.resolve(this.resetEntry(n)):t().then((function(t){return r.set(e,t)}))}},{key:"delete",value:function(e){var t=this.map.get(e);return!!t&&(this.removeEntry(t),!0)}},{key:"resetEntry",value:function(e){return this.items.asTail(e),e.value.v}},{key:"ensureSize",value:function(){for(var e=this.opts.release,t=this.opts.maxsize,r=this.opts.maxlen;this._size>t||this.length>=r;){var n=this.items.drop();if(!n)return!1;this.map.delete(n.k),e&&e(n.k,n.v),this._size-=n.s}return!0}},{key:"removeEntry",value:function(e){var t=e.value;this.map.delete(t.k),this.items.remove(e),this.opts.release&&this.opts.release(t.k,t.v),this._size-=t.s}},{key:"doSetEntry",value:function(e,t,r,n){e?(e.value.v=r,e.value.s=n,this.items.asTail(e)):(this.items.push({k:t,v:r,s:n}),this.map.set(t,this.items.tail))}}]),t}(Symbol.iterator),TLRUCache=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(e,n){return _classCallCheck(this,r),t.call(this,e,n=Object.assign({ttl:36e5},n))}return _createClass(r,[{key:"empty",value:function(){return new r(null,this.opts)}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"get",value:function(e,t){var r=this.map.get(e);if(r){if(r.value.t>=Date.now())return this.resetEntry(r);this.removeEntry(r)}return t}},{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,n=this.opts.ksize(e)+this.opts.vsize(t),i=this.map.get(e);if(this._size+=Math.max(0,n-(i?i.value.s:0)),this.ensureSize()){var o=Date.now()+r;i?(i.value.v=t,i.value.s=n,i.value.t=o,this.items.asTail(i)):(this.items.push({k:e,v:t,s:n,t:o}),this.map.set(e,this.items.tail))}return t}},{key:"getSet",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,i=this.get(e);return i?Promise.resolve(i):t().then((function(t){return r.set(e,t,n)}))}},{key:"prune",value:function(){for(var e=Date.now(),t=this.items.head;t;)t.value.t<e&&this.removeEntry(t),t=t.next}},{key:"ensureSize",value:function(){for(var e=this.opts.maxsize,t=this.opts.maxlen,n=Date.now(),i=this.items.head;i&&(this._size>e||this.length>=t);)i.value.t<n&&this.removeEntry(i),i=i.next;return _get(_getPrototypeOf(r.prototype),"ensureSize",this).call(this)}}]),r}(LRUCache);function getType(e){return Object.prototype.toString.call(e).slice(8,-1)}function isPlainObject(e){return"Object"===getType(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function isNil(e){return null==e}var isNil_1=isNil,commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return commonjsRequire(e,null==t?r.path:t)}},r.exports),r.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var freeGlobal="object"==_typeof(commonjsGlobal)&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal,freeSelf="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,root=_freeGlobal||freeSelf||Function("return this")(),_root=root,Symbol$1=_root.Symbol,_Symbol=Symbol$1,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=_Symbol?_Symbol.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag),r=e[symToStringTag];try{e[symToStringTag]=void 0;var n=!0}catch(e){}var i=nativeObjectToString.call(e);return n&&(t?e[symToStringTag]=r:delete e[symToStringTag]),i}var _getRawTag=getRawTag,objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(e){return nativeObjectToString$1.call(e)}var _objectToString=objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=_Symbol?_Symbol.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag$1&&symToStringTag$1 in Object(e)?_getRawTag(e):_objectToString(e)}var _baseGetTag=baseGetTag;function isObject(e){var t=_typeof(e);return null!=e&&("object"==t||"function"==t)}var isObject_1=isObject,asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(e){if(!isObject_1(e))return!1;var t=_baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}var isFunction_1=isFunction,coreJsData=_root["__core-js_shared__"],_coreJsData=coreJsData,maskSrcKey=(uid=/[^.]+$/.exec(_coreJsData&&_coreJsData.keys&&_coreJsData.keys.IE_PROTO||""),uid?"Symbol(src)_1."+uid:""),uid;function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked,funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var _toSource=toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$2=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$1=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!isObject_1(e)||_isMasked(e))&&(isFunction_1(e)?reIsNative:reIsHostCtor).test(_toSource(e))}var _baseIsNative=baseIsNative;function getValue(e,t){return null==e?void 0:e[t]}var _getValue=getValue;function getNative(e,t){var r=_getValue(e,t);return _baseIsNative(r)?r:void 0}var _getNative=getNative,defineProperty=function(){try{var e=_getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),_defineProperty=defineProperty;function baseAssignValue(e,t,r){"__proto__"==t&&_defineProperty?_defineProperty(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var _baseAssignValue=baseAssignValue;function createBaseFor(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===r(o[u],u,o))break}return t}}var _createBaseFor=createBaseFor,baseFor=_createBaseFor(),_baseFor=baseFor;function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var _baseTimes=baseTimes;function isObjectLike(e){return null!=e&&"object"==_typeof(e)}var isObjectLike_1=isObjectLike,argsTag="[object Arguments]";function baseIsArguments(e){return isObjectLike_1(e)&&_baseGetTag(e)==argsTag}var _baseIsArguments=baseIsArguments,objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,isArguments=_baseIsArguments(function(){return arguments}())?_baseIsArguments:function(e){return isObjectLike_1(e)&&hasOwnProperty$2.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArguments_1=isArguments,isArray=Array.isArray,isArray_1=isArray;function stubFalse(){return!1}var stubFalse_1=stubFalse,isBuffer_1=createCommonjsModule((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?_root.Buffer:void 0,o=(i?i.isBuffer:void 0)||stubFalse_1;e.exports=o})),MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var r=_typeof(e);return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==r||"symbol"!=r&&reIsUint.test(e))&&e>-1&&e%1==0&&e<t}var _isIndex=isIndex,MAX_SAFE_INTEGER$1=9007199254740991;function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER$1}var isLength_1=isLength,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(e){return isObjectLike_1(e)&&isLength_1(e.length)&&!!typedArrayTags[_baseGetTag(e)]}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var _baseIsTypedArray=baseIsTypedArray;function baseUnary(e){return function(t){return e(t)}}var _baseUnary=baseUnary,isTypedArray=_baseIsTypedArray,isTypedArray_1=isTypedArray,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function arrayLikeKeys(e,t){var r=isArray_1(e),n=!r&&isArguments_1(e),i=!r&&!n&&isBuffer_1(e),o=!r&&!n&&!i&&isTypedArray_1(e),a=r||n||i||o,s=a?_baseTimes(e.length,String):[],u=s.length;for(var c in e)!t&&!hasOwnProperty$3.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_isIndex(c,u))||s.push(c);return s}var _arrayLikeKeys=arrayLikeKeys,objectProto$5=Object.prototype;function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$5)}var _isPrototype=isPrototype;function overArg(e,t){return function(r){return e(t(r))}}var _overArg=overArg,nativeKeys=_overArg(Object.keys,Object),_nativeKeys=nativeKeys,objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty;function baseKeys(e){if(!_isPrototype(e))return _nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty$4.call(e,r)&&"constructor"!=r&&t.push(r);return t}var _baseKeys=baseKeys;function isArrayLike$1(e){return null!=e&&isLength_1(e.length)&&!isFunction_1(e)}var isArrayLike_1=isArrayLike$1;function keys(e){return isArrayLike_1(e)?_arrayLikeKeys(e):_baseKeys(e)}var keys_1=keys;function baseForOwn(e,t){return e&&_baseFor(e,t,keys_1)}var _baseForOwn=baseForOwn;function listCacheClear(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear;function eq(e,t){return e===t||e!=e&&t!=t}var eq_1=eq;function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq_1(e[r][0],t))return r;return-1}var _assocIndexOf=assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,r=_assocIndexOf(t,e);return!(r<0||(r==t.length-1?t.pop():splice.call(t,r,1),--this.size,0))}var _listCacheDelete=listCacheDelete;function listCacheGet(e){var t=this.__data__,r=_assocIndexOf(t,e);return r<0?void 0:t[r][1]}var _listCacheGet=listCacheGet;function listCacheHas(e){return _assocIndexOf(this.__data__,e)>-1}var _listCacheHas=listCacheHas;function listCacheSet(e,t){var r=this.__data__,n=_assocIndexOf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var _listCacheSet=listCacheSet;function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ListCache.prototype.clear=_listCacheClear,ListCache.prototype.delete=_listCacheDelete,ListCache.prototype.get=_listCacheGet,ListCache.prototype.has=_listCacheHas,ListCache.prototype.set=_listCacheSet;var _ListCache=ListCache;function stackClear(){this.__data__=new _ListCache,this.size=0}var _stackClear=stackClear;function stackDelete(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var _stackDelete=stackDelete;function stackGet(e){return this.__data__.get(e)}var _stackGet=stackGet;function stackHas(e){return this.__data__.has(e)}var _stackHas=stackHas,Map$1=_getNative(_root,"Map"),_Map=Map$1,nativeCreate=_getNative(Object,"create"),_nativeCreate=nativeCreate;function hashClear(){this.__data__=_nativeCreate?_nativeCreate(null):{},this.size=0}var _hashClear=hashClear;function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _hashDelete=hashDelete,HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function hashGet(e){var t=this.__data__;if(_nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty$5.call(t,e)?t[e]:void 0}var _hashGet=hashGet,objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashHas(e){var t=this.__data__;return _nativeCreate?void 0!==t[e]:hasOwnProperty$6.call(t,e)}var _hashHas=hashHas,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=_nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}var _hashSet=hashSet;function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hash.prototype.clear=_hashClear,Hash.prototype.delete=_hashDelete,Hash.prototype.get=_hashGet,Hash.prototype.has=_hashHas,Hash.prototype.set=_hashSet;var _Hash=Hash;function mapCacheClear(){this.size=0,this.__data__={hash:new _Hash,map:new(_Map||_ListCache),string:new _Hash}}var _mapCacheClear=mapCacheClear;function isKeyable(e){var t=_typeof(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var _isKeyable=isKeyable;function getMapData(e,t){var r=e.__data__;return _isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}var _getMapData=getMapData;function mapCacheDelete(e){var t=_getMapData(this,e).delete(e);return this.size-=t?1:0,t}var _mapCacheDelete=mapCacheDelete;function mapCacheGet(e){return _getMapData(this,e).get(e)}var _mapCacheGet=mapCacheGet;function mapCacheHas(e){return _getMapData(this,e).has(e)}var _mapCacheHas=mapCacheHas;function mapCacheSet(e,t){var r=_getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var _mapCacheSet=mapCacheSet;function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}MapCache.prototype.clear=_mapCacheClear,MapCache.prototype.delete=_mapCacheDelete,MapCache.prototype.get=_mapCacheGet,MapCache.prototype.has=_mapCacheHas,MapCache.prototype.set=_mapCacheSet;var _MapCache=MapCache,LARGE_ARRAY_SIZE=200;function stackSet(e,t){var r=this.__data__;if(r instanceof _ListCache){var n=r.__data__;if(!_Map||n.length<LARGE_ARRAY_SIZE-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new _MapCache(n)}return r.set(e,t),this.size=r.size,this}var _stackSet=stackSet;function Stack(e){var t=this.__data__=new _ListCache(e);this.size=t.size}Stack.prototype.clear=_stackClear,Stack.prototype.delete=_stackDelete,Stack.prototype.get=_stackGet,Stack.prototype.has=_stackHas,Stack.prototype.set=_stackSet;var _Stack=Stack,HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED$2),this}var _setCacheAdd=setCacheAdd;function setCacheHas(e){return this.__data__.has(e)}var _setCacheHas=setCacheHas;function SetCache(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new _MapCache;++t<r;)this.add(e[t])}SetCache.prototype.add=SetCache.prototype.push=_setCacheAdd,SetCache.prototype.has=_setCacheHas;var _SetCache=SetCache;function arraySome(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var _arraySome=arraySome;function cacheHas(e,t){return e.has(t)}var _cacheHas=cacheHas,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(e,t,r,n,i,o){var a=r&COMPARE_PARTIAL_FLAG,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(e),l=o.get(t);if(c&&l)return c==t&&l==e;var p=-1,d=!0,f=r&COMPARE_UNORDERED_FLAG?new _SetCache:void 0;for(o.set(e,t),o.set(t,e);++p<s;){var h=e[p],_=t[p];if(n)var g=a?n(_,h,p,t,e,o):n(h,_,p,e,t,o);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!_arraySome(t,(function(e,t){if(!_cacheHas(f,t)&&(h===e||i(h,e,r,n,o)))return f.push(t)}))){d=!1;break}}else if(h!==_&&!i(h,_,r,n,o)){d=!1;break}}return o.delete(e),o.delete(t),d}var _equalArrays=equalArrays,Uint8Array$1=_root.Uint8Array,_Uint8Array=Uint8Array$1;function mapToArray(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}var _mapToArray=mapToArray;function setToArray(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var _setToArray=setToArray,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$1="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",symbolProto=_Symbol?_Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(e,t,r,n,i,o,a){switch(r){case dataViewTag$1:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case arrayBufferTag$1:return!(e.byteLength!=t.byteLength||!o(new _Uint8Array(e),new _Uint8Array(t)));case boolTag$1:case dateTag$1:case numberTag$1:return eq_1(+e,+t);case errorTag$1:return e.name==t.name&&e.message==t.message;case regexpTag$1:case stringTag$1:return e==t+"";case mapTag$1:var s=_mapToArray;case setTag$1:var u=n&COMPARE_PARTIAL_FLAG$1;if(s||(s=_setToArray),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;n|=COMPARE_UNORDERED_FLAG$1,a.set(e,t);var l=_equalArrays(s(e),s(t),n,i,o,a);return a.delete(e),l;case symbolTag:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(t)}return!1}var _equalByTag=equalByTag;function arrayPush(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var _arrayPush=arrayPush;function baseGetAllKeys(e,t,r){var n=t(e);return isArray_1(e)?n:_arrayPush(n,r(e))}var _baseGetAllKeys=baseGetAllKeys;function arrayFilter(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}var _arrayFilter=arrayFilter;function stubArray(){return[]}var stubArray_1=stubArray,objectProto$9=Object.prototype,propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(e){return null==e?[]:(e=Object(e),_arrayFilter(nativeGetSymbols(e),(function(t){return propertyIsEnumerable$1.call(e,t)})))}:stubArray_1,_getSymbols=getSymbols;function getAllKeys(e){return _baseGetAllKeys(e,keys_1,_getSymbols)}var _getAllKeys=getAllKeys,COMPARE_PARTIAL_FLAG$2=1,objectProto$a=Object.prototype,hasOwnProperty$7=objectProto$a.hasOwnProperty;function equalObjects(e,t,r,n,i,o){var a=r&COMPARE_PARTIAL_FLAG$2,s=_getAllKeys(e),u=s.length;if(u!=_getAllKeys(t).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in t:hasOwnProperty$7.call(t,l)))return!1}var p=o.get(e),d=o.get(t);if(p&&d)return p==t&&d==e;var f=!0;o.set(e,t),o.set(t,e);for(var h=a;++c<u;){var _=e[l=s[c]],g=t[l];if(n)var v=a?n(g,_,l,t,e,o):n(_,g,l,e,t,o);if(!(void 0===v?_===g||i(_,g,r,n,o):v)){f=!1;break}h||(h="constructor"==l)}if(f&&!h){var b=e.constructor,m=t.constructor;b==m||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m||(f=!1)}return o.delete(e),o.delete(t),f}var _equalObjects=equalObjects,DataView=_getNative(_root,"DataView"),_DataView=DataView,Promise$1=_getNative(_root,"Promise"),_Promise=Promise$1,Set$1=_getNative(_root,"Set"),_Set=Set$1,WeakMap=_getNative(_root,"WeakMap"),_WeakMap=WeakMap,mapTag$2="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$2="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=_toSource(_DataView),mapCtorString=_toSource(_Map),promiseCtorString=_toSource(_Promise),setCtorString=_toSource(_Set),weakMapCtorString=_toSource(_WeakMap),getTag=_baseGetTag;(_DataView&&getTag(new _DataView(new ArrayBuffer(1)))!=dataViewTag$2||_Map&&getTag(new _Map)!=mapTag$2||_Promise&&getTag(_Promise.resolve())!=promiseTag||_Set&&getTag(new _Set)!=setTag$2||_WeakMap&&getTag(new _WeakMap)!=weakMapTag$1)&&(getTag=function(e){var t=_baseGetTag(e),r=t==objectTag$1?e.constructor:void 0,n=r?_toSource(r):"";if(n)switch(n){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$2;case promiseCtorString:return promiseTag;case setCtorString:return setTag$2;case weakMapCtorString:return weakMapTag$1}return t});var _getTag=getTag,COMPARE_PARTIAL_FLAG$3=1,argsTag$2="[object Arguments]",arrayTag$1="[object Array]",objectTag$2="[object Object]",objectProto$b=Object.prototype,hasOwnProperty$8=objectProto$b.hasOwnProperty;function baseIsEqualDeep(e,t,r,n,i,o){var a=isArray_1(e),s=isArray_1(t),u=a?arrayTag$1:_getTag(e),c=s?arrayTag$1:_getTag(t),l=(u=u==argsTag$2?objectTag$2:u)==objectTag$2,p=(c=c==argsTag$2?objectTag$2:c)==objectTag$2,d=u==c;if(d&&isBuffer_1(e)){if(!isBuffer_1(t))return!1;a=!0,l=!1}if(d&&!l)return o||(o=new _Stack),a||isTypedArray_1(e)?_equalArrays(e,t,r,n,i,o):_equalByTag(e,t,u,r,n,i,o);if(!(r&COMPARE_PARTIAL_FLAG$3)){var f=l&&hasOwnProperty$8.call(e,"__wrapped__"),h=p&&hasOwnProperty$8.call(t,"__wrapped__");if(f||h){var _=f?e.value():e,g=h?t.value():t;return o||(o=new _Stack),i(_,g,r,n,o)}}return!!d&&(o||(o=new _Stack),_equalObjects(e,t,r,n,i,o))}var _baseIsEqualDeep=baseIsEqualDeep;function baseIsEqual(e,t,r,n,i){return e===t||(null==e||null==t||!isObjectLike_1(e)&&!isObjectLike_1(t)?e!=e&&t!=t:_baseIsEqualDeep(e,t,r,n,baseIsEqual,i))}var _baseIsEqual=baseIsEqual,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(e,t,r,n){var i=r.length,o=i,a=!n;if(null==e)return!o;for(e=Object(e);i--;){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=r[i])[0],c=e[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in e))return!1}else{var p=new _Stack;if(n)var d=n(c,l,u,e,t,p);if(!(void 0===d?_baseIsEqual(l,c,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,n,p):d))return!1}}return!0}var _baseIsMatch=baseIsMatch;function isStrictComparable(e){return e==e&&!isObject_1(e)}var _isStrictComparable=isStrictComparable;function getMatchData(e){for(var t=keys_1(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,_isStrictComparable(i)]}return t}var _getMatchData=getMatchData;function matchesStrictComparable(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}var _matchesStrictComparable=matchesStrictComparable;function baseMatches(e){var t=_getMatchData(e);return 1==t.length&&t[0][2]?_matchesStrictComparable(t[0][0],t[0][1]):function(r){return r===e||_baseIsMatch(r,e,t)}}var _baseMatches=baseMatches,symbolTag$1="[object Symbol]";function isSymbol(e){return"symbol"==_typeof(e)||isObjectLike_1(e)&&_baseGetTag(e)==symbolTag$1}var isSymbol_1=isSymbol,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,t){if(isArray_1(e))return!1;var r=_typeof(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol_1(e))||reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t)}var _isKey=isKey,FUNC_ERROR_TEXT="Expected a function";function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);var r=function r(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(memoize.Cache||_MapCache),r}memoize.Cache=_MapCache;var memoize_1=memoize,MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var t=memoize_1(e,(function(e){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),e})),r=t.cache;return t}var _memoizeCapped=memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=_memoizeCapped((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rePropName,(function(e,r,n,i){t.push(n?i.replace(reEscapeChar,"$1"):r||e)})),t})),_stringToPath=stringToPath;function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var _arrayMap=arrayMap,INFINITY=1/0,symbolProto$1=_Symbol?_Symbol.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isArray_1(e))return _arrayMap(e,baseToString)+"";if(isSymbol_1(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}var _baseToString=baseToString;function toString(e){return null==e?"":_baseToString(e)}var toString_1=toString;function castPath(e,t){return isArray_1(e)?e:_isKey(e,t)?[e]:_stringToPath(toString_1(e))}var _castPath=castPath,INFINITY$1=1/0;function toKey(e){if("string"==typeof e||isSymbol_1(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY$1?"-0":t}var _toKey=toKey;function baseGet(e,t){for(var r=0,n=(t=_castPath(t,e)).length;null!=e&&r<n;)e=e[_toKey(t[r++])];return r&&r==n?e:void 0}var _baseGet=baseGet;function get(e,t,r){var n=null==e?void 0:_baseGet(e,t);return void 0===n?r:n}var get_1=get;function baseHasIn(e,t){return null!=e&&t in Object(e)}var _baseHasIn=baseHasIn;function hasPath(e,t,r){for(var n=-1,i=(t=_castPath(t,e)).length,o=!1;++n<i;){var a=_toKey(t[n]);if(!(o=null!=e&&r(e,a)))break;e=e[a]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&isLength_1(i)&&_isIndex(a,i)&&(isArray_1(e)||isArguments_1(e))}var _hasPath=hasPath;function hasIn(e,t){return null!=e&&_hasPath(e,t,_baseHasIn)}var hasIn_1=hasIn,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(e,t){return _isKey(e)&&_isStrictComparable(t)?_matchesStrictComparable(_toKey(e),t):function(r){var n=get_1(r,e);return void 0===n&&n===t?hasIn_1(r,e):_baseIsEqual(t,n,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}var _baseMatchesProperty=baseMatchesProperty;function identity(e){return e}var identity_1=identity;function baseProperty(e){return function(t){return null==t?void 0:t[e]}}var _baseProperty=baseProperty;function basePropertyDeep(e){return function(t){return _baseGet(t,e)}}var _basePropertyDeep=basePropertyDeep;function property(e){return _isKey(e)?_baseProperty(_toKey(e)):_basePropertyDeep(e)}var property_1=property;function baseIteratee(e){return"function"==typeof e?e:null==e?identity_1:"object"==_typeof(e)?isArray_1(e)?_baseMatchesProperty(e[0],e[1]):_baseMatches(e):property_1(e)}var _baseIteratee=baseIteratee;function mapValues(e,t){var r={};return t=_baseIteratee(t),_baseForOwn(e,(function(e,n,i){_baseAssignValue(r,n,t(e,n,i))})),r}var mapValues_1=mapValues,long_1=Long;function Long(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function isLong(e){return!0===(e&&e.__isLong__)}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0}),Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,t){var r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=UINT_CACHE[e])?n:(r=fromBits(e,(0|e)<0?-1:0,!0),i&&(UINT_CACHE[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=INT_CACHE[e])?n:(r=fromBits(e,e<0?-1:0,!1),i&&(INT_CACHE[e]=r),r)}function fromNumber(e,t){if(isNaN(e))return t?UZERO:ZERO;if(t){if(e<0)return UZERO;if(e>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(e+1>=TWO_PWR_63_DBL)return MAX_VALUE}return e<0?fromNumber(-e,t).neg():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,t)}function fromBits(e,t,r){return new Long(e,t,r)}Long.fromInt=fromInt,Long.fromNumber=fromNumber,Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return ZERO;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return fromString(e.substring(1),t,r).neg();for(var i=fromNumber(pow_dbl(r,8)),o=ZERO,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+s),r);if(s<8){var c=fromNumber(pow_dbl(r,s));o=o.mul(c).add(fromNumber(u))}else o=(o=o.mul(i)).add(fromNumber(u))}return o.unsigned=t,o}function fromValue(e,t){return"number"==typeof e?fromNumber(e,t):"string"==typeof e?fromString(e,t):fromBits(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}Long.fromString=fromString,Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(MIN_VALUE)){var t=fromNumber(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=fromNumber(pow_dbl(e,6),this.unsigned),o=this,a="";;){var s=o.div(i),u=(o.sub(s.mul(i)).toInt()>>>0).toString(e);if((o=s).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},LongPrototype.isZero=function(){return 0===this.high&&0===this.low},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||this.high>=0},LongPrototype.isOdd=function(){return 1==(1&this.low)},LongPrototype.isEven=function(){return 0==(1&this.low)},LongPrototype.equals=function(e){return isLong(e)||(e=fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(e){return!this.eq(e)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(e){return this.comp(e)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(e){return this.comp(e)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(e){return this.comp(e)>0},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(e){return this.comp(e)>=0},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(e){if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(e){isLong(e)||(e=fromValue(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,u=0,c=0,l=0,p=0;return l+=(p+=i+(65535&e.low))>>>16,c+=(l+=n+s)>>>16,u+=(c+=r+a)>>>16,u+=t+o,fromBits((l&=65535)<<16|(p&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},LongPrototype.subtract=function(e){return isLong(e)||(e=fromValue(e)),this.add(e.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(e){if(this.isZero())return ZERO;if(isLong(e)||(e=fromValue(e)),e.isZero())return ZERO;if(this.eq(MIN_VALUE))return e.isOdd()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,u=65535&e.low,c=0,l=0,p=0,d=0;return p+=(d+=i*u)>>>16,l+=(p+=n*u)>>>16,p&=65535,l+=(p+=i*s)>>>16,c+=(l+=r*u)>>>16,l&=65535,c+=(l+=n*s)>>>16,l&=65535,c+=(l+=i*a)>>>16,c+=t*u+r*s+n*a+i*o,fromBits((p&=65535)<<16|(d&=65535),(c&=65535)<<16|(l&=65535),this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(e){if(isLong(e)||(e=fromValue(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?UZERO:ZERO;var t,r,n;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return UZERO;if(e.gt(this.shru(1)))return UONE;n=UZERO}else{if(this.eq(MIN_VALUE))return e.eq(ONE)||e.eq(NEG_ONE)?MIN_VALUE:e.eq(MIN_VALUE)?ONE:(t=this.shr(1).div(e).shl(1)).eq(ZERO)?e.isNegative()?ONE:NEG_ONE:(r=this.sub(e.mul(t)),n=t.add(r.div(e)));if(e.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=ZERO}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),o=i<=48?1:pow_dbl(2,i-48),a=fromNumber(t),s=a.mul(e);s.isNegative()||s.gt(r);)s=(a=fromNumber(t-=o,this.unsigned)).mul(e);a.isZero()&&(a=ONE),n=n.add(a),r=r.sub(s)}return n},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(e){return isLong(e)||(e=fromValue(e)),this.sub(this.div(e).mul(e))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low&e.low,this.high&e.high,this.unsigned)},LongPrototype.or=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low|e.low,this.high|e.high,this.unsigned)},LongPrototype.xor=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low^e.low,this.high^e.high,this.unsigned)},LongPrototype.shiftLeft=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fromBits(0,this.low<<e-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(e){if(isLong(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?fromBits(this.low>>>e|t<<32-e,t>>>e,this.unsigned):fromBits(32===e?t:t>>>e-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},LongPrototype.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},Long.fromBytes=function(e,t,r){return r?Long.fromBytesLE(e,t):Long.fromBytesBE(e,t)},Long.fromBytesLE=function(e,t){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Long.fromBytesBE=function(e,t){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var _extendStatics=function(e,t){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){function r(){this.constructor=e}_extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function isFunction$1(e){return"function"==typeof e}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,_enable_super_gross_mode_that_will_cause_bad_things=e},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(e){setTimeout((function(){throw e}),0)}var empty={closed:!0,next:function(e){},error:function(e){if(config.useDeprecatedSynchronousErrorHandling)throw e;hostReportError(e)},complete:function(){}},isArray$1=Array.isArray||function(e){return e&&"number"==typeof e.length};function isObject$1(e){return null!==e&&"object"==_typeof(e)}var UnsubscriptionErrorImpl=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),UnsubscriptionError=UnsubscriptionErrorImpl,Subscription=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var r=this,n=r._parentOrParents,i=r._ctorUnsubscribe,o=r._unsubscribe,a=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var s=0;s<n.length;++s)n[s].remove(this);if(isFunction$1(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(e){t=e instanceof UnsubscriptionError?flattenUnsubscriptionErrors(e.errors):[e]}}if(isArray$1(a)){s=-1;for(var u=a.length;++s<u;){var c=a[s];if(isObject$1(c))try{c.unsubscribe()}catch(e){t=t||[],e instanceof UnsubscriptionError?t=t.concat(flattenUnsubscriptionErrors(e.errors)):t.push(e)}}}if(t)throw new UnsubscriptionError(t)}},e.prototype.add=function(t){var r=t;if(!t)return e.EMPTY;switch(_typeof(t)){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=r._parentOrParents;if(null===i)r._parentOrParents=this;else if(i instanceof e){if(i===this)return r;r._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return r;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[r]:o.push(r),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function flattenUnsubscriptionErrors(e){return e.reduce((function(e,t){return e.concat(t instanceof UnsubscriptionError?t.errors:t)}),[])}var rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),Subscriber=function(e){function t(r,n,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=empty;break;case 1:if(!r){o.destination=empty;break}if("object"==_typeof(r)){r instanceof t?(o.syncErrorThrowable=r.syncErrorThrowable,o.destination=r,r.add(o)):(o.syncErrorThrowable=!0,o.destination=new SafeSubscriber(o,r));break}default:o.syncErrorThrowable=!0,o.destination=new SafeSubscriber(o,r,n,i)}return o}return __extends(t,e),t.prototype[rxSubscriber]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(Subscription),SafeSubscriber=function(e){function t(t,r,n,i){var o,a=e.call(this)||this;a._parentSubscriber=t;var s=a;return isFunction$1(r)?o=r:r&&(o=r.next,n=r.error,i=r.complete,r!==empty&&(isFunction$1((s=Object.create(r)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=o,a._error=n,a._complete=i,a}return __extends(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=config.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),config.useDeprecatedSynchronousErrorHandling)throw e;hostReportError(e)}},t.prototype.__tryOrSetError=function(e,t,r){if(!config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(hostReportError(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Subscriber);function canReportError(e){for(;e;){var t=e,r=t.closed,n=t.destination,i=t.isStopped;if(r||i)return!1;e=n&&n instanceof Subscriber?n:null}return!0}function toSubscriber(e,t,r){if(e){if(e instanceof Subscriber)return e;if(e[rxSubscriber])return e[rxSubscriber]()}return e||t||r?new Subscriber(e,t,r):new Subscriber(empty)}var observable="function"==typeof Symbol&&Symbol.observable||"@@observable";function identity$1(e){return e}function pipe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pipeFromArray(e)}function pipeFromArray(e){return 0===e.length?identity$1:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Observable=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,i=toSubscriber(e,t,r);if(n?i.add(n.call(i,this.source)):i.add(this.source||config.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),config.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),canReportError(e)?e.error(t):__f__("warn",t," at pagesLive/lib/rtm-miniapp.js:3")}},e.prototype.forEach=function(e,t){var r=this;return new(t=getPromiseCtor(t))((function(t,n){var i;i=r.subscribe((function(t){try{e(t)}catch(e){n(e),i&&i.unsubscribe()}}),n,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=getPromiseCtor(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}();function getPromiseCtor(e){if(e||(e=Promise),!e)throw new Error("no Promise impl found");return e}var ObjectUnsubscribedErrorImpl=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl,SubjectSubscription=function(e){function t(t,r){var n=e.call(this)||this;return n.subject=t,n.subscriber=r,n.closed=!1,n}return __extends(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(Subscription),SubjectSubscriber=function(e){function t(t){var r=e.call(this,t)||this;return r.destination=t,r}return __extends(t,e),t}(Subscriber),Subject=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return __extends(t,e),t.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},t.prototype.lift=function(e){var t=new AnonymousSubject(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),Subscription.EMPTY):this.isStopped?(e.complete(),Subscription.EMPTY):(this.observers.push(e),new SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new Observable;return e.source=this,e},t.create=function(e,t){return new AnonymousSubject(e,t)},t}(Observable),AnonymousSubject=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return __extends(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Subscription.EMPTY},t}(Subject);function refCount(){return function(e){return e.lift(new RefCountOperator(e))}}var RefCountOperator=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new RefCountSubscriber(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i},e}(),RefCountSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.connectable=r,n}return __extends(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(Subscriber),ConnectableObservable=function(e){function t(t,r){var n=e.call(this)||this;return n.source=t,n.subjectFactory=r,n._refCount=0,n._isComplete=!1,n}return __extends(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Subscription).add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),e.closed&&(this._connection=null,e=Subscription.EMPTY)),e},t.prototype.refCount=function(){return refCount()(this)},t}(Observable),connectableObservableDescriptor=function(){var e=ConnectableObservable.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),ConnectableSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.connectable=r,n}return __extends(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(SubjectSubscriber),Action=function(e){function t(t,r){return e.call(this)||this}return __extends(t,e),t.prototype.schedule=function(e,t){return this},t}(Subscription),AsyncAction=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return __extends(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0!==r&&0!==r||(r=1),setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(e){r=!0,n=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(Action),QueueAction=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return __extends(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,n):t.flush(this)},t}(AsyncAction),Scheduler=function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=function(){return Date.now()},e}(),AsyncScheduler=function(e){function t(r,n){void 0===n&&(n=Scheduler.now);var i=e.call(this,r,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():n()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return __extends(t,e),t.prototype.schedule=function(r,n,i){return void 0===n&&(n=0),t.delegate&&t.delegate!==this?t.delegate.schedule(r,n,i):e.prototype.schedule.call(this,r,n,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(Scheduler),QueueScheduler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(AsyncScheduler),queueScheduler=new QueueScheduler(QueueAction),queue=queueScheduler,EMPTY=new Observable((function(e){return e.complete()}));function empty$1(e){return e?emptyScheduled(e):EMPTY}function emptyScheduled(e){return new Observable((function(t){return e.schedule((function(){return t.complete()}))}))}function isScheduler(e){return e&&"function"==typeof e.schedule}var subscribeToArray=function(e){return function(t){for(var r=0,n=e.length;r<n&&!t.closed;r++)t.next(e[r]);t.complete()}};function scheduleArray(e,t){return new Observable((function(r){var n=new Subscription,i=0;return n.add(t.schedule((function(){i!==e.length?(r.next(e[i++]),r.closed||n.add(this.schedule())):r.complete()}))),n}))}function fromArray(e,t){return t?scheduleArray(e,t):new Observable(subscribeToArray(e))}function of(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return isScheduler(r)?(e.pop(),scheduleArray(e,r)):fromArray(e)}function throwError(e,t){return new Observable(t?function(r){return t.schedule(dispatch,0,{error:e,subscriber:r})}:function(t){return t.error(e)})}function dispatch(e){var t=e.error;e.subscriber.error(t)}var Notification=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return of(this.value);case"E":return throwError(this.error);case"C":return empty$1()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();function observeOn(e,t){return void 0===t&&(t=0),function(r){return r.lift(new ObserveOnOperator(e,t))}}var ObserveOnOperator=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new ObserveOnSubscriber(e,this.scheduler,this.delay))},e}(),ObserveOnSubscriber=function(e){function t(t,r,n){void 0===n&&(n=0);var i=e.call(this,t)||this;return i.scheduler=r,i.delay=n,i}return __extends(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new ObserveOnMessage(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Notification.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Notification.createComplete()),this.unsubscribe()},t}(Subscriber),ObserveOnMessage=function(e,t){this.notification=e,this.destination=t},ReplaySubject=function(e){function t(t,r,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=n,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return __extends(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var r=this._events;r.push(t),r.length>this._bufferSize&&r.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new ReplayEvent(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,r=this._infiniteTimeWindow,n=r?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=n.length;if(this.closed)throw new ObjectUnsubscribedError;if(this.isStopped||this.hasError?t=Subscription.EMPTY:(this.observers.push(e),t=new SubjectSubscription(this,e)),i&&e.add(e=new ObserveOnSubscriber(e,i)),r)for(var a=0;a<o&&!e.closed;a++)e.next(n[a]);else for(a=0;a<o&&!e.closed;a++)e.next(n[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(e-n[o].time<r);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&n.splice(0,o),n},t}(Subject),ReplayEvent=function(e,t){this.time=e,this.value=t},nextHandle=1,RESOLVED=Promise.resolve(),activeHandles={};function findAndClearHandle(e){return e in activeHandles&&(delete activeHandles[e],!0)}var Immediate={setImmediate:function(e){var t=nextHandle++;return activeHandles[t]=!0,RESOLVED.then((function(){return findAndClearHandle(t)&&e()})),t},clearImmediate:function(e){findAndClearHandle(e)}},AsapAction=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return __extends(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=Immediate.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(Immediate.clearImmediate(r),t.scheduled=void 0)},t}(AsyncAction),AsapScheduler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(AsyncScheduler),asapScheduler=new AsapScheduler(AsapAction),asyncScheduler=new AsyncScheduler(AsyncAction),async=asyncScheduler;function noop(){}var ArgumentOutOfRangeErrorImpl=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl,EmptyErrorImpl=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),EmptyError=EmptyErrorImpl,TimeoutErrorImpl=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),TimeoutError=TimeoutErrorImpl;function map$1(e,t){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new MapOperator(e,t))}}var MapOperator=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new MapSubscriber(e,this.project,this.thisArg))},e}(),MapSubscriber=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.project=r,i.count=0,i.thisArg=n||i,i}return __extends(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Subscriber),OuterSubscriber=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(Subscriber),InnerSubscriber=function(e){function t(t,r,n){var i=e.call(this)||this;return i.parent=t,i.outerValue=r,i.outerIndex=n,i.index=0,i}return __extends(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(Subscriber),subscribeToPromise=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,hostReportError),t}};function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var iterator=getSymbolIterator(),subscribeToIterable=function(e){return function(t){for(var r=e[iterator]();;){var n=void 0;try{n=r.next()}catch(e){return t.error(e),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof r.return&&t.add((function(){r.return&&r.return()})),t}},subscribeToObservable=function(e){return function(t){var r=e[observable]();if("function"!=typeof r.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(t)}},isArrayLike$2=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function isPromise(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var subscribeTo=function(e){if(e&&"function"==typeof e[observable])return subscribeToObservable(e);if(isArrayLike$2(e))return subscribeToArray(e);if(isPromise(e))return subscribeToPromise(e);if(e&&"function"==typeof e[iterator])return subscribeToIterable(e);var t=isObject$1(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function subscribeToResult(e,t,r,n,i){if(void 0===i&&(i=new InnerSubscriber(e,r,n)),!i.closed)return t instanceof Observable?t.subscribe(i):subscribeTo(t)(i)}function scheduleObservable(e,t){return new Observable((function(r){var n=new Subscription;return n.add(t.schedule((function(){var i=e[observable]();n.add(i.subscribe({next:function(e){n.add(t.schedule((function(){return r.next(e)})))},error:function(e){n.add(t.schedule((function(){return r.error(e)})))},complete:function(){n.add(t.schedule((function(){return r.complete()})))}}))}))),n}))}function schedulePromise(e,t){return new Observable((function(r){var n=new Subscription;return n.add(t.schedule((function(){return e.then((function(e){n.add(t.schedule((function(){r.next(e),n.add(t.schedule((function(){return r.complete()})))})))}),(function(e){n.add(t.schedule((function(){return r.error(e)})))}))}))),n}))}function scheduleIterable(e,t){if(!e)throw new Error("Iterable cannot be null");return new Observable((function(r){var n,i=new Subscription;return i.add((function(){n&&"function"==typeof n.return&&n.return()})),i.add(t.schedule((function(){n=e[iterator](),i.add(t.schedule((function(){if(!r.closed){var e,t;try{var i=n.next();e=i.value,t=i.done}catch(e){return void r.error(e)}t?r.complete():(r.next(e),this.schedule())}})))}))),i}))}function isInteropObservable(e){return e&&"function"==typeof e[observable]}function isIterable$1(e){return e&&"function"==typeof e[iterator]}function scheduled(e,t){if(null!=e){if(isInteropObservable(e))return scheduleObservable(e,t);if(isPromise(e))return schedulePromise(e,t);if(isArrayLike$2(e))return scheduleArray(e,t);if(isIterable$1(e)||"string"==typeof e)return scheduleIterable(e,t)}throw new TypeError((null!==e&&_typeof(e)||e)+" is not observable")}function from(e,t){return t?scheduled(e,t):e instanceof Observable?e:new Observable(subscribeTo(e))}var SimpleInnerSubscriber=function(e){function t(t){var r=e.call(this)||this;return r.parent=t,r}return __extends(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(Subscriber),SimpleOuterSubscriber=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(Subscriber);function innerSubscribe(e,t){if(!t.closed)return e instanceof Observable?e.subscribe(t):subscribeTo(e)(t)}function mergeMap(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof t?function(n){return n.pipe(mergeMap((function(r,n){return from(e(r,n)).pipe(map$1((function(e,i){return t(r,e,n,i)})))}),r))}:("number"==typeof t&&(r=t),function(t){return t.lift(new MergeMapOperator(e,r))})}var MergeMapOperator=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new MergeMapSubscriber(e,this.project,this.concurrent))},e}(),MergeMapSubscriber=function(e){function t(t,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=r,i.concurrent=n,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return __extends(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new SimpleInnerSubscriber(this),r=this.destination;r.add(t);var n=innerSubscribe(e,t);n!==t&&r.add(n)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(SimpleOuterSubscriber);function mergeAll(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),mergeMap(identity$1,e)}function concatAll(){return mergeAll(1)}function concat(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return concatAll()(of.apply(void 0,e))}function defer(e){return new Observable((function(t){var r;try{r=e()}catch(e){return void t.error(e)}return(r?from(r):empty$1()).subscribe(t)}))}function fromEvent(e,t,r,n){return isFunction$1(r)&&(n=r,r=void 0),n?fromEvent(e,t,r).pipe(map$1((function(e){return isArray$1(e)?n.apply(void 0,e):n(e)}))):new Observable((function(n){setupSubscription(e,t,(function(e){arguments.length>1?n.next(Array.prototype.slice.call(arguments)):n.next(e)}),n,r)}))}function setupSubscription(e,t,r,n,i){var o;if(isEventTarget(e)){var a=e;e.addEventListener(t,r,i),o=function(){return a.removeEventListener(t,r,i)}}else if(isJQueryStyleEventEmitter(e)){var s=e;e.on(t,r),o=function(){return s.off(t,r)}}else if(isNodeStyleEventEmitter(e)){var u=e;e.addListener(t,r),o=function(){return u.removeListener(t,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,l=e.length;c<l;c++)setupSubscription(e[c],t,r,n,i)}n.add(o)}function isNodeStyleEventEmitter(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}function isJQueryStyleEventEmitter(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}function isEventTarget(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}function isNumeric(e){return!isArray$1(e)&&e-parseFloat(e)+1>=0}function interval(e,t){return void 0===e&&(e=0),void 0===t&&(t=async),(!isNumeric(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=async),new Observable((function(r){return r.add(t.schedule(dispatch$1,e,{subscriber:r,counter:0,period:e})),r}))}function dispatch$1(e){var t=e.subscriber,r=e.counter,n=e.period;t.next(r),this.schedule({subscriber:t,counter:r+1,period:n},n)}function merge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Number.POSITIVE_INFINITY,n=null,i=e[e.length-1];return isScheduler(i)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof i&&(r=e.pop()),null===n&&1===e.length&&e[0]instanceof Observable?e[0]:mergeAll(r)(fromArray(e,n))}function filter(e,t){return function(r){return r.lift(new FilterOperator(e,t))}}var FilterOperator=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new FilterSubscriber(e,this.predicate,this.thisArg))},e}(),FilterSubscriber=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.predicate=r,i.thisArg=n,i.count=0,i}return __extends(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(Subscriber);function race(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!isArray$1(e[0]))return e[0];e=e[0]}return fromArray(e,void 0).lift(new RaceOperator)}var RaceOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new RaceSubscriber(e))},e}(),RaceSubscriber=function(e){function t(t){var r=e.call(this,t)||this;return r.hasFirst=!1,r.observables=[],r.subscriptions=[],r}return __extends(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var r=0;r<t&&!this.hasFirst;r++){var n=subscribeToResult(this,e[r],void 0,r);this.subscriptions&&this.subscriptions.push(n),this.add(n)}this.observables=null}},t.prototype.notifyNext=function(e,t,r){if(!this.hasFirst){this.hasFirst=!0;for(var n=0;n<this.subscriptions.length;n++)if(n!==r){var i=this.subscriptions[n];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(t)},t}(OuterSubscriber);function timer(e,t,r){void 0===e&&(e=0);var n=-1;return isNumeric(t)?n=Number(t)<1?1:Number(t):isScheduler(t)&&(r=t),isScheduler(r)||(r=async),new Observable((function(t){var i=isNumeric(e)?e:+e-r.now();return r.schedule(dispatch$2,i,{index:0,period:n,subscriber:t})}))}function dispatch$2(e){var t=e.index,r=e.period,n=e.subscriber;if(n.next(t),!n.closed){if(-1===r)return n.complete();e.index=t+1,this.schedule(e,r)}}function catchError(e){return function(t){var r=new CatchOperator(e),n=t.lift(r);return r.caught=n}}var CatchOperator=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new CatchSubscriber(e,this.selector,this.caught))},e}(),CatchSubscriber=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.selector=r,i.caught=n,i}return __extends(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=void 0;try{r=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle();var n=new SimpleInnerSubscriber(this);this.add(n);var i=innerSubscribe(r,n);i!==n&&this.add(i)}},t}(SimpleOuterSubscriber);function concatMap(e,t){return mergeMap(e,t,1)}function defaultIfEmpty(e){return void 0===e&&(e=null),function(t){return t.lift(new DefaultIfEmptyOperator(e))}}var DefaultIfEmptyOperator=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new DefaultIfEmptySubscriber(e,this.defaultValue))},e}(),DefaultIfEmptySubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.defaultValue=r,n.isEmpty=!0,n}return __extends(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(Subscriber);function isDate(e){return e instanceof Date&&!isNaN(+e)}function delay(e,t){void 0===t&&(t=async);var r=isDate(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new DelayOperator(r,t))}}var DelayOperator=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new DelaySubscriber(e,this.delay,this.scheduler))},e}(),DelaySubscriber=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.delay=r,i.scheduler=n,i.queue=[],i.active=!1,i.errored=!1,i}return __extends(t,e),t.dispatch=function(e){for(var t=e.source,r=t.queue,n=e.scheduler,i=e.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(i);if(r.length>0){var o=Math.max(0,r[0].time-n.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,r=new DelayMessage(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(Notification.createComplete()),this.unsubscribe()},t}(Subscriber),DelayMessage=function(e,t){this.time=e,this.notification=t};function distinct(e,t){return function(r){return r.lift(new DistinctOperator(e,t))}}var DistinctOperator=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new DistinctSubscriber(e,this.keySelector,this.flushes))},e}(),DistinctSubscriber=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.keySelector=r,i.values=new Set,n&&i.add(innerSubscribe(n,new SimpleInnerSubscriber(i))),i}return __extends(t,e),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,r=this.destination;try{t=this.keySelector(e)}catch(e){return void r.error(e)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var r=this.values;r.has(e)||(r.add(e),this.destination.next(t))},t}(SimpleOuterSubscriber);function throwIfEmpty(e){return void 0===e&&(e=defaultErrorFactory),function(t){return t.lift(new ThrowIfEmptyOperator(e))}}var ThrowIfEmptyOperator=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new ThrowIfEmptySubscriber(e,this.errorFactory))},e}(),ThrowIfEmptySubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.errorFactory=r,n.hasValue=!1,n}return __extends(t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(Subscriber);function defaultErrorFactory(){return new EmptyError}function take(e){return function(t){return 0===e?empty$1():t.lift(new TakeOperator(e))}}var TakeOperator=function(){function e(e){if(this.total=e,this.total<0)throw new ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new TakeSubscriber(e,this.total))},e}(),TakeSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.total=r,n.count=0,n}return __extends(t,e),t.prototype._next=function(e){var t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))},t}(Subscriber);function finalize(e){return function(t){return t.lift(new FinallyOperator(e))}}var FinallyOperator=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new FinallySubscriber(e,this.callback))},e}(),FinallySubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.add(new Subscription(r)),n}return __extends(t,e),t}(Subscriber);function first(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?filter((function(t,r){return e(t,r,n)})):identity$1,take(1),r?defaultIfEmpty(t):throwIfEmpty((function(){return new EmptyError})))}}function ignoreElements(){return function(e){return e.lift(new IgnoreElementsOperator)}}var IgnoreElementsOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new IgnoreElementsSubscriber(e))},e}(),IgnoreElementsSubscriber=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._next=function(e){},t}(Subscriber);function takeLast(e){return function(t){return 0===e?empty$1():t.lift(new TakeLastOperator(e))}}var TakeLastOperator=function(){function e(e){if(this.total=e,this.total<0)throw new ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new TakeLastSubscriber(e,this.total))},e}(),TakeLastSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.total=r,n.ring=new Array,n.count=0,n}return __extends(t,e),t.prototype._next=function(e){var t=this.ring,r=this.total,n=this.count++;t.length<r?t.push(e):t[n%r]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var r=this.count>=this.total?this.total:this.count,n=this.ring,i=0;i<r;i++){var o=t++%r;e.next(n[o])}e.complete()},t}(Subscriber);function mapTo(e){return function(t){return t.lift(new MapToOperator(e))}}var MapToOperator=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new MapToSubscriber(e,this.value))},e}(),MapToSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.value=r,n}return __extends(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(Subscriber);function scan(e,t){var r=!1;return arguments.length>=2&&(r=!0),function(n){return n.lift(new ScanOperator(e,t,r))}}var ScanOperator=function(){function e(e,t,r){void 0===r&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}return e.prototype.call=function(e,t){return t.subscribe(new ScanSubscriber(e,this.accumulator,this.seed,this.hasSeed))},e}(),ScanSubscriber=function(e){function t(t,r,n,i){var o=e.call(this,t)||this;return o.accumulator=r,o._seed=n,o.hasSeed=i,o.index=0,o}return __extends(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.accumulator(this.seed,e,r)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(Subscriber);function reduce(e,t){return arguments.length>=2?function(r){return pipe(scan(e,t),takeLast(1),defaultIfEmpty(t))(r)}:function(t){return pipe(scan((function(t,r,n){return e(t,r,n+1)})),takeLast(1))(t)}}function multicast(e,t){return function(r){var n;if(n="function"==typeof e?e:function(){return e},"function"==typeof t)return r.lift(new MulticastOperator(n,t));var i=Object.create(r,connectableObservableDescriptor);return i.source=r,i.subjectFactory=n,i}}var MulticastOperator=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var r=this.selector,n=this.subjectFactory(),i=r(n).subscribe(e);return i.add(t.subscribe(n)),i},e}();function retryWhen(e){return function(t){return t.lift(new RetryWhenOperator(e,t))}}var RetryWhenOperator=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new RetryWhenSubscriber(e,this.notifier,this.source))},e}(),RetryWhenSubscriber=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.notifier=r,i.source=n,i}return __extends(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=this.errors,n=this.retries,i=this.retriesSubscription;if(n)this.errors=void 0,this.retriesSubscription=void 0;else{r=new Subject;try{n=(0,this.notifier)(r)}catch(t){return e.prototype.error.call(this,t)}i=innerSubscribe(n,new SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=r,this.retries=n,this.retriesSubscription=i,r.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(SimpleOuterSubscriber);function shareSubjectFactory(){return new Subject}function share(){return function(e){return refCount()(multicast(shareSubjectFactory)(e))}}function shareReplay(e,t,r){var n;return n=e&&"object"==_typeof(e)?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:r},function(e){return e.lift(shareReplayOperator(n))}}function shareReplayOperator(e){var t,r,n=e.bufferSize,i=void 0===n?Number.POSITIVE_INFINITY:n,o=e.windowTime,a=void 0===o?Number.POSITIVE_INFINITY:o,s=e.refCount,u=e.scheduler,c=0,l=!1,p=!1;return function(e){var n;c++,!t||l?(l=!1,t=new ReplaySubject(i,a,u),n=t.subscribe(this),r=e.subscribe({next:function(e){t.next(e)},error:function(e){l=!0,t.error(e)},complete:function(){p=!0,r=void 0,t.complete()}})):n=t.subscribe(this),this.add((function(){c--,n.unsubscribe(),r&&!p&&s&&0===c&&(r.unsubscribe(),r=void 0,t=void 0)}))}}function switchMap(e,t){return"function"==typeof t?function(r){return r.pipe(switchMap((function(r,n){return from(e(r,n)).pipe(map$1((function(e,i){return t(r,e,n,i)})))})))}:function(t){return t.lift(new SwitchMapOperator(e))}}var SwitchMapOperator=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new SwitchMapSubscriber(e,this.project))},e}(),SwitchMapSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.project=r,n.index=0,n}return __extends(t,e),t.prototype._next=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this._innerSub(t)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe();var r=new SimpleInnerSubscriber(this),n=this.destination;n.add(r),this.innerSubscription=innerSubscribe(e,r),this.innerSubscription!==r&&n.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(SimpleOuterSubscriber);function switchAll(){return switchMap(identity$1)}function takeUntil(e){return function(t){return t.lift(new TakeUntilOperator(e))}}var TakeUntilOperator=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var r=new TakeUntilSubscriber(e),n=innerSubscribe(this.notifier,new SimpleInnerSubscriber(r));return n&&!r.seenValue?(r.add(n),t.subscribe(r)):r},e}(),TakeUntilSubscriber=function(e){function t(t){var r=e.call(this,t)||this;return r.seenValue=!1,r}return __extends(t,e),t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(SimpleOuterSubscriber);function tap(e,t,r){return function(n){return n.lift(new DoOperator(e,t,r))}}var DoOperator=function(){function e(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return e.prototype.call=function(e,t){return t.subscribe(new TapSubscriber(e,this.nextOrObserver,this.error,this.complete))},e}(),TapSubscriber=function(e){function t(t,r,n,i){var o=e.call(this,t)||this;return o._tapNext=noop,o._tapError=noop,o._tapComplete=noop,o._tapError=n||noop,o._tapComplete=i||noop,isFunction$1(r)?(o._context=o,o._tapNext=r):r&&(o._context=r,o._tapNext=r.next||noop,o._tapError=r.error||noop,o._tapComplete=r.complete||noop),o}return __extends(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(Subscriber);function timeoutWith(e,t,r){return void 0===r&&(r=async),function(n){var i=isDate(e),o=i?+e-r.now():Math.abs(e);return n.lift(new TimeoutWithOperator(o,i,t,r))}}var TimeoutWithOperator=function(){function e(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new TimeoutWithSubscriber(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),TimeoutWithSubscriber=function(e){function t(t,r,n,i,o){var a=e.call(this,t)||this;return a.absoluteTimeout=r,a.waitFor=n,a.withObservable=i,a.scheduler=o,a.scheduleTimeout(),a}return __extends(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(innerSubscribe(t,new SimpleInnerSubscriber(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},t}(SimpleOuterSubscriber);function timeout(e,t){return void 0===t&&(t=async),timeoutWith(e,throwError(new TimeoutError),t)}function withLatestFrom(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var r;"function"==typeof e[e.length-1]&&(r=e.pop());var n=e;return t.lift(new WithLatestFromOperator(n,r))}}for(var WithLatestFromOperator=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new WithLatestFromSubscriber(e,this.observables,this.project))},e}(),WithLatestFromSubscriber=function(e){function t(t,r,n){var i=e.call(this,t)||this;i.observables=r,i.project=n,i.toRespond=[];var o=r.length;i.values=new Array(o);for(var a=0;a<o;a++)i.toRespond.push(a);for(a=0;a<o;a++){var s=r[a];i.add(subscribeToResult(i,s,void 0,a))}return i}return __extends(t,e),t.prototype.notifyNext=function(e,t,r){this.values[r]=t;var n=this.toRespond;if(n.length>0){var i=n.indexOf(r);-1!==i&&n.splice(i,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(OuterSubscriber),rngBrowser=createCommonjsModule((function(e){var t=void 0!==crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}})),byteToHex=[],i=0;i<256;++i)byteToHex[i]=(i+256).toString(16).substr(1);function bytesToUuid(e,t){var r=t||0,n=byteToHex;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}var bytesToUuid_1=bytesToUuid,_nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1(e,t,r){var n=t&&r||0,i=t||[],o=(e=e||{}).node||_nodeId,a=void 0!==e.clockseq?e.clockseq:_clockseq;if(null==o||null==a){var s=rngBrowser();null==o&&(o=_nodeId=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=_clockseq=16383&(s[6]<<8|s[7]))}var u=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:_lastNSecs+1,l=u-_lastMSecs+(c-_lastNSecs)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||u>_lastMSecs)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=u,_lastNSecs=c,_clockseq=a;var p=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;i[n++]=p>>>24&255,i[n++]=p>>>16&255,i[n++]=p>>>8&255,i[n++]=255&p;var d=u/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=255&d,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a;for(var f=0;f<6;++f)i[n+f]=o[f];return t||bytesToUuid_1(i)}var v1_1=v1;function v4(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||rngBrowser)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[n+o]=i[o];return t||bytesToUuid_1(i)}var v4_1=v4,uuid=v4_1;uuid.v1=v1_1,uuid.v4=v4_1;var uuid_1=uuid,version="1.1.0",BUILD="miniapp-v1.1.0-0-g0385e431",processId=uuid_1.v4(),PLATFORM_TYPE=10,VERSION_NO=2,SUBVERSION=2,END_CALL_PREFIX="AgoraRTMLegacyEndcallCompatibleMessagePrefix",AttributeOperationError={ATTRIBUTE_OPERATION_ERR_FAILURE:2,ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT:3,ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW:4,ATTRIBUTE_OPERATION_ERR_TOO_OFTEN:5,ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND:6,ATTRIBUTE_OPERATION_ERR_TIMEOUT:7,ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN:102},ChannelMessageError={CHANNEL_MESSAGE_ERR_FAILURE:1,CHANNEL_MESSAGE_ERR_TIMEOUT:2,CHANNEL_MESSAGE_ERR_TOO_OFTEN:3,CHANNEL_MESSAGE_ERR_INVALID_MESSAGE:4,CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL:5,CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN:102},CreateChannelError={CREATE_CHANNEL_ERR_INVALID_ARGUMENT:1},CreateInstanceError={CREATE_INSTANCE_ERR_INVALID_ARGUMENT:1},GetMembersError={GET_MEMBERS_ERR_FAILURE:1,GET_MEMBERS_ERR_REJECTED:2,GET_MEMBERS_ERR_TIMEOUT:3,GET_MEMBERS_ERR_TOO_OFTEN:4,GET_MEMBERS_ERR_NOT_IN_CHANNEL:5,GET_MEMBERS_ERR_USER_NOT_LOGGED_IN:102},JoinChannelError={JOIN_CHANNEL_ERR_FAILURE:1,JOIN_CHANNEL_ERR_REJECTED:2,JOIN_CHANNEL_ERR_INVALID_ARGUMENT:3,JOIN_CHANNEL_TIMEOUT:4,JOIN_CHANNEL_ERR_EXCEED_LIMIT:5,JOIN_CHANNEL_ERR_ALREADY_JOINED:6,JOIN_CHANNEL_ERR_TOO_OFTEN:7,JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN:8,JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN:102,JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE:201,JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID:202},LeaveChannelError={LEAVE_CHANNEL_ERR_FAILURE:1,LEAVE_CHANNEL_ERR_REJECTED:2,LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL:3,LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN:102},LoginError={LOGIN_ERR_UNKNOWN:1,LOGIN_ERR_REJECTED:2,LOGIN_ERR_INVALID_ARGUMENT:3,LOGIN_ERR_INVALID_APP_ID:4,LOGIN_ERR_INVALID_TOKEN:5,LOGIN_ERR_TOKEN_EXPIRED:6,LOGIN_ERR_NOT_AUTHORIZED:7,LOGIN_ERR_ALREADY_LOGIN:8,LOGIN_ERR_TIMEOUT:9,LOGIN_ERR_TOO_OFTEN:10,LOGIN_ERR_ABORTED_BY_LOGOUT:201},LogoutError={LOGOUT_ERR_USER_NOT_LOGGED_IN:102},PeerMessageError={PEER_MESSAGE_ERR_FAILURE:1,PEER_MESSAGE_ERR_TIMEOUT:2,PEER_MESSAGE_ERR_TOO_OFTEN:5,PEER_MESSAGE_ERR_INVALID_USERID:6,PEER_MESSAGE_ERR_INVALID_MESSAGE:7,PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE:8,PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN:102},RenewTokenError={RENEW_TOKEN_ERR_FAILURE:1,RENEW_TOKEN_ERR_INVALID_ARGUMENT:2,RENEW_TOKEN_ERR_REJECTED:3,RENEW_TOKEN_ERR_TOO_OFTEN:4,RENEW_TOKEN_ERR_TOKEN_EXPIRED:5,RENEW_TOKEN_ERR_INVALID_TOKEN:6,RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN:102,RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT:201},InvitationApiCallError={INVITATION_API_CALL_ERR_INVALID_ARGUMENT:1,INVITATION_API_CALL_ERR_NOT_STARTED:2,INVITATION_API_CALL_ERR_ALREADY_END:3,INVITATION_API_CALL_ERR_ALREADY_ACCEPT:4,INVITATION_API_CALL_ERR_ALREADY_SENT:5},ATTRIBUTE_OPERATION_ERR_FAILURE=AttributeOperationError.ATTRIBUTE_OPERATION_ERR_FAILURE,ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT=AttributeOperationError.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT,ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW=AttributeOperationError.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW,ATTRIBUTE_OPERATION_ERR_TIMEOUT=AttributeOperationError.ATTRIBUTE_OPERATION_ERR_TIMEOUT,ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN=AttributeOperationError.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN,CREATE_CHANNEL_ERR_INVALID_ARGUMENT=CreateChannelError.CREATE_CHANNEL_ERR_INVALID_ARGUMENT,CREATE_INSTANCE_ERR_INVALID_ARGUMENT=CreateInstanceError.CREATE_INSTANCE_ERR_INVALID_ARGUMENT,GET_MEMBERS_ERR_FAILURE=GetMembersError.GET_MEMBERS_ERR_FAILURE,GET_MEMBERS_ERR_REJECTED=GetMembersError.GET_MEMBERS_ERR_REJECTED,GET_MEMBERS_ERR_NOT_IN_CHANNEL=GetMembersError.GET_MEMBERS_ERR_NOT_IN_CHANNEL,GET_MEMBERS_ERR_USER_NOT_LOGGED_IN=GetMembersError.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN,JOIN_CHANNEL_ERR_FAILURE=JoinChannelError.JOIN_CHANNEL_ERR_FAILURE,JOIN_CHANNEL_ERR_INVALID_ARGUMENT=JoinChannelError.JOIN_CHANNEL_ERR_INVALID_ARGUMENT,JOIN_CHANNEL_TIMEOUT=JoinChannelError.JOIN_CHANNEL_TIMEOUT,JOIN_CHANNEL_ERR_EXCEED_LIMIT=JoinChannelError.JOIN_CHANNEL_ERR_EXCEED_LIMIT,JOIN_CHANNEL_ERR_ALREADY_JOINED=JoinChannelError.JOIN_CHANNEL_ERR_ALREADY_JOINED,JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN=JoinChannelError.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN,JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID=JoinChannelError.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID,CHANNEL_MESSAGE_ERR_FAILURE=ChannelMessageError.CHANNEL_MESSAGE_ERR_FAILURE,CHANNEL_MESSAGE_ERR_TIMEOUT=ChannelMessageError.CHANNEL_MESSAGE_ERR_TIMEOUT,CHANNEL_MESSAGE_ERR_TOO_OFTEN=ChannelMessageError.CHANNEL_MESSAGE_ERR_TOO_OFTEN,CHANNEL_MESSAGE_ERR_INVALID_MESSAGE=ChannelMessageError.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE,CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN=ChannelMessageError.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN,LEAVE_CHANNEL_ERR_FAILURE=LeaveChannelError.LEAVE_CHANNEL_ERR_FAILURE,LEAVE_CHANNEL_ERR_REJECTED=LeaveChannelError.LEAVE_CHANNEL_ERR_REJECTED,LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL=LeaveChannelError.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL,LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN=LeaveChannelError.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN,LOGIN_ERR_UNKNOWN=LoginError.LOGIN_ERR_UNKNOWN,LOGIN_ERR_REJECTED=LoginError.LOGIN_ERR_REJECTED,LOGIN_ERR_INVALID_ARGUMENT=LoginError.LOGIN_ERR_INVALID_ARGUMENT,LOGIN_ERR_INVALID_APP_ID=LoginError.LOGIN_ERR_INVALID_APP_ID,LOGIN_ERR_INVALID_TOKEN=LoginError.LOGIN_ERR_INVALID_TOKEN,LOGIN_ERR_TOKEN_EXPIRED=LoginError.LOGIN_ERR_TOKEN_EXPIRED,LOGIN_ERR_ALREADY_LOGIN=LoginError.LOGIN_ERR_ALREADY_LOGIN,LOGIN_ERR_TIMEOUT=LoginError.LOGIN_ERR_TIMEOUT,LOGIN_ERR_TOO_OFTEN=LoginError.LOGIN_ERR_TOO_OFTEN,LOGOUT_ERR_USER_NOT_LOGGED_IN=LogoutError.LOGOUT_ERR_USER_NOT_LOGGED_IN,PEER_MESSAGE_ERR_FAILURE=PeerMessageError.PEER_MESSAGE_ERR_FAILURE,PEER_MESSAGE_ERR_TIMEOUT=PeerMessageError.PEER_MESSAGE_ERR_TIMEOUT,PEER_MESSAGE_ERR_TOO_OFTEN=PeerMessageError.PEER_MESSAGE_ERR_TOO_OFTEN,PEER_MESSAGE_ERR_INVALID_USERID=PeerMessageError.PEER_MESSAGE_ERR_INVALID_USERID,PEER_MESSAGE_ERR_INVALID_MESSAGE=PeerMessageError.PEER_MESSAGE_ERR_INVALID_MESSAGE,PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN=PeerMessageError.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN,RENEW_TOKEN_ERR_FAILURE=RenewTokenError.RENEW_TOKEN_ERR_FAILURE,RENEW_TOKEN_ERR_INVALID_ARGUMENT=RenewTokenError.RENEW_TOKEN_ERR_INVALID_ARGUMENT,RENEW_TOKEN_ERR_TOKEN_EXPIRED=RenewTokenError.RENEW_TOKEN_ERR_TOKEN_EXPIRED,RENEW_TOKEN_ERR_INVALID_TOKEN=RenewTokenError.RENEW_TOKEN_ERR_INVALID_TOKEN,RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN=RenewTokenError.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN,INVITATION_API_CALL_ERR_INVALID_ARGUMENT=InvitationApiCallError.INVITATION_API_CALL_ERR_INVALID_ARGUMENT,INVITATION_API_CALL_ERR_NOT_STARTED=InvitationApiCallError.INVITATION_API_CALL_ERR_NOT_STARTED,INVITATION_API_CALL_ERR_ALREADY_END=InvitationApiCallError.INVITATION_API_CALL_ERR_ALREADY_END,INVITATION_API_CALL_ERR_ALREADY_ACCEPT=InvitationApiCallError.INVITATION_API_CALL_ERR_ALREADY_ACCEPT,INVITATION_API_CALL_ERR_ALREADY_SENT=InvitationApiCallError.INVITATION_API_CALL_ERR_ALREADY_SENT;function createBaseEach(e,t){return function(r,n){if(null==r)return r;if(!isArrayLike_1(r))return e(r,n);for(var i=r.length,o=t?i:-1,a=Object(r);(t?o--:++o<i)&&!1!==n(a[o],o,a););return r}}var _createBaseEach=createBaseEach,baseEach=_createBaseEach(_baseForOwn),_baseEach=baseEach;function baseSome(e,t){var r;return _baseEach(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}var _baseSome=baseSome;function isIterateeCall(e,t,r){if(!isObject_1(r))return!1;var n=_typeof(t);return!!("number"==n?isArrayLike_1(r)&&_isIndex(t,r.length):"string"==n&&t in r)&&eq_1(r[t],e)}var _isIterateeCall=isIterateeCall;function some(e,t,r){var n=isArray_1(e)?_arraySome:_baseSome;return r&&_isIterateeCall(e,t,r)&&(t=void 0),n(e,_baseIteratee(t))}var some_1=some,spreadableSymbol=_Symbol?_Symbol.isConcatSpreadable:void 0;function isFlattenable(e){return isArray_1(e)||isArguments_1(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}var _isFlattenable=isFlattenable;function baseFlatten(e,t,r,n,i){var o=-1,a=e.length;for(r||(r=_isFlattenable),i||(i=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?baseFlatten(s,t-1,r,n,i):_arrayPush(i,s):n||(i[i.length]=s)}return i}var _baseFlatten=baseFlatten;function baseMap(e,t){var r=-1,n=isArrayLike_1(e)?Array(e.length):[];return _baseEach(e,(function(e,i,o){n[++r]=t(e,i,o)})),n}var _baseMap=baseMap;function baseSortBy(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var _baseSortBy=baseSortBy;function compareAscending(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e==e,o=isSymbol_1(e),a=void 0!==t,s=null===t,u=t==t,c=isSymbol_1(t);if(!s&&!c&&!o&&e>t||o&&a&&u&&!s&&!c||n&&a&&u||!r&&u||!i)return 1;if(!n&&!o&&!c&&e<t||c&&r&&i&&!n&&!o||s&&r&&i||!a&&i||!u)return-1}return 0}var _compareAscending=compareAscending;function compareMultiple(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,a=i.length,s=r.length;++n<a;){var u=_compareAscending(i[n],o[n]);if(u)return n>=s?u:u*("desc"==r[n]?-1:1)}return e.index-t.index}var _compareMultiple=compareMultiple;function baseOrderBy(e,t,r){t=t.length?_arrayMap(t,(function(e){return isArray_1(e)?function(t){return _baseGet(t,1===e.length?e[0]:e)}:e})):[identity_1];var n=-1;t=_arrayMap(t,_baseUnary(_baseIteratee));var i=_baseMap(e,(function(e,r,i){return{criteria:_arrayMap(t,(function(t){return t(e)})),index:++n,value:e}}));return _baseSortBy(i,(function(e,t){return _compareMultiple(e,t,r)}))}var _baseOrderBy=baseOrderBy;function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var _apply=apply,nativeMax=Math.max;function overRest(e,t,r){return t=nativeMax(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=nativeMax(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),_apply(e,this,s)}}var _overRest=overRest;function constant(e){return function(){return e}}var constant_1=constant,baseSetToString=_defineProperty?function(e,t){return _defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant_1(t),writable:!0})}:identity_1,_baseSetToString=baseSetToString,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(e){var t=0,r=0;return function(){var n=nativeNow(),i=HOT_SPAN-(n-r);if(r=n,i>0){if(++t>=HOT_COUNT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var _shortOut=shortOut,setToString=_shortOut(_baseSetToString),_setToString=setToString;function baseRest(e,t){return _setToString(_overRest(e,t,identity_1),e+"")}var _baseRest=baseRest,sortBy=_baseRest((function(e,t){if(null==e)return[];var r=t.length;return r>1&&_isIterateeCall(e,t[0],t[1])?t=[]:r>2&&_isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),_baseOrderBy(e,_baseFlatten(t,1),[])})),sortBy_1=sortBy;function assignMergeValue(e,t,r){(void 0!==r&&!eq_1(e[t],r)||void 0===r&&!(t in e))&&_baseAssignValue(e,t,r)}var _assignMergeValue=assignMergeValue,_cloneBuffer=createCommonjsModule((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?_root.Buffer:void 0,o=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=o?o(r):new e.constructor(r);return e.copy(n),n}}));function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new _Uint8Array(t).set(new _Uint8Array(e)),t}var _cloneArrayBuffer=cloneArrayBuffer;function cloneTypedArray(e,t){var r=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var _cloneTypedArray=cloneTypedArray;function copyArray(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var _copyArray=copyArray,objectCreate=Object.create,baseCreate=function(){function e(){}return function(t){if(!isObject_1(t))return{};if(objectCreate)return objectCreate(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),_baseCreate=baseCreate,getPrototype=_overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype;function initCloneObject(e){return"function"!=typeof e.constructor||_isPrototype(e)?{}:_baseCreate(_getPrototype(e))}var _initCloneObject=initCloneObject;function isArrayLikeObject(e){return isObjectLike_1(e)&&isArrayLike_1(e)}var isArrayLikeObject_1=isArrayLikeObject,objectTag$3="[object Object]",funcProto$2=Function.prototype,objectProto$c=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$9=objectProto$c.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject$1(e){if(!isObjectLike_1(e)||_baseGetTag(e)!=objectTag$3)return!1;var t=_getPrototype(e);if(null===t)return!0;var r=hasOwnProperty$9.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&funcToString$2.call(r)==objectCtorString}var isPlainObject_1=isPlainObject$1;function safeGet(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _safeGet=safeGet,objectProto$d=Object.prototype,hasOwnProperty$a=objectProto$d.hasOwnProperty;function assignValue(e,t,r){var n=e[t];hasOwnProperty$a.call(e,t)&&eq_1(n,r)&&(void 0!==r||t in e)||_baseAssignValue(e,t,r)}var _assignValue=assignValue;function copyObject(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=n?n(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),i?_baseAssignValue(r,s,u):_assignValue(r,s,u)}return r}var _copyObject=copyObject;function nativeKeysIn(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}var _nativeKeysIn=nativeKeysIn,objectProto$e=Object.prototype,hasOwnProperty$b=objectProto$e.hasOwnProperty;function baseKeysIn(e){if(!isObject_1(e))return _nativeKeysIn(e);var t=_isPrototype(e),r=[];for(var n in e)("constructor"!=n||!t&&hasOwnProperty$b.call(e,n))&&r.push(n);return r}var _baseKeysIn=baseKeysIn;function keysIn(e){return isArrayLike_1(e)?_arrayLikeKeys(e,!0):_baseKeysIn(e)}var keysIn_1=keysIn;function toPlainObject(e){return _copyObject(e,keysIn_1(e))}var toPlainObject_1=toPlainObject;function baseMergeDeep(e,t,r,n,i,o,a){var s=_safeGet(e,r),u=_safeGet(t,r),c=a.get(u);if(c)_assignMergeValue(e,r,c);else{var l=o?o(s,u,r+"",e,t,a):void 0,p=void 0===l;if(p){var d=isArray_1(u),f=!d&&isBuffer_1(u),h=!d&&!f&&isTypedArray_1(u);l=u,d||f||h?isArray_1(s)?l=s:isArrayLikeObject_1(s)?l=_copyArray(s):f?(p=!1,l=_cloneBuffer(u,!0)):h?(p=!1,l=_cloneTypedArray(u,!0)):l=[]:isPlainObject_1(u)||isArguments_1(u)?(l=s,isArguments_1(s)?l=toPlainObject_1(s):isObject_1(s)&&!isFunction_1(s)||(l=_initCloneObject(u))):p=!1}p&&(a.set(u,l),i(l,u,n,o,a),a.delete(u)),_assignMergeValue(e,r,l)}}var _baseMergeDeep=baseMergeDeep;function baseMerge(e,t,r,n,i){e!==t&&_baseFor(t,(function(o,a){if(i||(i=new _Stack),isObject_1(o))_baseMergeDeep(e,t,a,r,baseMerge,n,i);else{var s=n?n(_safeGet(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),_assignMergeValue(e,a,s)}}),keysIn_1)}var _baseMerge=baseMerge;function createAssigner(e){return _baseRest((function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&_isIterateeCall(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,o)}return t}))}var _createAssigner=createAssigner,mergeWith=_createAssigner((function(e,t,r,n){_baseMerge(e,t,r,n)})),mergeWith_1=mergeWith;function rateLimit(e){var t=1,r=asapScheduler;1==(arguments.length<=1?0:arguments.length-1)?"number"==typeof(arguments.length<=1?void 0:arguments[1])?t=arguments.length<=1?void 0:arguments[1]:r=arguments.length<=1?void 0:arguments[1]:2==(arguments.length<=1?0:arguments.length-1)&&(t=arguments.length<=1?void 0:arguments[1],r=arguments.length<=2?void 0:arguments[2]);var n=t||1;return function(t){return t.pipe(scan((function(t,i){var o=r.now(),a=o-e;if((t=t.filter((function(e){return e.until>a}))).length>=n){var s=t[0],u=t[t.length-1],c=s.until+e*Math.floor(t.length/n);t.push({delay:u.until<o?c-o:c-u.until,until:c,value:i})}else t.push({delay:0,until:o,value:i});return t}),[]),map$1((function(e){return e[e.length-1]})),concatMap((function(e){var t=of(e.value);return e.delay?t.pipe(delay(e.delay,r)):t})))}}var aspromise=asPromise;function asPromise(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise((function(i,a){r[n]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(e){o&&(o=!1,a(e))}}))}var base64_1=createCommonjsModule((function(e,t){var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),i=new Array(123),o=0;o<64;)i[n[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;r.encode=function(e,t,r){for(var i,o=null,a=[],s=0,u=0;t<r;){var c=e[t++];switch(u){case 0:a[s++]=n[c>>2],i=(3&c)<<4,u=1;break;case 1:a[s++]=n[i|c>>4],i=(15&c)<<2,u=2;break;case 2:a[s++]=n[i|c>>6],a[s++]=n[63&c],u=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return u&&(a[s++]=n[i],a[s++]=61,1===u&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var a="invalid encoding";r.decode=function(e,t,r){for(var n,o=r,s=0,u=0;u<e.length;){var c=e.charCodeAt(u++);if(61===c&&s>1)break;if(void 0===(c=i[c]))throw Error(a);switch(s){case 0:n=c,s=1;break;case 1:t[r++]=n<<2|(48&c)>>4,n=c,s=2;break;case 2:t[r++]=(15&n)<<4|(60&c)>>2,n=c,s=3;break;case 3:t[r++]=(3&n)<<6|c,s=0}}if(1===s)throw Error(a);return r-o},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}})),eventemitter=EventEmitter$1;function EventEmitter$1(){this._listeners={}}EventEmitter$1.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},EventEmitter$1.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},EventEmitter$1.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this};var float_1=factory(factory);function factory(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function o(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:o,e.writeFloatBE=n?o:i,e.readFloatLE=n?a:s,e.readFloatBE=n?s:a}():function(){function t(e,t,r,n){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,r,n)}}function r(e,t,r){var n=e(t,r),i=2*(n>>31)+1,o=n>>>23&255,a=8388607&n;return 255===o?a?NaN:i*(1/0):0===o?1401298464324817e-60*i*a:i*Math.pow(2,o-150)*(a+8388608)}e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=r.bind(null,readUintLE),e.readFloatBE=r.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function o(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:o,e.writeDoubleBE=n?o:i,e.readDoubleLE=n?a:s,e.readDoubleBE=n?s:a}():function(){function t(e,t,r,n,i,o){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,i,o+t),e(1/n>0?0:2147483648,i,o+r);else if(isNaN(n))e(0,i,o+t),e(2146959360,i,o+r);else if(n>17976931348623157e292)e(0,i,o+t),e((a<<31|2146435072)>>>0,i,o+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,i,o+t),e((a<<31|s/4294967296)>>>0,i,o+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(s=n*Math.pow(2,-u))>>>0,i,o+t),e((a<<31|u+1023<<20|1048576*s&1048575)>>>0,i,o+r)}}}function r(e,t,r,n,i){var o=e(n,i+t),a=e(n,i+r),s=2*(a>>31)+1,u=a>>>20&2047,c=4294967296*(1048575&a)+o;return 2047===u?c?NaN:s*(1/0):0===u?5e-324*s*c:s*Math.pow(2,u-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,writeUintLE,0,4),e.writeDoubleBE=t.bind(null,writeUintBE,4,0),e.readDoubleLE=r.bind(null,readUintLE,0,4),e.readDoubleBE=r.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8_1=createCommonjsModule((function(e,t){var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,o=[],a=0;t<r;)(n=e[t++])<128?o[a++]=n:n>191&&n<224?o[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(n>>10),o[a++]=56320+(1023&n)):o[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},r.write=function(e,t,r){for(var n,i,o=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(i=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&i),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-o}})),pool_1=pool;function pool(e,t,r){var n=r||8192,i=n>>>1,o=null,a=n;return function(r){if(r<1||r>i)return e(r);a+r>n&&(o=e(n),a=0);var s=t.call(o,a,a+=r);return 7&a&&(a=1+(7|a)),s}}var longbits=LongBits;function LongBits(e,t){this.lo=e>>>0,this.hi=t>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(e){if(0===e)return zero;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new LongBits(r,n)},LongBits.from=function(e){if("number"==typeof e)return LongBits.fromNumber(e);if(minimal.isString(e)){if(!minimal.Long)return LongBits.fromNumber(parseInt(e,10));e=minimal.Long.fromString(e)}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):zero},LongBits.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(e){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(e){return e===zeroHash?zero:new LongBits((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10};var minimal=createCommonjsModule((function(e,t){var r=t;function n(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=aspromise,r.base64=base64_1,r.EventEmitter=eventemitter,r.float=float_1,r.inquire=inquire_1,r.utf8=utf8_1,r.pool=pool_1,r.LongBits=longbits,r.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),r.global=r.isNode&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||commonjsGlobal,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==_typeof(e)},r.isset=r.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=_typeof(r)||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=n,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},r.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}})),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function noop$1(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer(){this.len=0,this.head=new Op(noop$1,0,0),this.tail=this.head,this.states=null}var create=function(){return minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer}};function writeByte(e,t,r){t[r]=255&e}function writeVarint32(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function writeFixed32(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Writer.create=create(),Writer.alloc=function(e){return new minimal.Array(e)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(e,t,r){return this.tail=this.tail.next=new Op(e,t,r),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(e){return this._push(minimal.float.writeFloatLE,4,e)},Writer.prototype.double=function(e){return this._push(minimal.float.writeDoubleLE,8,e)};var writeBytes=minimal.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};Writer.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(minimal.isString(e)){var r=Writer.alloc(t=base64.length(e));base64.decode(e,r,0),e=r}return this.uint32(t)._push(writeBytes,t,e)},Writer.prototype.string=function(e){var t=utf8.length(e);return t?this.uint32(t)._push(utf8.write,t,e):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop$1,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$1,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},Writer.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},Writer._configure=function(e){BufferWriter=e,Writer.create=create(),BufferWriter._configure()};var writer_buffer=BufferWriter$1;function BufferWriter$1(){writer.call(this)}function writeStringBuffer(e,t,r){e.length<40?minimal.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1,BufferWriter$1._configure=function(){BufferWriter$1.alloc=minimal._Buffer_allocUnsafe,BufferWriter$1.writeBytesBuffer=minimal.Buffer&&minimal.Buffer.prototype instanceof Uint8Array&&"set"===minimal.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},BufferWriter$1.prototype.bytes=function(e){minimal.isString(e)&&(e=minimal._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter$1.writeBytesBuffer,t,e),this},BufferWriter$1.prototype.string=function(e){var t=minimal.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this},BufferWriter$1._configure();var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")},create$1=function(){return minimal.Buffer?function(e){return(Reader.create=function(e){return minimal.Buffer.isBuffer(e)?new BufferReader(e):create_array(e)})(e)}:create_array},value;function readLongVarint(){var e=new LongBits$2(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=create$1(),Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=(value=4294967295,function(){if(value=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return value;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return value}),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},Reader.prototype.string=function(){var e=this.bytes();return utf8$1.read(e,0,e.length)},Reader.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader._configure=function(e){BufferReader=e,Reader.create=create$1(),BufferReader._configure();var t=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(e){reader.call(this,e)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,BufferReader$1._configure=function(){minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice)},BufferReader$1.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader$1._configure();var service=Service;function Service(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,r,n,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return minimal.asPromise(e,a,t,r,n,i);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",r,t),o(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){o(e)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule((function(e,t){t.Service=service})),roots={},indexMinimal=createCommonjsModule((function(e,t){var r=t;function n(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=writer,r.BufferWriter=writer_buffer,r.Reader=reader,r.BufferReader=reader_buffer,r.util=minimal,r.rpc=rpc_1,r.roots=roots,r.configure=n,n()}));indexMinimal.util.Long=long_1,indexMinimal.configure();var minimal_1=indexMinimal,$Reader=minimal_1.Reader,$Writer=minimal_1.Writer,$util=minimal_1.util,$root=minimal_1.roots.default||(minimal_1.roots.default={}),URI=$root.URI=function(){var e={},t=Object.create(e);return t[e[0]="Unknown"]=0,t[e[1]="PingUri"]=1,t[e[2]="PongUri"]=2,t[e[11]="UserJoinUri"]=11,t[e[12]="UserRespUri"]=12,t[e[21]="UserQuitUri"]=21,t[e[22]="UserDropUri"]=22,t[e[31]="GroupEnterUri"]=31,t[e[32]="GroupLeaveUri"]=32,t[e[33]="GroupReplyUri"]=33,t[e[36]="GroupEnterNoticeUri"]=36,t[e[37]="GroupLeaveNoticeUri"]=37,t[e[38]="GroupEventNoticeUri"]=38,t[e[351]="GroupAttributeGetUri"]=351,t[e[352]="GroupAttributeRetUri"]=352,t[e[353]="GroupAttributeSetUri"]=353,t[e[354]="GroupAttributeModUri"]=354,t[e[355]="GroupAttributeDelUri"]=355,t[e[356]="GroupAttributeAltUri"]=356,t[e[357]="GroupAttributeRspUri"]=357,t[e[358]="GroupAttributeErrUri"]=358,t[e[361]="GroupAttributeKeysGetUri"]=361,t[e[362]="GroupAttributeKeysRetUri"]=362,t[e[55]="GroupAllUsersListUri"]=55,t[e[56]="GroupAllUsersResultUri"]=56,t[e[100]="MessageUri"]=100,t[e[101]="AckUri"]=101,t}(),Wrapper=$root.Wrapper=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.uri=0,e.prototype.data=$util.newBuffer([]),e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.uri&&Object.hasOwnProperty.call(e,"uri")&&t.uint32(8).int32(e.uri),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Wrapper;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.uri=e.int32();break;case 2:n.data=e.bytes();break;default:e.skipType(7&i)}}return n},e}(),Ping=$root.Ping=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.ms=$util.Long?$util.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(16).uint64(e.ms),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Ping;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.ms=e.uint64();break;default:e.skipType(7&i)}}return n},e}(),Pong=$root.Pong=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.ms=$util.Long?$util.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(16).uint64(e.ms),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Pong;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.ms=e.uint64();break;default:e.skipType(7&i)}}return n},e}(),UserJoin=$root.UserJoin=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.opt=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.instance=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.ticket="",e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.opt&&Object.hasOwnProperty.call(e,"opt")&&t.uint32(16).uint64(e.opt),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(24).uint64(e.instance),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(34).string(e.account),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(42).string(e.ticket),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.UserJoin;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.opt=e.uint64();break;case 3:n.instance=e.uint64();break;case 4:n.account=e.string();break;case 5:n.ticket=e.string();break;default:e.skipType(7&i)}}return n},e}(),UserResp=$root.UserResp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).uint32(e.code),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.UserResp;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.code=e.uint32();break;default:e.skipType(7&i)}}return n},e}(),UserQuit=$root.UserQuit=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.encode=function(e,t){return t||(t=$Writer.create()),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.UserQuit;e.pos<r;){var i=e.uint32();e.skipType(7&i)}return n},e}(),UserDrop=$root.UserDrop=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.code=0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.UserDrop;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.code=e.uint32();break;default:e.skipType(7&i)}}return n},e}(),GroupEnter=$root.GroupEnter=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.account="",e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupEnter;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;default:e.skipType(7&i)}}return n},e}(),GroupLeave=$root.GroupLeave=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.account="",e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupLeave;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.account=e.string();break;default:e.skipType(7&i)}}return n},e}(),GroupReply=$root.GroupReply=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).uint32(e.code),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupReply;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.code=e.uint32();break;default:e.skipType(7&i)}}return n},e}(),GroupLeaveNotice=$root.GroupLeaveNotice=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.size=0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(18).string(e.user),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(32).uint64(e.instance),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(40).uint32(e.size),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupLeaveNotice;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.user=e.string();break;case 3:n.group=e.string();break;case 4:n.instance=e.uint64();break;case 5:n.size=e.uint32();break;default:e.skipType(7&i)}}return n},e}(),GroupEnterNotice=$root.GroupEnterNotice=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.size=0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(18).string(e.user),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(32).uint64(e.instance),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(40).uint32(e.size),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupEnterNotice;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.user=e.string();break;case 3:n.group=e.string();break;case 4:n.instance=e.uint64();break;case 5:n.size=e.uint32();break;default:e.skipType(7&i)}}return n},e}(),Message=$root.Message=function(){function e(e){if(this.MiscMap={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.instance=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.dialogue=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.sequence=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.options=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.src="",e.prototype.dst="",e.prototype.payload=$util.newBuffer([]),e.prototype.MiscMap=$util.emptyObject,e.prototype.ms=$util.Long?$util.Long.fromBits(0,0,!0):0,e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&Object.hasOwnProperty.call(e,"dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(24).uint64(e.sequence),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&t.uint32(32).uint64(e.options),null!=e.src&&Object.hasOwnProperty.call(e,"src")&&t.uint32(42).string(e.src),null!=e.dst&&Object.hasOwnProperty.call(e,"dst")&&t.uint32(50).string(e.dst),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(58).bytes(e.payload),null!=e.MiscMap&&Object.hasOwnProperty.call(e,"MiscMap"))for(var r=Object.keys(e.MiscMap),n=0;n<r.length;++n)t.uint32(66).fork().uint32(10).string(r[n]).uint32(18).bytes(e.MiscMap[r[n]]).ldelim();return null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(72).uint64(e.ms),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,n,i=void 0===t?e.len:e.pos+t,o=new $root.Message;e.pos<i;){var a=e.uint32();switch(a>>>3){case 1:o.instance=e.uint64();break;case 2:o.dialogue=e.uint64();break;case 3:o.sequence=e.uint64();break;case 4:o.options=e.uint64();break;case 5:o.src=e.string();break;case 6:o.dst=e.string();break;case 7:o.payload=e.bytes();break;case 8:o.MiscMap===$util.emptyObject&&(o.MiscMap={});var s=e.uint32()+e.pos;for(r="",n=[];e.pos<s;){var u=e.uint32();switch(u>>>3){case 1:r=e.string();break;case 2:n=e.bytes();break;default:e.skipType(7&u)}}o.MiscMap[r]=n;break;case 9:o.ms=e.uint64();break;default:e.skipType(7&a)}}return o},e}(),Ack=$root.Ack=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.instance=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.dialogue=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.sequence=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&Object.hasOwnProperty.call(e,"dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(24).uint64(e.sequence),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(32).uint32(e.code),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Ack;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.instance=e.uint64();break;case 2:n.dialogue=e.uint64();break;case 3:n.sequence=e.uint64();break;case 4:n.code=e.uint32();break;default:e.skipType(7&i)}}return n},e}(),GroupAllUsersList=$root.GroupAllUsersList=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.pageSize=0,e.prototype.pageNumber=0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.pageSize&&Object.hasOwnProperty.call(e,"pageSize")&&t.uint32(24).uint32(e.pageSize),null!=e.pageNumber&&Object.hasOwnProperty.call(e,"pageNumber")&&t.uint32(32).uint32(e.pageNumber),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAllUsersList;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.pageSize=e.uint32();break;case 4:n.pageNumber=e.uint32();break;default:e.skipType(7&i)}}return n},e}(),GroupAllUsersResult=$root.GroupAllUsersResult=function(){function e(e){if(this.memberInfos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.totalSize=0,e.prototype.pageSize=0,e.prototype.pageNumber=0,e.prototype.memberInfos=$util.emptyArray,e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.totalSize&&Object.hasOwnProperty.call(e,"totalSize")&&t.uint32(24).uint32(e.totalSize),null!=e.pageSize&&Object.hasOwnProperty.call(e,"pageSize")&&t.uint32(32).uint32(e.pageSize),null!=e.pageNumber&&Object.hasOwnProperty.call(e,"pageNumber")&&t.uint32(40).uint32(e.pageNumber),null!=e.memberInfos&&e.memberInfos.length)for(var r=0;r<e.memberInfos.length;++r)$root.GroupAllUsersResult.MemberInfo.encode(e.memberInfos[r],t.uint32(50).fork()).ldelim();return t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAllUsersResult;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.totalSize=e.uint32();break;case 4:n.pageSize=e.uint32();break;case 5:n.pageNumber=e.uint32();break;case 6:n.memberInfos&&n.memberInfos.length||(n.memberInfos=[]),n.memberInfos.push($root.GroupAllUsersResult.MemberInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return n},e.MemberInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).uint32(e.ts),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAllUsersResult.MemberInfo;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.account=e.string();break;case 2:n.ts=e.uint32();break;default:e.skipType(7&i)}}return n},e}(),e}(),GroupAttributeGet=$root.GroupAttributeGet=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.attributes=$util.emptyArray,e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)t.uint32(26).string(e.attributes[r]);return t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAttributeGet;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(e.string());break;default:e.skipType(7&i)}}return n},e}(),GroupAttributeRet=$root.GroupAttributeRet=function(){function e(e){if(this.attributeMaps=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.attributeMaps=$util.emptyArray,e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.attributeMaps&&e.attributeMaps.length)for(var r=0;r<e.attributeMaps.length;++r)$root.GroupAttributeRet.AttributeMap.encode(e.attributeMaps[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAttributeRet;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.attributeMaps&&n.attributeMaps.length||(n.attributeMaps=[]),n.attributeMaps.push($root.GroupAttributeRet.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return n},e.AttributeMap=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=$util.Long?$util.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.origin&&Object.hasOwnProperty.call(e,"origin")&&t.uint32(26).string(e.origin),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(32).uint64(e.ms),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAttributeRet.AttributeMap;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;case 3:n.origin=e.string();break;case 4:n.ms=e.uint64();break;default:e.skipType(7&i)}}return n},e}(),e}(),GroupAttributeSet=$root.GroupAttributeSet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributeInfos=$util.emptyArray,e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&t.uint32(24).bool(e.broadcast),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)$root.GroupAttributeSet.AttributeInfo.encode(e.attributeInfos[r],t.uint32(34).fork()).ldelim();return t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAttributeSet;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.broadcast=e.bool();break;case 4:n.attributeInfos&&n.attributeInfos.length||(n.attributeInfos=[]),n.attributeInfos.push($root.GroupAttributeSet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return n},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAttributeSet.AttributeInfo;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&i)}}return n},e}(),e}(),GroupAttributeMod=$root.GroupAttributeMod=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributeInfos=$util.emptyArray,e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&t.uint32(24).bool(e.broadcast),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)$root.GroupAttributeMod.AttributeInfo.encode(e.attributeInfos[r],t.uint32(34).fork()).ldelim();return t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAttributeMod;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.broadcast=e.bool();break;case 4:n.attributeInfos&&n.attributeInfos.length||(n.attributeInfos=[]),n.attributeInfos.push($root.GroupAttributeMod.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return n},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAttributeMod.AttributeInfo;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&i)}}return n},e}(),e}(),GroupAttributeDel=$root.GroupAttributeDel=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributes=$util.emptyArray,e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&t.uint32(24).bool(e.broadcast),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)t.uint32(34).string(e.attributes[r]);return t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAttributeDel;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.broadcast=e.bool();break;case 4:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(e.string());break;default:e.skipType(7&i)}}return n},e}(),GroupAttributeAlt=$root.GroupAttributeAlt=function(){function e(e){if(this.attributeMaps=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.instance=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.attributeMaps=$util.emptyArray,e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(24).uint64(e.instance),null!=e.attributeMaps&&e.attributeMaps.length)for(var r=0;r<e.attributeMaps.length;++r)$root.GroupAttributeAlt.AttributeMap.encode(e.attributeMaps[r],t.uint32(34).fork()).ldelim();return t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAttributeAlt;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.instance=e.uint64();break;case 4:n.attributeMaps&&n.attributeMaps.length||(n.attributeMaps=[]),n.attributeMaps.push($root.GroupAttributeAlt.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return n},e.AttributeMap=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=$util.Long?$util.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.origin&&Object.hasOwnProperty.call(e,"origin")&&t.uint32(26).string(e.origin),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(32).uint64(e.ms),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAttributeAlt.AttributeMap;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;case 3:n.origin=e.string();break;case 4:n.ms=e.uint64();break;default:e.skipType(7&i)}}return n},e}(),e}(),GroupAttributeRsp=$root.GroupAttributeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAttributeRsp;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;default:e.skipType(7&i)}}return n},e}(),GroupAttributeErr=$root.GroupAttributeErr=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAttributeErr;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.code=e.uint32();break;default:e.skipType(7&i)}}return n},e}(),GroupAttributeKeysGet=$root.GroupAttributeKeysGet=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.group="",e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAttributeKeysGet;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;default:e.skipType(7&i)}}return n},e}(),GroupAttributeKeysRet=$root.GroupAttributeKeysRet=function(){function e(e){if(this.keys=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.keys=$util.emptyArray,e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.keys&&e.keys.length)for(var r=0;r<e.keys.length;++r)t.uint32(18).string(e.keys[r]);return t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAttributeKeysRet;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.keys&&n.keys.length||(n.keys=[]),n.keys.push(e.string());break;default:e.skipType(7&i)}}return n},e}(),ProtoPackets=Object.freeze({__proto__:null,URI:URI,Wrapper:Wrapper,Ping:Ping,Pong:Pong,UserJoin:UserJoin,UserResp:UserResp,UserQuit:UserQuit,UserDrop:UserDrop,GroupEnter:GroupEnter,GroupLeave:GroupLeave,GroupReply:GroupReply,GroupLeaveNotice:GroupLeaveNotice,GroupEnterNotice:GroupEnterNotice,Message:Message,Ack:Ack,GroupAllUsersList:GroupAllUsersList,GroupAllUsersResult:GroupAllUsersResult,GroupAttributeGet:GroupAttributeGet,GroupAttributeRet:GroupAttributeRet,GroupAttributeSet:GroupAttributeSet,GroupAttributeMod:GroupAttributeMod,GroupAttributeDel:GroupAttributeDel,GroupAttributeAlt:GroupAttributeAlt,GroupAttributeRsp:GroupAttributeRsp,GroupAttributeErr:GroupAttributeErr,GroupAttributeKeysGet:GroupAttributeKeysGet,GroupAttributeKeysRet:GroupAttributeKeysRet,default:$root}),defaultProtocols=[],defaultWebsocketFactory=function(e,t){return wx.connectSocket({url:e,protocols:t})},normalClosureMessage="Normal closure";function makeWebSocketObservable(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{protocols:defaultProtocols,makeWebSocket:defaultWebsocketFactory},r=t.protocols,n=void 0===r?defaultProtocols:r,i=t.makeWebSocket,o=void 0===i?defaultWebsocketFactory:i;return new Observable((function(t){var r,i=new Subject,a=o(e,n),s=!1,u=!1,c=function(){s=!0},l=function(e){if(r){c();var n=new Error("Web socket message factory function called more than once");throw t.error(n),n}return r=e.subscribe((function(e){try{a.send({data:e,fail:function(){}})}catch(e){}})),i};return a.onOpen((function(){u?(s=!0,a.close({})):t.next(l)})),a.onMessage((function(e){var t=e.data;i.next(t)})),a.onError((function(e){c(),t.error(new Error(e.errMsg))})),a.onClose((function(e){s||(c(),u?(t.complete(),i.complete()):t.error(new Error(1e3===e.code?normalClosureMessage:e.reason)))})),function(){u=!0,r&&r.unsubscribe(),s||(c(),a.close({}))}}))}var log=Math.log,LN2=Math.LN2,clz32=Math.clz32||function(e){return 31-log(e>>>0)/LN2|0},fromCharCode=String.fromCharCode,Object_prototype_toString={}.toString,NativeUint8Array=Uint8Array,patchedU8Array=NativeUint8Array||Array,ArrayBufferString=Object_prototype_toString.call((ArrayBuffer||patchedU8Array).prototype);function decoderReplacer(e){var t=e.charCodeAt(0)<<24,r=0|clz32(~t),n=0,i=0|e.length,o="";if(r<5&&i>=r){for(t=t<<r>>>24+r,n=1;n<r;n=n+1|0)t=t<<6|63&e.charCodeAt(n);t<=65535?o+=fromCharCode(t):t<=1114111?o+=fromCharCode(55296+((t=t-65536|0)>>10)|0,56320+(1023&t)|0):n=0}for(;n<i;n=n+1|0)o+="\ufffd";return o}function TextDecoder(){}function encoderReplacer(e){var t=0|e.charCodeAt(0);if(t>=55296&&t<=56319){var r=0|e.charCodeAt(1);if(r!=r)return fromCharCode(239,191,189);if(!(r>=56320&&r<=57343))return fromCharCode(239,191,189);if((t=(t-55296<<10)+r-56320+65536|0)>65535)return fromCharCode(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}return t<=127?e:t<=2047?fromCharCode(192|t>>>6,128|63&t):fromCharCode(224|t>>>12,128|t>>>6&63,128|63&t)}function TextEncoder(){}TextDecoder.prototype.decode=function(e){var t=e&&e.buffer||e;if(Object_prototype_toString.call(t)!==ArrayBufferString)throw Error("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");for(var r=NativeUint8Array?new patchedU8Array(t):t,n="",i=0,o=0|r.length;i<o;i=i+32768|0)n+=fromCharCode.apply(0,r[NativeUint8Array?"slice":"subarray"](i,i+32768|0));return n.replace(/[\xc0-\xff][\x80-\xbf]*/g,decoderReplacer)},TextEncoder.prototype.encode=function(e){for(var t=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,encoderReplacer),r=0|t.length,n=new patchedU8Array(r),i=0;i<r;i=i+1|0)n[i]=t.charCodeAt(i);return n};var util=createCommonjsModule((function(e,t){function r(e,t){var r=g.styles[t];return r?"\x1b["+g.colors[r][0]+"m"+e+"\x1b["+g.colors[r][1]+"m":e}function n(e){return void 0===e}function i(e){return"string"==typeof e}function o(e){return"boolean"==typeof e}function a(e){return b(e)&&("[object Error]"===u(e)||e instanceof Error)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){return Object.prototype.toString.call(e)}function c(e,t,r,i,o,a){var u,c,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?c=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(c=e.stylize("[Setter]","special")),s(i,o)||(u="["+o+"]"),c||(e.seen.indexOf(l.value)<0?(c=v(r)?h(e,l.value,null):h(e,l.value,r-1)).indexOf("\n")>-1&&(c=a?c.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+c.split("\n").map((function(e){return"   "+e})).join("\n")):c=e.stylize("[Circular]","special")),n(u)){if(a&&o.match(/^\d+$/))return c;(u=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=e.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=e.stylize(u,"string"))}return u+": "+c}function l(e){return"function"==typeof e}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e){return b(e)&&"[object RegExp]"===u(e)}function f(e){return b(e)&&"[object Date]"===u(e)}function h(e,r,u){if(e.customInspect&&r&&l(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var _=r.inspect(u,e);return i(_)||(_=h(e,_,u)),_}var g=function(e,t){if(n(t))return e.stylize("undefined","undefined");if(i(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return"number"==typeof t?e.stylize(""+t,"number"):o(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}(e,r);if(g)return g;var b=Object.keys(r),m=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(b);if(e.showHidden&&(b=Object.getOwnPropertyNames(r)),a(r)&&(b.indexOf("message")>=0||b.indexOf("description")>=0))return p(r);if(0===b.length){if(l(r)){var y=r.name?": "+r.name:"";return e.stylize("[Function"+y+"]","special")}if(d(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(f(r))return e.stylize(Date.prototype.toString.call(r),"date");if(a(r))return p(r)}var E,T,R="",w=!1,S=["{","}"];return E=r,Array.isArray(E)&&(w=!0,S=["[","]"]),l(r)&&(R=" [Function"+(r.name?": "+r.name:"")+"]"),d(r)&&(R=" "+RegExp.prototype.toString.call(r)),f(r)&&(R=" "+Date.prototype.toUTCString.call(r)),a(r)&&(R=" "+p(r)),0!==b.length||w&&0!=r.length?u<0?d(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),T=w?function(e,t,r,n,i){for(var o=[],a=0,u=t.length;a<u;++a)s(t,String(a))?o.push(c(e,t,r,n,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(c(e,t,r,n,i,!0))})),o}(e,r,u,m,b):b.map((function(t){return c(e,r,u,m,t,w)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(T,R,S)):S[0]+R+S[1]}function _(e,t){return e}function g(e,i){var a={seen:[],stylize:_};return arguments.length>=3&&(a.depth=arguments[2]),arguments.length>=4&&(a.colors=arguments[3]),o(i)?a.showHidden=i:i&&t._extend(a,i),n(a.showHidden)&&(a.showHidden=!1),n(a.depth)&&(a.depth=2),n(a.colors)&&(a.colors=!1),n(a.customInspect)&&(a.customInspect=!0),a.colors&&(a.stylize=r),h(a,e,a.depth)}function v(e){return null===e}function b(e){return"object"==_typeof(e)&&null!==e}t._extend=function(e,t){if(!t||!b(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e},g.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},g.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var m=/%[sdj%]/g;t.format=function(e){if(!i(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(g(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,a=String(e).replace(m,(function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),s=n[r];r<o;s=n[++r])v(s)||!b(s)?a+=" "+s:a+=" "+g(s);return a},t.inspect=g}));function genErrorMessage(e,t){var r,n="number"==typeof t?t:void 0!==t&&"string"!=typeof t?t.code:void 0,i="number"!=typeof t&&"string"!=typeof t&&void 0!==t&&void 0!==t.serverCode?t.serverCode:void 0,o="".concat(void 0!==n?" Error Code ".concat(n):"").concat(void 0!==i?", server Code ".concat(i):"");return r="string"==typeof e&&e?addPeriodIfNeeded(e):Array.isArray(e)&&"string"==typeof e[0]&&e[0]?addPeriodIfNeeded(util.format.apply(util,[e[0]].concat(_toConsumableArray(e.slice(1))))):"","".concat(""===o?"":"".concat(o," - ")).concat(r)}var RtmBaseError=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(e,n){var i;return _classCallCheck(this,r),(i=t.call(this,genErrorMessage(e,n))).originalError=void 0,i.code=void 0,i.serverCode=void 0,"number"==typeof n?i.code=n:"string"==typeof n?i.name=n:void 0!==n&&(n.originalError&&(i.originalError=n.originalError),void 0!==n.code&&(i.code=n.code),void 0!==n.serverCode&&(i.serverCode=n.serverCode)),i}return _createClass(r)}(_wrapNativeSuper(Error)),RtmInternalError=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(e,n){var i;return _classCallCheck(this,r),(i=t.call(this,genErrorMessage(e,n))).code=n,i.name="RtmInternalError",i}return _createClass(r)}(_wrapNativeSuper(Error)),genError=function(){return function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(e){_classCallCheck(this,r);var n=Object.keys(e);return t.call(this,e[n[0]],n[0])}return _createClass(r)}(RtmInternalError)},CommonError=genError(),RtmTimeoutError=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).name="RtmTimeoutError",e}return _createClass(r)}(RtmBaseError),RtmInvalidArgumentError=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).name="RtmInvalidArgumentError",e}return _createClass(r)}(RtmBaseError),RtmInvalidStatusError=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).name="RtmInvalidStatusError",e}return _createClass(r)}(RtmBaseError),RtmLimitExceededError=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).name="RtmLimitExceededError",e}return _createClass(r)}(RtmBaseError),RtmInvokeTooOftenError=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).name="RtmInvokeTooOftenError",e}return _createClass(r)}(RtmBaseError),RtmUnavailableError=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).name="RtmUnavailableError",e.serverCode=void 0,e.statusCode=void 0,e}return _createClass(r)}(RtmBaseError),RtmUnauthenticatedError=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).name="RtmUnauthenticatedError",e.serverCode=void 0,e}return _createClass(r)}(RtmBaseError),RtmUnknownError=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).name="RtmUnknownError",e}return _createClass(r)}(RtmBaseError),isTimeout=function(e){return e instanceof RtmTimeoutError||e instanceof TimeoutError},isRtmError=function(e){return e instanceof RtmBaseError},invalidArgumentMessage="The %s in the arguments is invalid",genTimeoutMessage=function(e,t,r){return['Executing "%s.%s" timed out after %ds',e,t,r/1e3]},APP_ID_LENGTH=32,AP_REQUEST_TIMEOUT=1e4,SOCKET_KEEPALIVE_TIMEOUT=6e3,KEEPALIVE_INTERVAL=2e3,SOCKET_RETRY_INTERVAL=2e3,CLIENT_LOGIN_TIMEOUT=12e3,LOGIN_RESP_TIMEOUT=6e3,MESSAGE_MIN_COMPRESSION_LEN=128,MESSAGE_SEND_TIMEOUT=1e4,COMMON_REQUEST_TIMEOUT=1e4,DIALOGUE_EXPIRE_TIMEOUT=1e4,LRU_MAX_ITEMS=1e4,MESSAGE_RETRY_TIMEOUT=6e3,LOGOUT_SOCKET_CLOSE_TIMEOUT=5e3,LOGIN_QPS_LIMIT=2,TEXT_MESSAGE_MAX_TEXT_BYTES=32768,ONLINE_MESSAGE_DEDUP_DELAY=750,OFFLINE_MESSAGE_DEDUP_DELAY=1500,MSG_DEDUP_MAX_LEN=200,LOG_UPLOAD_MAX_ITEMS=40,MAX_JOINED_CHANNELS=20,INVITATION_EXPIRE_TIMEOUT=6e4,INVITATION_EXTRA_MAX_BYTES=8192,REMOTE_INVITATION_WAIT_ACCEPT_ACK_TIMEOUT=5e3,REMOTE_INVITATION_ACCEPT_RESEND_INTERVAL=1e3,LOCAL_INVITATION_ACK_TIMEOUT=3e4,LOCAL_INVITATION_RESEND_INTERVAL=2e3,CHANNEL_ATTRIBUTES_MAX_KEY_COUNT=512,CHANNEL_ATTRIBUTES_CACHE_MAX_LENGTH=1e4;function isValidAppId(e){return/^[\dA-Za-z]{32}$/.test(e)}function isValidId(e){return"string"==typeof e&&/^[\s\w!#$%&()+,.:;<=>?@[\]^{|}~-]{1,64}$/.test(e)&&"null"!==e}function isValidIp(e){var t;try{t=e.split(".").map((function(e){return Number(e)}))}catch(e){return!1}if(4!==t.length)return!1;if(0===t[0])return!1;var r,n=_createForOfIteratorHelper(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(!Number.isInteger(i))return!1;if(i<0||i>255)return!1}}catch(e){n.e(e)}finally{n.f()}return!0}function validAttributes(e){var t=e.attributes,r=e.attrSizeMap,n=e.maxAttrsCount,i=e.maxAttrValueSize,o=e.maxTotalSize;if(!isPlainObject(t))throw new RtmInvalidArgumentError("attributes must be an object",ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT);if(Object.keys(t).length>n)throw new RtmLimitExceededError("Exceed the limit of ".concat(n," attributes"),ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW);if(0===Object.keys(t).length)throw new RtmInvalidArgumentError("The attributes is an empty object",ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT);for(var a=0,s=0,u=Object.entries(t);s<u.length;s++){var c=_slicedToArray(u[s],2),l=c[0],p=c[1],d=getUtf8StringSize(l),f=getUtf8StringSize(p);if(0===d||d>32)throw new RtmInvalidArgumentError("Invalid attribute key",ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT);if(f>i)throw new RtmLimitExceededError("Invalid attribute value, over the limit of ".concat(i," bytes"),ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW);if("string"!=typeof p||0===p.length)throw new RtmInvalidArgumentError("Invalid attribute value",ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT);a+=d,a+=f}if(a>o)throw new RtmLimitExceededError("The attributes size overflow",ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW);if(void 0!==r){if(Object.keys(r).length>n)throw new RtmLimitExceededError("Exceed the limit of ".concat(n," attributes"),ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW);for(var h=0,_=0,g=Object.entries(r);_<g.length;_++){var v=_slicedToArray(g[_],2),b=v[0],m=v[1],y=getUtf8StringSize(b);if(0===y)throw new RtmInvalidArgumentError("Invalid attribute key",ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT);if(m>i)throw new RtmLimitExceededError("Invalid attribute value, over the limit of ".concat(i," bytes"),ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW);h+=y,h+=m}if(h>o)throw new RtmLimitExceededError("The attributes size overflow",ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW)}}function checkValidAttrGetByKeysArgs(e,t){if(!Array.isArray(t)||0===t.length||t.length>32||t.some((function(e){return 0===e.length||e.length>32})))throw new RtmInvalidArgumentError("arguments is not valid",ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT);if(!isValidId(e))throw new RtmInvalidArgumentError("ID is invalid",ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT)}var UINT32_MAX=4294967295;function getRandomInt(e,t){var r=Math.ceil(e),n=Math.floor(t);return Math.floor(Math.random()*(n-r+1))+e}function getRandomUInt64(){var e=getRandomInt(0,UINT32_MAX),t=getRandomInt(1,UINT32_MAX);return new long_1(e,t,!0)}function getSid(e){return e.toString().padEnd(32,"0")}function assertNever(e,t){return new TypeError("Unexpected ".concat(e,": ").concat(t))}function calIpDistance(e,t){var r=e.split(".").map((function(e){return Number(e)})),n=t.split(".").map((function(e){return Number(e)}));return Math.sqrt(1e3*Math.pow(r[0]-n[0],2)+100*Math.pow(r[1]-n[1],2)+10*Math.pow(r[2]-n[2],2)+1*Math.pow(r[3]-n[3],2))}function longToStringIfNeeded(e){return e.lessThanOrEqual(Number.MAX_SAFE_INTEGER)?e.toNumber():e.toString()}var prefixSeqMap=new Map;function uniquePrefixedId(e,t){var r="".concat(e).concat(t||""),n=prefixSeqMap.get(r)||1;return prefixSeqMap.set(r,n+1),"".concat(e).concat(n)}var getUTCTimestamp=function(){var e=new Date;return"".concat(e.toISOString().split("T")[1].replace(/\..+/,""),".").concat(e.getMilliseconds())},getKeys=Object.keys,getEntries=Object.entries.bind(Object);function isLongNum(e){return"number"==typeof e||long_1.isLong(e)}var getName=function(e){return Object.keys(e)[0]},addPeriodIfNeeded=function(e){return"string"==typeof e?e.endsWith(".")?e:"".concat(e,"."):e};function postWithAbortSignal(e,t){var r=t.body,n=t.headers,i=void 0===n?{}:n,o=t.timeout,a=void 0===o?1e4:o,s=t.signal;return new Promise((function(t,n){var o=wx.request({url:e,header:i,data:r,timeout:a,method:"POST",success:function(e){var r=e.data,i=e.statusCode;if(i>=200&&i<300||304===i){if(r instanceof ArrayBuffer)return void n(new TypeError("Invalid response type ArrayBuffer"));if("string"==typeof r)return void n(new TypeError("Invalid response type string"));t({response:r})}else{var o=new RtmUnavailableError(["Post XHR failure, status %d",i]);o.statusCode=i,o.message=r.toString()||"Request failed, status ".concat(i),n(o)}},fail:function(e){var t=new RtmUnavailableError(["Post failure"]);t.message=e.errMsg,n(t)}});if(void 0!==s){s.addEventListener("abort",(function e(){o.abort();var t=new Error("The request aborted.");t.name="AbortError",n(t),s.removeEventListener("abort",e)}))}}))}function validMessage(e,t){if(!isPlainObject(e))throw new RtmInvalidArgumentError("message object is not a plain object",t);if("string"!=typeof e.text)throw new RtmInvalidArgumentError("Unsupported message type",t)}function commonSendMessage(e){return _commonSendMessage.apply(this,arguments)}function _commonSendMessage(){return(_commonSendMessage=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var r,n,i,o,a,s,u,c,l,p,d,f,h,_,g,v,b,m,y,E;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.message,n=t.peerId,i=t.toPeer,o=t.session,a=t.errorCodes,s=t.diff,u=t.options,void 0!==o){e.next=3;break}throw new RtmInvalidStatusError("The client is not logged in. Cannot do the operation",a.NOT_LOGGED_IN);case 3:if(c=!1,"TEXT"!==r.messageType||!r.text.startsWith(END_CALL_PREFIX)||!i){e.next=9;break}if(l=r.text.split("_"),p=_slicedToArray(l,3),d=p[0],f=p[1],void 0!==p[2]&&isValidId(f)&&d===END_CALL_PREFIX){e.next=8;break}throw new RtmInvalidArgumentError("Message is not valid",PEER_MESSAGE_ERR_INVALID_MESSAGE);case 8:c=!0;case 9:if("string"==typeof r.text){e.next=11;break}throw new RtmInvalidArgumentError("Invalid message type",PEER_MESSAGE_ERR_INVALID_MESSAGE);case 11:if(h=Date.now(),_=o.messageSentTimes.length-1,!((g=o.messageSentTimes[_])&&g+3e3<h)){e.next=16;break}o.messageSentTimes=[h],e.next=27;break;case 16:v=_;case 17:if(!(v>=0)){e.next=26;break}if(!(o.messageSentTimes[v]+3e3<h)){e.next=21;break}return o.messageSentTimes=o.messageSentTimes.slice(v+1,_+1),e.abrupt("break",26);case 21:if(!(_-v+1>=180)){e.next=23;break}throw new RtmLimitExceededError("Message sent failed, exceeded the 180 message in 3 seconds",a.TOO_OFTEN);case 23:v--,e.next=17;break;case 26:o.messageSentTimes.push(h);case 27:if(!c){e.next=30;break}return b=r.text.split("_"),m=_slicedToArray(b,3),y=m[1],E=m[2],e.abrupt("return",o.sendInvitationMessage({peerId:n,type:"CallCancel",extra:E,channelId:y,callId:"0"}));case 30:return e.abrupt("return",o.sendTextMessage(r.text,n,i,u,MESSAGE_SEND_TIMEOUT-s));case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uint8ArrayToArrayBuffer(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function decodeUint8ArrayToString(e){return(new TextDecoder).decode(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}function encodeStringToUint8Array(e){return(new TextEncoder).encode(e)}function getUtf8StringSize(e){return(new TextEncoder).encode(e).length}var isProd=!0,s=1e3,m=60*s,h=60*m,d=24*h,w=7*d,y=365.25*d,ms=function(e,t){t=t||{};var r=_typeof(e);if("string"===r&&e.length>0)return parse(e);if("number"===r&&isFinite(e))return t.long?fmtLong(e):fmtShort(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y;case"weeks":case"week":case"w":return r*w;case"days":case"day":case"d":return r*d;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h;case"minutes":case"minute":case"mins":case"min":case"m":return r*m;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort(e){var t=Math.abs(e);return t>=d?Math.round(e/d)+"d":t>=h?Math.round(e/h)+"h":t>=m?Math.round(e/m)+"m":t>=s?Math.round(e/s)+"s":e+"ms"}function fmtLong(e){var t=Math.abs(e);return t>=d?plural(e,t,d,"day"):t>=h?plural(e,t,h,"hour"):t>=m?plural(e,t,m,"minute"):t>=s?plural(e,t,s,"second"):e+" ms"}function plural(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup(e){function t(e){var n,i=null;function o(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];if(o.enabled){var a=o,s=Number(new Date),u=s-(n||s);a.diff=u,a.prev=n,a.curr=s,n=s,r[0]=t.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var c=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return"%";c++;var i=t.formatters[n];if("function"==typeof i){var o=r[c];e=i.call(a,o),r.splice(c,1),c--}return e})),t.formatArgs.call(a,r),(a.log||t.log).apply(a,r)}}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=r,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===i?t.enabled(e):i},set:function(e){i=e}}),"function"==typeof t.init&&t.init(o),o}function r(e,r){var n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(_toConsumableArray(t.names.map(n)),_toConsumableArray(t.skips.map(n).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=ms,t.destroy=function(){__f__("warn","Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."," at pagesLive/lib/rtm-miniapp.js:3")},Object.keys(e).forEach((function(r){t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}var common=setup,browser=createCommonjsModule((function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=Object({NODE_ENV:"production",UNI_APP_ID:"__UNI__DBB8A37",UNI_APP_NAME:"\u8c46\u4e01\u79df",UNI_PLATFORM:"app-plus",VUE_APP_PLATFORM:"app-plus",UNI_CLOUD_PROVIDER:[],UNI_SECURE_NETWORK_ENABLE:!1,UNI_SECURE_NETWORK_CONFIG:[],UNICLOUD_DEBUG:void 0,RUN_BY_HBUILDERX:!0,UNI_AUTOMATOR_WS_ENDPOINT:void 0,UNI_STAT_UNI_CLOUD:"",UNI_STATISTICS_CONFIG:"",UNI_STAT_DEBUG:"",UNI_COMPILER_VERSION:"3.7.3"}).DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=function(){var e=!1;return function(){e||(e=!0,__f__("warn","Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."," at pagesLive/lib/rtm-miniapp.js:3"))}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=common(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})),key="__global_unique_id__",gud=function(){return commonjsGlobal[key]=(commonjsGlobal[key]||0)+1};function arrayEach(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}var _arrayEach=arrayEach;function baseAssign(e,t){return e&&_copyObject(t,keys_1(t),e)}var _baseAssign=baseAssign;function baseAssignIn(e,t){return e&&_copyObject(t,keysIn_1(t),e)}var _baseAssignIn=baseAssignIn;function copySymbols(e,t){return _copyObject(e,_getSymbols(e),t)}var _copySymbols=copySymbols,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols$1?function(e){for(var t=[];e;)_arrayPush(t,_getSymbols(e)),e=_getPrototype(e);return t}:stubArray_1,_getSymbolsIn=getSymbolsIn;function copySymbolsIn(e,t){return _copyObject(e,_getSymbolsIn(e),t)}var _copySymbolsIn=copySymbolsIn;function getAllKeysIn(e){return _baseGetAllKeys(e,keysIn_1,_getSymbolsIn)}var _getAllKeysIn=getAllKeysIn,objectProto$f=Object.prototype,hasOwnProperty$c=objectProto$f.hasOwnProperty;function initCloneArray(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&hasOwnProperty$c.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var _initCloneArray=initCloneArray;function cloneDataView(e,t){var r=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var _cloneDataView=cloneDataView,reFlags=/\w*$/;function cloneRegExp(e){var t=new e.constructor(e.source,reFlags.exec(e));return t.lastIndex=e.lastIndex,t}var _cloneRegExp=cloneRegExp,symbolProto$2=_Symbol?_Symbol.prototype:void 0,symbolValueOf$1=symbolProto$2?symbolProto$2.valueOf:void 0;function cloneSymbol(e){return symbolValueOf$1?Object(symbolValueOf$1.call(e)):{}}var _cloneSymbol=cloneSymbol,boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(e,t,r){var n=e.constructor;switch(t){case arrayBufferTag$2:return _cloneArrayBuffer(e);case boolTag$2:case dateTag$2:return new n(+e);case dataViewTag$3:return _cloneDataView(e,r);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return _cloneTypedArray(e,r);case mapTag$3:return new n;case numberTag$2:case stringTag$2:return new n(e);case regexpTag$2:return _cloneRegExp(e);case setTag$3:return new n;case symbolTag$2:return _cloneSymbol(e)}}var _initCloneByTag=initCloneByTag,mapTag$4="[object Map]";function baseIsMap(e){return isObjectLike_1(e)&&_getTag(e)==mapTag$4}var _baseIsMap=baseIsMap,isMap=_baseIsMap,isMap_1=isMap,setTag$4="[object Set]";function baseIsSet(e){return isObjectLike_1(e)&&_getTag(e)==setTag$4}var _baseIsSet=baseIsSet,isSet=_baseIsSet,isSet_1=isSet,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,argsTag$3="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",symbolTag$3="[object Symbol]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",cloneableTags={};function baseClone(e,t,r,n,i,o){var a,s=t&CLONE_DEEP_FLAG,u=t&CLONE_FLAT_FLAG,c=t&CLONE_SYMBOLS_FLAG;if(r&&(a=i?r(e,n,i,o):r(e)),void 0!==a)return a;if(!isObject_1(e))return e;var l=isArray_1(e);if(l){if(a=_initCloneArray(e),!s)return _copyArray(e,a)}else{var p=_getTag(e),d=p==funcTag$2||p==genTag$1;if(isBuffer_1(e))return _cloneBuffer(e,s);if(p==objectTag$4||p==argsTag$3||d&&!i){if(a=u||d?{}:_initCloneObject(e),!s)return u?_copySymbolsIn(e,_baseAssignIn(a,e)):_copySymbols(e,_baseAssign(a,e))}else{if(!cloneableTags[p])return i?e:{};a=_initCloneByTag(e,p,s)}}o||(o=new _Stack);var f=o.get(e);if(f)return f;o.set(e,a),isSet_1(e)?e.forEach((function(n){a.add(baseClone(n,t,r,n,e,o))})):isMap_1(e)&&e.forEach((function(n,i){a.set(i,baseClone(n,t,r,i,e,o))}));var h=l?void 0:(c?u?_getAllKeysIn:_getAllKeys:u?keysIn_1:keys_1)(e);return _arrayEach(h||e,(function(n,i){h&&(n=e[i=n]),_assignValue(a,i,baseClone(n,t,r,i,e,o))})),a}cloneableTags[argsTag$3]=cloneableTags[arrayTag$2]=cloneableTags[arrayBufferTag$3]=cloneableTags[dataViewTag$4]=cloneableTags[boolTag$3]=cloneableTags[dateTag$3]=cloneableTags[float32Tag$2]=cloneableTags[float64Tag$2]=cloneableTags[int8Tag$2]=cloneableTags[int16Tag$2]=cloneableTags[int32Tag$2]=cloneableTags[mapTag$5]=cloneableTags[numberTag$3]=cloneableTags[objectTag$4]=cloneableTags[regexpTag$3]=cloneableTags[setTag$5]=cloneableTags[stringTag$3]=cloneableTags[symbolTag$3]=cloneableTags[uint8Tag$2]=cloneableTags[uint8ClampedTag$2]=cloneableTags[uint16Tag$2]=cloneableTags[uint32Tag$2]=!0,cloneableTags[errorTag$2]=cloneableTags[funcTag$2]=cloneableTags[weakMapTag$2]=!1;var _baseClone=baseClone;function last(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var last_1=last;function baseSlice(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}var _baseSlice=baseSlice;function parent(e,t){return t.length<2?e:_baseGet(e,_baseSlice(t,0,-1))}var _parent=parent;function baseUnset(e,t){return t=_castPath(t,e),null==(e=_parent(e,t))||delete e[_toKey(last_1(t))]}var _baseUnset=baseUnset;function customOmitClone(e){return isPlainObject_1(e)?void 0:e}var _customOmitClone=customOmitClone;function flatten(e){return null!=e&&e.length?_baseFlatten(e,1):[]}var flatten_1=flatten;function flatRest(e){return _setToString(_overRest(e,void 0,flatten_1),e+"")}var _flatRest=flatRest,CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$1=4,omit=_flatRest((function(e,t){var r={};if(null==e)return r;var n=!1;t=_arrayMap(t,(function(t){return t=_castPath(t,e),n||(n=t.length>1),t})),_copyObject(e,_getAllKeysIn(e),r),n&&(r=_baseClone(r,CLONE_DEEP_FLAG$1|CLONE_FLAT_FLAG$1|CLONE_SYMBOLS_FLAG$1,_customOmitClone));for(var i=t.length;i--;)_baseUnset(r,t[i]);return r})),omit_1=omit,hasProp=Object.prototype.hasOwnProperty;function throwsMessage(e){return"[Throws: "+(e?e.message:"?")+"]"}function safeGetValueFromPropertyOnObject(e,t){if(hasProp.call(e,t))try{return e[t]}catch(e){return throwsMessage(e)}return e[t]}function ensureProperties(e){var t=[];return function e(r){if(null===r||"object"!=_typeof(r))return r;if(-1!==t.indexOf(r))return"[Circular]";if(t.push(r),"function"==typeof r.toJSON)try{var n=e(r.toJSON());return t.pop(),n}catch(e){return throwsMessage(e)}if(Array.isArray(r)){var i=r.map(e);return t.pop(),i}var o=Object.keys(r).reduce((function(t,n){return t[n]=e(safeGetValueFromPropertyOnObject(r,n)),t}),{});return t.pop(),o}(e)}var safeJsonStringify=function(e,t,r){return JSON.stringify(ensureProperties(e),t,r)},ensureProperties_1=ensureProperties;safeJsonStringify.ensureProperties=ensureProperties_1;var uploadLog=browser("RTM:DEBUG"),UploadState;uploadLog.enabled=!isProd,function(e){e[e.Uploading=0]="Uploading",e[e.Free=1]="Free"}(UploadState||(UploadState={}));var LogUploader=function(){"use strict";function e(t){_classCallCheck(this,e),this.uploadRequest=void 0,this.uploadState=void 0,this.uploadResendCount=void 0,this.LogCache=void 0,this.LogsToPost=void 0,this.processId=void 0,this.sdkVersion=void 0,this.logId=void 0,this.processId=t.processId,this.sdkVersion=t.sdkVersion,this.uploadRequest=t.uploadRequest,this.uploadState=UploadState.Free,this.uploadResendCount=0,this.LogCache=[],this.LogsToPost=[],this.logId=0}return _createClass(e,[{key:"upload",value:function(e){this.LogCache.push(e),this.uploadState===UploadState.Free&&(this.LogsToPost=this.LogCache.length<LOG_UPLOAD_MAX_ITEMS?this.LogCache.splice(0,this.LogCache.length):this.LogCache.splice(0,LOG_UPLOAD_MAX_ITEMS),this.postLog(this.LogsToPost))}},{key:"postLog",value:function(e){var t=this;this.uploadState=UploadState.Uploading,setTimeout(_asyncToGenerator(_regeneratorRuntime.mark((function r(){var n,i;return _regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n={sdk_version:t.sdkVersion,process_id:t.processId,payload:JSON.stringify(e)},r.prev=1,r.next=4,t.uploadRequest(n);case 4:r.next=10;break;case 6:return r.prev=6,r.t0=r.catch(1),i=t.uploadResendCount++<2?200:1e4,r.abrupt("return",void setTimeout((function(){return t.postLog(t.LogsToPost)}),i));case 10:uploadLog('The logs uploaded for "process-'.concat(processId,'"')),0!==t.LogCache.length?(t.uploadResendCount=0,t.LogsToPost=t.LogCache.length<LOG_UPLOAD_MAX_ITEMS?t.LogCache.splice(0,t.LogCache.length):t.LogCache.splice(0,LOG_UPLOAD_MAX_ITEMS),t.postLog(t.LogsToPost)):t.uploadState=UploadState.Free;case 11:case"end":return r.stop()}}),r,null,[[1,6]])}))),3e3)}}]),e}(),uploadRequest=function(e){var t=0,r=function(){var n=_asyncToGenerator(_regeneratorRuntime.mark((function n(){return _regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,postWithAbortSignal("https://logservice-rtm.agora.io/upload/v1",{body:e,timeout:1e4,headers:{"Content-Type":"application/json"}});case 3:n.next=12;break;case 5:if(n.prev=5,n.t0=n.catch(0),t+=1,n.t1=t<=2,!n.t1){n.next=12;break}return n.next=12,r();case 12:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(){return n.apply(this,arguments)}}();r()},logUploader=new LogUploader({processId:"process-".concat(processId),sdkVersion:"Agora_RTM_SDK_for_MINIAPP_".concat(BUILD),uploadRequest:uploadRequest}),blacklistedKeywords=["text","payload","rawMessage","thumbnail","token","detail","ticket","attributeInfos","attributeMaps","key","value"],filterLogObject=function(e){return omit_1(e,blacklistedKeywords)},getPlain=function(e){return"object"==_typeof(e)?isPlainObject(e)?filterLogObject(e):e.constructor&&e.constructor.name:e},formatLogTextAndParameters=function(e,t){if(e instanceof Error)return e.message;if("string"!=typeof e)return JSON.stringify(filterLogObject(e));var r=t.map((function(e){return e instanceof Error?e.message:"object"==_typeof(e)?safeJsonStringify(Array.isArray(e)?e.map(getPlain):getPlain(e)):e}));return util.format.apply(util,[e.replace(/%[%Oo]/g,(function(e){return"%%"===e?"%":"%o"===e||"%O"===e?"%s":e}))].concat(_toConsumableArray(r)))},logItemId=1,logAndUploadGenerator=function(e,t,r){var n=browser(e);return n.enabled=!0,n.log=r,n.useColors=!1,function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(t.enableLogUpload){var s=addPeriodIfNeeded(r),u=formatLogTextAndParameters(s,o);logUploader.upload({log_item_id:""+logItemId++,log_level:e,payload_str:"[".concat(getUTCTimestamp(),"] ").concat(e," - ").concat(u.length>256?u.slice(0,256):u)})}var c=function(){var e=u||formatLogTextAndParameters(addPeriodIfNeeded(r),o);n(e)};switch(e){case"RTM:INFO":t.logFilter.info&&c();break;case"RTM:WARN":t.logFilter.warn&&c();break;case"RTM:ERROR":t.logFilter.error&&c();break;case"RTM:TRACK":t.logFilter.track&&c();break;case"RTM:MSG:RECV":case"RTM:MSG:SEND":case"RTM:DEBUG":t.logFilter.debug&&c()}}},loggerId,prefixer=function(e){return function(t){return"".concat(1===loggerId||void 0===e?"":"Ins#".concat(e," ")).concat(t)}},loggerGenerator=function(e,t,r){var n=prefixer(loggerId);return logAndUploadGenerator("RTM:".concat(t),r,(function(t){return e(n(t))}))},createEventBase=function(){return function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_classCallCheck(this,r),(i=t.call(this)).logger=e,i.name=n,i.logError=void 0,i.invokeTracker=void 0,i.resultTracker=void 0,i.errorTracker=void 0,i.eventTracker=void 0,i.info=void 0,i.warn=void 0,i.log=void 0,i.genLogger=void 0,i.loggerId=void 0,i.loggerId=e.loggerId,i.info=e.info,i.warn=e.warn,i.logError=e.logError,i.genLogger=e.genLogger,i.log=e.genLogger("RTM:DEBUG","<".concat(n,"> ")),i.invokeTracker=e.genTracker("Invoke"),i.eventTracker=e.genTracker("Event"),i.resultTracker=e.genTracker("Result"),i.errorTracker=e.genTracker("Error"),o){var a=i.emit.bind(_assertThisInitialized(i)),s=function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var s=r[0],u=r.slice(1);(e=i).eventTracker.apply(e,["%s: "+(u.length>0?"%s emitted with args: ".concat(u.map((function(){return"%o"}))):"%s emitted"),n,s].concat(_toConsumableArray(u)));try{a.apply(void 0,r)}catch(e){i.logError("Caught in the callback function of the event %s, original error %o",s,e)}};i.emit=s}return _possibleConstructorReturn(i)}return _createClass(r)}(events.EventEmitter)};function initLoggerId(){return loggerId=gud()}var genInfoLogger=function(e){return loggerGenerator(console.log,"INFO",e)},genWarnLogger=function(e){return loggerGenerator(console.warn,"WARN",e)},genErrorLogger=function(e){return loggerGenerator(console.error,"ERROR",e)},debugLoggerGenerator=function(e,t){return function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=prefixer(e),o=console.debug,a=logAndUploadGenerator(r,t,(function(e){return o(i(e))}));return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return a.apply(void 0,[n+e].concat(r))}}},trackLoggerGenerator=function(e,t){return function(r){return debugLoggerGenerator(e,t)("RTM:TRACK","[".concat(r,"] "))}};function logged(e,t,r){var n=r;void 0===n&&(n=Object.getOwnPropertyDescriptor(e,t));var i=n.value;return n.value=function(){for(var e=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];this.invokeTracker.apply(this,["%s: "+(n.length>0?"%s with args: ".concat(n.map((function(){return"%o"}))):"%s"),this.name,t].concat(n));try{var a=i.apply(this,n)}catch(a){throw this.logError.apply(this,["".concat(void 0!==a.code?"Error Code ".concat(a.code,": "):"","%s failed").concat(n.length>0?" with args: ".concat(n.map((function(){return"%o"}))):""),t].concat(n)),a.originalError&&this.logError(a.originalError),this.errorTracker(a),a}var s=Date.now();return _asyncToGenerator(_regeneratorRuntime.mark((function r(){var i;return _regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a;case 3:i=r.sent,r.next=9;break;case 6:return r.prev=6,r.t0=r.catch(0),r.abrupt("return",(e.logError.apply(e,["".concat(void 0!==r.t0.code?"Error Code ".concat(r.t0.code,": "):"","%s failed").concat(n.length>0?" with args: ".concat(n.map((function(){return"%o"}))):""),t].concat(n)),r.t0.originalError&&e.logError(r.t0.originalError),void e.errorTracker(r.t0)));case 9:i!==a?void 0===i?e.resultTracker("%s promise resolves after %dms",t,Date.now()-s):e.resultTracker("%s promise resolves after %dms, result is %o",t,Date.now()-s,i):e.resultTracker("%s result is %o",t,i);case 10:case"end":return r.stop()}}),r,null,[[0,6]])})))(),a},n}var URI$1=$root.URI,Wrapper$1=ProtoPackets.Wrapper,PacketsAndURI=_objectWithoutProperties(ProtoPackets,["Wrapper"]),Packets=omit_1(PacketsAndURI,"URI"),nameToUri=function(e){var t=URI$1["".concat(e,"Uri")];if("number"!=typeof t||0===t)throw new TypeError("Got Unknown URI Name");return t};function uriToPacketName(e){return URI$1[e].slice(0,-3)}function getWrappedByName(e,t){var r=nameToUri(e),n=Packets[e],i=new n(t),o=n.encode(i).finish();return new Wrapper$1({uri:r,data:o})}var nativeFloor=Math.floor,nativeRandom=Math.random;function baseRandom(e,t){return e+nativeFloor(nativeRandom()*(t-e+1))}var _baseRandom=baseRandom;function shuffleSelf(e,t){var r=-1,n=e.length,i=n-1;for(t=void 0===t?n:t;++r<t;){var o=_baseRandom(r,i),a=e[o];e[o]=e[r],e[r]=a}return e.length=t,e}var _shuffleSelf=shuffleSelf;function arrayShuffle(e){return _shuffleSelf(_copyArray(e))}var _arrayShuffle=arrayShuffle;function baseValues(e,t){return _arrayMap(t,(function(t){return e[t]}))}var _baseValues=baseValues;function values(e){return null==e?[]:_baseValues(e,keys_1(e))}var values_1=values;function baseShuffle(e){return _shuffleSelf(values_1(e))}var _baseShuffle=baseShuffle;function shuffle(e){return(isArray_1(e)?_arrayShuffle:_baseShuffle)(e)}var shuffle_1=shuffle,EDGE_ENV_PORT={0:9590,1:9592},getApUrl=function(e){return"https://".concat(e,"/api/v1")},AP_DOMAINS_CN=["ap-web-1.agoraio.cn","ap-web-2.agoraio.cn"],AP_BACKUP_DOMAINS_CN=["ap-web-3.agoraio.cn","ap-web-4.agoraio.cn"],cnUrl$=of.apply(void 0,_toConsumableArray(shuffle_1(AP_DOMAINS_CN.map(getApUrl)))),cnBackupUrl$=of.apply(void 0,_toConsumableArray(shuffle_1(AP_BACKUP_DOMAINS_CN.map(getApUrl)))),SocketError=genError(),Socket=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(e,n,i,o,a){var s;if(_classCallCheck(this,r),(s=t.call(this,a,uniquePrefixedId("Socket-",a.loggerId))).ip=e,s.env=n,s.ticket=i,s.context=o,s.isActiveClose=!1,s.loggedIn=!1,s.receivedPacket=new Subject,s.open$=void 0,s.input$=new Subject,s.userJoin$=new Subject,s.attemptsSinceLastError=0,s.message$=new Subject,s.socket$=void 0,s.toClose=new Subject,s.toReconnect=new Subject,s.sendLogger=s.genLogger("RTM:MSG:SEND"),s.receiveLogger=s.genLogger("RTM:MSG:RECV"),s.socketReconnector=function(e){var t=function(e){return s.attemptsSinceLastError+=1,s.warn("The %s of Env %d reconnecting %s",s.name,s.env,e.message),timer(SOCKET_RETRY_INTERVAL)};return e.pipe(catchError((function(e){return s.log("socket connection closed"),s.loggedIn=!1,s.attemptsSinceLastError>=2?(s.warn("socket connection failure"),s.emit("connectionFailure"),s.close(),throwError(e)):s.isActiveClose?EMPTY:(s.emit("reconnect"),throwError(e))})),retryWhen((function(e){return e.pipe(switchMap(t))})))},0!==n&&1!==n)throw new SocketError({ILLEGAL_RTM_ENV:"The env number is out of rtm env count"});if(!isValidIp(e))throw new SocketError({IP_NOT_VALID:"The ip from ap is not valid"});var u=EDGE_ENV_PORT[n];s.log("Opening websocket address %s for the Env %d",s.ip,s.env);var c=merge(s.input$,s.userJoin$.pipe(rateLimit(LOGIN_QPS_LIMIT)),s.message$).pipe(map$1((function(e){return uint8ArrayToArrayBuffer(Wrapper.encode(e).finish())})));return s.socket$=merge(makeWebSocketObservable("wss://miniapp.agoraio.cn/rtm/".concat(e.split(".").join("-"),"-").concat(u,"/"),{timeout:4e3}),s.toReconnect).pipe(map$1((function(e){if(e instanceof Error)throw s.warn("Env_%d: Force reconnect the socket",s.env),e;return e(c).pipe(map$1((function(e){return Wrapper.decode(new Uint8Array(e))})))})),s.socketReconnector),s.open$=s.socket$.pipe(tap((function(e){s.log("Websocket opened",s.name),e.subscribe((function(e){var t=e.data,r=uriToPacketName(e.uri),n=Packets[r].decode(t),i=mergeWith_1({},n,(function(e,t){return t instanceof long_1?longToStringIfNeeded(t):t})),o=!1;(n instanceof GroupEnterNotice||n instanceof GroupLeaveNotice)&&(n.instance.lessThanOrEqual(UINT32_MAX)&&(o=!0));if(n instanceof Message||n instanceof Ack){var a=n.instance,u=n.dialogue,c=n.sequence;(u.lessThanOrEqual(UINT32_MAX)||a.lessThanOrEqual(UINT32_MAX)||c.lessThan(1))&&(o=!0)}o?s.warn("Env_%d: Illegal %s, abandoned %o",s.env,r,i):("Pong"!==r&&s.receiveLogger("Env_%d: %s %o",s.env,r,i),s.receivedPacket.next([r,n]))}),(function(){}))})),mapTo(void 0),takeUntil(s.toClose),share()),_possibleConstructorReturn(s)}return _createClass(r,[{key:"address",get:function(){return"".concat(this.ip,":").concat(EDGE_ENV_PORT[this.env])}},{key:"sendPacket",value:function(e,t){if("Ping"!==e){var r=mapValues_1(t,(function(e){return e instanceof long_1?longToStringIfNeeded(e):e}));this.sendLogger("Env_%d: %s %o",this.env,e,r)}var n=getWrappedByName(e,t);"UserJoin"===e?this.userJoin$.next(n):"Message"===e?this.message$.next(n):this.input$.next(n)}},{key:"close",value:function(){this.isActiveClose=!0,this.loggedIn=!1,this.toClose.next()}},{key:"fromReceived",value:function(e){var t=this;return this.receivedPacket.pipe(tap((function(e){var r=_slicedToArray(e,2),n=r[0],i=r[1];"UserResp"===n&&(t.attemptsSinceLastError=0,t.loggedIn=!0),"UserDrop"===n&&t.emit("socketUserDrop",i)})),filter((function(t){return _slicedToArray(t,1)[0]===e})),map$1((function(e){return _slicedToArray(e,2)[1]})))}},{key:"forceReconnect",value:function(){this.toReconnect.next(new SocketError({FORCE_RECONNECTING:"Connection seems broken, try force reconnecting"}))}}]),r}(createEventBase()),cjsPonyfill=createCommonjsModule((function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return!t||"object"!=_typeof(t)&&"function"!=typeof t?s(e):t}function c(e,t,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(){r(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return i(e,[{key:"addEventListener",value:function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0,i=r.length;n<i;n++)if(r[n]===t)return void r.splice(n,1)}},{key:"dispatchEvent",value:function(e){var t=this;if(e.type in this.listeners){for(var r=function(r){setTimeout((function(){return r.call(t,e)}))},n=this.listeners[e.type],i=0,o=n.length;i<o;i++)r(n[i]);return!e.defaultPrevented}}}]),e}(),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=o(e);if(t){var i=o(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u(this,r)}}(n);function n(){var e;return r(this,n),(e=t.call(this)).listeners||l.call(s(e)),Object.defineProperty(s(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(s(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return i(n,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),c(o(n.prototype),"dispatchEvent",this).call(this,e)}}]),n}(l),d=function(){function e(){r(this,e),Object.defineProperty(this,"signal",{value:new p,writable:!0,configurable:!0})}return i(e,[{key:"abort",value:function(){var e;try{e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(d.prototype[Symbol.toStringTag]="AbortController",p.prototype[Symbol.toStringTag]="AbortSignal"),t.AbortController=d,t.AbortSignal=p,t.abortableFetch=function(e){"function"==typeof e&&(e={fetch:e});var t=e,r=t.fetch,n=t.Request,i=void 0===n?r.Request:n,o=t.AbortController,a=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,s=void 0!==a&&a;if(!function(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(__f__("log","__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"," at pagesLive/lib/rtm-miniapp.js:3"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}({fetch:r,Request:i,AbortController:o,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:s}))return{fetch:r,Request:u};var u=i;(u&&!u.prototype.hasOwnProperty("signal")||s)&&((u=function(e,t){var r;t&&t.signal&&(r=t.signal,delete t.signal);var n=new i(e,t);return r&&Object.defineProperty(n,"signal",{writable:!1,enumerable:!1,configurable:!0,value:r}),n}).prototype=i.prototype);var c=r;return{fetch:function(e,t){var r=u&&u.prototype.isPrototypeOf(e)?e.signal:t?t.signal:void 0;if(r){var n;try{n=new DOMException("Aborted","AbortError")}catch(e){(n=new Error("Aborted")).name="AbortError"}if(r.aborted)return Promise.reject(n);var i=new Promise((function(e,t){r.addEventListener("abort",(function(){return t(n)}),{once:!0})}));return t&&t.signal&&delete t.signal,Promise.race([i,c(e,t)])}return c(e,t)},Request:u}}})),ApResErrorMessage={INVALID_APP_ID:"Illegal App ID",NO_AUTHORIZED:"Signature verification failed",TOKEN_TIMEOUT:"Dynamic key expired",INVALID_TOKEN_UID:"UID in the security key(token) is not valid",APP_ID_NO_ACTIVATED:"The vendor is not activated",DYNAMIC_KEY_NOT_ENABLED:"The vendor did not enable the dynamic key, but uses the dynamic key",DYNAMIC_ENABLED_BUT_STATIC_KEY:"The vendor enabled the dynamic key, but uses the static key",TOKEN_EXPIRED:"The token has expired",INVALID_USER_ID:"The user ID to login does not match the token"},ApResErrorCode={5:"INVALID_APP_ID",7:"INVALID_USER_ID",9:"NO_AUTHORIZED",10:"TOKEN_TIMEOUT",11:"APP_ID_NO_ACTIVATED",12:"INVALID_TOKEN_UID",13:"TOKEN_EXPIRED",14:"DYNAMIC_KEY_NOT_ENABLED",15:"DYNAMIC_ENABLED_BUT_STATIC_KEY"},AccessPoint=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(e,n){var i;_classCallCheck(this,r),(i=t.call(this,n,"AccessPoint")).context=e,i.apEdgeInfo$=void 0,i.apEdgeInfoEndFirst$=void 0,i.apFinish$=new Subject,i.fetchAp=function(e,t){var r=uniquePrefixedId("AP-",i.loggerId);i.log("The AccessPoint requests %s(%s)",e,r);var n=new cjsPonyfill.AbortController;return i.apFinish$.pipe(first()).subscribe((function(){return n.abort()})),defer((function(){var o=getRandomInt(0,Number.MAX_SAFE_INTEGER);return i.log("The %s request uid param is %d",r,o),postWithAbortSignal(e,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"69","Content-Type":"application/json"},body:{flag:128,opid:1,key:t||i.context.key,cname:i.context.uid,detail:{},uid:o,sid:i.context.sid},signal:n.signal})})).pipe(catchError((function(t){return"AbortError"!==t.name&&(i.logError(t),i.warn("The AP server %s request failure",e)),EMPTY})),mergeMap(function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,o,a,s,u,c,l,p,d,f,h,_,g,v,b,m,y;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.response,o=n,i.log("The %s response is %o",r,o),a=o.code,s=o.addresses,u=o.detail[9],0===a){e.next=24;break}if(c=a,a.toString().length>4&&(l=a.toString().padStart(8,"0"),p=l.slice(0,4),201===parseInt(p,10)&&(c=parseInt(l.slice(4,8),10))),d=c.toString(),Object.keys(ApResErrorCode).includes(d)){e.next=11;break}return f=new RtmUnavailableError(["Login is rejected by the server. The response code is %d",a],LOGIN_ERR_REJECTED),e.abrupt("return",(f.serverCode=c,throwError(f)));case 11:h=ApResErrorCode[d],_=ApResErrorMessage[h],e.t0=h,e.next="INVALID_APP_ID"===e.t0||"APP_ID_NO_ACTIVATED"===e.t0?15:"INVALID_USER_ID"===e.t0?17:"TOKEN_EXPIRED"===e.t0||"TOKEN_TIMEOUT"===e.t0?19:"NO_AUTHORIZED"===e.t0||"INVALID_TOKEN_UID"===e.t0||"DYNAMIC_KEY_NOT_ENABLED"===e.t0||"DYNAMIC_ENABLED_BUT_STATIC_KEY"===e.t0?21:23;break;case 15:return g=new RtmUnauthenticatedError(_,LOGIN_ERR_INVALID_APP_ID),e.abrupt("return",(g.serverCode=a,throwError(g)));case 17:return v=new RtmUnauthenticatedError(_,LOGIN_ERR_INVALID_ARGUMENT),e.abrupt("return",(v.serverCode=a,throwError(v)));case 19:return b=new RtmUnauthenticatedError(_,LOGIN_ERR_TOKEN_EXPIRED),e.abrupt("return",(b.serverCode=a,throwError(b)));case 21:return m=new RtmUnauthenticatedError(_,LOGIN_ERR_INVALID_TOKEN),e.abrupt("return",(m.serverCode=a,throwError(m)));case 23:return e.abrupt("return",throwError(assertNever("ApResErrType",h)));case 24:return y=s,e.abrupt("return",(i.context.area=u,of.apply(void 0,_toConsumableArray(y).concat([queueScheduler]))));case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),mergeAll())};var o=1;return i.apEdgeInfoEndFirst$=timer(0,2e3).pipe(take(1),takeUntil(i.apFinish$),map$1((function(){5===o&&(o=1);var e="https://ap-web-".concat(o,".agoraio.cn/api/v1");return o+=1,e})),mergeMap((function(e){return i.fetchAp(e)})),timeout(AP_REQUEST_TIMEOUT),catchError((function(e){return e instanceof TimeoutError&&i.warn("AP request timeout"),throwError(e)})),distinct((function(e){return e.ip}))),i.apEdgeInfo$=timer(0,2e3).pipe(take(4),takeUntil(i.apFinish$),map$1((function(){5===o&&(o=1);var e="https://ap-web-".concat(o,".agoraio.cn/api/v1");return o+=1,e})),mergeMap((function(e){return i.fetchAp(e)})),timeout(AP_REQUEST_TIMEOUT),catchError((function(e){return e instanceof TimeoutError&&i.warn("AP request timeout"),throwError(e)})),distinct((function(e){return e.ip}))),i}return _createClass(r)}(createEventBase()),ConnectionError=genError(),Connection=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(e,n){var i;_classCallCheck(this,r),(i=t.call(this,n,"Connection")).context=e,i.logger=n,i.apClient=new AccessPoint(i.context,i.logger),i.lastOpenSockets=[new ReplaySubject(1),new ReplaySubject(1)],i.curOpenSockets=[void 0,void 0],i.ipIterator=0,i.firstEnv=Math.random()>=.5?1:0,i.firstSocketOpener=void 0,i.secondSocketOpener=void 0,i.firstOpenKeeperSubject=new Subject,i.secondOpenKeeperSubject=new Subject,i.edgeInfoReplayed=void 0,i.firstEnvOpenSocket=void 0,i.firstOpenKeeperSub=void 0,i.secondOpenKeeperSub=void 0,i.apClient.apFinish$.subscribe((function(){i.log("Ap client fetch finished")}));var o=[];i.edgeInfoReplayed=i.apClient.apEdgeInfo$.pipe(filter((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket})),throwIfEmpty((function(){return new ConnectionError({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})})),retryWhen((function(e){return e.pipe(tap((function(e){if(isRtmError(e))throw e})),delay(2e3),takeUntil(timer(7e3)))})),filter((function(e){return!some_1(o,e)})),tap((function(e){o.push(e),i.log("An edge info got %o",e)})),tap({error:function(e){i.emit("connectionInitFailure",e)}}),shareReplay()),i.firstEnvOpenSocket=i.edgeInfoReplayed.pipe(mergeMap((function(e){if(void 0===e)return throwError(new Error("Invalid edge info"));var t=e.ip,r=e.ticket,o=new Socket(t,i.firstEnv,r,i.context,n);return i.firstEnv=1===i.firstEnv?0:1,o.once("connectionFailure",(function(){return i.onSocketConnectionFailure(o)})),o.open$.pipe(mapTo(o))})),tap((function(e){i.log("The websocket of ENV_%d opened to %s:%d",e.env,e.ip,EDGE_ENV_PORT[e.env]),i.curOpenSockets[e.env]=e,i.lastOpenSockets[e.env].next(e),i.firstEnv=e.env,i.openSecondSocket(e.env,e.ip)})),take(1),share()),i.firstSocketOpener=i.firstEnvOpenSocket.pipe(mergeMap((function(e){return e.open$.pipe(tap((function(){i.log("The websocket of first ENV_%d re-opened to %s:%d",e.env,e.ip,EDGE_ENV_PORT[e.env]),i.curOpenSockets[e.env]=e,i.lastOpenSockets[e.env].next(e)})))})));var a=i.firstOpenKeeperSubject.pipe(switchAll());return i.firstOpenKeeperSub=a.subscribe({error:i.logError}),i}return _createClass(r,[{key:"initConnection",value:function(){this.firstOpenKeeperSubject.next(this.firstSocketOpener)}},{key:"closeSocket",value:function(e,t){if(![0,1].includes(e))throw new CommonError({INVALID_ENV:"The env argument is not 0 or 1"});var r;e===this.firstEnv?(r=this.firstOpenKeeperSub,this.firstOpenKeeperSub=void 0):(r=this.secondOpenKeeperSub,this.firstOpenKeeperSub=void 0);var n=this.curOpenSockets[e];this.curOpenSockets[e]=void 0,n&&(n.isActiveClose=!0,setTimeout((function(){n.close()}),t)),void 0!==r&&setTimeout((function(){var e;null===(e=r)||void 0===e||e.unsubscribe()}),t)}},{key:"waitClosing",value:function(e){var t=this;return e.isActiveClose=!0,e.open$.pipe(ignoreElements(),catchError((function(e){return"Normal closure"===e.message?EMPTY:throwError(e)})),timeout(LOGOUT_SOCKET_CLOSE_TIMEOUT),catchError((function(r){return r instanceof TimeoutError?(t.warn("Force closing the ENV_%d connection",e.env),EMPTY):throwError(r)})))}},{key:"onSocketConnectionFailure",value:function(e){var t=[0,1].filter((function(t){return t!==e.env}))[0],r=this.curOpenSockets[t];r&&r.loggedIn?this.reopenSocketWithApRequest(e.env):this.emit("socketsFailure")}},{key:"openSecondSocket",value:function(e,t){var r=this,n=1===e?0:1;this.secondSocketOpener=this.edgeInfoReplayed.pipe(reduce((function(e,t){return[].concat(_toConsumableArray(e),[t])}),[]),map$1((function(e){return sortBy_1(e,(function(e){var r=e.ip;return calIpDistance(t,r)})).slice(-1)[0]})),take(1),mergeMap((function(e){if(void 0===e)return throwError(new Error("Invalid edge info"));var t=e.ip,i=e.ticket,o=new Socket(t,n,i,r.context,r.logger);return o.once("connectionFailure",(function(){return r.onSocketConnectionFailure(o)})),o.open$.pipe(tap((function(){r.closeAfterComplete(o)||(r.lastOpenSockets[n].next(o),r.curOpenSockets[n]=o)})))})),share());var i=this.secondOpenKeeperSubject.pipe(switchAll());this.secondOpenKeeperSub=i.subscribe({error:this.logError}),this.secondOpenKeeperSubject.next(this.secondSocketOpener)}},{key:"reopenSocketWithApRequest",value:function(e){var t=this,r=[0,1].filter((function(t){return t!==e}))[0],n=this.curOpenSockets[r];if(void 0!==n){var i=n.ip,o=this.apClient.apEdgeInfoEndFirst$.pipe(filter((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket})),throwIfEmpty((function(){return new ConnectionError({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})})),retryWhen((function(e){return e.pipe(tap((function(e){if(e.code===LOGIN_ERR_TOKEN_EXPIRED)return t.emit("tokenExpired"),void t.apClient.apFinish$.next(void 0);if(isRtmError(e))throw e})),delay(1500),takeUntil(timer(7e3)))})),tap((function(e){t.log("An edge info got %o",e)}))).pipe(reduce((function(e,t){return[].concat(_toConsumableArray(e),[t])}),[]),map$1((function(e){var r=sortBy_1(e,(function(e){var t=e.ip;return calIpDistance(i,t)}));return r.length-1>=t.ipIterator?r.slice(-t.ipIterator++-1)[0]:(t.ipIterator=0,r.slice(-1)[0])})),throwIfEmpty(),mergeMap((function(r){if(void 0===r)return throwError(new Error("Invalid edge info"));var n=r.ip,i=r.ticket,o=new Socket(n,e,i,t.context,t.logger);return o.once("connectionFailure",(function(){return t.onSocketConnectionFailure(o)})),o.open$.pipe(mapTo(o))})),tap((function(r){t.log("The websocket of ENV_%d re-opened to %s:%d using ap",r.env,r.ip,EDGE_ENV_PORT[r.env]),t.curOpenSockets[e]=r,t.lastOpenSockets[e].next(r)})),mergeMap((function(r){return r.open$.pipe(tap((function(){t.log("The websocket of ENV_%d re-opened to %s:%d",r.env,r.ip,EDGE_ENV_PORT[r.env]),t.curOpenSockets[e]=r,t.lastOpenSockets[e].next(r)})))})),share());e===this.firstEnv?this.firstOpenKeeperSubject.next(o):this.secondOpenKeeperSubject.next(o)}}},{key:"closeAfterComplete",value:function(e){return!!this.lastOpenSockets[e.env].isStopped&&(e.close(),!0)}}]),r}(createEventBase()),$Writer$1=minimal_1.Writer,$util$1=minimal_1.util,$root$1=minimal_1.roots.default||(minimal_1.roots.default={}),Session=$root$1.Session=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.prototype.elapse=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.prototype.appId="",e.prototype.ver="",e.prototype.buildno=0,e.prototype.installId="",e.prototype.os=0,e.prototype.did="",e.prototype.index=null,e.prototype.token="",e.prototype.version=0,e.prototype.subVersion=0,e.encode=function(e,t){return t||(t=$Writer$1.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.appId&&Object.hasOwnProperty.call(e,"appId")&&t.uint32(42).string(e.appId),null!=e.ver&&Object.hasOwnProperty.call(e,"ver")&&t.uint32(50).string(e.ver),null!=e.buildno&&Object.hasOwnProperty.call(e,"buildno")&&t.uint32(56).int32(e.buildno),null!=e.installId&&Object.hasOwnProperty.call(e,"installId")&&t.uint32(66).string(e.installId),null!=e.os&&Object.hasOwnProperty.call(e,"os")&&t.uint32(128).int32(e.os),null!=e.did&&Object.hasOwnProperty.call(e,"did")&&t.uint32(138).string(e.did),null!=e.index&&Object.hasOwnProperty.call(e,"index")&&$root$1.Session.CommonIndex.encode(e.index,t.uint32(162).fork()).ldelim(),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(170).string(e.token),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(176).int32(e.version),null!=e.subVersion&&Object.hasOwnProperty.call(e,"subVersion")&&t.uint32(184).int32(e.subVersion),t},e.CommonIndex=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.index1="",e.prototype.index2="",e.prototype.index3="",e.encode=function(e,t){return t||(t=$Writer$1.create()),null!=e.index1&&Object.hasOwnProperty.call(e,"index1")&&t.uint32(10).string(e.index1),null!=e.index2&&Object.hasOwnProperty.call(e,"index2")&&t.uint32(18).string(e.index2),null!=e.index3&&Object.hasOwnProperty.call(e,"index3")&&t.uint32(26).string(e.index3),t},e}(),e}(),Link=$root$1.Link=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.prototype.elapse=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.prototype.ec=0,e.prototype.sc=0,e.prototype.destServerIp="",e.prototype.ackedServerIp="",e.prototype.responseTime=0,e.encode=function(e,t){return t||(t=$Writer$1.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.ec&&Object.hasOwnProperty.call(e,"ec")&&t.uint32(40).int32(e.ec),null!=e.sc&&Object.hasOwnProperty.call(e,"sc")&&t.uint32(48).int32(e.sc),null!=e.destServerIp&&Object.hasOwnProperty.call(e,"destServerIp")&&t.uint32(58).string(e.destServerIp),null!=e.ackedServerIp&&Object.hasOwnProperty.call(e,"ackedServerIp")&&t.uint32(66).string(e.ackedServerIp),null!=e.responseTime&&Object.hasOwnProperty.call(e,"responseTime")&&t.uint32(72).int32(e.responseTime),t},e}(),Logout=$root$1.Logout=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.prototype.elapse=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.encode=function(e,t){return t||(t=$Writer$1.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),t},e}(),KickedOff=$root$1.KickedOff=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.prototype.elapse=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.prototype.linkId=0,e.prototype.code=0,e.prototype.server="",e.prototype.serverCode=0,e.encode=function(e,t){return t||(t=$Writer$1.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.linkId&&Object.hasOwnProperty.call(e,"linkId")&&t.uint32(48).int32(e.linkId),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(56).int32(e.code),null!=e.server&&Object.hasOwnProperty.call(e,"server")&&t.uint32(66).string(e.server),null!=e.serverCode&&Object.hasOwnProperty.call(e,"serverCode")&&t.uint32(72).int32(e.serverCode),t},e}(),ChnJoin=$root$1.ChnJoin=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.prototype.elapse=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.encode=function(e,t){return t||(t=$Writer$1.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),t},e}(),ChnJoinRes=$root$1.ChnJoinRes=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.prototype.elapse=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.prototype.serverErrCode=0,e.encode=function(e,t){return t||(t=$Writer$1.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),null!=e.serverErrCode&&Object.hasOwnProperty.call(e,"serverErrCode")&&t.uint32(64).int32(e.serverErrCode),t},e}(),ChnLeave=$root$1.ChnLeave=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.prototype.elapse=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.encode=function(e,t){return t||(t=$Writer$1.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),t},e}(),ConnectionStateChange=$root$1.ConnectionStateChange=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.prototype.elapse=$util$1.Long?$util$1.Long.fromBits(0,0,!1):0,e.prototype.oldState=0,e.prototype.newState=0,e.prototype.reason=0,e.prototype.reconnId=0,e.encode=function(e,t){return t||(t=$Writer$1.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.oldState&&Object.hasOwnProperty.call(e,"oldState")&&t.uint32(40).int32(e.oldState),null!=e.newState&&Object.hasOwnProperty.call(e,"newState")&&t.uint32(48).int32(e.newState),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(56).int32(e.reason),null!=e.reconnId&&Object.hasOwnProperty.call(e,"reconnId")&&t.uint32(64).int32(e.reconnId),t},e}(),ProtoPackets$1=Object.freeze({__proto__:null,Session:Session,Link:Link,Logout:Logout,KickedOff:KickedOff,ChnJoin:ChnJoin,ChnJoinRes:ChnJoinRes,ChnLeave:ChnLeave,ConnectionStateChange:ConnectionStateChange,default:$root$1}),Counter=1,ApiExec=154,Session$1=164,ApEvent=165,Link$1=166,Logout$1=167,TxMessage=168,RxMessage=169,KickedOff$1=170,TxMessageRes=171,ChnJoin$1=172,ChnJoinRes$1=173,ChnLeave$1=174,ChnGetMembers=175,ChnGetMembersRes=176,ChnMemberJoined=177,ChnMemberLeft=178,RenewToken=181,OperateAttribute=186,OperateAttributeRes=187,ApRequest=188,LinkTcpEvent=189,LinkLoginRequest=190,ConnectionStateChange$1=191,reportId={Counter:Counter,ApiExec:ApiExec,Session:Session$1,ApEvent:ApEvent,Link:Link$1,Logout:Logout$1,TxMessage:TxMessage,RxMessage:RxMessage,KickedOff:KickedOff$1,TxMessageRes:TxMessageRes,ChnJoin:ChnJoin$1,ChnJoinRes:ChnJoinRes$1,ChnLeave:ChnLeave$1,ChnGetMembers:ChnGetMembers,ChnGetMembersRes:ChnGetMembersRes,ChnMemberJoined:ChnMemberJoined,ChnMemberLeft:ChnMemberLeft,RenewToken:RenewToken,OperateAttribute:OperateAttribute,OperateAttributeRes:OperateAttributeRes,ApRequest:ApRequest,LinkTcpEvent:LinkTcpEvent,LinkLoginRequest:LinkLoginRequest,ConnectionStateChange:ConnectionStateChange$1},ReportId=Object.freeze({__proto__:null,Counter:Counter,ApiExec:ApiExec,Session:Session$1,ApEvent:ApEvent,Link:Link$1,Logout:Logout$1,TxMessage:TxMessage,RxMessage:RxMessage,KickedOff:KickedOff$1,TxMessageRes:TxMessageRes,ChnJoin:ChnJoin$1,ChnJoinRes:ChnJoinRes$1,ChnLeave:ChnLeave$1,ChnGetMembers:ChnGetMembers,ChnGetMembersRes:ChnGetMembersRes,ChnMemberJoined:ChnMemberJoined,ChnMemberLeft:ChnMemberLeft,RenewToken:RenewToken,OperateAttribute:OperateAttribute,OperateAttributeRes:OperateAttributeRes,ApRequest:ApRequest,LinkTcpEvent:LinkTcpEvent,LinkLoginRequest:LinkLoginRequest,ConnectionStateChange:ConnectionStateChange$1,default:reportId});function sendReport(e,t){return _sendReport.apply(this,arguments)}function _sendReport(){return(_sendReport=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,r){var n,i,o,a,s;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ProtoPackets$1[t].encode(r).finish(),i=Math.ceil(Date.now()/1e3).toString(),o=ReportId[t],a=0,s=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,postWithAbortSignal("https://webcollector-rtm.agora.io:6443/events/proto-raw?sentTs=".concat(i,"&id=").concat(o),{body:uint8ArrayToArrayBuffer(n),timeout:1e4,headers:{"Content-Type":"application/octet-stream"}});case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),(a+=1)<=2){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,s();case 11:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),e.prev=3,e.next=6,s();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function getElapse(e){return void 0===e?long_1.fromNumber(0):long_1.fromNumber(Date.now()-e)}var Context=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(e,n){var i;return _classCallCheck(this,r),(i=t.call(this,n,"Context")).appId=e,i._token=void 0,i._uid=void 0,i._sid=void 0,i._area=void 0,i}return _createClass(r,[{key:"token",set:function(e){this.log("The token is set to %s",e),this._token="string"==typeof e&&e?e:void 0}},{key:"uid",get:function(){if("string"==typeof this._uid&&this._uid)return this._uid;throw new RtmInternalError("Cannot get illegal uid")},set:function(e){if(this.log("The user ID is set to %s",e),!isValidId(e))throw new RtmInternalError;this._uid=e}},{key:"key",get:function(){if("string"==typeof this._token&&this._token)return this._token;if("string"==typeof this.appId&&this.appId)return this.appId;throw new RtmInternalError("Cannot get illegal key")}},{key:"sid",get:function(){if("string"==typeof this._sid&&this._sid)return this._sid;throw new RtmInternalError("Cannot get illegal sid")},set:function(e){if(this.log("sid is set to %s",e),"string"!=typeof e||!e)throw new RtmInternalError;this._sid=e}},{key:"area",get:function(){if("string"==typeof this._area&&this._area)return this._area;throw new RtmInternalError("Cannot get illegal area")},set:function(e){this.log("area is set to %s",e),this._area="string"==typeof e&&e?e:"CN"}}]),r}(createEventBase()),EndedInvitationLogMessage="The invitation has ended, skipped emitting the %s event",InvitationError=genError(),_class,_temp,failureReason=RtmStatusCode$1.LocalInvitationFailureReason,state=RtmStatusCode$1.LocalInvitationState,RtmLocalInvitation=(_temp=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(e,n,i){var o;return _classCallCheck(this,r),(o=t.call(this,i,"RtmLocalInvitation",!0)).calleeId=e,o.getSession=n,o.logger=i,o.state=state.IDLE,o.localInvitationEnd$=race(fromEvent(_assertThisInitialized(o),"LocalInvitationAccepted"),fromEvent(_assertThisInitialized(o),"LocalInvitationRefused"),fromEvent(_assertThisInitialized(o),"LocalInvitationFailure"),fromEvent(_assertThisInitialized(o),"LocalInvitationCanceled")).pipe(take(1)),o.callId=uuid_1.v4(),o._content="",o._channelId="",o._response="",o}return _createClass(r,[{key:"channelId",get:function(){return this._channelId},set:function(e){this.state===state.IDLE?(this.log("set channelId for %s",this.callId),this._channelId=e):this.info("set channelId only allow before invitation sent to remote")}},{key:"content",get:function(){return this._content},set:function(e){this.log("set content for %s",this.callId),this._content=e}},{key:"response",get:function(){return this._response},set:function(e){throw new RtmInvalidArgumentError('Cannot set the "response" of the LocalInvitation instance.',INVITATION_API_CALL_ERR_INVALID_ARGUMENT)}},{key:"send",value:function(){var e,t=this;if(this.state===state.SENT_TO_REMOTE||this.state===state.RECEIVED_BY_REMOTE)throw new RtmInvalidStatusError("The local invitation send failure. The call invitation has already been sent.",INVITATION_API_CALL_ERR_ALREADY_SENT);if(this.isLocalInvitationEnd())throw new RtmInvalidStatusError("The local invitation send failure. The call invitation has ended.",INVITATION_API_CALL_ERR_ALREADY_END);if(this._channelId.length>0&&!isValidId(this._channelId))throw new RtmInvalidArgumentError("Illegal invitation channel ID",INVITATION_API_CALL_ERR_INVALID_ARGUMENT);if(!isValidId(this.calleeId))throw new RtmInvalidArgumentError("Illegal invitation callee user ID",INVITATION_API_CALL_ERR_INVALID_ARGUMENT);if(getUtf8StringSize(this._content)>INVITATION_EXTRA_MAX_BYTES)throw new RtmInvalidArgumentError('The length of the "content" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',INVITATION_API_CALL_ERR_INVALID_ARGUMENT);this.state=state.SENT_TO_REMOTE,defer(_asyncToGenerator(_regeneratorRuntime.mark((function r(){var n,i,o;return _regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getSession().sendInvitationMessage({peerId:t.calleeId,callId:t.callId,extra:t._content,type:"CallInvite",channelId:t._channelId});case 2:if(n=r.sent,i=n.hasPeerReceived,o=n.hasReSent,!t.isLocalInvitationEnd()){r.next=7;break}throw new RtmTimeoutError("send invitation timeout");case 7:if(t.log("The local invitation has sent to the callee"),i||o){r.next=9;break}throw e=new InvitationError({PEER_NOT_ONLINE:"The peer of the invitation is not online"});case 9:if(i){r.next=11;break}throw e=new InvitationError({RESENT_AND_OFFLINE:"Resent and the peer of the invitation is not online"});case 11:case"end":return r.stop()}}),r)})))).pipe(retryWhen((function(e){return e.pipe(tap((function(e){if(!(e instanceof InvitationError))throw e})),delay(LOCAL_INVITATION_RESEND_INTERVAL))})),timeout(LOCAL_INVITATION_ACK_TIMEOUT),catchError((function(e){return isTimeout(e)&&t.warn("local invitation ack timed out"),throwError(e)})),takeUntil(this.localInvitationEnd$)).subscribe({next:function(){t.state!==state.RECEIVED_BY_REMOTE?t.state===state.SENT_TO_REMOTE?(t.info("The peer received the local invitation %s.",t.callId),t.state=state.RECEIVED_BY_REMOTE,t.emit("LocalInvitationReceivedByPeer"),t.localInvitationEnd$.pipe(timeout(INVITATION_EXPIRE_TIMEOUT),catchError((function(e){return isTimeout(e)&&t.warn("local invitation expired"),throwError(e)}))).subscribe({error:function(){t.state=state.FAILURE,t.emit("LocalInvitationFailure",failureReason.INVITATION_EXPIRE)}})):t.log(EndedInvitationLogMessage,"LocalInvitationReceivedByPeer"):t.log('The local invitation state is already "RECEIVED_BY_REMOTE", skipped emitting "LocalInvitationReceivedByPeer"')},error:function(r){t.isLocalInvitationEnd()?t.log(EndedInvitationLogMessage,"LocalInvitationFailure"):(t.state=state.FAILURE,isTimeout(r)&&e?"PEER_NOT_ONLINE"===e.code?t.emit("LocalInvitationFailure",failureReason.PEER_OFFLINE):"RESENT_AND_OFFLINE"===e.code&&t.emit("LocalInvitationFailure",failureReason.PEER_NO_RESPONSE):isTimeout(r)?t.emit("LocalInvitationFailure",failureReason.PEER_NO_RESPONSE):"RtmInvalidStatusError"===r.name?t.emit("LocalInvitationFailure",failureReason.NOT_LOGGEDIN):t.emit("LocalInvitationFailure",failureReason.UNKNOWN))}})}},{key:"cancel",value:function(){if(this.isLocalInvitationEnd())throw new RtmInvalidStatusError("The local invitation cancel failure",INVITATION_API_CALL_ERR_ALREADY_END);if(this.state===state.IDLE)throw new RtmInvalidStatusError("The local invitation has not been sent",INVITATION_API_CALL_ERR_NOT_STARTED);if(getUtf8StringSize(this._content)>INVITATION_EXTRA_MAX_BYTES)throw new RtmInvalidArgumentError('The length of the "content" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',INVITATION_API_CALL_ERR_INVALID_ARGUMENT);this.getSession().sendInvitationMessage({callId:this.callId,peerId:this.calleeId,type:"CallCancel",channelId:this._channelId,extra:this._content}),this.state=state.CANCELED,this.emit("LocalInvitationCanceled")}},{key:"onAcceptReceived",value:function(e){if(this.isLocalInvitationEnd()&&this.state!==state.ACCEPTED_BY_REMOTE)this.log(EndedInvitationLogMessage,"LocalInvitationAccepted");else{if(this.state===state.IDLE)throw new RtmInvalidStatusError("the local have not sent the invitation, how can remote accept it?");this.getSession().sendInvitationMessage({callId:this.callId,isAcceptAck:!0,type:"CallAccept",peerId:this.calleeId,channelId:this.channelId}),this.state!==state.ACCEPTED_BY_REMOTE?(this.state===state.SENT_TO_REMOTE&&(this.log("receive LocalInvitationAccepted before remote response to the invitation"),this.state=state.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this.state=state.ACCEPTED_BY_REMOTE,this._response=e,this.emit("LocalInvitationAccepted",e)):this.log("already in ACCEPTED_BY_REMOTE state, ignore emit ACCEPTED_BY_REMOTE")}}},{key:"onRefuseReceived",value:function(e){if(this.isLocalInvitationEnd())this.log(EndedInvitationLogMessage,"LocalInvitationRefused");else{if(this.state===state.IDLE)throw new RtmInvalidStatusError("the local have not sent the invitation, how can remote refuse it?");this.state===state.SENT_TO_REMOTE&&(this.log("receive LocalInvitationRefused before remote response to the invitation"),this.state=state.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this._response=e,this.state=state.REFUSED_BY_REMOTE,this.emit("LocalInvitationRefused",e)}}},{key:"isLocalInvitationEnd",value:function(){return[state.CANCELED,state.FAILURE,state.ACCEPTED_BY_REMOTE,state.REFUSED_BY_REMOTE].includes(this.state)}}]),r}(createEventBase()),_class=_temp,_applyDecoratedDescriptor(_class.prototype,"send",[logged],Object.getOwnPropertyDescriptor(_class.prototype,"send"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"cancel",[logged],Object.getOwnPropertyDescriptor(_class.prototype,"cancel"),_class.prototype),_class),RemoteInvitationFailureReason=RtmStatusCode$1.RemoteInvitationFailureReason,RemoteInvitationState=RtmStatusCode$1.RemoteInvitationState,RtmRemoteInvitation=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(e){var n,i=e.invitationChannel,o=e.extraContent,a=e.callId,s=e.callerId,u=e.logger,c=e.getSession;return _classCallCheck(this,r),(n=t.call(this,u,"RtmRemoteInvitation",!0)).state=RemoteInvitationState.INVITATION_RECEIVED,n.remoteInvitationEnd$=race(fromEvent(_assertThisInitialized(n),"RemoteInvitationCanceled"),fromEvent(_assertThisInitialized(n),"RemoteInvitationRefused"),fromEvent(_assertThisInitialized(n),"RemoteInvitationAccepted"),fromEvent(_assertThisInitialized(n),"RemoteInvitationFailure")).pipe(take(1)),n.callerId=void 0,n.callId=void 0,n._getSession=void 0,n.logger=void 0,n._content=void 0,n._channelId=void 0,n._response="",n._channelId=i,n._content=o,n.callId=a,n.callerId=s,n._getSession=c,n.logger=u,n.remoteInvitationEnd$.pipe(timeout(INVITATION_EXPIRE_TIMEOUT),catchError((function(e){return isTimeout(e)&&n.warn("Remote invitation expired"),throwError(e)}))).subscribe({error:function(){n.state=RemoteInvitationState.FAILURE,n.emit("RemoteInvitationFailure",RemoteInvitationFailureReason.INVITATION_EXPIRE)}}),n}return _createClass(r,[{key:"channelId",get:function(){return this._channelId},set:function(e){throw new RtmInvalidArgumentError('Cannot set the "response" of the RemoteInvitation instance.',INVITATION_API_CALL_ERR_INVALID_ARGUMENT)}},{key:"content",get:function(){return this._content},set:function(e){throw new RtmInvalidArgumentError('Cannot set the "content" of the RemoteInvitation instance.',INVITATION_API_CALL_ERR_INVALID_ARGUMENT)}},{key:"response",get:function(){return this._response},set:function(e){this._response=e}},{key:"accept",value:function(){var e,t=this;if(this.isRemoteInvitationEnd())throw new RtmInvalidStatusError("The local invitation has ended. Cannot accept.",INVITATION_API_CALL_ERR_ALREADY_END);if(this.state===RemoteInvitationState.ACCEPT_SENT_TO_LOCAL)throw new RtmInvalidStatusError("The remote invitation is accepting. Cannot do the operation.",INVITATION_API_CALL_ERR_ALREADY_ACCEPT);if(getUtf8StringSize(this._response)>INVITATION_EXTRA_MAX_BYTES)throw new RtmInvalidArgumentError('The length of the "response" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',INVITATION_API_CALL_ERR_INVALID_ARGUMENT);this.state=RemoteInvitationState.ACCEPT_SENT_TO_LOCAL,merge(interval(REMOTE_INVITATION_ACCEPT_RESEND_INTERVAL).pipe(mergeMap((function(){return defer(_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._getSession().sendInvitationMessage({peerId:t.callerId,callId:t.callId,extra:t.response,type:"CallAccept",isAcceptAck:!1,channelId:t.channelId}));case 1:case"end":return e.stop()}}),e)}))))})),filter((function(t){return e=t.hasPeerReceived})),take(1)),fromEvent(this,"RemoteInvitationAccepted")).pipe(timeout(REMOTE_INVITATION_WAIT_ACCEPT_ACK_TIMEOUT),takeUntil(this.remoteInvitationEnd$)).subscribe({error:function(r){if(t.logError(r),t.state=RemoteInvitationState.FAILURE,isTimeout(r))switch(e){case void 0:case!0:return void t.emit("RemoteInvitationFailure",RemoteInvitationFailureReason.ACCEPT_FAILURE);case!1:return void t.emit("RemoteInvitationFailure",RemoteInvitationFailureReason.PEER_OFFLINE)}t.emit("RemoteInvitationFailure",RemoteInvitationFailureReason.UNKNOWN)}})}},{key:"refuse",value:function(){if(this.state===RemoteInvitationState.ACCEPT_SENT_TO_LOCAL)throw new RtmInvalidStatusError("The remote invitation is accepting. Cannot do the operation.",INVITATION_API_CALL_ERR_ALREADY_ACCEPT);if(this.isRemoteInvitationEnd())throw new RtmInvalidStatusError("The invitation is end. Cannot refuse",INVITATION_API_CALL_ERR_ALREADY_END);if(getUtf8StringSize(this._response)>INVITATION_EXTRA_MAX_BYTES)throw new RtmInvalidArgumentError('The length of the "response" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',INVITATION_API_CALL_ERR_INVALID_ARGUMENT);this._getSession().sendInvitationMessage({peerId:this.callerId,callId:this.callId,extra:this.response,type:"CallReject",channelId:this.channelId}),this.state=RemoteInvitationState.REFUSED,this.emit("RemoteInvitationRefused")}},{key:"onCancelReceived",value:function(e){this.isRemoteInvitationEnd()?this.log(EndedInvitationLogMessage,"RemoteInvitationCanceled"):(this.state===RemoteInvitationState.ACCEPT_SENT_TO_LOCAL&&this.log("caller canceled before receive accept"),this._content=e,this.state=RemoteInvitationState.CANCELED,this.emit("RemoteInvitationCanceled",e))}},{key:"onAcceptAckReceived",value:function(){this.state===RemoteInvitationState.ACCEPT_SENT_TO_LOCAL?(this.state=RemoteInvitationState.ACCEPTED,this.emit("RemoteInvitationAccepted")):this.log(EndedInvitationLogMessage,"ori:".concat(this.state,", to: RemoteInvitationAccepted"))}},{key:"isRemoteInvitationEnd",value:function(){return[RemoteInvitationState.ACCEPTED,RemoteInvitationState.REFUSED,RemoteInvitationState.CANCELED,RemoteInvitationState.FAILURE].includes(this.state)}}]),r}(createEventBase());function compact(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i}var compact_1=compact,Z_FIXED=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2;function zero$1(e){for(var t=e.length;--t>=0;)e[t]=0}var STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array(2*(L_CODES+2));zero$1(static_ltree);var static_dtree=new Array(2*D_CODES);zero$1(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);var _length_code=new Array(MAX_MATCH-MIN_MATCH+1);zero$1(_length_code);var base_length=new Array(LENGTH_CODES);zero$1(base_length);var base_dist=new Array(D_CODES),static_l_desc,static_d_desc,static_bl_desc;function StaticTreeDesc(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function TreeDesc(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}zero$1(base_dist);var d_code=function(e){return e<256?_dist_code[e]:_dist_code[256+(e>>>7)]},put_short=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},send_bits=function(e,t,r){e.bi_valid>Buf_size-r?(e.bi_buf|=t<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=t>>Buf_size-e.bi_valid,e.bi_valid+=r-Buf_size):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},send_code=function(e,t,r){send_bits(e,r[2*t],r[2*t+1])},bi_reverse=function(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},bi_flush=function(e){16===e.bi_valid?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},gen_bitlen=function(e,t){var r,n,i,o,a,s,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,p=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,h=t.stat_desc.max_length,_=0;for(o=0;o<=MAX_BITS;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<HEAP_SIZE;r++)(o=u[2*u[2*(n=e.heap[r])+1]+1]+1)>h&&(o=h,_++),u[2*n+1]=o,n>c||(e.bl_count[o]++,a=0,n>=f&&(a=d[n-f]),s=u[2*n],e.opt_len+=s*(o+a),p&&(e.static_len+=s*(l[2*n+1]+a)));if(0!==_){do{for(o=h-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[h]--,_-=2}while(_>0);for(o=h;0!==o;o--)for(n=e.bl_count[o];0!==n;)(i=e.heap[--r])>c||(u[2*i+1]!==o&&(e.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}},gen_codes=function(e,t,r){var n,i,o=new Array(MAX_BITS+1),a=0;for(n=1;n<=MAX_BITS;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=bi_reverse(o[s]++,s))}},tr_static_init=function(){var e,t,r,n,i,o=new Array(MAX_BITS+1);for(r=0,n=0;n<LENGTH_CODES-1;n++)for(base_length[n]=r,e=0;e<1<<extra_lbits[n];e++)_length_code[r++]=n;for(_length_code[r-1]=n,i=0,n=0;n<16;n++)for(base_dist[n]=i,e=0;e<1<<extra_dbits[n];e++)_dist_code[i++]=n;for(i>>=7;n<D_CODES;n++)for(base_dist[n]=i<<7,e=0;e<1<<extra_dbits[n]-7;e++)_dist_code[256+i++]=n;for(t=0;t<=MAX_BITS;t++)o[t]=0;for(e=0;e<=143;)static_ltree[2*e+1]=8,e++,o[8]++;for(;e<=255;)static_ltree[2*e+1]=9,e++,o[9]++;for(;e<=279;)static_ltree[2*e+1]=7,e++,o[7]++;for(;e<=287;)static_ltree[2*e+1]=8,e++,o[8]++;for(gen_codes(static_ltree,L_CODES+1,o),e=0;e<D_CODES;e++)static_dtree[2*e+1]=5,static_dtree[2*e]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES,MAX_BL_BITS)},init_block=function(e){var t;for(t=0;t<L_CODES;t++)e.dyn_ltree[2*t]=0;for(t=0;t<D_CODES;t++)e.dyn_dtree[2*t]=0;for(t=0;t<BL_CODES;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*END_BLOCK]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},bi_windup=function(e){e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},copy_block=function(e,t,r,n){bi_windup(e),n&&(put_short(e,r),put_short(e,~r)),e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},smaller=function(e,t,r,n){var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]},pqdownheap=function(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&smaller(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!smaller(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},compress_block=function(e,t,r){var n,i,o,a,s=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===n?send_code(e,i,t):(o=_length_code[i],send_code(e,o+LITERALS+1,t),0!==(a=extra_lbits[o])&&(i-=base_length[o],send_bits(e,i,a)),n--,o=d_code(n),send_code(e,o,r),0!==(a=extra_dbits[o])&&(n-=base_dist[o],send_bits(e,n,a)))}while(s<e.last_lit);send_code(e,END_BLOCK,t)},build_tree=function(e,t){var r,n,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=HEAP_SIZE,r=0;r<u;r++)0!==o[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)pqdownheap(e,o,r);i=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,pqdownheap(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,t),gen_codes(o,c,e.bl_count)},scan_tree=function(e,t,r){var n,i,o=-1,a=t[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++s<u&&i===a||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*REP_3_6]++):s<=10?e.bl_tree[2*REPZ_3_10]++:e.bl_tree[2*REPZ_11_138]++,s=0,o=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4))},send_tree=function(e,t,r){var n,i,o=-1,a=t[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++s<u&&i===a)){if(s<c)do{send_code(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(send_code(e,i,e.bl_tree),s--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,s-3,2)):s<=10?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,s-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,s-11,7));s=0,o=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4)}},build_bl_tree=function(e){var t;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),t=BL_CODES-1;t>=3&&0===e.bl_tree[2*bl_order[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t},send_all_trees=function(e,t,r,n){var i;for(send_bits(e,t-257,5),send_bits(e,r-1,5),send_bits(e,n-4,4),i=0;i<n;i++)send_bits(e,e.bl_tree[2*bl_order[i]+1],3);send_tree(e,e.dyn_ltree,t-1),send_tree(e,e.dyn_dtree,r-1)},detect_data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return Z_BINARY;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Z_TEXT;for(t=32;t<LITERALS;t++)if(0!==e.dyn_ltree[2*t])return Z_TEXT;return Z_BINARY},static_init_done=!1,_tr_init=function(e){static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)},_tr_stored_block=function(e,t,r,n){send_bits(e,(STORED_BLOCK<<1)+(n?1:0),3),copy_block(e,t,r,!0)},_tr_align=function(e){send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)},_tr_flush_block=function(e,t,r,n){var i,o,a=0;e.level>0?(e.strm.data_type===Z_UNKNOWN&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),a=build_bl_tree(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==t?_tr_stored_block(e,t,r,n):e.strategy===Z_FIXED||o===i?(send_bits(e,(STATIC_TREES<<1)+(n?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(n?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),n&&bi_windup(e)},_tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(_length_code[r]+LITERALS+1)]++,e.dyn_dtree[2*d_code(t)]++),e.last_lit===e.lit_bufsize-1},_tr_init_1=_tr_init,_tr_stored_block_1=_tr_stored_block,_tr_flush_block_1=_tr_flush_block,_tr_tally_1=_tr_tally,_tr_align_1=_tr_align,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1},adler32=function(e,t,r,n){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{o=o+(i=i+t[n++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0},adler32_1=adler32,makeTable=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t},crcTable=new Uint32Array(makeTable()),crc32=function(e,t,r,n){var i=crcTable,o=n+r;e^=-1;for(var a=n;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},_tr_init$1=trees._tr_init,_tr_stored_block$1=trees._tr_stored_block,_tr_flush_block$1=trees._tr_flush_block,_tr_tally$1=trees._tr_tally,_tr_align$1=trees._tr_align,Z_NO_FLUSH=constants.Z_NO_FLUSH,Z_PARTIAL_FLUSH=constants.Z_PARTIAL_FLUSH,Z_FULL_FLUSH=constants.Z_FULL_FLUSH,Z_FINISH=constants.Z_FINISH,Z_BLOCK=constants.Z_BLOCK,Z_OK=constants.Z_OK,Z_STREAM_END=constants.Z_STREAM_END,Z_STREAM_ERROR=constants.Z_STREAM_ERROR,Z_DATA_ERROR=constants.Z_DATA_ERROR,Z_BUF_ERROR=constants.Z_BUF_ERROR,Z_DEFAULT_COMPRESSION=constants.Z_DEFAULT_COMPRESSION,Z_FILTERED=constants.Z_FILTERED,Z_HUFFMAN_ONLY=constants.Z_HUFFMAN_ONLY,Z_RLE=constants.Z_RLE,Z_FIXED$1=constants.Z_FIXED,Z_DEFAULT_STRATEGY=constants.Z_DEFAULT_STRATEGY,Z_UNKNOWN$1=constants.Z_UNKNOWN,Z_DEFLATED=constants.Z_DEFLATED,MAX_MEM_LEVEL=9,MAX_WBITS=15,DEF_MEM_LEVEL=8,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,MIN_MATCH$1=3,MAX_MATCH$1=258,MIN_LOOKAHEAD=MAX_MATCH$1+MIN_MATCH$1+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=function(e,t){return e.msg=messages[t],t},rank=function(e){return(e<<1)-(e>4?9:0)},zero$1$1=function(e){for(var t=e.length;--t>=0;)e[t]=0},HASH_ZLIB=function(e,t,r){return(t<<e.hash_shift^r)&e.hash_mask},HASH=HASH_ZLIB,flush_pending=function(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},flush_block_only=function(e,t){_tr_flush_block$1(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,flush_pending(e.strm)},put_byte=function(e,t){e.pending_buf[e.pending++]=t},putShortMSB=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},read_buf=function(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=adler32_1(e.adler,t,i,r):2===e.state.wrap&&(e.adler=crc32_1(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},longest_match=function(e,t){var r,n,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0,c=e.window,l=e.w_mask,p=e.prev,d=e.strstart+MAX_MATCH$1,f=c[o+a-1],h=c[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(r=t)+a]===h&&c[r+a-1]===f&&c[r]===c[o]&&c[++r]===c[o+1]){o+=2,r++;do{}while(c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&o<d);if(n=MAX_MATCH$1-(d-o),o=d-MAX_MATCH$1,n>a){if(e.match_start=t,a=n,n>=s)break;f=c[o+a-1],h=c[o+a]}}}while((t=p[t&l])>u&&0!=--i);return a<=e.lookahead?a:e.lookahead},fill_window=function(e){var t,r,n,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-MIN_LOOKAHEAD)){e.window.set(e.window.subarray(a,a+a),0),e.match_start-=a,e.strstart-=a,e.block_start-=a,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=a?n-a:0}while(--r);t=r=a;do{n=e.prev[--t],e.prev[t]=n>=a?n-a:0}while(--r);i+=a}if(0===e.strm.avail_in)break;if(r=read_buf(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,e.lookahead+e.insert>=MIN_MATCH$1)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=HASH(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=HASH(e,e.ins_h,e.window[o+MIN_MATCH$1-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<MIN_MATCH$1)););}while(e.lookahead<MIN_LOOKAHEAD&&0!==e.strm.avail_in)},deflate_stored=function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(fill_window(e),0===e.lookahead&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE;if(e.strstart-e.block_start>=e.w_size-MIN_LOOKAHEAD&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):(e.strstart>e.block_start&&(flush_block_only(e,!1),e.strm.avail_out),BS_NEED_MORE)},deflate_fast=function(e,t){for(var r,n;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}if(r=0,e.lookahead>=MIN_MATCH$1&&(e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH$1-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,r)),e.match_length>=MIN_MATCH$1)if(n=_tr_tally$1(e,e.strstart-e.match_start,e.match_length-MIN_MATCH$1),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH$1){e.match_length--;do{e.strstart++,e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH$1-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+1]);else n=_tr_tally$1(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=e.strstart<MIN_MATCH$1-1?e.strstart:MIN_MATCH$1-1,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=function(e,t){for(var r,n,i;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}if(r=0,e.lookahead>=MIN_MATCH$1&&(e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH$1-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=MIN_MATCH$1-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,r),e.match_length<=5&&(e.strategy===Z_FILTERED||e.match_length===MIN_MATCH$1&&e.strstart-e.match_start>4096)&&(e.match_length=MIN_MATCH$1-1)),e.prev_length>=MIN_MATCH$1&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-MIN_MATCH$1,n=_tr_tally$1(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH$1),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH$1-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=MIN_MATCH$1-1,e.strstart++,n&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}else if(e.match_available){if((n=_tr_tally$1(e,0,e.window[e.strstart-1]))&&flush_block_only(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return BS_NEED_MORE}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=_tr_tally$1(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<MIN_MATCH$1-1?e.strstart:MIN_MATCH$1-1,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=function(e,t){for(var r,n,i,o,a=e.window;;){if(e.lookahead<=MAX_MATCH$1){if(fill_window(e),e.lookahead<=MAX_MATCH$1&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=MIN_MATCH$1&&e.strstart>0&&((n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i])){o=e.strstart+MAX_MATCH$1;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);e.match_length=MAX_MATCH$1-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=MIN_MATCH$1?(r=_tr_tally$1(e,1,e.match_length-MIN_MATCH$1),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=_tr_tally$1(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=function(e,t){for(var r;;){if(0===e.lookahead&&(fill_window(e),0===e.lookahead)){if(t===Z_NO_FLUSH)return BS_NEED_MORE;break}if(e.match_length=0,r=_tr_tally$1(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}var configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=function(e){e.window_size=2*e.w_size,zero$1$1(e.head),e.max_lazy_match=configuration_table[e.level].max_lazy,e.good_match=configuration_table[e.level].good_length,e.nice_match=configuration_table[e.level].nice_length,e.max_chain_length=configuration_table[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=MIN_MATCH$1-1,e.match_available=0,e.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*HEAP_SIZE$1),this.dyn_dtree=new Uint16Array(2*(2*D_CODES$1+1)),this.bl_tree=new Uint16Array(2*(2*BL_CODES$1+1)),zero$1$1(this.dyn_ltree),zero$1$1(this.dyn_dtree),zero$1$1(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS$1+1),this.heap=new Uint16Array(2*L_CODES$1+1),zero$1$1(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES$1+1),zero$1$1(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var deflateResetKeep=function(e){if(!e||!e.state)return err(e,Z_STREAM_ERROR);e.total_in=e.total_out=0,e.data_type=Z_UNKNOWN$1;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?INIT_STATE:BUSY_STATE,e.adler=2===t.wrap?0:1,t.last_flush=Z_NO_FLUSH,_tr_init$1(t),Z_OK},deflateReset=function(e){var t=deflateResetKeep(e);return t===Z_OK&&lm_init(e.state),t},deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?Z_STREAM_ERROR:(e.state.gzhead=t,Z_OK):Z_STREAM_ERROR},deflateInit2=function(e,t,r,n,i,o){if(!e)return Z_STREAM_ERROR;var a=1;if(t===Z_DEFAULT_COMPRESSION&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>MAX_MEM_LEVEL||r!==Z_DEFLATED||n<8||n>15||t<0||t>9||o<0||o>Z_FIXED$1)return err(e,Z_STREAM_ERROR);8===n&&(n=9);var s=new DeflateState;return e.state=s,s.strm=e,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+MIN_MATCH$1-1)/MIN_MATCH$1),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=o,s.method=r,deflateReset(e)},deflateInit=function(e,t){return deflateInit2(e,t,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY)},deflate=function(e,t){var r,n;if(!e||!e.state||t>Z_BLOCK||t<0)return e?err(e,Z_STREAM_ERROR):Z_STREAM_ERROR;var i=e.state;if(!e.output||!e.input&&0!==e.avail_in||i.status===FINISH_STATE&&t!==Z_FINISH)return err(e,0===e.avail_out?Z_BUF_ERROR:Z_STREAM_ERROR);i.strm=e;var o=i.last_flush;if(i.last_flush=t,i.status===INIT_STATE)if(2===i.wrap)e.adler=0,put_byte(i,31),put_byte(i,139),put_byte(i,8),i.gzhead?(put_byte(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),put_byte(i,255&i.gzhead.time),put_byte(i,i.gzhead.time>>8&255),put_byte(i,i.gzhead.time>>16&255),put_byte(i,i.gzhead.time>>24&255),put_byte(i,9===i.level?2:i.strategy>=Z_HUFFMAN_ONLY||i.level<2?4:0),put_byte(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(put_byte(i,255&i.gzhead.extra.length),put_byte(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=crc32_1(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=EXTRA_STATE):(put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,9===i.level?2:i.strategy>=Z_HUFFMAN_ONLY||i.level<2?4:0),put_byte(i,OS_CODE),i.status=BUSY_STATE);else{var a=Z_DEFLATED+(i.w_bits-8<<4)<<8;a|=(i.strategy>=Z_HUFFMAN_ONLY||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(a|=PRESET_DICT),a+=31-a%31,i.status=BUSY_STATE,putShortMSB(i,a),0!==i.strstart&&(putShortMSB(i,e.adler>>>16),putShortMSB(i,65535&e.adler)),e.adler=1}if(i.status===EXTRA_STATE)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32_1(e.adler,i.pending_buf,i.pending-r,r)),flush_pending(e),r=i.pending,i.pending!==i.pending_buf_size));)put_byte(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32_1(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=NAME_STATE)}else i.status=NAME_STATE;if(i.status===NAME_STATE)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32_1(e.adler,i.pending_buf,i.pending-r,r)),flush_pending(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,put_byte(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32_1(e.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.gzindex=0,i.status=COMMENT_STATE)}else i.status=COMMENT_STATE;if(i.status===COMMENT_STATE)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32_1(e.adler,i.pending_buf,i.pending-r,r)),flush_pending(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,put_byte(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32_1(e.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.status=HCRC_STATE)}else i.status=HCRC_STATE;if(i.status===HCRC_STATE&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&flush_pending(e),i.pending+2<=i.pending_buf_size&&(put_byte(i,255&e.adler),put_byte(i,e.adler>>8&255),e.adler=0,i.status=BUSY_STATE)):i.status=BUSY_STATE),0!==i.pending){if(flush_pending(e),0===e.avail_out)return i.last_flush=-1,Z_OK}else if(0===e.avail_in&&rank(t)<=rank(o)&&t!==Z_FINISH)return err(e,Z_BUF_ERROR);if(i.status===FINISH_STATE&&0!==e.avail_in)return err(e,Z_BUF_ERROR);if(0!==e.avail_in||0!==i.lookahead||t!==Z_NO_FLUSH&&i.status!==FINISH_STATE){var s=i.strategy===Z_HUFFMAN_ONLY?deflate_huff(i,t):i.strategy===Z_RLE?deflate_rle(i,t):configuration_table[i.level].func(i,t);if(s!==BS_FINISH_STARTED&&s!==BS_FINISH_DONE||(i.status=FINISH_STATE),s===BS_NEED_MORE||s===BS_FINISH_STARTED)return 0===e.avail_out&&(i.last_flush=-1),Z_OK;if(s===BS_BLOCK_DONE&&(t===Z_PARTIAL_FLUSH?_tr_align$1(i):t!==Z_BLOCK&&(_tr_stored_block$1(i,0,0,!1),t===Z_FULL_FLUSH&&(zero$1$1(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),flush_pending(e),0===e.avail_out))return i.last_flush=-1,Z_OK}return t!==Z_FINISH?Z_OK:i.wrap<=0?Z_STREAM_END:(2===i.wrap?(put_byte(i,255&e.adler),put_byte(i,e.adler>>8&255),put_byte(i,e.adler>>16&255),put_byte(i,e.adler>>24&255),put_byte(i,255&e.total_in),put_byte(i,e.total_in>>8&255),put_byte(i,e.total_in>>16&255),put_byte(i,e.total_in>>24&255)):(putShortMSB(i,e.adler>>>16),putShortMSB(i,65535&e.adler)),flush_pending(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?Z_OK:Z_STREAM_END)},deflateEnd=function(e){if(!e||!e.state)return Z_STREAM_ERROR;var t=e.state.status;return t!==INIT_STATE&&t!==EXTRA_STATE&&t!==NAME_STATE&&t!==COMMENT_STATE&&t!==HCRC_STATE&&t!==BUSY_STATE&&t!==FINISH_STATE?err(e,Z_STREAM_ERROR):(e.state=null,t===BUSY_STATE?err(e,Z_DATA_ERROR):Z_OK)},deflateSetDictionary=function(e,t){var r=t.length;if(!e||!e.state)return Z_STREAM_ERROR;var n=e.state,i=n.wrap;if(2===i||1===i&&n.status!==INIT_STATE||n.lookahead)return Z_STREAM_ERROR;if(1===i&&(e.adler=adler32_1(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===i&&(zero$1$1(n.head),n.strstart=0,n.block_start=0,n.insert=0);var o=new Uint8Array(n.w_size);o.set(t.subarray(r-n.w_size,r),0),t=o,r=n.w_size}var a=e.avail_in,s=e.next_in,u=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,fill_window(n);n.lookahead>=MIN_MATCH$1;){var c=n.strstart,l=n.lookahead-(MIN_MATCH$1-1);do{n.ins_h=HASH(n,n.ins_h,n.window[c+MIN_MATCH$1-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++}while(--l);n.strstart=c,n.lookahead=MIN_MATCH$1-1,fill_window(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=MIN_MATCH$1-1,n.match_available=0,e.next_in=s,e.input=u,e.avail_in=a,n.wrap=i,Z_OK},deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2=deflate,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo:deflateInfo},_has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=_typeof(r))throw new TypeError(r+"must be non-object");for(var n in r)_has(r,n)&&(e[n]=r[n])}}return e},flattenChunks=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var i=new Uint8Array(t),o=0,a=0,s=e.length;o<s;o++){var u=e[o];i.set(u,a),a+=u.length}return i},common$1={assign:assign,flattenChunks:flattenChunks},STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){STR_APPLY_UIA_OK=!1}for(var _utf8len=new Uint8Array(256),e=0;e<256;e++)_utf8len[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=function(e){var t,r,n,i,o,a=e.length,s=0;for(i=0;i<a;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&(56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&(56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|63&r):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t},buf2binstring=function(e,t){if(t<65534&&e.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r},buf2string=function(e,t){var r,n,i=t||e.length,o=new Array(2*i);for(n=0,r=0;r<i;){var a=e[r++];if(a<128)o[n++]=a;else{var s=_utf8len[a];if(s>4)o[n++]=65533,r+=s-1;else{for(a&=2===s?31:3===s?15:7;s>1&&r<i;)a=a<<6|63&e[r++],s--;s>1?o[n++]=65533:a<65536?o[n++]=a:(a-=65536,o[n++]=55296|a>>10&1023,o[n++]=56320|1023&a)}}}return buf2binstring(o,n)},utf8border=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+_utf8len[e[r]]>t?r:t},strings={string2buf:string2buf,buf2string:buf2string,utf8border:utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream,toString$1=Object.prototype.toString,Z_NO_FLUSH$1=constants.Z_NO_FLUSH,Z_SYNC_FLUSH=constants.Z_SYNC_FLUSH,Z_FULL_FLUSH$1=constants.Z_FULL_FLUSH,Z_FINISH$1=constants.Z_FINISH,Z_OK$1=constants.Z_OK,Z_STREAM_END$1=constants.Z_STREAM_END,Z_DEFAULT_COMPRESSION$1=constants.Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY$1=constants.Z_DEFAULT_STRATEGY,Z_DEFLATED$1=constants.Z_DEFLATED;function Deflate(e){this.options=common$1.assign({level:Z_DEFAULT_COMPRESSION$1,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY$1},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;var r=deflate_1.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Z_OK$1)throw new Error(messages[r]);if(t.header&&deflate_1.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n="string"==typeof t.dictionary?strings.string2buf(t.dictionary):"[object ArrayBuffer]"===toString$1.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=deflate_1.deflateSetDictionary(this.strm,n))!==Z_OK$1)throw new Error(messages[r]);this._dict_set=!0}}function deflate$1(e,t){var r=new Deflate(t);if(r.push(e,!0),r.err)throw r.msg||messages[r.err];return r.result}function deflateRaw(e,t){return(t=t||{}).raw=!0,deflate$1(e,t)}function gzip(e,t){return(t=t||{}).gzip=!0,deflate$1(e,t)}Deflate.prototype.push=function(e,t){var r,n,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;for(n=t===~~t?t:!0===t?Z_FINISH$1:Z_NO_FLUSH$1,"string"==typeof e?i.input=strings.string2buf(e):"[object ArrayBuffer]"===toString$1.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(n===Z_SYNC_FLUSH||n===Z_FULL_FLUSH$1)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if((r=deflate_1.deflate(i,n))===Z_STREAM_END$1)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),r=deflate_1.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Z_OK$1;if(0!==i.avail_out){if(n>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},Deflate.prototype.onData=function(e){this.chunks.push(e)},Deflate.prototype.onEnd=function(e){e===Z_OK$1&&(this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var deflate_1$1={Deflate:Deflate,deflate:deflate$1,deflateRaw:deflateRaw,gzip:gzip,constants:constants},BAD=30,TYPE=12,inffast=function(e,t){var r,n,i,o,a,s,u,c,l,p,d,f,h,_,g,v,b,m,y,E,T,R,w,S,I=e.state;r=e.next_in,w=e.input,n=r+(e.avail_in-5),i=e.next_out,S=e.output,o=i-(t-e.avail_out),a=i+(e.avail_out-257),s=I.dmax,u=I.wsize,c=I.whave,l=I.wnext,p=I.window,d=I.hold,f=I.bits,h=I.lencode,_=I.distcode,g=(1<<I.lenbits)-1,v=(1<<I.distbits)-1;e:do{f<15&&(d+=w[r++]<<f,f+=8,d+=w[r++]<<f,f+=8),b=h[d&g];t:for(;;){if(d>>>=m=b>>>24,f-=m,0===(m=b>>>16&255))S[i++]=65535&b;else{if(!(16&m)){if(0==(64&m)){b=h[(65535&b)+(d&(1<<m)-1)];continue t}if(32&m){I.mode=TYPE;break e}e.msg="invalid literal/length code",I.mode=BAD;break e}y=65535&b,(m&=15)&&(f<m&&(d+=w[r++]<<f,f+=8),y+=d&(1<<m)-1,d>>>=m,f-=m),f<15&&(d+=w[r++]<<f,f+=8,d+=w[r++]<<f,f+=8),b=_[d&v];r:for(;;){if(d>>>=m=b>>>24,f-=m,!(16&(m=b>>>16&255))){if(0==(64&m)){b=_[(65535&b)+(d&(1<<m)-1)];continue r}e.msg="invalid distance code",I.mode=BAD;break e}if(E=65535&b,f<(m&=15)&&(d+=w[r++]<<f,(f+=8)<m&&(d+=w[r++]<<f,f+=8)),(E+=d&(1<<m)-1)>s){e.msg="invalid distance too far back",I.mode=BAD;break e}if(d>>>=m,f-=m,E>(m=i-o)){if((m=E-m)>c&&I.sane){e.msg="invalid distance too far back",I.mode=BAD;break e}if(T=0,R=p,0===l){if(T+=u-m,m<y){y-=m;do{S[i++]=p[T++]}while(--m);T=i-E,R=S}}else if(l<m){if(T+=u+l-m,(m-=l)<y){y-=m;do{S[i++]=p[T++]}while(--m);if(T=0,l<y){y-=m=l;do{S[i++]=p[T++]}while(--m);T=i-E,R=S}}}else if(T+=l-m,m<y){y-=m;do{S[i++]=p[T++]}while(--m);T=i-E,R=S}for(;y>2;)S[i++]=R[T++],S[i++]=R[T++],S[i++]=R[T++],y-=3;y&&(S[i++]=R[T++],y>1&&(S[i++]=R[T++]))}else{T=i-E;do{S[i++]=S[T++],S[i++]=S[T++],S[i++]=S[T++],y-=3}while(y>2);y&&(S[i++]=S[T++],y>1&&(S[i++]=S[T++]))}break}}break}}while(r<n&&i<a);r-=y=f>>3,d&=(1<<(f-=y<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<a?a-i+257:257-(i-a),I.hold=d,I.bits=f},MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=function(e,t,r,n,i,o,a,s){var u,c,l,p,d,f,h,_,g,v=s.bits,b=0,m=0,y=0,E=0,T=0,R=0,w=0,S=0,I=0,A=0,O=null,C=0,x=new Uint16Array(MAXBITS+1),N=new Uint16Array(MAXBITS+1),k=null,L=0;for(b=0;b<=MAXBITS;b++)x[b]=0;for(m=0;m<n;m++)x[t[r+m]]++;for(T=v,E=MAXBITS;E>=1&&0===x[E];E--);if(T>E&&(T=E),0===E)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(y=1;y<E&&0===x[y];y++);for(T<y&&(T=y),S=1,b=1;b<=MAXBITS;b++)if(S<<=1,(S-=x[b])<0)return-1;if(S>0&&(e===CODES||1!==E))return-1;for(N[1]=0,b=1;b<MAXBITS;b++)N[b+1]=N[b]+x[b];for(m=0;m<n;m++)0!==t[r+m]&&(a[N[t[r+m]]++]=m);if(e===CODES?(O=k=a,f=19):e===LENS?(O=lbase,C-=257,k=lext,L-=257,f=256):(O=dbase,k=dext,f=-1),A=0,m=0,b=y,d=o,R=T,w=0,l=-1,p=(I=1<<T)-1,e===LENS&&I>ENOUGH_LENS||e===DISTS&&I>ENOUGH_DISTS)return 1;for(;;){h=b-w,a[m]<f?(_=0,g=a[m]):a[m]>f?(_=k[L+a[m]],g=O[C+a[m]]):(_=96,g=0),u=1<<b-w,y=c=1<<R;do{i[d+(A>>w)+(c-=u)]=h<<24|_<<16|g|0}while(0!==c);for(u=1<<b-1;A&u;)u>>=1;if(0!==u?(A&=u-1,A+=u):A=0,m++,0==--x[b]){if(b===E)break;b=t[r+a[m]]}if(b>T&&(A&p)!==l){for(0===w&&(w=T),d+=y,S=1<<(R=b-w);R+w<E&&!((S-=x[R+w])<=0);)R++,S<<=1;if(I+=1<<R,e===LENS&&I>ENOUGH_LENS||e===DISTS&&I>ENOUGH_DISTS)return 1;i[l=A&p]=T<<24|R<<16|d-o|0}}return 0!==A&&(i[d+A]=b-w<<24|64<<16|0),s.bits=T,0},inftrees=inflate_table,CODES$1=0,LENS$1=1,DISTS$1=2,Z_FINISH$2=constants.Z_FINISH,Z_BLOCK$1=constants.Z_BLOCK,Z_TREES=constants.Z_TREES,Z_OK$2=constants.Z_OK,Z_STREAM_END$2=constants.Z_STREAM_END,Z_NEED_DICT=constants.Z_NEED_DICT,Z_STREAM_ERROR$1=constants.Z_STREAM_ERROR,Z_DATA_ERROR$1=constants.Z_DATA_ERROR,Z_MEM_ERROR=constants.Z_MEM_ERROR,Z_BUF_ERROR$1=constants.Z_BUF_ERROR,Z_DEFLATED$2=constants.Z_DEFLATED,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE$1=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD$1=30,MEM=31,SYNC=32,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,MAX_WBITS$1=15,DEF_WBITS=MAX_WBITS$1,zswap32=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var inflateResetKeep=function(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ENOUGH_LENS$1),t.distcode=t.distdyn=new Int32Array(ENOUGH_DISTS$1),t.sane=1,t.back=-1,Z_OK$2},inflateReset=function(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)},inflateReset2=function(e,t){var r;if(!e||!e.state)return Z_STREAM_ERROR$1;var n=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR$1:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,inflateReset(e))},inflateInit2=function(e,t){if(!e)return Z_STREAM_ERROR$1;var r=new InflateState;e.state=r,r.window=null;var n=inflateReset2(e,t);return n!==Z_OK$2&&(e.state=null),n},inflateInit=function(e){return inflateInit2(e,DEF_WBITS)},virgin=!0,lenfix,distfix,fixedtables=function(e){if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inftrees(LENS$1,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inftrees(DISTS$1,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5},updatewindow=function(e,t,r,n){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),(n-=i)?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},inflate=function(e,t){var r,n,i,o,a,s,u,c,l,p,d,f,h,_,g,v,b,m,y,E,T,R,w,S,I=0,A=new Uint8Array(4),O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR$1;(r=e.state).mode===TYPE$1&&(r.mode=TYPEDO),a=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,c=r.hold,l=r.bits,p=s,d=u,R=Z_OK$2;e:for(;;)switch(r.mode){case HEAD:if(0===r.wrap){r.mode=TYPEDO;break}for(;l<16;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(2&r.wrap&&35615===c){r.check=0,A[0]=255&c,A[1]=c>>>8&255,r.check=crc32_1(r.check,A,2,0),c=0,l=0,r.mode=FLAGS;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=BAD$1;break}if((15&c)!==Z_DEFLATED$2){e.msg="unknown compression method",r.mode=BAD$1;break}if(l-=4,T=8+(15&(c>>>=4)),0===r.wbits)r.wbits=T;else if(T>r.wbits){e.msg="invalid window size",r.mode=BAD$1;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&c?DICTID:TYPE$1,c=0,l=0;break;case FLAGS:for(;l<16;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(r.flags=c,(255&r.flags)!==Z_DEFLATED$2){e.msg="unknown compression method",r.mode=BAD$1;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=BAD$1;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&(A[0]=255&c,A[1]=c>>>8&255,r.check=crc32_1(r.check,A,2,0)),c=0,l=0,r.mode=TIME;case TIME:for(;l<32;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}r.head&&(r.head.time=c),512&r.flags&&(A[0]=255&c,A[1]=c>>>8&255,A[2]=c>>>16&255,A[3]=c>>>24&255,r.check=crc32_1(r.check,A,4,0)),c=0,l=0,r.mode=OS;case OS:for(;l<16;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&(A[0]=255&c,A[1]=c>>>8&255,r.check=crc32_1(r.check,A,2,0)),c=0,l=0,r.mode=EXLEN;case EXLEN:if(1024&r.flags){for(;l<16;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&(A[0]=255&c,A[1]=c>>>8&255,r.check=crc32_1(r.check,A,2,0)),c=0,l=0}else r.head&&(r.head.extra=null);r.mode=EXTRA;case EXTRA:if(1024&r.flags&&((f=r.length)>s&&(f=s),f&&(r.head&&(T=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+f),T)),512&r.flags&&(r.check=crc32_1(r.check,n,f,o)),s-=f,o+=f,r.length-=f),r.length))break e;r.length=0,r.mode=NAME;case NAME:if(2048&r.flags){if(0===s)break e;f=0;do{T=n[o+f++],r.head&&T&&r.length<65536&&(r.head.name+=String.fromCharCode(T))}while(T&&f<s);if(512&r.flags&&(r.check=crc32_1(r.check,n,f,o)),s-=f,o+=f,T)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=COMMENT;case COMMENT:if(4096&r.flags){if(0===s)break e;f=0;do{T=n[o+f++],r.head&&T&&r.length<65536&&(r.head.comment+=String.fromCharCode(T))}while(T&&f<s);if(512&r.flags&&(r.check=crc32_1(r.check,n,f,o)),s-=f,o+=f,T)break e}else r.head&&(r.head.comment=null);r.mode=HCRC;case HCRC:if(512&r.flags){for(;l<16;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=BAD$1;break}c=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=TYPE$1;break;case DICTID:for(;l<32;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}e.adler=r.check=zswap32(c),c=0,l=0,r.mode=DICT;case DICT:if(0===r.havedict)return e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=s,r.hold=c,r.bits=l,Z_NEED_DICT;e.adler=r.check=1,r.mode=TYPE$1;case TYPE$1:if(t===Z_BLOCK$1||t===Z_TREES)break e;case TYPEDO:if(r.last){c>>>=7&l,l-=7&l,r.mode=CHECK;break}for(;l<3;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}switch(r.last=1&c,l-=1,3&(c>>>=1)){case 0:r.mode=STORED;break;case 1:if(fixedtables(r),r.mode=LEN_,t===Z_TREES){c>>>=2,l-=2;break e}break;case 2:r.mode=TABLE;break;case 3:e.msg="invalid block type",r.mode=BAD$1}c>>>=2,l-=2;break;case STORED:for(c>>>=7&l,l-=7&l;l<32;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=BAD$1;break}if(r.length=65535&c,c=0,l=0,r.mode=COPY_,t===Z_TREES)break e;case COPY_:r.mode=COPY;case COPY:if(f=r.length){if(f>s&&(f=s),f>u&&(f=u),0===f)break e;i.set(n.subarray(o,o+f),a),s-=f,o+=f,u-=f,a+=f,r.length-=f;break}r.mode=TYPE$1;break;case TABLE:for(;l<14;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(r.nlen=257+(31&c),c>>>=5,l-=5,r.ndist=1+(31&c),c>>>=5,l-=5,r.ncode=4+(15&c),c>>>=4,l-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=BAD$1;break}r.have=0,r.mode=LENLENS;case LENLENS:for(;r.have<r.ncode;){for(;l<3;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}r.lens[O[r.have++]]=7&c,c>>>=3,l-=3}for(;r.have<19;)r.lens[O[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,w={bits:r.lenbits},R=inftrees(CODES$1,r.lens,0,19,r.lencode,0,r.work,w),r.lenbits=w.bits,R){e.msg="invalid code lengths set",r.mode=BAD$1;break}r.have=0,r.mode=CODELENS;case CODELENS:for(;r.have<r.nlen+r.ndist;){for(;v=(I=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,b=65535&I,!((g=I>>>24)<=l);){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(b<16)c>>>=g,l-=g,r.lens[r.have++]=b;else{if(16===b){for(S=g+2;l<S;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(c>>>=g,l-=g,0===r.have){e.msg="invalid bit length repeat",r.mode=BAD$1;break}T=r.lens[r.have-1],f=3+(3&c),c>>>=2,l-=2}else if(17===b){for(S=g+3;l<S;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}l-=g,T=0,f=3+(7&(c>>>=g)),c>>>=3,l-=3}else{for(S=g+7;l<S;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}l-=g,T=0,f=11+(127&(c>>>=g)),c>>>=7,l-=7}if(r.have+f>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=BAD$1;break}for(;f--;)r.lens[r.have++]=T}}if(r.mode===BAD$1)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=BAD$1;break}if(r.lenbits=9,w={bits:r.lenbits},R=inftrees(LENS$1,r.lens,0,r.nlen,r.lencode,0,r.work,w),r.lenbits=w.bits,R){e.msg="invalid literal/lengths set",r.mode=BAD$1;break}if(r.distbits=6,r.distcode=r.distdyn,w={bits:r.distbits},R=inftrees(DISTS$1,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,w),r.distbits=w.bits,R){e.msg="invalid distances set",r.mode=BAD$1;break}if(r.mode=LEN_,t===Z_TREES)break e;case LEN_:r.mode=LEN;case LEN:if(s>=6&&u>=258){e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=s,r.hold=c,r.bits=l,inffast(e,d),a=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,c=r.hold,l=r.bits,r.mode===TYPE$1&&(r.back=-1);break}for(r.back=0;v=(I=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,b=65535&I,!((g=I>>>24)<=l);){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(v&&0==(240&v)){for(m=g,y=v,E=b;v=(I=r.lencode[E+((c&(1<<m+y)-1)>>m)])>>>16&255,b=65535&I,!(m+(g=I>>>24)<=l);){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}c>>>=m,l-=m,r.back+=m}if(c>>>=g,l-=g,r.back+=g,r.length=b,0===v){r.mode=LIT;break}if(32&v){r.back=-1,r.mode=TYPE$1;break}if(64&v){e.msg="invalid literal/length code",r.mode=BAD$1;break}r.extra=15&v,r.mode=LENEXT;case LENEXT:if(r.extra){for(S=r.extra;l<S;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=DIST;case DIST:for(;v=(I=r.distcode[c&(1<<r.distbits)-1])>>>16&255,b=65535&I,!((g=I>>>24)<=l);){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(0==(240&v)){for(m=g,y=v,E=b;v=(I=r.distcode[E+((c&(1<<m+y)-1)>>m)])>>>16&255,b=65535&I,!(m+(g=I>>>24)<=l);){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}c>>>=m,l-=m,r.back+=m}if(c>>>=g,l-=g,r.back+=g,64&v){e.msg="invalid distance code",r.mode=BAD$1;break}r.offset=b,r.extra=15&v,r.mode=DISTEXT;case DISTEXT:if(r.extra){for(S=r.extra;l<S;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=BAD$1;break}r.mode=MATCH;case MATCH:if(0===u)break e;if(f=d-u,r.offset>f){if((f=r.offset-f)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=BAD$1;break}f>r.wnext?(f-=r.wnext,h=r.wsize-f):h=r.wnext-f,f>r.length&&(f=r.length),_=r.window}else _=i,h=a-r.offset,f=r.length;f>u&&(f=u),u-=f,r.length-=f;do{i[a++]=_[h++]}while(--f);0===r.length&&(r.mode=LEN);break;case LIT:if(0===u)break e;i[a++]=r.length,u--,r.mode=LEN;break;case CHECK:if(r.wrap){for(;l<32;){if(0===s)break e;s--,c|=n[o++]<<l,l+=8}if(d-=u,e.total_out+=d,r.total+=d,d&&(e.adler=r.check=r.flags?crc32_1(r.check,i,d,a-d):adler32_1(r.check,i,d,a-d)),d=u,(r.flags?c:zswap32(c))!==r.check){e.msg="incorrect data check",r.mode=BAD$1;break}c=0,l=0}r.mode=LENGTH;case LENGTH:if(r.wrap&&r.flags){for(;l<32;){if(0===s)break e;s--,c+=n[o++]<<l,l+=8}if(c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=BAD$1;break}c=0,l=0}r.mode=DONE;case DONE:R=Z_STREAM_END$2;break e;case BAD$1:R=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR$1}return e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=s,r.hold=c,r.bits=l,(r.wsize||d!==e.avail_out&&r.mode<BAD$1&&(r.mode<CHECK||t!==Z_FINISH$2))&&updatewindow(e,e.output,e.next_out,d-e.avail_out),p-=e.avail_in,d-=e.avail_out,e.total_in+=p,e.total_out+=d,r.total+=d,r.wrap&&d&&(e.adler=r.check=r.flags?crc32_1(r.check,i,d,e.next_out-d):adler32_1(r.check,i,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===TYPE$1?128:0)+(r.mode===LEN_||r.mode===COPY_?256:0),(0===p&&0===d||t===Z_FINISH$2)&&R===Z_OK$2&&(R=Z_BUF_ERROR$1),R},inflateEnd=function(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$2},inflateGetHeader=function(e,t){if(!e||!e.state)return Z_STREAM_ERROR$1;var r=e.state;return 0==(2&r.wrap)?Z_STREAM_ERROR$1:(r.head=t,t.done=!1,Z_OK$2)},inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&r.mode!==DICT?Z_STREAM_ERROR$1:r.mode===DICT&&adler32_1(1,t,n,0)!==r.check?Z_DATA_ERROR$1:updatewindow(e,t,n,n)?(r.mode=MEM,Z_MEM_ERROR):(r.havedict=1,Z_OK$2):Z_STREAM_ERROR$1},inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2=inflate,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo:inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader,toString$1$1=Object.prototype.toString,Z_NO_FLUSH$2=constants.Z_NO_FLUSH,Z_FINISH$3=constants.Z_FINISH,Z_OK$3=constants.Z_OK,Z_STREAM_END$3=constants.Z_STREAM_END,Z_NEED_DICT$1=constants.Z_NEED_DICT,Z_STREAM_ERROR$2=constants.Z_STREAM_ERROR,Z_DATA_ERROR$2=constants.Z_DATA_ERROR,Z_MEM_ERROR$1=constants.Z_MEM_ERROR;function Inflate(e){this.options=common$1.assign({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;var r=inflate_1.inflateInit2(this.strm,t.windowBits);if(r!==Z_OK$3)throw new Error(messages[r]);if(this.header=new gzheader,inflate_1.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=strings.string2buf(t.dictionary):"[object ArrayBuffer]"===toString$1$1.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=inflate_1.inflateSetDictionary(this.strm,t.dictionary))!==Z_OK$3))throw new Error(messages[r])}function inflate$1(e,t){var r=new Inflate(t);if(r.push(e),r.err)throw r.msg||messages[r.err];return r.result}function inflateRaw(e,t){return(t=t||{}).raw=!0,inflate$1(e,t)}Inflate.prototype.push=function(e,t){var r,n,i,o=this.strm,a=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?Z_FINISH$3:Z_NO_FLUSH$2,"[object ArrayBuffer]"===toString$1$1.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;;){for(0===o.avail_out&&(o.output=new Uint8Array(a),o.next_out=0,o.avail_out=a),(r=inflate_1.inflate(o,n))===Z_NEED_DICT$1&&s&&((r=inflate_1.inflateSetDictionary(o,s))===Z_OK$3?r=inflate_1.inflate(o,n):r===Z_DATA_ERROR$2&&(r=Z_NEED_DICT$1));o.avail_in>0&&r===Z_STREAM_END$3&&o.state.wrap>0&&0!==e[o.next_in];)inflate_1.inflateReset(o),r=inflate_1.inflate(o,n);switch(r){case Z_STREAM_ERROR$2:case Z_DATA_ERROR$2:case Z_NEED_DICT$1:case Z_MEM_ERROR$1:return this.onEnd(r),this.ended=!0,!1}if(i=o.avail_out,o.next_out&&(0===o.avail_out||r===Z_STREAM_END$3))if("string"===this.options.to){var u=strings.utf8border(o.output,o.next_out),c=o.next_out-u,l=strings.buf2string(o.output,u);o.next_out=c,o.avail_out=a-c,c&&o.output.set(o.output.subarray(u,u+c),0),this.onData(l)}else this.onData(o.output.length===o.next_out?o.output:o.output.subarray(0,o.next_out));if(r!==Z_OK$3||0!==i){if(r===Z_STREAM_END$3)return r=inflate_1.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===o.avail_in)break}}return!0},Inflate.prototype.onData=function(e){this.chunks.push(e)},Inflate.prototype.onEnd=function(e){e===Z_OK$3&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var inflate_1$1={Inflate:Inflate,inflate:inflate$1,inflateRaw:inflateRaw,ungzip:inflate$1,constants:constants},Deflate$1=deflate_1$1.Deflate,deflate$2=deflate_1$1.deflate,deflateRaw$1=deflate_1$1.deflateRaw,gzip$1=deflate_1$1.gzip,Inflate$1=inflate_1$1.Inflate,inflate$2=inflate_1$1.inflate,inflateRaw$1=inflate_1$1.inflateRaw,ungzip=inflate_1$1.ungzip,pako={Deflate:Deflate$1,deflate:deflate$2,deflateRaw:deflateRaw$1,gzip:gzip$1,Inflate:Inflate$1,inflate:inflate$2,inflateRaw:inflateRaw$1,ungzip:ungzip,constants:constants};function createFind(e){return function(t,r,n){var i=Object(t);if(!isArrayLike_1(t)){var o=_baseIteratee(r);t=keys_1(t),r=function(e){return o(i[e],e,i)}}var a=e(t,r,n);return a>-1?i[o?t[a]:a]:void 0}}var _createFind=createFind;function baseFindIndex(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}var _baseFindIndex=baseFindIndex,NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(e){if("number"==typeof e)return e;if(isSymbol_1(e))return NAN;if(isObject_1(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject_1(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var toNumber_1=toNumber,INFINITY$2=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(e){return e?(e=toNumber_1(e))===INFINITY$2||e===-INFINITY$2?(e<0?-1:1)*MAX_INTEGER:e==e?e:0:0===e?e:0}var toFinite_1=toFinite;function toInteger(e){var t=toFinite_1(e),r=t%1;return t==t?r?t-r:t:0}var toInteger_1=toInteger,nativeMax$1=Math.max;function findIndex(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:toInteger_1(r);return i<0&&(i=nativeMax$1(n+i,0)),_baseFindIndex(e,_baseIteratee(t),i)}var findIndex_1=findIndex,find=_createFind(findIndex_1),find_1=find;function baseIsNaN(e){return e!=e}var _baseIsNaN=baseIsNaN;function strictIndexOf(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var _strictIndexOf=strictIndexOf;function baseIndexOf(e,t,r){return t==t?_strictIndexOf(e,t,r):_baseFindIndex(e,_baseIsNaN,r)}var _baseIndexOf=baseIndexOf;function arrayIncludes(e,t){return!(null==e||!e.length)&&_baseIndexOf(e,t,0)>-1}var _arrayIncludes=arrayIncludes;function arrayIncludesWith(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith;function noop$2(){}var noop_1=noop$2,INFINITY$3=1/0,createSet=_Set&&1/_setToArray(new _Set([,-0]))[1]==INFINITY$3?function(e){return new _Set(e)}:noop_1,_createSet=createSet,LARGE_ARRAY_SIZE$1=200;function baseUniq(e,t,r){var n=-1,i=_arrayIncludes,o=e.length,a=!0,s=[],u=s;if(r)a=!1,i=_arrayIncludesWith;else if(o>=LARGE_ARRAY_SIZE$1){var c=t?null:_createSet(e);if(c)return _setToArray(c);a=!1,i=_cacheHas,u=new _SetCache}else u=t?[]:s;e:for(;++n<o;){var l=e[n],p=t?t(l):l;if(l=r||0!==l?l:0,a&&p==p){for(var d=u.length;d--;)if(u[d]===p)continue e;t&&u.push(p),s.push(l)}else i(u,p,r)||(u!==s&&u.push(p),s.push(l))}return s}var _baseUniq=baseUniq;function uniqWith(e,t){return t="function"==typeof t?t:void 0,e&&e.length?_baseUniq(e,void 0,t):[]}var uniqWith_1=uniqWith;function comparator(e,t){return long_1.fromValue(e).eq(t)}function validateField(e,t){var r=void 0===t?e.val:t,n=e.isBoolean,i=e.isNumber,o=e.oneof,a=e.len;if(2!==[n,i,o].filter((function(e){return!e})).length)throw new TypeError("invalid field type");if(void 0!==r){var s=!1;if(void 0!==o){var u=values_1(o);uniqWith_1(u,comparator).length===u.length&&void 0!==find_1(u,(function(e){return comparator(r,e)}))&&(s=!0)}var c=void 0!==n&&(0===r||1===r)&&1===a,l=void 0!==i&&r.toString(2).length<=a;if(!(s||c||l))throw new Error("invalid field value")}}var Struct=function(){"use strict";function e(){_classCallCheck(this,e),this.size=0,this.fields=new Map}return _createClass(e,[{key:"define",value:function(e,t,r){if(this.size+=r,this.size>64)throw new RangeError("the struct over 64 bits is not supported");var n={val:0,isNumber:"number"===t,isBoolean:"boolean"===t,oneof:"number"===t||"boolean"===t?void 0:t,len:r};validateField(n),this.fields.set(e,n)}},{key:"set",value:function(e,t){var r=this.fields.get(e);if(!r)throw new Error("field not found");var n,i=r.oneof;if(long_1.isLong(t)||"number"==typeof t)n=t;else if("boolean"==typeof t)n=t?1:0;else{if(void 0===i)throw new Error("invalid field type");var o=i[t];if(void 0===o)throw new Error("field type not found");n=o}validateField(r,n),r.val=n}},{key:"toNumber",value:function(){var e,t=0,r=0,n=_createForOfIteratorHelper(this.fields);try{for(n.s();!(e=n.n()).done;){var i=_slicedToArray(e.value,2)[1],o=i.len,a=i.val;void 0!==a&&(t+=long_1.fromValue(a).shiftLeft(r).toNumber(),r+=o)}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"toLong",value:function(){var e,t=long_1.fromNumber(0,!0),r=0,n=_createForOfIteratorHelper(this.fields);try{for(n.s();!(e=n.n()).done;){var i=_slicedToArray(e.value,2)[1],o=i.len,a=i.val;void 0!==a&&(t=long_1.fromValue(a).shiftLeft(r).add(t),r+=o)}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"assert",value:function(e,t){var r=this.fields.get(e);if(!r)throw new Error("field not found");var n=r.oneof;function i(e){var t;if(long_1.isLong(e)||"number"==typeof e)t=e;else if("boolean"==typeof e)t=e?1:0;else{if(void 0===n)throw new Error("invalid field type");var i=n[e];if(void 0===i)throw new Error("field type not found");t=i}return validateField(r,t),comparator(t,r.val)}if(!Array.isArray(t))return i(t);if(1===t.length)return i(t[0]);if(t.every((function(e){return"string"==typeof e}))&&void 0!==n)return t.some((function(e){return i(e)}));throw new Error("invalid valueTypes")}},{key:"from",value:function(e){var t,r=long_1.fromValue(e),n=0,i=_createForOfIteratorHelper(this.fields);try{for(i.s();!(t=i.n()).done;){var o=_slicedToArray(t.value,2)[1],a=o.len,s=long_1.fromNumber(Math.pow(2,a)-1,!0).shiftLeft(n),u=r.and(s).shiftRightUnsigned(n);validateField(o,u),o.val=u,n+=a}}catch(e){i.e(e)}finally{i.f()}}},{key:"typeOf",value:function(e){var t=this.fields.get(e);if(void 0!==t){var r=t.oneof,n=t.val;if(void 0!==r)for(var i=0,o=Object.entries(r);i<o.length;i++){var a=_slicedToArray(o[i],2),s=a[0];if(comparator(n,a[1]))return s}}throw new TypeError("can only get type of oneof type")}}]),e}(),UserJoinOptions=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).define("Rejoin","boolean",1),n.define("Unused","number",31),n.define("Platform","number",8),n.define("Version","number",12),n.define("Subversion","number",12),n.set("Platform",PLATFORM_TYPE),n.set("Version",VERSION_NO),n.set("Subversion",SUBVERSION),n.set("Rejoin",e),n}return _createClass(r)}(Struct),InvitationType={CallInvite:101,CallAccept:102,CallReject:103,CallCancel:104},TextMessageDstType={PeerTextMessage:0,ChannelTextMessage:1,VendorTextMessage:2},MessageDstType=_objectSpread({},TextMessageDstType),MessageType=_objectSpread(_objectSpread({},MessageDstType),InvitationType),CompressionMethod={Uncompressed:0,Zlib:1},MessageOption=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(e){var n;if(_classCallCheck(this,r),(n=t.call(this)).define("MessageType",MessageType,8),n.define("BroadcastJumps","number",2),n.define("ToCache","boolean",1),n.define("FromCache","boolean",1),n.define("CompressionMethod",CompressionMethod,2),n.define("IterationNumber","number",4),n.define("BufferedMessage","boolean",1),n.define("ToArchive","boolean",1),n.define("FromArchive","boolean",1),isLongNum(e))n.from(e);else if(void 0!==e){var i,o=_createForOfIteratorHelper(getEntries(e));try{for(o.s();!(i=o.n()).done;){var a=_slicedToArray(i.value,2),s=a[0],u=a[1];n.set(s,u)}}catch(e){o.e(e)}finally{o.f()}}return _possibleConstructorReturn(n)}return _createClass(r,[{key:"isTextMessage",value:function(){return this.assert("MessageType",["PeerTextMessage","ChannelTextMessage","VendorTextMessage"])}},{key:"isPeerTextMessage",value:function(){return this.assert("MessageType","PeerTextMessage")}},{key:"isChannelTextMessage",value:function(){return this.assert("MessageType","ChannelTextMessage")}},{key:"isPeerMessage",value:function(){return this.assert("MessageType",["PeerTextMessage"])}},{key:"isZlibCompressed",value:function(){return this.assert("CompressionMethod","Zlib")}},{key:"isFromCache",value:function(){return this.assert("FromCache",!0)}},{key:"isBufferedMessage",value:function(){return this.assert("BufferedMessage",!0)}},{key:"isFromArchive",value:function(){return this.assert("FromArchive",!0)}},{key:"isInvitation",value:function(e){var t=this;return void 0!==e?this.assert("MessageType",e):getKeys(InvitationType).some((function(e){return t.assert("MessageType",e)}))}},{key:"getInvitationType",value:function(){if(!this.isInvitation())throw new TypeError("cannot get InvitationType of a normal message type");return this.typeOf("MessageType")}}]),r}(Struct),ChatManager=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this,e,"ChatManager")).dialogueLru=new TLRUCache(void 0,{maxlen:LRU_MAX_ITEMS,ttl:DIALOGUE_EXPIRE_TIMEOUT}),n}return _createClass(r,[{key:"getChatInfo",value:function(e){var t=this.dialogueLru.get(e);if(this.dialogueLru.prune(),t){var r=t.dialogue,n=t.sequence.add(1),i={dialogue:r,sequence:n};return this.dialogueLru.set(e,{dialogue:r,sequence:n}),i}var o={dialogue:getRandomUInt64(),sequence:long_1.fromNumber(1,!0)};return this.dialogueLru.set(e,o),o}}]),r}(createEventBase()),inflate$3=pako.inflate,deflate$3=pako.deflate,Session$2=function(e){"use strict";_inherits(s,e);var t,r,n,i,o,a=_createSuper(s);function s(e,t,r,n){var i;return _classCallCheck(this,s),(i=a.call(this,n,"Session")).context=e,i.connection=t,i.instanceId=r,i.chatManager=new ChatManager(i.logger),i.joinedChannels=new Set,i.msgDedupLru=new LRUCache(void 0,{maxlen:MSG_DEDUP_MAX_LEN}),i.startTime=Date.now(),i.seq=long_1.fromNumber(1,!0),i.userJoinOptions=new UserJoinOptions(!1),i.seqSentStatuses=[!1,!1],i.dialogueSequenceLru=new LRUCache(void 0,{maxlen:LRU_MAX_ITEMS}),i.messageSentTimes=[],i.curLoginSockets=[void 0,void 0],i.loginSocketSubs=[{channels:new Map,receivers:[]},{channels:new Map,receivers:[]}],i.lastLoginSockets=[new ReplaySubject(1),new ReplaySubject(1)],i.dialPendingMsgSubjectMaps=[new Map,new Map],i.registerSocketsFailureListener=function(){i.connection.once("socketsFailure",(function(){i.log("socketsFailure, creating a new connection"),defer((function(){return i.connection.removeAllListeners(),i.connection=new Connection(i.context,i.logger),i.loginHandler(6e3,!0)})).pipe(retryWhen((function(e){return e.pipe(delay(2e3))})),takeUntil(i.connection.apClient.apFinish$)).subscribe((function(){i.log("new connection connected")}))})),0===i.connection.listenerCount("tokenExpired")&&i.connection.on("tokenExpired",(function(){i.emit("tokenExpired")}))},i.log("The instanceId is %s",i.instanceId.toString()),i}return _createClass(s,[{key:"loginHandler",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:CLIENT_LOGIN_TIMEOUT,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r&&this.registerSocketsFailureListener(),this.connection.initConnection();var n=this.seq,i=this.getSocketLoginObservables(this.connection.lastOpenSockets,n),o=Date.now();return i.forEach((function(t,n){var i=e.loginSocketSubs[n].login;void 0!==i&&i.unsubscribe(),e.loginSocketSubs[n].login=t.pipe(tap((function(t){e.curLoginSockets[n]=t;var i=Date.now();sendReport("Link",{ackedServerIp:t.address,destServerIp:t.ip,ec:0,sc:0,elapse:getElapse(e.startTime),lts:long_1.fromNumber(i),responseTime:o-i,sid:getSid(e.instanceId),userId:e.context.uid}),e.emit("userJoined",t.env),r&&e.connection.apClient.apFinish$.next(void 0)}))).subscribe(e.lastLoginSockets[n])})),this.initKeepAliveSender(),this.initKeepAliveReconnector(),this.initLoginReceiver(),merge.apply(void 0,_toConsumableArray(i).concat([fromEvent(this.connection,"connectionInitFailure").pipe(tap((function(e){if(isRtmError(e)||isTimeout(e))throw e;throw new RtmUnavailableError("Login failure",{code:LOGIN_ERR_UNKNOWN,originalError:e})})))])).pipe(first(),timeout(t),catchError((function(t){return t instanceof TimeoutError&&e.warn("Client login timeout"),t&&t.code===LOGIN_ERR_TOKEN_EXPIRED&&(e.connection.emit("tokenExpired"),e.connection.apClient.apFinish$.next(void 0)),e.clearSockets(0,r),throwError(t)})),tap((function(){r||e.registerSocketsFailureListener()})),finalize((function(){r||e.connection.apClient.apFinish$.next(void 0)})))}},{key:"logoutHandler",value:(o=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t,r,n,i=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getLoginSockets(),r=t.map((function(e){return e.sendPacket("UserQuit",{}),i.connection.waitClosing(e)})),this.clearSockets(LOGOUT_SOCKET_CLOSE_TIMEOUT),n=t.map((function(e){return e.env})),e.abrupt("return",([0,1].filter((function(e){return!n.includes(e)})).forEach((function(e){i.connection.closeSocket(e,0)})),merge.apply(void 0,_toConsumableArray(r)).toPromise()));case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"requestChannelJoin",value:(i=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,r){var n,i,o,a=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.getLoginSockets().length){e.next=2;break}throw new RtmInvalidStatusError("Client is not logged in. Cannot join the channel",JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN);case 2:return n=fromEvent(this,"channelLeft").pipe(filter((function(e){return e===t})),take(1)),i=this.incGetSeq(),(o=this.lastLoginSockets.map((function(e){return e.pipe(switchMap((function(e,t){0!==t&&a.incSeqIfNeeded(e.env);var n=0===t?i:a.seq;return e.sendPacket("GroupEnter",{account:r,seq:n}),e.fromReceived("GroupReply").pipe(first((function(e){var t=e.seq;return n.eq(t)})),tap((function(e){var t=e.code;if(0!==t)throw new RtmUnavailableError(["Channel join failure. The response code is %d",t],JOIN_CHANNEL_ERR_FAILURE)})))})),takeUntil(n),share())}))).forEach((function(e,r){var n=function(){return a.loginSocketSubs[r].channels.delete(t.channelId)};a.loginSocketSubs[r].channels.set(t.channelId,e.subscribe({error:n,complete:n}))})),e.next=6,merge.apply(void 0,_toConsumableArray(o)).pipe(first(),timeout(COMMON_REQUEST_TIMEOUT),catchError((function(e){return e instanceof TimeoutError&&a.warn("Channel join timeout"),throwError(e)}))).toPromise();case 6:this.joinedChannels.add(t);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"requestSetChannelAttributes",value:function(e,t,r){var n=this.getLoginSockets();if(0===n.length)throw new RtmInvalidStatusError("Client is not logged in");var i=this.incGetSeq();return n.forEach((function(n){n.sendPacket("GroupAttributeSet",{broadcast:r,group:e,attributeInfos:Object.entries(t).map((function(e){var t=_slicedToArray(e,2);return{key:t[0],value:t[1]}})),seq:i})})),race.apply(void 0,_toConsumableArray(n.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(first((function(e){var t=e.seq;return i.eq(t)})),map$1((function(e){var t=e.code;throw new RtmUnavailableError(["The group attributes set failure, code %d",t],ATTRIBUTE_OPERATION_ERR_FAILURE)})))}))).concat([s.genTimeoutError(ATTRIBUTE_OPERATION_ERR_TIMEOUT)],_toConsumableArray(n.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(first((function(e){var t=e.seq;return i.eq(t)})))})))))}},{key:"requestGetChannelAttributesByKeys",value:function(e,t){var r=this.getLoginSockets();if(0===r.length)throw new RtmInvalidStatusError("Client is not logged in");var n=this.incGetSeq();return r.forEach((function(r){r.sendPacket("GroupAttributeGet",{group:e,seq:n,attributes:t})})),race.apply(void 0,[s.genTimeoutError(ATTRIBUTE_OPERATION_ERR_TIMEOUT)].concat(_toConsumableArray(r.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(first((function(e){var t=e.seq;return n.eq(t)})),map$1((function(e){var t=e.code;throw new RtmUnavailableError(["The channel attributes get failure, code %d",t],ATTRIBUTE_OPERATION_ERR_FAILURE)})))}))),_toConsumableArray(r.map((function(e){return e.fromReceived("GroupAttributeRet").pipe(first((function(e){var t=e.seq;return n.eq(t)})))})))))}},{key:"requestAddOrUpdateChannelAttributes",value:function(e,t,r){var n=this.getLoginSockets();if(0===n.length)throw new RtmInvalidStatusError("Client is not logged in");var i=this.incGetSeq();return n.forEach((function(n){n.sendPacket("GroupAttributeMod",{broadcast:r,group:e,attributeInfos:Object.entries(t).map((function(e){var t=_slicedToArray(e,2);return{key:t[0],value:t[1]}})),seq:i})})),race.apply(void 0,_toConsumableArray(n.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(first((function(e){var t=e.seq;return i.eq(t)})),map$1((function(e){var t=e.code;throw new RtmUnavailableError(["The group attributes add or update failure, code %d",t],ATTRIBUTE_OPERATION_ERR_FAILURE)})))}))).concat([s.genTimeoutError(ATTRIBUTE_OPERATION_ERR_TIMEOUT)],_toConsumableArray(n.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(first((function(e){var t=e.seq;return i.eq(t)})))})))))}},{key:"requestGetChannelAttributesKeys",value:function(e){var t=this.getLoginSockets();if(0===t.length)throw new RtmInvalidStatusError("Client is not logged in");var r=this.incGetSeq();return t.forEach((function(t){t.sendPacket("GroupAttributeKeysGet",{group:e,seq:r})})),race.apply(void 0,[s.genTimeoutError(ATTRIBUTE_OPERATION_ERR_TIMEOUT)].concat(_toConsumableArray(t.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(first((function(e){var t=e.seq;return r.eq(t)})),map$1((function(e){var t=e.code;throw new RtmUnknownError(["Channel attribute operation unknown error code: %d",t],ATTRIBUTE_OPERATION_ERR_FAILURE)})))}))),_toConsumableArray(t.map((function(e){return e.fromReceived("GroupAttributeKeysRet").pipe(first((function(e){var t=e.seq;return r.eq(t)})))})))))}},{key:"requestDeleteChannelAttributesByKeys",value:function(e,t,r){var n=this.getLoginSockets();if(0===n.length)throw new RtmInvalidStatusError("Client is not logged in");var i=this.incGetSeq();return n.forEach((function(n){n.sendPacket("GroupAttributeDel",{group:e,broadcast:r,attributes:t,seq:i})})),race.apply(void 0,_toConsumableArray(n.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(first((function(e){var t=e.seq;return i.eq(t)})),map$1((function(e){var t=e.code;throw new RtmUnavailableError(["The channel attributes delete failure, code %d",t],ATTRIBUTE_OPERATION_ERR_FAILURE)})))}))).concat([s.genTimeoutError(ATTRIBUTE_OPERATION_ERR_TIMEOUT)],_toConsumableArray(n.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(first((function(e){var t=e.seq;return i.eq(t)})))})))))}},{key:"requestClearChannelAttributes",value:function(e,t){var r=this.getLoginSockets();if(0===r.length)throw new RtmInvalidStatusError("Client is not logged in");var n=this.incGetSeq();return r.forEach((function(r){r.sendPacket("GroupAttributeSet",{group:e,seq:n,attributeInfos:[],broadcast:t})})),race.apply(void 0,_toConsumableArray(r.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(first((function(e){var t=e.seq;return n.eq(t)})),map$1((function(e){var t=e.code;throw new RtmUnavailableError(["The channel attributes clear failure, code %d",t],ATTRIBUTE_OPERATION_ERR_FAILURE)})))}))).concat([s.genTimeoutError(ATTRIBUTE_OPERATION_ERR_TIMEOUT)],_toConsumableArray(r.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(first((function(e){var t=e.seq;return n.eq(t)})))})))))}},{key:"requestChannelLeave",value:function(e,t){this.emit("channelLeft",e),this.joinedChannels.delete(e),this.getLoginSockets().forEach((function(e){e.sendPacket("GroupLeave",{account:t})}))}},{key:"requestChannelMemberList",value:function(e){var t=this.getLoginSockets();if(0===t.length)throw new RtmInvalidStatusError("Client is not logged in. Cannot get the channel members",GET_MEMBERS_ERR_REJECTED);var r=this.incGetSeq();return t.forEach((function(t){t.sendPacket("GroupAllUsersList",{group:e,pageNumber:0,pageSize:200,seq:r})})),race.apply(void 0,[s.genTimeoutError(COMMON_REQUEST_TIMEOUT)].concat(_toConsumableArray(t.map((function(t){return t.fromReceived("GroupAllUsersResult").pipe(first((function(t){var n=t.group,i=t.seq;return n===e&&r.eq(i)})))})))))}},{key:"sendTextMessage",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,r,n,i,o){var a,s,u,c,l,p,d,f,h,_,g=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.enableOfflineMessaging,s=i.enableHistoricalMessaging,isValidId(r)){e.next=3;break}throw new RtmInvalidArgumentError("The send message arguments are not valid",n?PEER_MESSAGE_ERR_INVALID_USERID:CHANNEL_MESSAGE_ERR_FAILURE);case 3:if(!((u=getUtf8StringSize(t))>TEXT_MESSAGE_MAX_TEXT_BYTES)){e.next=6;break}throw new RtmLimitExceededError("The message size is over the 32KB limit",n?PEER_MESSAGE_ERR_INVALID_MESSAGE:CHANNEL_MESSAGE_ERR_INVALID_MESSAGE);case 6:return c=!AgoraRTM.getParameter("DISABLE_MESSAGE_COMPRESSION")&&u>=MESSAGE_MIN_COMPRESSION_LEN,l=this.chatManager.getChatInfo(r),p=l.dialogue,d=l.sequence,f=this.instanceId,this.log('A%s %s message is sending to %s: "'.concat(f,"-").concat(p,"#").concat(d,'"'),c?" compressed":"",n?"peer":"channel",r),e.next=10,from(this.sendMessageToRetry((function(e){return{MiscMap:{},sequence:d,dialogue:p,instance:f,dst:r,ms:long_1.fromNumber(Date.now(),!0),options:new MessageOption({IterationNumber:e,CompressionMethod:c?"Zlib":"Uncompressed",MessageType:n?"PeerTextMessage":"ChannelTextMessage",ToCache:a,ToArchive:s}).toLong(),payload:c?deflate$3(t):encodeStringToUint8Array(t),src:g.context.uid}}),!0)).pipe(timeout(void 0===o?COMMON_REQUEST_TIMEOUT:o),catchError((function(e){return e instanceof TimeoutError&&g.warn("Send message timeout"),throwError(e)}))).toPromise();case 10:return h=e.sent,_=h.code,e.abrupt("return",{hasPeerReceived:0===_});case 13:case"end":return e.stop()}}),e,this)}))),function(e,t,r,i,o){return n.apply(this,arguments)})},{key:"sendInvitationMessage",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var r,n,i,o,a,s,u,c,l,p,d,f=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.peerId,n=t.callId,i=t.extra,o=t.isAcceptAck,a=t.channelId,s=t.type,"0"===n&&this.info("[rtm-API] EndCall message send api is called"),u={callId:n},void 0===o){e.next=7;break}if("CallAccept"===s){e.next=6;break}throw new Error("invalid invitation type");case 6:u.type=o?"ack":"request";case 7:return u.channel=a,("CallInvite"===s||"CallCancel"===s||"CallReject"===s||"CallAccept"===s&&!1===o)&&void 0!==i&&(u.extra=i),c=getRandomUInt64(),this.log("The sent invitation body is %o",u),e.next=13,from(this.sendMessageToRetry((function(e){return{MiscMap:{},sequence:long_1.fromNumber(1),dialogue:c,instance:f.instanceId,dst:r,ms:long_1.fromNumber(Date.now(),!0),options:new MessageOption({IterationNumber:e,MessageType:s}).toLong(),payload:encodeStringToUint8Array(JSON.stringify(u)),src:f.context.uid}}),!0)).pipe(timeout(MESSAGE_SEND_TIMEOUT),catchError((function(e){return e instanceof TimeoutError&&f.warn("Send invitation timeout"),throwError(e)}))).toPromise();case 13:return l=e.sent,p=l.code,d=l.retryTimes,e.abrupt("return",{hasPeerReceived:0===p,hasReSent:0!==d});case 17:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"cleanLoginSubs",value:function(e,t){Object.entries(this.loginSocketSubs[e]).forEach((function(e){var r=_slicedToArray(e,2),n=r[0],i=r[1];"channels"===n&&t||(Array.isArray(i)||i instanceof Map?i.forEach((function(e){return e.unsubscribe()})):i&&i.unsubscribe())})),this.loginSocketSubs[e]={channels:t?this.loginSocketSubs[e].channels:new Map,receivers:[]}}},{key:"sendMessageToRetry",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,r){var n,i,o,a,s,u,c,l,p,d=this,f=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>2&&void 0!==f[2]?f[2]:0,this.log("Attempt to send the message "+(r?" with retrying, %o":"without retrying"),{retryTimes:n}),0!==(i=this.getLoginSockets()).length){e.next=5;break}throw new Error("no logged-in sockets");case 5:return o=t(n),i.forEach((function(e){e.sendPacket("Message",o)})),a=o.dialogue,s=o.sequence,u=o.instance,c=i.map((function(e){return e.fromReceived("Ack").pipe(filter((function(e){return a.eq(e.dialogue)&&s.eq(e.sequence)&&u.eq(e.instance)})))})),e.prev=8,e.next=11,merge.apply(void 0,_toConsumableArray(c)).pipe(timeout(MESSAGE_RETRY_TIMEOUT),catchError((function(e){return isTimeout(e)&&d.warn("Send message retry timeout"),throwError(e)})),first()).toPromise();case 11:return l=e.sent,p=l.code,e.abrupt("return",(this.log("The message has been acked, %o",{code:p}),{code:p,retryTimes:n}));case 16:if(e.prev=16,e.t0=e.catch(8),!(e.t0 instanceof TimeoutError&&r)){e.next=20;break}return e.abrupt("return",this.sendMessageToRetry(t,!1,n+1));case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,this,[[8,16]])}))),function(e,r){return t.apply(this,arguments)})},{key:"initKeepAliveSender",value:function(){var e=this;this.lastLoginSockets.map((function(t){return t.pipe(switchMap((function(t){return timer(0,KEEPALIVE_INTERVAL).pipe(tap((function(){e.incSeqIfNeeded(t.env),t.sendPacket("Ping",{ms:long_1.fromNumber(Date.now(),!0),seq:e.seq})})))})))})).forEach((function(t,r){var n=e.loginSocketSubs[r].keepAlive;void 0!==n&&n.unsubscribe(),e.loginSocketSubs[r].keepAlive=t.subscribe({error:function(){}})}))}},{key:"initKeepAliveReconnector",value:function(){var e=this;this.lastLoginSockets.map((function(e){return e.pipe(switchMap((function(e){var t,r=!1,n=e.userJoin$.pipe(tap((function(){r=!0}))),i=e.input$.pipe(tap((function(e){"Ping"!==uriToPacketName(e.uri)&&(r=!1)})));return merge(timer(LOGIN_RESP_TIMEOUT,SOCKET_KEEPALIVE_TIMEOUT).pipe(withLatestFrom(e.receivedPacket),tap((function(n){var i=_slicedToArray(n,2),o=_slicedToArray(i[1],2)[1];t!==o||r||e.forceReconnect(),t=o}))),n,i)})))})).forEach((function(t,r){var n=e.loginSocketSubs[r].keepAliveReconnector;void 0!==n&&n.unsubscribe(),e.loginSocketSubs[r].keepAliveReconnector=t.subscribe({error:function(){}})}))}},{key:"initLoginReceiver",value:function(){var e=this;this.lastLoginSockets.map((function(t){return t.pipe(switchMap((function(t){return merge(fromEvent(t,"reconnect").pipe(tap(e.onSocketReconnect(t))),t.fromReceived("Message").pipe(tap(e.onMessage(t))),t.fromReceived("GroupEnterNotice").pipe(tap(e.onGroupEnterNotice())),t.fromReceived("GroupLeaveNotice").pipe(tap(e.onGroupLeaveNotice())),t.fromReceived("GroupAttributeAlt").pipe(tap(e.onGroupAttributeAlt()))).pipe(mapTo(void 0))})))})).forEach((function(t,r){e.loginSocketSubs[r].receivers.push(t.subscribe({error:function(){}}))}))}},{key:"requestSocketLogin",value:function(e,t,r){var n=this;return concat(defer((function(){n.userJoinOptions=new UserJoinOptions(t),e.sendPacket("UserJoin",{account:n.context.uid,instance:n.instanceId,opt:n.userJoinOptions.toLong(),seq:r,ticket:e.ticket})})),e.fromReceived("UserResp").pipe(first((function(e){return r.eq(e.seq)})),tap((function(t){var r=t.code;if(0!==r)throw n.clearSockets(),n.logError("Connected to gateway success but the Rtm server rejected login"),new RtmUnavailableError(["Login failure. The response code from the RTM service is %d",r],LOGIN_ERR_REJECTED);n.log("ENV_%d logged in",e.env)})),mapTo(e),timeout(LOGIN_RESP_TIMEOUT))).pipe(filter((function(e){return void 0!==e})),catchError((function(e){return e instanceof TimeoutError&&n.warn("Login response timeout, rejoin: %s",t),throwError(e)})))}},{key:"getSocketLoginObservables",value:function(e,t){var r=this;return e.map((function(e){return e.pipe(tap((function(e){0===e.listenerCount("socketUserDrop")&&e.on("socketUserDrop",(function(t){return r.onUserDrop(t,e)}))})),switchMap((function(e,n){return r.incSeqIfNeeded(e.env),r.requestSocketLogin(e,0!==n,0===n?t:r.seq)})),share())}))}},{key:"incSeqIfNeeded",value:function(e){if(![0,1].includes(e))throw new CommonError({INVALID_ENV:"The env argument is not 0 or 1"});this.seqSentStatuses[e]&&(this.seq=this.seq.add(1),this.seqSentStatuses=[!1,!1]),this.seqSentStatuses[e]=!0}},{key:"incGetSeq",value:function(){return this.seq=this.seq.add(1),this.seqSentStatuses=[!0,!0],this.seq}},{key:"getLoginSockets",value:function(){return compact_1(this.curLoginSockets)}},{key:"emitMessage",value:function(e,t){var r=e.options,n=e.payload,i=e.src,o=e.dst,a=e.instance,u=e.dialogue,c=e.sequence,l=e.ms;this.dialogueSequenceLru.set(u.toString(),c);var p="".concat(a,"-").concat(u,"#").concat(c);if(this.msgDedupLru.has(p))this.warn("Env_%d: Messages out-of-order or not start with 1: %s",t,p);else{this.msgDedupLru.set(p,void 0);var d=new MessageOption(r);this.getLoginSockets().forEach((function(t){s.sendMessageAck(e,t)}));var f=d.isZlibCompressed();if(d.isInvitation()){var h=f?inflate$3(n,{to:"string"}):decodeUint8ArrayToString(n),_=JSON.parse(h);this.log("The received invitation body is %o",_),this.emit("invitationMessage",{body:_,type:d.getInvitationType(),peerId:i,serverReceivedTs:l.toNumber()})}else if(d.isTextMessage()){var g=d.isPeerTextMessage(),v=f?inflate$3(n,{to:"string"}):decodeUint8ArrayToString(n);if(this.info("Received a%s %s text message from %s to %s, %s",f?" compressed":"",g?"peer":"channel",i,o,p),g){var b={text:v,peerId:i,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:d.isFromCache(),isHistoricalMessage:d.isFromArchive()}};this.emit("peerTextMessage",b)}else this.emit("channelTextMessage",{channelId:o,memberId:i,text:v,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:!1,isHistoricalMessage:d.isFromArchive()}})}}}},{key:"onSocketReconnect",value:function(e){var t=this;return function(){var r=[0,1].filter((function(t){return t!==e.env}))[0],n=t.connection.curOpenSockets[r];n&&!n.loggedIn&&t.emit("connectionLost")}}},{key:"onUserDrop",value:function(e,t){var r=e.code;if(sendReport("KickedOff",{code:0,elapse:getElapse(this.startTime),linkId:parseInt(t.name.split("-")[1],10),lts:long_1.fromNumber(Date.now()),server:t.address,serverCode:r,sid:getSid(this.instanceId),userId:this.context.uid}),10006!==r&&10001!==r)return 10009===r?(this.warn("The instance ID conflicts, reconnecting"),this.instanceId=getRandomUInt64(),this.context.sid=getSid(this.instanceId),void this.emit("instanceChanged",this.instanceId)):void([11,14,15,16].includes(r)&&(this.emit("userDrop",r),this.clearSockets()));this.warn("Login too often and kicked off, reconnect and login")}},{key:"clearSockets",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];[0,1].forEach((function(n){e.cleanLoginSubs(n,r),e.connection.lastOpenSockets[n].complete(),e.connection.closeSocket(n,t)}))}},{key:"onMessage",value:function(e){var t=this;return function(r){var n=r.dialogue,i=r.instance,o=r.sequence,a=r.options;if(r.src!==t.context.uid){var s=n.toString(),u=t.dialPendingMsgSubjectMaps[e.env].get(s),c="".concat(i,"-").concat(n,"#").concat(o);if(u)return u.next(r),void t.log("Env_%d: The dialogue has pending messages, next: %s",e.env,c);var l=t.dialogueSequenceLru.get(s),p=!l&&o.eq(1),d=void 0!==l&&o.sub(l).eq(1);if(p||d)t.emitMessage(r,e.env);else{if(l){if(o.lte(l))return;t.log("Env_%d: The message pended, the sequence is not continuous with the last: %s",e.env,c)}else t.log("Env_%d: The message pended, the first sequence is not equal to 1: %s",e.env,c);var f=new Subject;t.dialPendingMsgSubjectMaps[e.env].set(s,f);var h=f.pipe(observeOn(asyncScheduler),scan((function(e,t){return[].concat(_toConsumableArray(e),[t])}),[]),map$1((function(e){return e.sort((function(e,t){var r=e.sequence,n=t.sequence;return r.eq(n)?0:r.gt(n)?1:-1}))})),shareReplay(1)),_=new MessageOption(a),g=!_.isFromCache()&&!_.isBufferedMessage();h.pipe(takeUntil(timer(g?ONLINE_MESSAGE_DEDUP_DELAY:OFFLINE_MESSAGE_DEDUP_DELAY)),first((function(e){if(e.length<2)return!1;for(var t=void 0===l?long_1.fromNumber(1,!0):l.add(1),r=0;r<e.length;t=t.add(1),r++)if(!e[r].sequence.eq(t))return!1;return!0})),finalize((function(){t.dialPendingMsgSubjectMaps[e.env].delete(s)}))).subscribe((function(r){r.forEach((function(r){t.emitMessage(r,e.env),t.log("Env_%d: The message queue has fully ordered, emitting: %s",e.env,"".concat(r.instance,"-").concat(r.dialogue,"#").concat(r.sequence))}))}),(function(r){r instanceof EmptyError&&h.pipe(first()).subscribe((function(r){return r.forEach((function(r){t.log("Env_%d: The message pending queue expired, emitting: %s",e.env,"".concat(r.instance,"-").concat(r.dialogue,"#").concat(r.sequence)),t.emitMessage(r,e.env)}))}))})),f.next(r)}}else t.log("The message is from the local account, ignored")}}},{key:"onGroupEnterNotice",value:function(){var e=this;return function(t){var r=t.group,n=t.instance,i=t.seq,o=t.user,a=t.size;e.emit("memberNotice",{channelId:r,seq:i,instance:n,memberId:o,type:"MemberJoined",size:a})}}},{key:"onGroupLeaveNotice",value:function(){var e=this;return function(t){var r=t.group,n=t.instance,i=t.seq,o=t.user,a=t.size;e.emit("memberNotice",{channelId:r,seq:i,instance:n,memberId:o,type:"MemberLeft",size:a})}}},{key:"onGroupAttributeAlt",value:function(){var e=this;return function(t){var r=t.group,n=_objectWithoutProperties(t,_excluded);e.emit("channelAttributesUpdated",_objectSpread({channelId:r},n))}}}],[{key:"sendMessageAck",value:function(e,t){var r=new MessageOption(e.options);(r.isInvitation()||r.isPeerMessage())&&t.sendPacket("Ack",{code:0,dialogue:e.dialogue,instance:e.instance,sequence:e.sequence})}}]),s}(createEventBase());function genGetSession(e){return function(){var t=e();if(!t)throw new RtmInvalidStatusError("Client is not logged in. Cannot do the operation");return t}}Session$2.genTimeoutError=function(e,t){return of(void 0).pipe(delay(void 0===t?COMMON_REQUEST_TIMEOUT:t),map$1((function(){throw new RtmTimeoutError(["Request timed out after %ds",void 0===t?COMMON_REQUEST_TIMEOUT:t],e)})))};var InvitationManager=function(e){"use strict";_inherits(r,e);var t=_createSuper(r);function r(e,n){var i;return _classCallCheck(this,r),(i=t.call(this,n,"InvitationManager")).logger=n,i.getSession=void 0,i.invitationDispatcher=new events.EventEmitter,i.outgoingLocalInvitations=new Map,i.receivedRemoteInvitations=new LRUCache(void 0,{maxlen:LRU_MAX_ITEMS}),i.getSession=genGetSession(e),i.invitationDispatcher.on("remoteInvitationToManager",(function(e){var t=e.callId,r=e.extra,o=e.callerId,a=e.channelId;if(!i.receivedRemoteInvitations.has(t)){var s=new RtmRemoteInvitation({callerId:o,callId:t,getSession:i.getSession,logger:n,extraContent:r,invitationChannel:a});s.remoteInvitationEnd$.subscribe((function(){i.receivedRemoteInvitations.delete(t)})),i.receivedRemoteInvitations.set(t,s),i.emit("remoteInvitationInstance",s)}})),i.invitationDispatcher.on("acceptAckToRemoteInvitation",(function(e){var t=e.callId,r=i.receivedRemoteInvitations.get(t);r&&r.onAcceptAckReceived()})),i.invitationDispatcher.on("cancelToRemoteInvitation",(function(e){var t=e.callId,r=e.extra,n=i.receivedRemoteInvitations.get(t);n&&n.onCancelReceived(r)})),i.invitationDispatcher.on("acceptToLocalInvitation",(function(e){var t=e.callId,r=e.extra,n=i.outgoingLocalInvitations.get(t);n&&n.onAcceptReceived(r)})),i.invitationDispatcher.on("refuseToLocalInvitation",(function(e){var t=e.callId,r=e.extra,n=i.outgoingLocalInvitations.get(t);n&&n.onRefuseReceived(r)})),i}return _createClass(r,[{key:"invitationMessageHandler",value:function(e){var t=e.body,r=t.callId,n=t.extra,i=void 0===n?"":n,o=t.type,a=t.channel,s=void 0===a?"":a,u=e.type,c=e.peerId,l=e.serverReceivedTs;switch(u){case"CallAccept":return void("ack"===o?this.invitationDispatcher.emit("acceptAckToRemoteInvitation",{callId:r}):"request"===o&&this.invitationDispatcher.emit("acceptToLocalInvitation",{callId:r,extra:i}));case"CallInvite":return void this.invitationDispatcher.emit("remoteInvitationToManager",{callId:r,callerId:c,extra:i,channelId:s});case"CallCancel":if("0"===r){var p="".concat(END_CALL_PREFIX,"_").concat(s,"_").concat(i);return void this.getSession().emit("peerTextMessage",{peerId:c,properties:{serverReceivedTs:l,isOfflineMessage:!1,isHistoricalMessage:!1},text:p})}return void this.invitationDispatcher.emit("cancelToRemoteInvitation",{callId:r,extra:i});case"CallReject":return void this.invitationDispatcher.emit("refuseToLocalInvitation",{callId:r,extra:i});default:throw assertNever("invitationType",u)}}},{key:"genLocalInvitation",value:function(e){var t=this,r=new RtmLocalInvitation(e,this.getSession,this.logger);return r.localInvitationEnd$.subscribe((function(){t.outgoingLocalInvitations.delete(r.callId)})),this.outgoingLocalInvitations.set(r.callId,r),r}}]),r}(createEventBase()),_class$1,_temp$1,MemberJoinState={JOINED:0,LEFT:1},ConnectionState=RtmStatusCode$1.ConnectionState,Channel=(_temp$1=function(e){"use strict";_inherits(n,e);var t,r=_createSuper(n);function n(e,t,i,o){var a;return _classCallCheck(this,n),(a=r.call(this,o,"RtmChannel",!0)).channelId=e,a.client=i,a.getSession=void 0,a.memberJoinedLru=new LRUCache(void 0,{maxlen:LRU_MAX_ITEMS}),a.memberLeftLru=new LRUCache(void 0,{maxlen:LRU_MAX_ITEMS}),a.memberJoinStateLru=new LRUCache(void 0,{maxlen:LRU_MAX_ITEMS}),a.attributesSeqLru=new LRUCache(void 0,{maxlen:LRU_MAX_ITEMS}),a.onChannelTextMessage=function(e){var t=e.memberId,r=e.text,n=e.channelId,i=e.properties;n===a.channelId&&a.emit("ChannelMessage",{text:r,messageType:RtmStatusCode$1.MessageType.TEXT},t,i)},a.onAttributesUpdated=function(e){var t=e.channelId,r=e.attributeMaps,n=e.instance,i=e.seq,o=n.toString(),s=a.attributesSeqLru.get(o);if((!s||i.greaterThan(s))&&(a.attributesSeqLru.set(o,i),t===a.channelId)){var u,c={},l=_createForOfIteratorHelper(r);try{for(l.s();!(u=l.n()).done;){var p=u.value,d=p.key,f=p.ms,h=p.value,_=p.origin;if("string"!=typeof d||!long_1.isLong(f)||"string"!=typeof h||!isValidId(_))break;c[d]={value:h,lastUpdateUserId:_,lastUpdateTs:f.toNumber()}}}catch(e){l.e(e)}finally{l.f()}a.emit("AttributesUpdated",c)}},a.onMemberNotice=function(e){var t=e.channelId,r=e.instance,n=e.memberId,i=e.seq,o=e.type;if(t===a.channelId){var s=r.toString(),u=i.toString(),c={MemberLeft:a.memberLeftLru,MemberJoined:a.memberJoinedLru,MemberCountUpdated:void 0}[o];if(c){if(c.has(s+u))return void a.log("received duplicated %s notice (seq: %s), channel '%s', member '%s'",o,u,a.channelId,n);if(c.set(s+u,void 0),"string"!=typeof n)return;if(n!==a.getSession().context.uid){var l=a.memberJoinStateLru.get(n);if(l===MemberJoinState.JOINED&&"MemberJoined"===o)return void a.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",o,u,a.channelId,n);if(l===MemberJoinState.LEFT&&"MemberLeft"===o)return void a.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",o,u,a.channelId,n)}a.memberJoinStateLru.set(n,"MemberJoined"===o?MemberJoinState.JOINED:MemberJoinState.LEFT)}a.info("Channel %s - %s, memberId: %s",o,a.channelId,"MemberCountUpdated"===o?"[unknown]":n);var p=n===a.getSession().context.uid;("MemberLeft"===o&&isValidId(n)||"MemberJoined"===o&&isValidId(n))&&(p||a.emit(o,n))}},a.getSession=genGetSession(t),a.info("A channel created, id %s",e),a}return _createClass(n,[{key:"join",value:function(){var e=this;if(!isValidId(this.channelId))throw new RtmInvalidArgumentError([invalidArgumentMessage,"channelId"],JOIN_CHANNEL_ERR_INVALID_ARGUMENT);try{var t=this.getSession()}catch(e){throw new RtmInvalidStatusError("The client is not logged in. Cannot do the operation",JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN)}if(t.joinedChannels.has(this))throw sendReport("ChnJoin",{cname:this.channelId,lts:long_1.fromNumber(Date.now()),userId:t.context.uid,elapse:getElapse(t.startTime),errCode:JOIN_CHANNEL_ERR_ALREADY_JOINED,sid:getSid(t.instanceId)}),new RtmInvalidStatusError("The channel has joined. Cannot rejoin",JOIN_CHANNEL_ERR_ALREADY_JOINED);try{if(this.log("Joining the channel %s",this.channelId),this.hasOtherChannelJoined())throw sendReport("ChnJoin",{cname:this.channelId,lts:long_1.fromNumber(Date.now()),userId:t.context.uid,elapse:getElapse(t.startTime),errCode:JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID,sid:getSid(t.instanceId)}),new RtmInvalidStatusError("A channel of the same channel ID has already joined. Cannot rejoin",JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID);if(t.joinedChannels.size===MAX_JOINED_CHANNELS)throw sendReport("ChnJoin",{cname:this.channelId,lts:long_1.fromNumber(Date.now()),userId:t.context.uid,elapse:getElapse(t.startTime),errCode:JOIN_CHANNEL_ERR_EXCEED_LIMIT,sid:getSid(t.instanceId)}),new RtmLimitExceededError("The joined channels has exceeded the limit of 20",JOIN_CHANNEL_ERR_EXCEED_LIMIT);return sendReport("ChnJoin",{cname:this.channelId,lts:long_1.fromNumber(Date.now()),userId:t.context.uid,elapse:getElapse(t.startTime),errCode:0,sid:getSid(t.instanceId)}),t.requestChannelJoin(this,this.channelId).then((function(){e.info("The channel %s joined successfully",e.channelId),t.on("channelTextMessage",e.onChannelTextMessage),t.on("memberNotice",e.onMemberNotice),t.on("channelAttributesUpdated",e.onAttributesUpdated)}))}catch(e){if(this.logError(e),isRtmError(e))throw e;if(isTimeout(e))throw sendReport("ChnJoinRes",{cname:this.channelId,lts:long_1.fromNumber(Date.now()),elapse:getElapse(t.startTime),errCode:JOIN_CHANNEL_TIMEOUT,sid:getSid(t.instanceId),serverErrCode:0,userId:t.context.uid}),new RtmTimeoutError(["Join channel %s timed out",this.channelId],JOIN_CHANNEL_TIMEOUT);throw new RtmUnknownError(["The channel %s join failure",this.channelId],{code:JOIN_CHANNEL_ERR_FAILURE,originalError:e})}}},{key:"leave",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=this.getSession(),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new RtmInvalidStatusError("The client is not logged in. Cannot do the operation",LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN);case 7:if(t.joinedChannels.has(this)){e.next=9;break}throw new RtmInvalidStatusError("The channel does not join. Cannot do the operation",LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL);case 9:e.prev=9,t.requestChannelLeave(this,this.channelId),this.memberLeftLru.empty(),this.memberJoinedLru.empty(),this.memberJoinStateLru.empty(),t.removeListener("channelTextMessage",this.onChannelTextMessage),t.removeListener("memberNotice",this.onMemberNotice),t.removeListener("channelAttributesUpdated",this.onAttributesUpdated),e.next=18;break;case 13:if(e.prev=13,e.t1=e.catch(9),this.logError(e.t1),!isRtmError(e.t1)){e.next=17;break}throw void 0===e.t1.code&&(e.t1.code=LEAVE_CHANNEL_ERR_REJECTED),sendReport("ChnLeave",{cname:this.channelId,lts:long_1.fromNumber(Date.now()),elapse:getElapse(t.startTime),errCode:LEAVE_CHANNEL_ERR_REJECTED,sid:getSid(t.instanceId),userId:t.context.uid}),e.t1;case 17:throw sendReport("ChnLeave",{cname:this.channelId,lts:long_1.fromNumber(Date.now()),elapse:getElapse(t.startTime),errCode:LEAVE_CHANNEL_ERR_FAILURE,sid:getSid(t.instanceId),userId:t.context.uid}),new RtmUnknownError("The channel leave failure",{code:LEAVE_CHANNEL_ERR_FAILURE,originalError:e.t1});case 18:sendReport("ChnLeave",{cname:this.channelId,lts:long_1.fromNumber(Date.now()),elapse:getElapse(t.startTime),errCode:0,sid:getSid(t.instanceId),userId:t.context.uid});case 19:case"end":return e.stop()}}),e,this,[[0,4],[9,13]])}))),function(){return t.apply(this,arguments)})},{key:"sendMessage",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enableHistoricalMessaging,i=void 0!==n&&n;validMessage(e,CHANNEL_MESSAGE_ERR_INVALID_MESSAGE);try{var o=this.getSession()}catch(e){throw new RtmInvalidStatusError("The client is not logged in. Cannot do the operation",CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN)}if(!o.joinedChannels.has(this))throw new RtmInvalidStatusError("The channel does not join. Cannot do the operation",CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN);if(this.client.connectionState===ConnectionState.RECONNECTING){var a=Date.now();return new Promise((function(r,n){var o,s=function(){var s=Date.now()-a;try{r(commonSendMessage({message:e,peerId:t.channelId,toPeer:!1,session:t.getSession(),errorCodes:{NOT_LOGGED_IN:CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN,TOO_OFTEN:CHANNEL_MESSAGE_ERR_TOO_OFTEN},diff:s,options:{enableHistoricalMessaging:i,enableOfflineMessaging:!1}}).then((function(){})))}catch(e){isTimeout(e)&&n(new RtmTimeoutError(genTimeoutMessage(t.name,"sendMessageToPeer",MESSAGE_SEND_TIMEOUT),CHANNEL_MESSAGE_ERR_TIMEOUT)),isRtmError(e)&&n(e),n(new RtmUnavailableError("Channel message send failure",{code:CHANNEL_MESSAGE_ERR_FAILURE,originalError:e}))}finally{clearTimeout(o)}};t.client.internalEmitter.once("RECONNECTED",s),o=setTimeout((function(){t.client.internalEmitter.off("RECONNECTED",s),n(new RtmTimeoutError(genTimeoutMessage(t.name,"sendMessageToPeer",MESSAGE_SEND_TIMEOUT),CHANNEL_MESSAGE_ERR_TIMEOUT))}),9e3)}))}if(this.client.connectionState!==ConnectionState.CONNECTED)throw new RtmInvalidStatusError("The client is not logged in. Cannot do the operation",CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN);try{return commonSendMessage({message:e,peerId:this.channelId,toPeer:!1,session:this.getSession(),errorCodes:{NOT_LOGGED_IN:CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN,TOO_OFTEN:CHANNEL_MESSAGE_ERR_TOO_OFTEN},diff:0,options:{enableHistoricalMessaging:i,enableOfflineMessaging:!1}}).then((function(){}))}catch(e){if(isTimeout(e))throw new RtmTimeoutError(genTimeoutMessage(this.name,"sendMessage",MESSAGE_SEND_TIMEOUT),CHANNEL_MESSAGE_ERR_TIMEOUT);if(isRtmError(e))throw this.logError(e),e;throw new RtmUnknownError("The channel message send failure",CHANNEL_MESSAGE_ERR_FAILURE)}}},{key:"getMembers",value:function(){var e=this;try{try{var t=this.getSession()}catch(e){throw new RtmInvalidStatusError("The client is not logged in. Cannot do the operation",GET_MEMBERS_ERR_USER_NOT_LOGGED_IN)}if(!t.joinedChannels.has(this))throw new RtmInvalidStatusError("The channel does not join. Cannot do the operation",GET_MEMBERS_ERR_NOT_IN_CHANNEL);return this.getSession().requestChannelMemberList(this.channelId).pipe(map$1((function(e){return e.memberInfos.map((function(e){return e.account}))}))).toPromise().then((function(t){return e.info("Channel %s - get members success, %o",e.channelId,t),t}))}catch(t){if(isRtmError(t))throw this.logError(t),t;throw new RtmUnknownError("The channel members get failure",GET_MEMBERS_ERR_FAILURE)}}},{key:"hasOtherChannelJoined",value:function(){var e=this;return!this.getSession().joinedChannels.has(this)&&_toConsumableArray(this.getSession().joinedChannels).some((function(t){return t.channelId===e.channelId}))}}]),n}(createEventBase()),_class$1=_temp$1,_applyDecoratedDescriptor(_class$1.prototype,"join",[logged],Object.getOwnPropertyDescriptor(_class$1.prototype,"join"),_class$1.prototype),_applyDecoratedDescriptor(_class$1.prototype,"leave",[logged],Object.getOwnPropertyDescriptor(_class$1.prototype,"leave"),_class$1.prototype),_applyDecoratedDescriptor(_class$1.prototype,"sendMessage",[logged],Object.getOwnPropertyDescriptor(_class$1.prototype,"sendMessage"),_class$1.prototype),_applyDecoratedDescriptor(_class$1.prototype,"getMembers",[logged],Object.getOwnPropertyDescriptor(_class$1.prototype,"getMembers"),_class$1.prototype),_class$1),_class$2,_temp$2,ConnectionChangeReason=RtmStatusCode$1.ConnectionChangeReason,ConnectionState$1=RtmStatusCode$1.ConnectionState,connectionStateCodeMap={DISCONNECTED:1,CONNECTING:2,CONNECTED:3,RECONNECTING:4,ABORTED:5},connectionStateChangeReason={LOGIN:1,LOGIN_SUCCESS:2,LOGIN_FAILURE:3,LOGIN_TIMEOUT:4,INTERRUPTED:5,LOGOUT:6,BANNED_BY_SERVER:7,REMOTE_LOGIN:8},Client=(_temp$2=function(e){"use strict";_inherits(f,e);var t,r,n,i,o,a,s,u,c,l,p,d=_createSuper(f);function f(e,t,r,n){var i;return _classCallCheck(this,f),(i=d.call(this,t,"RtmClient",!0)).parameters=r,i.setParameters=n,i.connectionState=ConnectionState$1.DISCONNECTED,i.internalEmitter=new events.EventEmitter,i.context=void 0,i.invitationManager=new InvitationManager((function(){return i.session}),i.logger),i.reconnId=0,i.channelAttributesCacheLru=new LRUCache(void 0,{maxlen:CHANNEL_ATTRIBUTES_CACHE_MAX_LENGTH}),i.loginPromise=void 0,i.session=void 0,i.lastLoginTime=void 0,i.userDropHandler=function(e){if(i.connectionState!==ConnectionState$1.ABORTED)switch(e){case 11:return i.logError("Kicked off by remote session"),void i.onConnectionStateChanged(ConnectionState$1.ABORTED,ConnectionChangeReason.REMOTE_LOGIN);case 14:case 15:case 16:return i.logError("Server banned because of illegal ".concat({14:"User ID",15:"IP",16:"Channel Name"}[e])),void i.onConnectionStateChanged(ConnectionState$1.ABORTED,ConnectionChangeReason.BANNED_BY_SERVER);default:i.logError("User kicked off for unknown code: ".concat(e)),i.onConnectionStateChanged(ConnectionState$1.ABORTED,ConnectionChangeReason.INTERRUPTED)}},i.context=new Context(e,t),i.invitationManager.on("remoteInvitationInstance",(function(e){i.emit("RemoteInvitationReceived",e)})),i}return _createClass(f,[{key:"renewToken",value:(p=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var r,n,i,o=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t&&0!==t.length){e.next=2;break}throw new RtmInvalidArgumentError("Invalid argument",RENEW_TOKEN_ERR_INVALID_ARGUMENT);case 2:if("string"!=typeof t||!(t.length<APP_ID_LENGTH||t.slice(3,APP_ID_LENGTH+3)!==this.context.appId)){e.next=4;break}throw new RtmInvalidArgumentError("Invalid token",RENEW_TOKEN_ERR_INVALID_TOKEN);case 4:if(e.t0=this.connectionState===ConnectionState$1.ABORTED,!e.t0){e.next=8;break}return e.next=8,new Promise((function(){}));case 8:if(this.connectionState===ConnectionState$1.CONNECTED||this.connectionState===ConnectionState$1.RECONNECTING){e.next=10;break}throw new RtmInvalidStatusError("The client is not logged in",RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN);case 10:if(void 0!==this.session){e.next=12;break}throw new CommonError({SESSION_NOT_FOUND:"Failed to get session of the client"});case 12:return e.prev=12,r=this.context.token,this.context.token=t,e.next=17,this.session.connection.apClient.apEdgeInfo$.pipe(throwIfEmpty((function(){return new Error("No available edge address to connect")})),retryWhen((function(e){return e.pipe(tap((function(e){if(isRtmError(e))throw e})),delay(2e3),take(4))})),first(),timeout(1e4),catchError((function(e){return isTimeout(e)&&o.warn("renewToken timed out"),throwError(e)}))).toPromise();case 17:n=e.sent,i=n.ticket,e.next=29;break;case 21:if(e.prev=21,e.t1=e.catch(12),this.context.token=r,e.t1.code!==LOGIN_ERR_INVALID_APP_ID&&e.t1.code!==LOGIN_ERR_INVALID_TOKEN){e.next=25;break}throw new RtmUnauthenticatedError("Invalid token",RENEW_TOKEN_ERR_INVALID_TOKEN);case 25:if(e.t1.code!==LOGIN_ERR_TOKEN_EXPIRED){e.next=27;break}throw new RtmUnauthenticatedError("The token expired",RENEW_TOKEN_ERR_TOKEN_EXPIRED);case 27:if(!isTimeout(e.t1)){e.next=29;break}throw new RtmTimeoutError("Renew token timed out",RENEW_TOKEN_ERR_FAILURE);case 29:this.session.curLoginSockets.filter((function(e){return void 0!==e})).forEach((function(e){return e.ticket=i}));case 30:case"end":return e.stop()}}),e,this,[[12,21]])}))),function(e){return p.apply(this,arguments)})},{key:"login",value:(l=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var r,n,i,o=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=getRandomUInt64(),n=t.token,t.token===this.context.appId&&(n=void 0),wx.getSystemInfo({success:function(e){sendReport("Session",{appId:o.context.appId,did:"".concat(e.platform,"-").concat(e.model,"-").concat(e.version),elapse:getElapse(o.session&&o.session.startTime),index:{index1:t.uid,index2:o.context.appId,index3:"enableLogUpload=".concat(o.parameters.enableLogUpload)},installId:processId,lts:long_1.fromNumber(Date.now()),os:PLATFORM_TYPE,sid:getSid(r),token:n||"",userId:t.uid,ver:version,buildno:100*VERSION_NO+SUBVERSION,subVersion:SUBVERSION,version:VERSION_NO})}}),isPlainObject(t)&&isValidId(t.uid)){e.next=4;break}throw new RtmInvalidArgumentError("not a valid user id",LOGIN_ERR_INVALID_ARGUMENT);case 4:if("string"!=typeof n||!n){e.next=10;break}if(!(n.length<APP_ID_LENGTH+3||n.slice(3,APP_ID_LENGTH+3)!==this.context.appId)){e.next=7;break}throw new RtmInvalidArgumentError("Invalid token",LOGIN_ERR_INVALID_TOKEN);case 7:this.context.token=n,e.next=12;break;case 10:if("string"==typeof n||isNil_1(n)){e.next=12;break}throw new RtmInvalidArgumentError('The "token" is not a valid string.',LOGIN_ERR_INVALID_ARGUMENT);case 12:return i=Date.now(),this.context.sid=getSid(r),this.loginPromise=this.loginImpl({uid:t.uid,instanceId:r}),this.info("RTM Client logging in as ".concat(t.uid)),e.prev=14,e.next=17,this.loginPromise;case 17:e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(14),isRtmError(e.t0)&&sendReport("Link",{ackedServerIp:"",destServerIp:"",ec:e.t0.code||1,sc:e.t0.serverCode,elapse:getElapse(this.session&&this.session.startTime),lts:long_1.fromNumber(Date.now()),responseTime:Date.now()-i,sid:getSid(r),userId:t.uid}),this.context.token=void 0,e.t0;case 22:return e.prev=22,this.loginPromise=void 0,e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[14,19,22,25]])}))),function(e){return l.apply(this,arguments)})},{key:"logout",value:(c=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.loginPromise,!e.t0){e.next=4;break}return e.next=4,this.loginPromise;case 4:if(this.connectionState!==ConnectionState$1.DISCONNECTED){e.next=6;break}throw this.logError("Already in logout state"),new RtmInvalidStatusError("Logout failure. The client has already been logged out",LOGOUT_ERR_USER_NOT_LOGGED_IN);case 6:if(this.connectionState!==ConnectionState$1.ABORTED){e.next=8;break}return e.abrupt("return",(this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'),void this.onConnectionStateChanged(ConnectionState$1.DISCONNECTED,ConnectionChangeReason.LOGOUT)));case 8:if(void 0===this.session){e.next=16;break}return sendReport("Logout",{elapse:getElapse(this.session.startTime),lts:long_1.fromNumber(Date.now()),sid:getSid(this.session.instanceId),userId:this.context.uid}),e.next=12,this.session.logoutHandler();case 12:this.onConnectionStateChanged(ConnectionState$1.DISCONNECTED,ConnectionChangeReason.LOGOUT),this.log("Log out success"),e.next=17;break;case 16:this.onConnectionStateChanged(ConnectionState$1.DISCONNECTED,ConnectionChangeReason.LOGOUT);case 17:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"sendMessageToPeer",value:(u=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,r){var n,i,o,a,s,u,c=this,l=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>2&&void 0!==l[2]?l[2]:{},i=n.enableOfflineMessaging,o=void 0!==i&&i,a=n.enableHistoricalMessaging,s=void 0!==a&&a,validMessage(t,PEER_MESSAGE_ERR_INVALID_MESSAGE),this.connectionState!==ConnectionState$1.RECONNECTING){e.next=4;break}return u=Date.now(),e.abrupt("return",new Promise((function(e,n){var i,a=function(){var a=_asyncToGenerator(_regeneratorRuntime.mark((function a(){var l;return _regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0!==c.session){a.next=2;break}throw new CommonError({SESSION_NOT_FOUND:"Failed to get session of the client"});case 2:return l=Date.now()-u,a.prev=3,a.t0=e,a.next=7,commonSendMessage({message:t,peerId:r,toPeer:!0,session:c.session,errorCodes:{NOT_LOGGED_IN:PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN,TOO_OFTEN:PEER_MESSAGE_ERR_TOO_OFTEN},diff:l,options:{enableHistoricalMessaging:s,enableOfflineMessaging:o}});case 7:a.t1=a.sent,(0,a.t0)(a.t1),a.next=14;break;case 11:a.prev=11,a.t2=a.catch(3),isTimeout(a.t2)&&n(new RtmTimeoutError(genTimeoutMessage(c.name,"sendMessageToPeer",MESSAGE_SEND_TIMEOUT),PEER_MESSAGE_ERR_TIMEOUT)),isRtmError(a.t2)&&n(a.t2),n(new RtmUnavailableError("Peer-to-peer message send failure",{code:PEER_MESSAGE_ERR_FAILURE,originalError:a.t2}));case 14:return a.prev=14,clearTimeout(i),a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[3,11,14,17]])})));return function(){return a.apply(this,arguments)}}();c.internalEmitter.once("RECONNECTED",a),i=setTimeout((function(){c.internalEmitter.off("RECONNECTED",a),n(new RtmTimeoutError(genTimeoutMessage(c.name,"sendMessageToPeer",MESSAGE_SEND_TIMEOUT),PEER_MESSAGE_ERR_TIMEOUT))}),9e3)})));case 4:if(this.connectionState===ConnectionState$1.CONNECTED){e.next=6;break}throw new RtmInvalidStatusError("Failed to send the peer-to-peer message. The client is not logged in",PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN);case 6:if(void 0!==this.session){e.next=8;break}throw new CommonError({SESSION_NOT_FOUND:"Failed to get session of the client"});case 8:return e.prev=8,e.next=11,commonSendMessage({message:t,peerId:r,toPeer:!0,session:this.session,errorCodes:{NOT_LOGGED_IN:PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN,TOO_OFTEN:PEER_MESSAGE_ERR_TOO_OFTEN},diff:0,options:{enableHistoricalMessaging:s,enableOfflineMessaging:o}});case 11:return e.abrupt("return",e.sent);case 14:if(e.prev=14,e.t0=e.catch(8),!isTimeout(e.t0)){e.next=18;break}throw new RtmTimeoutError(genTimeoutMessage(this.name,"sendMessageToPeer",MESSAGE_SEND_TIMEOUT),PEER_MESSAGE_ERR_TIMEOUT);case 18:if(!isRtmError(e.t0)){e.next=20;break}throw e.t0;case 20:throw new RtmUnavailableError("Peer-to-peer message send failure",{code:PEER_MESSAGE_ERR_FAILURE,originalError:e.t0});case 21:case"end":return e.stop()}}),e,this,[[8,14]])}))),function(e,t){return u.apply(this,arguments)})},{key:"createChannel",value:function(e){var t=this;if(!isValidId(e))throw new RtmInvalidArgumentError([invalidArgumentMessage,getName({channelId:e})],CREATE_CHANNEL_ERR_INVALID_ARGUMENT);return new Channel(e,(function(){return t.session}),this,this.logger)}},{key:"setChannelAttributes",value:(s=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,r){var n,i,o,a,s,u=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>2&&void 0!==u[2]?u[2]:{},i=n.enableNotificationToChannelMembers,o=void 0!==i&&i,validAttributes({attributes:r,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===ConnectionState$1.CONNECTED){e.next=3;break}throw new RtmInvalidStatusError("The client is not logged in",ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN);case 3:if(void 0!==this.session){e.next=5;break}throw new CommonError({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return a=this.session.requestSetChannelAttributes(t,r,o).toPromise(),e.prev=6,e.next=9,a;case 9:s=mapValues_1(r,(function(e){return getUtf8StringSize(e)})),this.channelAttributesCacheLru.set(t,s),e.next=18;break;case 13:if(e.prev=13,e.t0=e.catch(6),!isRtmError(e.t0)){e.next=17;break}throw e.t0;case 17:throw new RtmInvalidArgumentError("arguments is not valid",ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT);case 18:case"end":return e.stop()}}),e,this,[[6,13]])}))),function(e,t){return s.apply(this,arguments)})},{key:"addOrUpdateChannelAttributes",value:(a=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,r){var n,i,o,a,s,u=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>2&&void 0!==u[2]?u[2]:{},i=n.enableNotificationToChannelMembers,o=void 0!==i&&i,a=_objectSpread(_objectSpread({},this.channelAttributesCacheLru.get(t,{})),mapValues_1(r,(function(e){return getUtf8StringSize(e)}))),validAttributes({attributes:r,attrSizeMap:a,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===ConnectionState$1.CONNECTED){e.next=4;break}throw new RtmInvalidStatusError("The client is not logged in",ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN);case 4:if(void 0!==this.session){e.next=6;break}throw new CommonError({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return s=this.session.requestAddOrUpdateChannelAttributes(t,r,o).toPromise(),e.prev=7,e.next=10,s;case 10:this.channelAttributesCacheLru.set(t,a),e.next=18;break;case 13:if(e.prev=13,e.t0=e.catch(7),!isRtmError(e.t0)){e.next=17;break}throw e.t0;case 17:throw new RtmInvalidArgumentError("arguments is not valid",ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT);case 18:case"end":return e.stop()}}),e,this,[[7,13]])}))),function(e,t){return a.apply(this,arguments)})},{key:"deleteChannelAttributesByKeys",value:(o=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,r){var n,i,o,a,s,u,c,l,p=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>2&&void 0!==p[2]?p[2]:{},i=n.enableNotificationToChannelMembers,o=void 0!==i&&i,Array.isArray(r)&&0!==r.length&&isValidId(t)&&!r.some((function(e){return 0===e.length||e.length>CHANNEL_ATTRIBUTES_MAX_KEY_COUNT}))){e.next=3;break}throw new RtmInvalidStatusError("arguments is not valid",ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT);case 3:if(this.connectionState===ConnectionState$1.CONNECTED){e.next=5;break}throw new RtmInvalidStatusError("The client is not logged in",ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN);case 5:if(void 0!==this.session){e.next=7;break}throw new CommonError({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return a=this.session.requestDeleteChannelAttributesByKeys(t,r,o).toPromise(),e.prev=8,e.next=11,a;case 11:if(s=this.channelAttributesCacheLru.get(t)){u=_createForOfIteratorHelper(r);try{for(u.s();!(c=u.n()).done;)l=c.value,delete s[l]}catch(e){u.e(e)}finally{u.f()}}e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(8),!isRtmError(e.t0)){e.next=19;break}throw e.t0;case 19:throw new RtmInvalidArgumentError("arguments is not valid",ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT);case 20:case"end":return e.stop()}}),e,this,[[8,15]])}))),function(e,t){return o.apply(this,arguments)})},{key:"clearChannelAttributes",value:(i=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var r,n,i,o,a=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{},n=r.enableNotificationToChannelMembers,i=void 0!==n&&n,this.connectionState===ConnectionState$1.CONNECTED){e.next=3;break}throw new RtmInvalidStatusError("The client is not logged in",ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN);case 3:if(void 0!==this.session){e.next=5;break}throw new CommonError({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return o=this.session.requestClearChannelAttributes(t,i).toPromise(),e.prev=6,e.next=9,o;case 9:this.channelAttributesCacheLru.delete(t),e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(6),!isRtmError(e.t0)){e.next=16;break}throw e.t0;case 16:throw new RtmInvalidArgumentError("arguments is not valid",ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT);case 17:case"end":return e.stop()}}),e,this,[[6,12]])}))),function(e){return i.apply(this,arguments)})},{key:"getChannelAttributes",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var r,n,i,o,a,s,u,c,l,p,d,f;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(isValidId(t)){e.next=2;break}throw new RtmInvalidArgumentError("Not a valid channel ID",ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT);case 2:if(this.connectionState===ConnectionState$1.CONNECTED){e.next=4;break}throw new RtmInvalidStatusError("The client is not logged in",ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN);case 4:if(void 0!==this.session){e.next=6;break}throw new CommonError({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return e.prev=6,e.next=9,this.session.requestGetChannelAttributesKeys(t).toPromise();case 9:return r=e.sent,n=r.keys,e.next=13,this.session.requestGetChannelAttributesByKeys(t,n).toPromise();case 13:i=e.sent,o=i.attributeMaps,e.next=22;break;case 17:if(e.prev=17,e.t0=e.catch(6),!isRtmError(e.t0)){e.next=21;break}throw e.t0;case 21:throw new RtmInvalidArgumentError("arguments is not valid",ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT);case 22:a={},s=_createForOfIteratorHelper(o),e.prev=24,s.s();case 26:if((u=s.n()).done){e.next=33;break}if(c=u.value,l=c.key,p=c.ms,d=c.value,f=c.origin,"string"==typeof l&&long_1.isLong(p)&&"string"==typeof d&&isValidId(f)){e.next=30;break}return e.abrupt("break",33);case 30:a[l]={value:d,lastUpdateUserId:f,lastUpdateTs:p.toNumber()};case 31:e.next=26;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(24),s.e(e.t1);case 38:return e.prev=38,s.f(),e.finish(38);case 41:return e.abrupt("return",(this.channelAttributesCacheLru.set(t,mapValues_1(a,(function(e){return getUtf8StringSize(e.value)}))),a));case 42:case"end":return e.stop()}}),e,this,[[6,17],[24,35,38,41]])}))),function(e){return n.apply(this,arguments)})},{key:"getChannelAttributesByKeys",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,r){var n,i,o,a,s,u,c,l,p,d,f;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===ConnectionState$1.CONNECTED){e.next=2;break}throw new RtmInvalidStatusError("The client is not logged in",ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN);case 2:if(void 0!==this.session){e.next=4;break}throw new CommonError({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return checkValidAttrGetByKeysArgs(t,r),e.prev=5,e.next=8,this.session.requestGetChannelAttributesByKeys(t,r).toPromise();case 8:n=e.sent,i=n.attributeMaps,e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(5),!isRtmError(e.t0)){e.next=16;break}throw e.t0;case 16:throw new RtmInvalidArgumentError("arguments is not valid",ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT);case 17:o={},a=this.channelAttributesCacheLru.get(t,{}),s=_createForOfIteratorHelper(i),e.prev=19,s.s();case 21:if((u=s.n()).done){e.next=28;break}if(c=u.value,l=c.key,p=c.ms,d=c.value,f=c.origin,"string"==typeof l&&long_1.isLong(p)&&"string"==typeof d&&isValidId(f)){e.next=25;break}return e.abrupt("break",28);case 25:a[l]=getUtf8StringSize(d),o[l]={value:d,lastUpdateUserId:f,lastUpdateTs:p.toNumber()};case 26:e.next=21;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(19),s.e(e.t1);case 33:return e.prev=33,s.f(),e.finish(33);case 36:return e.abrupt("return",(this.channelAttributesCacheLru.set(t,a),o));case 37:case"end":return e.stop()}}),e,this,[[5,12],[19,30,33,36]])}))),function(e,t){return r.apply(this,arguments)})},{key:"createLocalInvitation",value:function(e){if(!isValidId(e))throw new RtmInvalidArgumentError([invalidArgumentMessage,getName({calleeId:e})],INVITATION_API_CALL_ERR_INVALID_ARGUMENT);return this.invitationManager.genLocalInvitation(e)}},{key:"loginImpl",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var r,n,i,o,a=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.uid,n=t.instanceId,i=n,!(void 0!==this.lastLoginTime&&Date.now()-this.lastLoginTime<1e3/LOGIN_QPS_LIMIT)){e.next=4;break}throw new RtmInvokeTooOftenError(["The frequency of login exceeded the limit of %d queries per second",LOGIN_QPS_LIMIT],LOGIN_ERR_TOO_OFTEN);case 4:if(this.connectionState===ConnectionState$1.DISCONNECTED){e.next=6;break}throw new RtmInvalidStatusError("The SDK is either logging in or has logged in the Agora RTM system",LOGIN_ERR_ALREADY_LOGIN);case 6:e.prev=6,this.context.uid=r,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(6),new RtmInvalidArgumentError([invalidArgumentMessage,getName({uid:r})],LOGIN_ERR_INVALID_ARGUMENT);case 13:return this.onConnectionStateChanged(ConnectionState$1.CONNECTING,ConnectionChangeReason.LOGIN),o=new Session$2(this.context,new Connection(this.context,this.logger),i,this.logger),this.session=o,o.on("connectionLost",(function(){a.connectionState===ConnectionState$1.CONNECTED&&(a.onConnectionStateChanged(ConnectionState$1.RECONNECTING,ConnectionChangeReason.INTERRUPTED),a.session&&a.session.once("userJoined",(function(){a.onConnectionStateChanged(ConnectionState$1.CONNECTED,ConnectionChangeReason.LOGIN_SUCCESS)})))})),o.on("tokenExpired",(function(){a.emit("TokenExpired")})),o.once("userDrop",this.userDropHandler),this.session.on("peerTextMessage",(function(e){var t=e.peerId,r=e.text,n=e.properties,i=function(){return a.emit("MessageFromPeer",{text:r,messageType:RtmStatusCode$1.MessageType.TEXT},t,n)};a.connectionState!==ConnectionState$1.CONNECTED?Promise.resolve().then(i):i()})),o.on("channelAttributesUpdated",(function(e){var t,r=e.channelId,n={},i=_createForOfIteratorHelper(e.attributeMaps);try{for(i.s();!(t=i.n()).done;){var o=t.value,s=o.key,u=o.ms,c=o.value,l=o.origin;if("string"!=typeof s||!long_1.isLong(u)||"string"!=typeof c||!isValidId(l))break;n[s]=getUtf8StringSize(c)}}catch(e){i.e(e)}finally{i.f()}a.channelAttributesCacheLru.set(r,n)})),o.on("instanceChanged",(function(e){return i=e})),o.on("invitationMessage",this.invitationManager.invitationMessageHandler.bind(this.invitationManager)),this.lastLoginTime=Date.now(),e.prev=17,e.next=20,o.loginHandler().toPromise();case 20:e.next=29;break;case 22:if(e.prev=22,e.t1=e.catch(17),!isTimeout(e.t1)){e.next=26;break}throw this.onConnectionStateChanged(ConnectionState$1.DISCONNECTED,ConnectionChangeReason.LOGIN_TIMEOUT),new RtmTimeoutError(genTimeoutMessage(this.name,"login",CLIENT_LOGIN_TIMEOUT),LOGIN_ERR_TIMEOUT);case 26:if(this.onConnectionStateChanged(ConnectionState$1.DISCONNECTED,ConnectionChangeReason.LOGIN_FAILURE),!isRtmError(e.t1)){e.next=28;break}throw e.t1;case 28:throw new RtmUnavailableError("Login failure",{code:LOGIN_ERR_UNKNOWN,originalError:e.t1});case 29:this.onConnectionStateChanged(ConnectionState$1.CONNECTED,ConnectionChangeReason.LOGIN_SUCCESS);case 30:case"end":return e.stop()}}),e,this,[[6,10],[17,22]])}))),function(e){return t.apply(this,arguments)})},{key:"onConnectionStateChanged",value:function(e,t){e===ConnectionState$1.RECONNECTING&&(this.reconnId+=1),sendReport("ConnectionStateChange",{elapse:getElapse(this.session&&this.session.startTime),lts:long_1.fromNumber(Date.now()),newState:connectionStateCodeMap[e],oldState:connectionStateCodeMap[this.connectionState],reason:connectionStateChangeReason[t],sid:getSid(this.session&&this.session.instanceId||long_1.fromNumber(0)),userId:this.context.uid,reconnId:this.reconnId}),this.connectionState===ConnectionState$1.RECONNECTING&&e===ConnectionState$1.CONNECTED&&this.internalEmitter.emit("RECONNECTED"),this.connectionState=e,e!==ConnectionState$1.ABORTED&&e!==ConnectionState$1.DISCONNECTED||(this.reconnId=0,this.session&&(this.session.removeAllListeners(),this.session.joinedChannels.clear(),this.session.msgDedupLru.empty(),this.session.dialogueSequenceLru.empty()),this.session=void 0,this.context.token=void 0),this.emit("ConnectionStateChanged",e,t)}}]),f}(createEventBase()),_class$2=_temp$2,_applyDecoratedDescriptor(_class$2.prototype,"renewToken",[logged],Object.getOwnPropertyDescriptor(_class$2.prototype,"renewToken"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,"login",[logged],Object.getOwnPropertyDescriptor(_class$2.prototype,"login"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,"logout",[logged],Object.getOwnPropertyDescriptor(_class$2.prototype,"logout"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,"sendMessageToPeer",[logged],Object.getOwnPropertyDescriptor(_class$2.prototype,"sendMessageToPeer"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,"createChannel",[logged],Object.getOwnPropertyDescriptor(_class$2.prototype,"createChannel"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,"setChannelAttributes",[logged],Object.getOwnPropertyDescriptor(_class$2.prototype,"setChannelAttributes"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,"addOrUpdateChannelAttributes",[logged],Object.getOwnPropertyDescriptor(_class$2.prototype,"addOrUpdateChannelAttributes"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,"deleteChannelAttributesByKeys",[logged],Object.getOwnPropertyDescriptor(_class$2.prototype,"deleteChannelAttributesByKeys"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,"clearChannelAttributes",[logged],Object.getOwnPropertyDescriptor(_class$2.prototype,"clearChannelAttributes"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,"getChannelAttributes",[logged],Object.getOwnPropertyDescriptor(_class$2.prototype,"getChannelAttributes"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,"getChannelAttributesByKeys",[logged],Object.getOwnPropertyDescriptor(_class$2.prototype,"getChannelAttributesByKeys"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,"createLocalInvitation",[logged],Object.getOwnPropertyDescriptor(_class$2.prototype,"createLocalInvitation"),_class$2.prototype),_class$2),ConnectionChangeReason$1=RtmStatusCode$1.ConnectionChangeReason,ConnectionState$2=RtmStatusCode$1.ConnectionState,MessageType$1=RtmStatusCode$1.MessageType;void 0===Number.MAX_SAFE_INTEGER&&(Number.MAX_SAFE_INTEGER=9007199254740991);var LogFilter={LOG_FILTER_OFF:{error:!1,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_ERROR:{error:!0,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_WARNING:{error:!0,warn:!0,info:!1,track:!1,debug:!1},LOG_FILTER_INFO:{error:!0,warn:!0,info:!0,track:!1,debug:!1},LOG_FILTER_DEBUG:{error:!0,warn:!0,info:!0,track:!0,debug:!0}};function createInstance(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.enableLogUpload,n=void 0!==r&&r,i=t.logFilter,o=void 0===i?LogFilter.LOG_FILTER_INFO:i;if(!isValidAppId(e))throw new RtmInvalidArgumentError([invalidArgumentMessage,getName({appId:e})],CREATE_INSTANCE_ERR_INVALID_ARGUMENT);var a={enableLogUpload:n,logFilter:o},s=initLoggerId(),u=genInfoLogger(a),c=genWarnLogger(a),l=genErrorLogger(a),p=trackLoggerGenerator(s,a),d=debugLoggerGenerator(s,a),f=d("RTM:DEBUG","<Entry> ");return u("The Agora RTM Web SDK version is %s",version),f("Creating an RtmClient instance"),f('The Git commit ID is "'.concat(BUILD,'"')),f("The App ID is %s",e),u("The process ID is %s",processId),u("The build is %s",BUILD),f("process.env.NODE_ENV is %s","production"),new Client(e,{genLogger:d,genTracker:p,info:u,warn:c,logError:l,loggerId:s},a,(function(e){var t,r=_createForOfIteratorHelper(getKeys(e));try{for(r.s();!(t=r.n()).done;){var n=t.value,i=e[n];null!=i&&(a[n]=i)}}catch(e){r.e(e)}finally{r.f()}}))}var MUTABLE_PARAMS={DISABLE_MESSAGE_COMPRESSION:!1};function setParameter(e,t){Object.keys(MUTABLE_PARAMS).includes(e)&&(MUTABLE_PARAMS[e]=t)}function getParameter(e){return MUTABLE_PARAMS[e]}var AgoraRTM=_objectSpread({createInstance:createInstance,BUILD:BUILD,VERSION:version,processId:processId,ConnectionChangeReason:ConnectionChangeReason$1,ConnectionState:ConnectionState$2,MessageType:MessageType$1,setParameter:setParameter,getParameter:getParameter},LogFilter);module.exports=AgoraRTM}).call(this,__webpack_require__(1).default,__webpack_require__(79).default)},function(e,t,r){var n=r(81);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(116);e.exports=function(e,t){if(null==e)return{};var r,i,o=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function r(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,u,"next",e)}function u(e){r(a,i,o,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(119),i=r(120),o=r(84),a=r(121);e.exports=function(e,t){return n(e)||i(e,t)||o(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(123);function i(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,r){var i=n(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(5);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(5),i=r(73),o=r(125),a=r(126);function s(t){var r="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return a(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(73),i=r(127);function o(t,r,a){return i()?(e.exports=o=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=o=function(e,t,r){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return r&&n(o,r.prototype),o},e.exports.__esModule=!0,e.exports.default=e.exports),o.apply(null,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(129),i=r(130),o=r(84),a=r(131);e.exports=function(e){return n(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(85);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";r.r(t);var n=r(58),i=r(20);for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0);var s=Object(a.a)(i.default,n.b,n.c,!1,null,"5229a156","2ca68f09",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(r(87).default,this.options.style):Object.assign(this.options.style,r(87).default)}).call(s),t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(59),i=r(23);for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0);var s=Object(a.a)(i.default,n.b,n.c,!1,null,"68e32a3a","7a17ac19",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(r(88).default,this.options.style):Object.assign(this.options.style,r(88).default)}).call(s),t.default=s.exports},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.pay=void 0;function r(e,t,r){r?r(e):function(e){uni.reLaunch({url:"/pages/order/pay-success/pay-success?order_id="+e.data.order_id})}(e)}function n(e,t){t?t(e):uni.redirectTo({url:"/pages/order/order-detail?order_id="+e.data.order_id})}t.pay=function(t,i,o,a){if(-10===t.code)return i.showError(t.msg),!1;20!=t.data.pay_type?(10==t.data.pay_type&&r(t,i,o),30==t.data.pay_type&&function(t,i,o,a){uni.requestPayment({provider:"alipay",orderInfo:t.data.payment,success:function(e){r(t,i,o)},fail:function(r){e("log",r," at common/pay.js:145"),i.showError("\u8ba2\u5355\u672a\u652f\u4ed8\u6210\u529f",(function(){n(t,a)}))}})}(t,i,o,a),t.code):function(t,i,o,a){plus.payment.getChannels((function(s){i.channel=s[0],uni.requestPayment({provider:"wxpay",orderInfo:t.data.payment,success:function(e){r(t,i,o)},fail:function(r){e("log",r," at common/pay.js:127"),i.showError("\u8ba2\u5355\u672a\u652f\u4ed8\u6210\u529f",(function(){n(t,a)}))}})}),(function(t){e("log","\u83b7\u53d6\u652f\u4ed8\u901a\u9053\u5931\u8d25\uff1a"+t.message," at common/pay.js:134")}))}(t,i,o,a)}}).call(this,r(1).default)},function(e,t,r){"use strict";r.r(t);var n=r(60),i=r(26);for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0);var s=Object(a.a)(i.default,n.b,n.c,!1,null,"580bcc48","1a3a7e5c",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(r(89).default,this.options.style):Object.assign(this.options.style,r(89).default)}).call(s),t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(61),i=r(29);for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0);var s=Object(a.a)(i.default,n.b,n.c,!1,null,"ec5b3b62","a6cb95e6",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(r(90).default,this.options.style):Object.assign(this.options.style,r(90).default)}).call(s),t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(62),i=r(32);for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0);var s=Object(a.a)(i.default,n.b,n.c,!1,null,"1efd7d4a","68dc376d",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(r(91).default,this.options.style):Object.assign(this.options.style,r(91).default)}).call(s),t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(63),i=r(35);for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0);var s=Object(a.a)(i.default,n.b,n.c,!1,null,"5e63ec96","fadb2f2a",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(r(92).default,this.options.style):Object.assign(this.options.style,r(92).default)}).call(s),t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(64),i=r(38);for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0);var s=Object(a.a)(i.default,n.b,n.c,!1,null,"76d9a8aa","52f3d614",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(r(93).default,this.options.style):Object.assign(this.options.style,r(93).default)}).call(s),t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(65),i=r(41);for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0);var s=Object(a.a)(i.default,n.b,n.c,!1,null,"dcfcd290","35849c1c",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(r(94).default,this.options.style):Object.assign(this.options.style,r(94).default)}).call(s),t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(66),i=r(44);for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0);var s=Object(a.a)(i.default,n.b,n.c,!1,null,"c7810b42","1bdb0a8a",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(r(95).default,this.options.style):Object.assign(this.options.style,r(95).default)}).call(s),t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(67),i=r(47);for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0);var s=Object(a.a)(i.default,n.b,n.c,!1,null,null,"cb009ad4",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(r(96).default,this.options.style):Object.assign(this.options.style,r(96).default)}).call(s),t.default=s.exports},function(e,t,r){"use strict";r.r(t);var n=r(68),i=r(50);for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var a=r(0);var s=Object(a.a)(i.default,n.b,n.c,!1,null,"7aba0556","1cfa0646",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(r(97).default,this.options.style):Object.assign(this.options.style,r(97).default)}).call(s),t.default=s.exports},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={app_url:"https://mxy.haidiao888.com/",app_id:10001,h5_addr:"/h5",font_url:"https://at.alicdn.com/t/font_2184879_i7r5f24ts0d.ttf"};t.default=n}]);