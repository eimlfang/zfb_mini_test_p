(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/user/index/index"],{"212f":function(e,t,n){"use strict";n.r(t);var a=n("b061"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},"45da":function(e,t,n){"use strict";n.r(t);var a=n("60bf"),o=n("212f");for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("d16b");var s=n("f0c5"),u=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=u.exports},"60bf":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var a={recommendProduct:function(){return n.e("components/recommendProduct/recommendProduct").then(n.bind(null,"296e"))}},o=function(){var e=this.$createElement,t=(this._self._c,this.theme()||""),n=this.theme();this.$mp.data=Object.assign({},{$root:{m0:t,m1:n}})},i=[]},b061:function(e,t,n){"use strict";(function(e){var a=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("2eee")),i=a(n("c973")),s=a(n("067d")),u={components:{recommendProduct:function(){n.e("components/recommendProduct/recommendProduct").then(function(){return resolve(n("296e"))}.bind(null,n)).catch(n.oe)}},data:function(){return{baseurl:"",shopinfo:"",isloadding:!0,sign:{},loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,menus:[],detail:{balance:0,points:0,grade:{name:""}},is_recycle:0,orderCount:{},coupon:0,setting:{},user_type:"",msgcount:0,sessionKey:""}},onPullDownRefresh:function(){this.getData(),this.getDatapage()},onShow:function(){this.getData(),this.getData1(),my.navigateTo({url:"plugin://esign/home?flowId=".concat(12125122)})},onLoad:function(){this.baseurl=s.default.app_url},methods:{dingyue:function(){my.requestSubscribeMessage({entityIds:["f558d5ee8d4c47889d9dae89887bc0ad","0e59fbc3303845b29a4f2c4542705ee0"],success:function(e){},fail:function(e){},complete:function(e){}})},sfzrz:function(){e.navigateTo({url:"/pages/user/authentication"})},onGetAuthorize1:function(){var t=this;return(0,i.default)(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:my.getAuthCode({scopes:["auth_base"],success:function(n){my.getPhoneNumber({success:function(a){var o=a.response;o=JSON.parse(o);var i=o.response;t._post("user.usermp/mnpAlipayAuthLogin",{code:n.authCode,content:i},(function(n){e.setStorageSync("token",n.data.data.token),e.setStorageSync("user_id",n.data.data.user_id),e.showToast({title:"登录成功"}),t.getData(),t.dingyue()}))},fail:function(e){console.log("失败"),reject(e)}})}});case 1:case"end":return n.stop()}}),n)})))()},onAuthError:function(){e.showModal({title:"提示",content:"取消授权，可能导致服务无法使用，或者页面显示不完整",success:function(e){e.confirm?console.log("取消授权"):console.log("重新授权")}})},onGetAuthorize:function(){var t=this;return(0,i.default)(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t,my.getOpenUserInfo({success:function(n){var a=JSON.parse(n.response);"10000"==a.response.code?t._post("user.usermp/changeuserinfo",{avatar:a.response.avatar,nickName:a.response.nickName},(function(n){e.showToast({title:"绑定成功"}),t.getData()})):e.showToast({title:"绑定失败"})},fail:function(e){console.log(e)}});case 2:case"end":return n.stop()}}),n)})))()},getData1:function(){var t=this;e.showLoading({title:"加载中"}),t._get("index/index",{},(function(n){if(t.shopinfo=n.data.page.params,"https://huichu.haidiao888.com/"==s.default.app_url){var a=n.data.page.params.name;t.shopinfo.tiname=a.substr(0,3)}else if("https://mxy.haidiao888.com/"==s.default.app_url){var o=n.data.page.params.name;t.shopinfo.tiname=o.substr(0,4)}else if("https://yunxiangzu.rchz.top/"==s.default.app_url){var i=n.data.page.params.name;t.shopinfo.tiname=i.substr(0,3)}else if("https://zidizulin.rchz.top/"==s.default.app_url){var u=n.data.page.params.name;t.shopinfo.tiname=u.substr(0,4)}e.setNavigationBarTitle({title:n.data.page.params.name,success:function(){},fail:function(){},complete:function(){}}),t.loadding=!1,e.hideLoading()}))},getData:function(){var t=this;t.isloadding=!0,t._get("user.index/detail",{url:t.url},(function(n){var a=n.data.userInfo.username,o=n.data.userInfo.usernum;e.setStorageSync("username",a),e.setStorageSync("usernum",o),n.data.getPhone?t.bindMobile():(t.detail=n.data.userInfo,t.detail.favorite=n.data.favorite,t.sign=n.data.sign,t.coupon=n.data.coupon,t.orderCount=n.data.orderCount,t.menus=n.data.menus,t.setting=n.data.setting,t.is_recycle=n.data.userInfo.is_recycle,t.msgcount=n.data.msgcount,t.loadding=!1,e.stopPullDownRefresh(),t.isloadding=!1)}))},bindMobile:function(){},jumpPage:function(e){e.startsWith("/")?this.gotoPage(e):this[e]()},scanQrcode:function(){this.gotoPage("/pages/user/scan/scan")},getPhoneNumber:function(t){var n=this;if("getPhoneNumber:ok"!==t.detail.errMsg)return!1;e.showLoading({title:"加载中"}),e.login({success:function(a){n._post("user.user/bindMobile",{session_key:n.sessionKey,encrypted_data:t.detail.encryptedData,iv:t.detail.iv},(function(t){e.showToast({title:"绑定成功"}),n.detail.mobile=t.data.mobile}),!1,(function(){e.hideLoading()}))}})}}};t.default=u}).call(this,n("c11b")["default"])},d16b:function(e,t,n){"use strict";var a=n("def0"),o=n.n(a);o.a},def0:function(e,t,n){},e554:function(e,t,n){"use strict";(function(e){var t=n("4ea4");n("a8db"),n("33db"),n("5c17");t(n("66fd"));var a=t(n("45da"));my.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("c11b")["createPage"])}},[["e554","common/runtime","common/vendor"]]]);