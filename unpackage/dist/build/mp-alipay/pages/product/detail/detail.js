(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/product/detail/detail"],{"1d43":function(t,e,i){"use strict";i.r(e);var o=i("83ec"),n=i.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);e["default"]=n.a},"28ac":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return o}));var o={uIcon:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(i.bind(null,"1d9f"))},uTabs:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-tabs/u-tabs")]).then(i.bind(null,"8d54"))}},n=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.isVideoPlay=!0},t.e1=function(e){t.isVideoPlay=!0},t.e2=function(e){t.isVideoPlay=!1},t.e3=function(e){t.isVideoPlay=!1})},a=[]},"37d9":function(t,e,i){"use strict";var o=i("9a3f"),n=i.n(o);n.a},"83ec":function(t,e,i){"use strict";(function(t){var o=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("7610")),a=o(i("067d")),s={components:{spec:function(){Promise.all([i.e("common/vendor"),i.e("pages/product/detail/popup/spec")]).then(function(){return resolve(i("a293"))}.bind(null,i)).catch(i.oe)},share:function(){i.e("pages/product/detail/popup/share").then(function(){return resolve(i("9e45"))}.bind(null,i)).catch(i.oe)},uniPopup:function(){i.e("components/uni-popup").then(function(){return resolve(i("743f"))}.bind(null,i)).catch(i.oe)},Mpservice:function(){i.e("components/mpservice/Mpservice").then(function(){return resolve(i("6d76"))}.bind(null,i)).catch(i.oe)},guarantee:function(){i.e("components/guarantee").then(function(){return resolve(i("a464"))}.bind(null,i)).catch(i.oe)},AppShare:function(){Promise.all([i.e("common/vendor"),i.e("components/app-share")]).then(function(){return resolve(i("23de"))}.bind(null,i)).catch(i.oe)},coupon:function(){i.e("pages/product/detail/popup/coupon").then(function(){return resolve(i("5d8e"))}.bind(null,i)).catch(i.oe)}},data:function(){return{store:"",list1:[{name:"商品详情",val:1},{name:"租赁说明",val:2},{name:"租赁说明",val:3}],baseurl:"",product_name:"",ddshow:"",zmshow:"",hastixing:"",xqshow:1,statusBarHeight:0,titleBarHeight:0,store_open:1,phoneHeight:0,scrollviewHigh:0,loadding:!0,indicatorDots:!0,autoplay:!1,interval:2e3,duration:500,isPopup:!1,product_id:null,detail:{product_sku:{},show_sku:{product_price:"",product_sku_id:0,line_price:"",stock_num:0,sku_image:""}},specData:null,productModel:{},buyNow:!1,url:"",productSpecArr:[],cart_total_num:0,isbottmpanel:!1,isguarantee:!1,isCreatedImg:!1,poster_img:"",isMpservice:!1,alreadyChioce:"",shop_info:"",isfollow:"",shop_supplier_id:"",serverList:"",room_id:"",isAppShare:!1,appParams:{title:"",summary:"",path:""},service_open:0,service_type:0,user_id:0,is_virtual:1,couponList:[],isCoupon:!1,middle:1,isVideoPlay:!1,show_discount:"",discount:{product_coupon:[],product_reduce:[],give_points:""}}},onLoad:function(e){this.baseurl=a.default.app_url,console.log("options",e),e.tuiguangid&&t.setStorageSync("tuiguangid",e.tuiguangid),this.GetStatusBarHeight();var i=n.default.getSceneData(e);this.user_id=t.getStorageInfoSync("user_id"),this.room_id=e.room_id,this.product_id=e.product_id?e.product_id:i.gid},onReady:function(){this.init(),this.getData()},methods:{hastixing1:function(){t.navigateTo({url:"/pages/order/myorder"})},cysm:function(t){this.xqshow=t.val},GetStatusBarHeight:function(){var e=t.getSystemInfoSync();this.statusBarHeight=e.statusBarHeight,this.titleBarHeight=30},init:function(){var e=this;t.getSystemInfo({success:function(i){e.phoneHeight=i.windowHeight;var o=t.createSelectorQuery().select(".btns-wrap");o.boundingClientRect((function(t){var i=e.phoneHeight-t.height;e.scrollviewHigh=i})).exec()}})},getData:function(){var e=this,i=e.product_id;t.showLoading({title:"加载中"}),e._get("product.product/detail",{product_id:i,url:e.url,visitcode:e.getVisitcode()},(function(i){e.product_name=i.data.detail.product_name,e.ddshow=i.data.store.ddshow,e.zmshow=i.data.store.zmshow,e.hastixing=i.data.hastixing,e.shop_supplier_id=i.data.detail.supplier.shop_supplier_id,e.shop_info=i.data.detail.supplier,e.isfollow=i.data.detail.isfollow,e.service_open=i.data.service_open,e.is_virtual=i.data.detail.is_virtual,e.couponList=i.data.couponList,null==i.data.mp_service?e.service_type=10:e.service_type=i.data.mp_service.service_type,e.cart_total_num=i.data.cart_total_num,i.data.detail.content=n.default.format_content(i.data.detail.content),20==i.data.detail.spec_type&&e.initSpecData(i.data.specData),e.detail=i.data.detail,e.store=i.data.store,e.show_discount=i.data.show_discount,e.discount=i.data.discount,e.getServer(),e.loadding=!1,t.hideLoading()}))},getServer:function(){var t=[];this.detail.server.forEach((function(e,i){t.push(e.name)})),this.serverList=t.join("·")},initSpecData:function(t){var e=this;for(var i in t.spec_attr)for(var o in t.spec_attr[i].spec_items)t.spec_attr[i].spec_items[o].checked=!1;this.specData=t,this.specData.spec_attr&&(this.specData.spec_attr.forEach((function(t){e.alreadyChioce+=t.group_name,e.alreadyChioce+=" / "})),this.alreadyChioce=this.alreadyChioce.replace(/(\s\/\s)$/gi,""))},openPopup:function(t){var e={specData:this.specData,detail:this.detail,productSpecArr:null!=this.specData?new Array(this.specData.spec_attr.length):[],room_id:""==this.room_id?"0":this.room_id,show_sku:{sku_image:"",seckill_price:0,product_sku_id:0,line_price:0,seckill_stock:0,seckill_product_sku_id:0,sum:1},type:t};this.productModel=e,this.isPopup=!0},closePopup:function(t,e){if(this.isPopup=!1,t&&t.spec_attr){this.alreadyChioce="";var i="已选：",o="";t.spec_attr.forEach((function(t){if(t.spec_items){for(var e="",n=0;n<t.spec_items.length;n++){var a=t.spec_items[n];if(a.checked){e=a.spec_value+" / ";break}}""!=e?i+=e:o+=t.group_name}})),""!=o?this.alreadyChioce=o:(i=i.replace(/(\s\/\s)$/gi,""),this.alreadyChioce=i)}e&&(this.cart_total_num=e)},lookEvaluate:function(t){this.gotoPage("/pages/product/detail/look-evaluate/look-evaluate?product_id="+t)},onShareAppMessage:function(){var t=this.getShareUrlParams({product_id:this.product_id});return{title:this.detail.product_name,path:"/pages/product/detail/detail?"+t}},goback:function(){var e=getCurrentPages();e.length<=1?this.gotoPage("/pages/index/index"):t.navigateBack()},gotocart:function(){this.gotoPage("/pages/cart/cart")},closeBottmpanel:function(t){this.isbottmpanel=!1,2==t.type&&(this.poster_img=t.poster_img,this.isCreatedImg=!0)},closeGuarantee:function(){this.isguarantee=!1},showGuarantee:function(){this.isguarantee=!0},showShare:function(){this.isbottmpanel=!0},closeAppShare:function(t){this.isAppShare=!1},hidePopupFunc:function(){this.isCreatedImg=!1},savePosterImg:function(){var e=this;t.showLoading({title:"加载中"}),t.downloadFile({url:e.poster_img,success:function(i){t.hideLoading(),t.saveImageToPhotosAlbum({filePath:i.tempFilePath,success:function(i){t.showToast({title:"保存成功",icon:"success",duration:2e3}),e.isCreatedImg=!1},fail:function(e){"saveImageToPhotosAlbum:fail auth deny"===e.errMsg&&(t.showToast({title:"请允许访问相册后重试",icon:"none",duration:1e3}),setTimeout((function(){t.openSetting()}),1e3))},complete:function(t){}})}})},openCoupon:function(){this.isCoupon=!this.isCoupon},openService:function(){10==this.service_type&&(this.isMpservice=!0),20==this.service_type&&this.gotoPage("/pages/plus/chat/chat?user_id="+this.shop_info.supplier_user_id+"&product_id="+this.product_id+"&shop_supplier_id="+this.shop_info.shop_supplier_id+"&nickName="+this.shop_info.name)},closeMpservice:function(){this.isMpservice=!1},closeCouponFunc:function(t){this.isCoupon=!1},goto_shop:function(){this.gotoPage("/pages/shop/shop?shop_supplier_id="+this.shop_supplier_id)},favorite:function(){var e=this;e._post("user.Favorite/add",{pid:e.product_id,type:20},(function(i){0==e.isfollow?(t.showToast({icon:"none",title:"收藏成功，请到“我的->我的收藏”查看和管理哦"}),e.isfollow=1):1==e.isfollow&&(e.isfollow=0,t.showToast({icon:"none",title:"取消成功"}))}))},changeSwiper:function(){this.isVideoPlay=!1}}};e.default=s}).call(this,i("c11b")["default"])},"9a3f":function(t,e,i){},a41d:function(t,e,i){"use strict";(function(t){var e=i("4ea4");i("a8db"),i("33db"),i("5c17");e(i("66fd"));var o=e(i("f42a"));my.__webpack_require_UNI_MP_PLUGIN__=i,t(o.default)}).call(this,i("c11b")["createPage"])},f42a:function(t,e,i){"use strict";i.r(e);var o=i("28ac"),n=i("1d43");for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);i("37d9");var s=i("f0c5"),c=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=c.exports}},[["a41d","common/runtime","common/vendor"]]]);