(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/index/index"],{4629:function(t,e,o){"use strict";o.r(e);var n=o("8f2b"),a=o.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},"7acd":function(t,e,o){"use strict";var n=o("c1d2"),a=o.n(n);a.a},"8f2b":function(t,e,o){"use strict";(function(t){var n=o("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;n(o("067d"));var a={components:{diy:function(){o.e("components/diy/diy").then(function(){return resolve(o("6c76"))}.bind(null,o)).catch(o.oe)},Homepush:function(){o.e("pages/index/home-push/home-push").then(function(){return resolve(o("1e47"))}.bind(null,o)).catch(o.oe)},navBar:function(){o.e("components/navBar/navBar").then(function(){return resolve(o("f09c"))}.bind(null,o)).catch(o.oe)},uniLoadMore:function(){o.e("components/uni-load-more").then(function(){return resolve(o("78e2"))}.bind(null,o)).catch(o.oe)},searchProduct:function(){o.e("components/searchProduct").then(function(){return resolve(o("4bcc"))}.bind(null,o)).catch(o.oe)}},data:function(){return{updatebgcl:"",loading:!1,background:"",listData:[],indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,items:[],is_collection:!1,is_follow:"0",is_homepush:!1,homepush_data:{},triggered:!0,target:0,thisindex:0,category_list:[],product_list:[],page:1,last_page:0,no_more:!1,indexStop:0,title_name:"",bgcolor:"",msgNum:0,title_image:!1,toplogo:"",url:"",jweixin:null,showSearch:!1,openCategory:{color:"#000000",open:0}}},watch:{thisindex:function(t,e){t!=e&&(this.category_id=this.category_list[t].category_id,this.toggleInit(),0!=t&&this.getProduct())}},computed:{loadingType:function(){return this.loading?1:0!=this.product_list.length&&this.no_more?2:0}},onTabItemTap:function(){},onLoad:function(e){console.log("options",e),t.setStorageSync("tuiguangid",e.tuiguangid);var o=this,n=my.getUpdateManager();n.onCheckForUpdate((function(t){})),n.onUpdateReady((function(){my.confirm({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success:function(t){t.confirm&&n.applyUpdate()}})})),n.onUpdateFailed((function(){})),o._freshing=!1,o.getData(),o.getList(),o.getfk(),t.$on("updatebg2",(function(t){o.updatebgcl=t,my.setNavigationBar({backgroundColor:t})}))},onPullDownRefresh:function(){0==this.thisindex?this.getData():(this.toggleInit(),this.getProduct())},onReachBottom:function(){this.scrolltolowerFunc(),console.log("到底了")},methods:{dingyue:function(){my.requestSubscribeMessage({entityIds:["f558d5ee8d4c47889d9dae89887bc0ad","0e59fbc3303845b29a4f2c4542705ee0"],success:function(e){console.log("接口调用成功的回调",e),"subscribe"==e.behavior&&t.showToast({title:"你已经订阅过了！",duration:1e3,position:200})},fail:function(t){console.log("接口调用失败的回调",t)},complete:function(t){console.log("接口调用结束的回调",t)}})},getfk:function(){var e=t.getStorageSync("visitcode");this._post("index/addVisitor",{visitcode:e},(function(t){}))},getData:function(){var e=this;t.showLoading({title:"加载中"}),e._get("index/index",{url:e.url},(function(o){e.listData=o.data.list,e.background=o.data.background,e.items=o.data.items,e.title_name=o.data.page.params.title,e.bgcolor=o.data.page.style.titleBackgroundColor,e.msgNum=o.data.msgNum,e.toplogo=o.data.page.style.toplogo,e.setPage(o.data.page),e.title_type=o.data.page.params.title_type,e.titleTextColor=o.data.page.style.titleTextColor,e.openCategory=o.data.page.category;var n=t.getStorageSync("homepush_name");o.data.setting.homepush.is_open&&n!=o.data.setting.homepush.name&&(e.homepush_data=o.data.setting.homepush,e.is_homepush=!0,e.is_homepush=!0),t.hideLoading(),e.loadding=!1,t.stopPullDownRefresh()}))},getList:function(){var t=this;t._get("product.category/index",{},(function(e){t.category_list=e.data.list;t.category_list.unshift({name:"推荐",category_id:"0"})}))},getProduct:function(){var e=this,o=e.page;e.loading=!0,e._get("product.product/lists",{page:o||1,category_id:e.category_id,search:"",sortType:"all",sortPrice:0,list_rows:10},(function(o){e.loading=!1,t.stopPullDownRefresh(),e.product_list=e.product_list.concat(o.data.list.data),e.last_page=o.data.list.last_page,o.data.list.last_page<=1&&(e.no_more=!0)}))},scrolltolowerFunc:function(){this.page<this.last_page&&(this.page++,this.getProduct()),this.no_more=!0},setPage:function(e){t.setNavigationBarTitle({title:e.params.name});var o="#000000";"white"==e.style.titleTextColor&&(o="#F79463"),t.setNavigationBarColor({frontColor:o,backgroundColor:e.style.titleBackgroundColor}),this.updatebgcl=e.style.titleBackgroundColor},onShareAppMessage:function(){return console.log("打印分享日志"),{title:"吾要租机",path:"/pages/index/index?"+this.getShareUrlParams()}},setTabBarItem:function(e){2==e&&(console.log("订单"),t.setTabBarItem({index:2,pagePath:"/pages/order/myorder",text:"订单",iconPath:"static/order.png",selectedIconPath:"static/order_active.png"}))},toggleInit:function(){this.page=1,this.last_page=0,this.no_more=!1,this.product_list=[]},setIndex:function(t){this.thisindex=t},stopTouchMove:function(){return!0},scanQrcode:function(){var e=this;t.scanCode({onlyFromCamera:!0,success:function(o){"scanCode:ok"==o.errMsg?e.gotoPage("/pages/store/clerkorder?order_no="+o.result):t.showToast({title:"扫码失败，请重试"})}})},closeSearch:function(){this.showSearch=!1}}};e.default=a}).call(this,o("c11b")["default"])},"9b79":function(t,e,o){"use strict";o.d(e,"b",(function(){return a})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){return n}));var n={navBar:function(){return o.e("components/navBar/navBar").then(o.bind(null,"f09c"))},diy:function(){return o.e("components/diy/diy").then(o.bind(null,"6c76"))}},a=function(){var t=this,e=t.$createElement,o=(t._self._c,t.theme()),n=t.is_collection?t.topBarTop():null,a=t.is_collection?t.topBarHeight():null;t._isMounted||(t.e0=function(e){t.showSearch=!0},t.e1=function(e){t.is_collection=!1}),t.$mp.data=Object.assign({},{$root:{m0:o,m1:n,m2:a}})},i=[]},b219:function(t,e,o){"use strict";o.r(e);var n=o("9b79"),a=o("4629");for(var i in a)["default"].indexOf(i)<0&&function(t){o.d(e,t,(function(){return a[t]}))}(i);o("7acd");var c=o("f0c5"),s=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=s.exports},c1d2:function(t,e,o){},f61c:function(t,e,o){"use strict";(function(t){var e=o("4ea4");o("a8db"),o("33db"),o("5c17");e(o("66fd"));var n=e(o("b219"));my.__webpack_require_UNI_MP_PLUGIN__=o,t(n.default)}).call(this,o("c11b")["createPage"])}},[["f61c","common/runtime","common/vendor"]]]);