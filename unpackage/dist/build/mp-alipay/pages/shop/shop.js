(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/shop/shop"],{"1b94":function(t,i,e){"use strict";var o=e("8f09"),s=e.n(o);s.a},"2d1b":function(t,i,e){"use strict";e.r(i);var o=e("e571"),s=e.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(a);i["default"]=s.a},3334:function(t,i,e){"use strict";e.r(i);var o=e("f864"),s=e("2d1b");for(var a in s)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return s[t]}))}(a);e("1b94");var n=e("f0c5"),r=Object(n["a"])(s["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);i["default"]=r.exports},5788:function(t,i,e){"use strict";(function(t){var i=e("4ea4");e("a8db"),e("33db"),e("5c17");i(e("66fd"));var o=i(e("3334"));my.__webpack_require_UNI_MP_PLUGIN__=e,t(o.default)}).call(this,e("c11b")["createPage"])},"8f09":function(t,i,e){},e571:function(t,i,e){"use strict";(function(t){var o=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=o(e("448a")),a=o(e("9523")),n={components:{uniLoadMore:function(){e.e("components/uni-load-more").then(function(){return resolve(e("78e2"))}.bind(null,e)).catch(e.oe)}},data:function(){return{isLieBiao:!0,shop_info:"",product_list:"",adList:"",dataList:"",shop_supplier_id:"",isfollow:"",indicatorDots:!1,autoplay:!0,interval:5e3,duration:1e3,listData:[],topRefresh:!1,loading:!0,no_more:!1,type_active:"all",price_top:!1,shopData:[],page:1,search:"",last_page:0,scrollviewHigh:0,nav_type:0,is_open:0,is_record:0,liveList:[],dataModel:{qq:"",wechat:"",phone:""},service_type:0,service_open:0,statusBarHeight:0,titleBarHeight:0}},computed:{loadingType:function(){return this.loading?1:0!=this.product_list.length&&this.no_more?2:0}},onLoad:function(t){this.GetStatusBarHeight(),this.shop_supplier_id=t.shop_supplier_id},onShow:function(){},mounted:function(){this.getData(),this.getProduct(this.type_active)},onPullDownRefresh:function(){this.restoreData(),this.getData(),this.getProduct(self.type_active)},methods:{GetStatusBarHeight:function(){var i=t.getSystemInfoSync();this.statusBarHeight=i.statusBarHeight,this.titleBarHeight=30},init:function(){var i=this;t.getSystemInfo({success:function(e){i.phoneHeight=e.windowHeight;var o=t.createSelectorQuery().in(i).select(".shop_head");o.boundingClientRect((function(t){var e=i.phoneHeight-t.height;i.scrollviewHigh=e})).exec()}})},scrolltolowerFunc:function(){if(this.bottomRefresh=!0,this.page++,this.loading=!0,this.page>this.last_page)return this.loading=!1,void(this.no_more=!0);this.getProduct(this.type_active)},getProduct:function(t){var i,e=this,o=e.page;e.loading=!0,e._get("product.product/lists",(i={page:o||1,sortType:"price",sortPrice:1},(0,a.default)(i,"sortType",t),(0,a.default)(i,"shop_supplier_id",e.shop_supplier_id),i),(function(t){e.loading=!1,e.product_list=[].concat((0,s.default)(e.product_list),(0,s.default)(t.data.list.data)),e.last_page=t.data.list.last_page,t.data.list.last_page<=1&&(e.no_more=!0)}))},restoreData:function(){this.shopData=[],this.product_list=[],this.page=1,this.category_id=0,this.search="",this.sortType="",this.sortPrice=0},getservice:function(){var t=this;t.isloding=!0,t._get("index/mpService",{shop_supplier_id:t.shop_supplier_id},(function(i){t.dataModel=i.data.mp_service,t.isloding=!1}))},tabTypeFunc:function(t){t!=this.type_active&&(this.product_list=[],this.page=1,this.no_more=!1,this.loading=!0,this.type_active=t,this.getProduct(t))},getData:function(){var t=this,i=this;i.loading=!0,i._post("supplier.index/index",{shop_supplier_id:i.shop_supplier_id,visitcode:i.getVisitcode()},(function(e){i.loading=!1,i.shop_info=e.data.detail,i.adList=e.data.adList,i.isfollow=e.data.detail.isfollow,i.listData=e.data.couponList,i.is_record=e.data.liv_status.is_record,i.is_open=e.data.liv_status.is_open,i.liveList=e.data.liveList.data,i.service_open=e.data.service_open,e.data.mp_service?i.service_type=e.data.mp_service.service_type:i.service_type=10,t.$nextTick((function(){i.init()})),i.getservice()}))},select_type:function(){this.isLieBiao=!this.isLieBiao},goto_product:function(t){this.gotoPage("/#/pages/product/detail/detail?product_id="+t)},guanzhu:function(){var t=this;t._post("user.Favorite/add",{pid:t.shop_supplier_id,type:10},(function(i){0==t.isfollow?t.isfollow=1:1==t.isfollow&&(t.isfollow=0)}))},receiveCoupon:function(i){var e=this.listData[i];if(0==e.state.value)return!1;this._post("user.coupon/receive",{coupon_id:e.coupon_id},(function(i){t.showToast({title:"领取成功",icon:"success",mask:!0,duration:2e3}),e.state.value=0,e.state.text="已领取"})),this.getData(this.type_active)},copyQQ:function(t){},callPhone:function(i){t.makePhoneCall({phoneNumber:i})},toRoom:function(t){if(""==t.record_url)return!1;this.gotoPage("/pagesLive/live/live?room_id="+t.room_id+"&sence=join")},toSevice:function(){10==this.service_type||this.shop_info.user_id==t.getStorageInfoSync("user_id")?this.nav_type=3:20==this.service_type&&this.gotoPage("/pages/plus/chat/chat?user_id="+this.shop_info.supplier_user_id+"&shop_supplier_id="+this.shop_info.shop_supplier_id+"&nickName="+this.shop_info.store_name)},goback:function(){t.navigateBack({})}}};i.default=n}).call(this,e("c11b")["default"])},f864:function(t,i,e){"use strict";e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){}));var o=function(){var t=this,i=t.$createElement;t._self._c;t._isMounted||(t.e0=function(i){t.nav_type=0},t.e1=function(i){t.nav_type=1},t.e2=function(i){t.nav_type=2})},s=[]}},[["5788","common/runtime","common/vendor"]]]);