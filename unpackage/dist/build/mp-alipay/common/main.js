(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["common/main"],{"147f":function(t,e,o){"use strict";(function(t,e){var a=o("4ea4"),n=a(o("7037")),r=a(o("9523"));o("a8db"),o("33db"),o("5c17");var i=a(o("66fd")),c=a(o("c25b")),s=(a(o("fdc4")),a(o("7610"))),u=a(o("067d")),d=a(o("4e03")),l=a(o("3520")),p=o("2ef79"),f=a(o("70cc"));function g(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}my.__webpack_require_UNI_MP_PLUGIN__=o,i.default.use(l.default),i.default.prototype.$store=f.default;i.default.component("header-bar",(function(){o.e("components/header").then(function(){return resolve(o("192d"))}.bind(null,o)).catch(o.oe)}));i.default.component("request-loading",(function(){o.e("components/jjjloading").then(function(){return resolve(o("39e36"))}.bind(null,o)).catch(o.oe)}));i.default.component("tabBar",(function(){o.e("components/tabbar/footTabbar").then(function(){return resolve(o("50ac"))}.bind(null,o)).catch(o.oe)})),i.default.prototype.footTabberData={active:"home"},i.default.prototype.$fire=new d.default,i.default.config.productionTip=!1,c.default.mpType="app",i.default.prototype.config=u.default;var h=new i.default(function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?g(Object(o),!0).forEach((function(e){(0,r.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):g(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},c.default));t(h).$mount(),i.default.prototype.websiteUrl=u.default.app_url,i.default.prototype.app_id=u.default.app_id,i.default.prototype.h5_addr=u.default.h5_addr,i.default.prototype.gotoPage=p.gotopage,i.default.prototype.font_url=u.default.font_url,i.default.prototype.ios=function(){var t=navigator.userAgent.toLowerCase();return!(t.indexOf("like mac os x")<0||"micromessenger"!=t.match(/MicroMessenger/i))},i.default.prototype._get=function(t,o,a,r,i){var c=this;o=o||{},o.token=e.getStorageSync("token")||"",o.tuiguangid=e.getStorageSync("tuiguangid")||"",o.supplierid=e.getStorageSync("supplierid")||"",o.app_id=this.getAppId(),e.request({url:this.websiteUrl+"/index.php/api/"+t,data:o,dataType:"json",method:"GET",success:function(t){if(200!==t.statusCode||"object"!==(0,n.default)(t.data))return!1;if(-2===t.data.code)c.showError(t.data.msg,(function(){e.removeStorageSync("token"),this.gotoPage("/pages/index/index","reLaunch")}));else if(-1===t.data.code);else{if(0===t.data.code)return c.showError(t.data.msg,(function(){r&&r(t)})),!1;a&&a(t.data)}},fail:function(t){r&&r(t)},complete:function(t){e.hideLoading(),i&&i(t)}})},i.default.prototype._post=function(t,o,a,r,i){var c=this;o=o||{},o.token=e.getStorageSync("token")||"",o.tuiguangid=e.getStorageSync("tuiguangid")||"",o.supplierid=e.getStorageSync("supplierid")||"",o.country=e.getStorageSync("getLocation").country,o.province=e.getStorageSync("getLocation").province,o.city=e.getStorageSync("getLocation").city,o.district=e.getStorageSync("getLocation").district,o.app_id=this.getAppId(),e.request({url:this.websiteUrl+"/index.php/api/"+t,data:o,dataType:"json",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){if(200!==t.statusCode||"object"!==(0,n.default)(t.data))return!1;if(-1===t.data.code);else{if(0===t.data.code)return c.showError(t.data.msg,(function(){r&&r(t)})),!1;a&&a(t.data)}},fail:function(t){r&&r(t)},complete:function(t){e.hideLoading(),i&&i(t)}})},i.default.prototype.doLogin=function(){var t=getCurrentPages();if(t.length){var o=t[t.length-1];"pages/login/login"!=o.route&&"pages/login/weblogin"!=o.route&&"pages/login/openlogin"!=o.route&&(e.setStorageSync("currentPage",o.route),e.setStorageSync("currentPageOptions",o.options))}this.gotoPage("/pages/login/login")},i.default.prototype.showError=function(t,o){e.showModal({title:"友情提示",content:t,showCancel:!1,success:function(t){o&&o()}})},i.default.prototype.showSuccess=function(t,o){e.showModal({title:"友情提示",content:t,showCancel:!1,success:function(t){o&&o()}})},i.default.prototype.getAppId=function(){return this.app_id||10001},i.default.prototype.compareVersion=function(t,e){t=t.split("."),e=e.split(".");var o=Math.max(t.length,e.length);while(t.length<o)t.push("0");while(e.length<o)e.push("0");for(var a=0;a<o;a++){var n=parseInt(t[a]),r=parseInt(e[a]);if(n>r)return 1;if(n<r)return-1}return 0},i.default.prototype.getShareUrlParams=function(t){return s.default.urlEncode(Object.assign({referee_id:this.getUserId(),app_id:this.getAppId()},t))},i.default.prototype.getUserId=function(){return e.getStorageSync("user_id")},i.default.prototype.getPlatform=function(t){return"wx"},i.default.prototype.subMessage=function(t,e){e()},i.default.prototype.isWeixin=function(){var t=navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)},i.default.prototype.getVisitcode=function(){var t=e.getStorageSync("visitcode");return t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,o="x"==t?e:3&e|8;return o.toString(16)})),t=t.replace(/-/g,""),e.setStorageSync("visitcode",t)),t},i.default.prototype.topBarTop=function(){var t=e.getSystemInfoSync();return t.statusBarHeight},i.default.prototype.topBarHeight=function(){return 0},i.default.prototype.yulan=function(t,o){var a=[];Array.isArray(t)?t[0].file_path?t.forEach((function(t,e){a.push(t.file_path)})):a=t:a=[t];var n=1*o;e.previewImage({urls:a,current:n,indicator:"default"})},i.default.prototype.theme=function(){return"theme"+this.$store.state.theme||!1},i.default.prototype.footTab=function(){return this.$store.state.footTab||""}}).call(this,o("c11b")["createApp"],o("c11b")["default"])},"24bb":function(t,e,o){"use strict";o.r(e);var a=o("7427"),n=o.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){o.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},"3fdd":function(t,e,o){},"632a":function(t,e,o){"use strict";var a=o("3fdd"),n=o.n(a);n.a},7427:function(t,e,o){"use strict";(function(t){var a=o("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(o("7610")),r=(a(o("067d")),{onLaunch:function(e){t.removeStorageSync("user_id"),t.removeStorageSync("tuiguangid"),t.removeStorageSync("getLocation"),this.onStartupScene(e.query),this.getTabBarLinks();var o=my.getUpdateManager();o.onCheckForUpdate((function(t){console.log(t.hasUpdate)})),o.onUpdateReady((function(){my.confirm({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success:function(t){t.confirm&&o.applyUpdate()}})})),o.onUpdateFailed((function(){}))},onShow:function(){},onHide:function(){},methods:{isFirstEnter:function(){var e=t.getStorageSync("firstEnter");t.getSystemInfo({success:function(o){console.log("firstEnter="+e),"ios"!=o.platform||e||(console.log("---------------"),t.navigateTo({url:"/pages/privacy/privacy"}))}})},updateManager:function(){var e=t.getUpdateManager();e.onCheckForUpdate((function(o){o.hasUpdate&&e.onUpdateReady((function(o){t.showModal({title:"更新提示",content:"新版本已经准备好，即将重启应用",showCancel:!1,success:function(t){t.confirm&&e.applyUpdate()}})}))})),e.onUpdateFailed((function(e){t.showModal({title:"更新提示",content:"检查到有新版本，但下载失败，请检查网络设置",showCancel:!1})}))},onStartupScene:function(e){var o=n.default.getSceneData(e),a=e.referee_id;a>0&&(t.getStorageSync("referee_id")||t.setStorageSync("referee_id",a));var r=o.uid;r>0&&(t.getStorageSync("referee_id")||t.setStorageSync("referee_id",r))},getTabBarLinks:function(){var e=this;t.request({url:this.config.app_url+"/index.php/api/index/nav",data:{app_id:this.config.app_id},success:function(o){var a=o.data.data.vars.data,n=o.data.data.theme.theme;if(e.$store.commit("changeTheme",n),t.setStorageSync("TabBar",a),"0"==a.is_auto){a.list=[];t.setTabBarStyle({color:"#333333",selectedColor:["#ff5704","#19ad57","#ffcc00","#1774ff","#e4e4e4","#c8ba97","#623ceb"][n]}),t.setTabBarItem({index:0,text:"首页",iconPath:"static/tabbar/home.png",selectedIconPath:"static/tabbar/home_"+n+".png"}),t.setTabBarItem({index:1,text:"分类",iconPath:"static/tabbar/category.png",selectedIconPath:"static/tabbar/category_"+n+".png"}),t.setTabBarItem({index:2,text:"店铺",iconPath:"static/tabbar/shop.png",selectedIconPath:"static/tabbar/shop_"+n+".png"}),t.setTabBarItem({index:3,text:"购物车",iconPath:"static/tabbar/cart.png",selectedIconPath:"static/tabbar/cart_"+n+".png"}),t.setTabBarItem({index:4,text:"我的",iconPath:"static/tabbar/user.png",selectedIconPath:"static/tabbar/user_"+n+".png"}),console.log("-----show--------"),console.log("static/tabbar/user_"+n+".png"),t.setStorageSync("theme",n),t.showTabBar()}else console.log("-----hide--------"),t.hideTabBar()}})},updateWgt:function(e){t.showModal({title:"版本更新",content:"检查到有新版本，请点击更新",confirmText:"更新",showCancel:!1,success:function(o){if(o.confirm){var a=plus.downloader.createDownload(e,{},(function(e,o){t.showToast({title:"下载完成",mask:!1,duration:1e3}),200==o?plus.runtime.install(e.filename,{force:!0},(function(){console.log("install success..."),plus.nativeUI.alert("已更新至最新版本，确定后将重启应用",(function(){plus.runtime.restart()}),"更新提示","确定")}),(function(o){console.log(o),console.log(e.filename),t.showToast({title:"安装失败-01",mask:!1,duration:1500})})):t.showToast({title:"更新失败-02",mask:!1,duration:1500})}));try{a.start();var n=0,r=plus.nativeUI.showWaiting("正在下载");a.addEventListener("statechanged",(function(t,e){switch(t.state){case 1:r.setTitle("正在下载");break;case 2:r.setTitle("已连接到服务器");break;case 3:n=parseInt(parseFloat(t.downloadedSize)/parseFloat(t.totalSize)*100),r.setTitle("  正在下载"+n+"%  ");break;case 4:plus.nativeUI.closeWaiting();break}}))}catch(i){plus.nativeUI.closeWaiting(),t.showToast({title:"更新失败-03",mask:!1,duration:1500})}}}})}}});e.default=r}).call(this,o("c11b")["default"])},c25b:function(t,e,o){"use strict";o.r(e);var a=o("24bb");for(var n in a)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return a[t]}))}(n);o("632a");var r=o("f0c5"),i=Object(r["a"])(a["default"],void 0,void 0,!1,null,null,null,!1,void 0,void 0);e["default"]=i.exports}},[["147f","common/runtime","common/vendor"]]]);